This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: config, core, doc, guide, logs, model, presenter, resources, tests, tools, view, .gitignore, main.py, README.md, requirements.txt, version.py
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
config/color_rules.json
config/languages/en.json
config/languages/ko.json
config/languages/template_en.json
config/README.md
config/settings.json
core/event_bus.py
core/logger.py
core/settings_manager.py
core/utils.py
doc/CHANGELOG.md
doc/implementation_plan.md
doc/Implementation_Specification.md
doc/session_summary_20251130.md
doc/session_summary_20251201.md
doc/session_summary_20251202.md
doc/session_summary_20251203.md
doc/session_summary_20251204.md
doc/session_summary_20251205.md
doc/session_summary_20251208.md
doc/session_summary_20251209.md
doc/task.md
guide/code_style_guide.md
guide/comment_guide.md
guide/git_guide.md
guide/naming_convention.md
main.py
model/port_controller.py
model/serial_worker.py
presenter/__init__.py
presenter/main_presenter.py
presenter/port_presenter.py
README.md
requirements.txt
resources/icons/add_black.svg
resources/icons/add_dark.svg
resources/icons/add_light.svg
resources/icons/add_white.svg
resources/icons/arrow_down_black.svg
resources/icons/arrow_down_white.svg
resources/icons/close_black.svg
resources/icons/close_white.svg
resources/icons/delete_black.svg
resources/icons/delete_white.svg
resources/icons/down_black.svg
resources/icons/down_white.svg
resources/icons/find_next_black.svg
resources/icons/find_next_white.svg
resources/icons/find_prev_black.svg
resources/icons/find_prev_white.svg
resources/icons/up_black.svg
resources/icons/up_white.svg
resources/themes/common.qss
resources/themes/dark_theme.qss
resources/themes/light_theme.qss
tests/README.md
tests/test_ui_translations.py
tests/test_view.py
tools/check_lang_keys.py
tools/manage_lang_keys.py
version.py
view/color_rules.py
view/dialogs/__init__.py
view/dialogs/about_dialog.py
view/dialogs/font_settings_dialog.py
view/dialogs/preferences_dialog.py
view/doc/implementation_plan.md
view/lang_manager.py
view/main_window.py
view/panels/macro_panel.py
view/panels/manual_control_panel.py
view/panels/packet_inspector_panel.py
view/panels/port_panel.py
view/panels/port_tab_panel.py
view/panels/tx_panel.py
view/pyqt_customs/smart_number_edit.py
view/sections/main_left_section.py
view/sections/main_menu_bar.py
view/sections/main_right_section.py
view/sections/main_status_bar.py
view/theme_manager.py
view/widgets/file_progress.py
view/widgets/macro_ctrl.py
view/widgets/macro_list.py
view/widgets/main_toolbar.py
view/widgets/manual_control.py
view/widgets/packet_inspector.py
view/widgets/port_settings.py
view/widgets/received_area.py
view/widgets/status_area.py
view/widgets/status.py
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="config/color_rules.json">
{
    "color_rules": [
        {
            "name": "AT_OK",
            "pattern": "\\bOK\\b",
            "color": "#4CAF50",
            "is_regex": true,
            "enabled": true
        },
        {
            "name": "AT_ERROR",
            "pattern": "\\bERROR\\b",
            "color": "#F44336",
            "is_regex": true,
            "enabled": true
        },
        {
            "name": "URC",
            "pattern": "(\\+\\w+:)",
            "color": "#FFEB3B",
            "is_regex": true,
            "enabled": true
        },
        {
            "name": "PROMPT",
            "pattern": "^>",
            "color": "#00BCD4",
            "is_regex": true,
            "enabled": true
        },
        {
            "name": "INFO",
            "pattern": "\\bINFO\\b",
            "color": "#2196F3",
            "is_regex": true,
            "enabled": true
        },
        {
            "name": "WARNING",
            "pattern": "\\b(WARN|WARNING)\\b",
            "color": "#FF9800",
            "is_regex": true,
            "enabled": true
        }
    ]
}
</file>

<file path="config/README.md">
# ì„¤ì • íŒŒì¼ (Configuration Files)

ì´ ë””ë ‰í† ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì • íŒŒì¼ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.

## íŒŒì¼ ëª©ë¡

### 1. color_rules.json
ReceivedAreaì—ì„œ ìˆ˜ì‹ ëœ í…ìŠ¤íŠ¸ì— ìë™ìœ¼ë¡œ ìƒ‰ìƒì„ ì ìš©í•˜ëŠ” ê·œì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤.

### 2. default_settings.json
ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ë³¸ ì„¤ì • ê°’ì„ ì •ì˜í•©ë‹ˆë‹¤. (í¬íŠ¸ ì„¤ì •, UI ì„¤ì • ë“±)

---

## color_rules.json

ì´ íŒŒì¼ì€ ReceivedAreaì—ì„œ ìˆ˜ì‹ ëœ í…ìŠ¤íŠ¸ì— ìë™ìœ¼ë¡œ ìƒ‰ìƒì„ ì ìš©í•˜ëŠ” ê·œì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤.

## íŒŒì¼ ìœ„ì¹˜
`config/color_rules.json`

## í˜•ì‹

```json
{
  "color_rules": [
    {
      "name": "ê·œì¹™ ì´ë¦„",
      "pattern": "ì •ê·œì‹ ë˜ëŠ” ë¬¸ìì—´ íŒ¨í„´",
      "color": "#RRGGBB",
      "is_regex": true/false,
      "enabled": true/false
    }
  ]
}
```

## ê¸°ë³¸ ì œê³µ ê·œì¹™

| ì´ë¦„ | íŒ¨í„´ | ìƒ‰ìƒ | ì„¤ëª… |
|------|------|------|------|
| AT_OK | `\bOK\b` | #4CAF50 (ë…¹ìƒ‰) | AT ëª…ë ¹ ì„±ê³µ ì‘ë‹µ |
| AT_ERROR | `\bERROR\b` | #F44336 (ë¹¨ê°•) | AT ëª…ë ¹ ì—ëŸ¬ ì‘ë‹µ |
| URC | `(\+\w+:)` | #FFEB3B (ë…¸ë‘) | +ë¡œ ì‹œì‘í•˜ëŠ” URC ë©”ì‹œì§€ |
| PROMPT | `^>` | #00BCD4 (ì²­ë¡) | í”„ë¡¬í”„íŠ¸ ê¸°í˜¸ |
| INFO | `\bINFO\b` | #2196F3 (íŒŒë‘) | ì •ë³´ ë©”ì‹œì§€ |
| WARNING | `\b(WARN|WARNING)\b` | #FF9800 (ì£¼í™©) | ê²½ê³  ë©”ì‹œì§€ |

## ì‚¬ìš©ì ì •ì˜ ê·œì¹™ ì¶”ê°€

ì´ íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•˜ì—¬ ìƒˆë¡œìš´ ê·œì¹™ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì˜ˆì‹œ: TIMEOUT íŒ¨í„´ ì¶”ê°€

```json
{
  "name": "TIMEOUT",
  "pattern": "\\bTIMEOUT\\b",
  "color": "#9C27B0",
  "is_regex": true,
  "enabled": true
}
```

### ì°¸ê³ ì‚¬í•­

- `pattern`: ì •ê·œì‹ì„ ì‚¬ìš©í•  ê²½ìš° ë°±ìŠ¬ë˜ì‹œë¥¼ ì´ì¤‘ìœ¼ë¡œ ì…ë ¥ (`\\b` ë“±)
- `color`: HTML ìƒ‰ìƒ ì½”ë“œ í˜•ì‹ (#RRGGBB)
- `is_regex`: falseì¸ ê²½ìš° ë‹¨ìˆœ ë¬¸ìì—´ ë§¤ì¹­
- `enabled`: falseë¡œ ì„¤ì •í•˜ë©´ ê·œì¹™ì´ ë¹„í™œì„±í™”ë¨

## ìë™ ë¡œë“œ

ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ì´ íŒŒì¼ì´ ìë™ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤.
íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ê·œì¹™ìœ¼ë¡œ ìë™ ìƒì„±ë©ë‹ˆë‹¤.
</file>

<file path="guide/git_guide.md">
# Git ê´€ë¦¬ ê°€ì´ë“œ (Git Management Guide)

> **ëª©ì **: ì¼ê´€ëœ ë²„ì „ ê´€ë¦¬ ê·œì¹™ì„ í™•ë¦½í•˜ê³ , ì‹¤ë¬´ì—ì„œ ìœ ìš©í•œ Git í™œìš©ë²•ì„ ê³µìœ í•©ë‹ˆë‹¤.

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-05

---

## 1. ê¸°ë³¸ ì›ì¹™

### 1.1 ì–¸ì–´
- **ëª¨ë“  ì»¤ë°‹ ë©”ì‹œì§€, PR, ì´ìŠˆëŠ” í•œêµ­ì–´ë¡œ ì‘ì„±**í•©ë‹ˆë‹¤.
- ê¸€ë¡œë²Œ ì˜¤í”ˆì†ŒìŠ¤ ê¸°ì—¬ê°€ ì•„ë‹Œ ë‚´ë¶€ í”„ë¡œì íŠ¸ì˜ ê²½ìš°, ëª…í™•í•œ ì˜ì‚¬ì†Œí†µì„ ìµœìš°ì„ ìœ¼ë¡œ í•©ë‹ˆë‹¤.

### 1.2 ì§€ì†ì ì¸ ë°±ì—… (Continuous Backup)
> [!IMPORTANT]
> **1ì¼ 1ì»¤ë°‹ ì´ìƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.**
> ì‘ì—… ë‹¨ìœ„ë¥¼ ì˜ê²Œ ìª¼ê°œì–´ ìì£¼ ì»¤ë°‹í•˜ë©´, ì‹¤ìˆ˜í–ˆì„ ë•Œ ë³µêµ¬í•˜ê¸° ì‰½ê³  ì½”ë“œ ë¦¬ë·°ë„ ìˆ˜ì›”í•´ì§‘ë‹ˆë‹¤.

---

## 2. ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™ (Commit Convention)

### 2.1 ë©”ì‹œì§€ êµ¬ì¡°
```
íƒœê·¸: ì œëª© (50ì ë‚´ì™¸)

ë³¸ë¬¸ (ì„ íƒ ì‚¬í•­, 72ìë§ˆë‹¤ ì¤„ë°”ê¿ˆ)
- ë¬´ì—‡ì„, ì™œ ë³€ê²½í–ˆëŠ”ì§€ ì„¤ëª…
- ì–´ë–»ê²Œ ë³€ê²½í–ˆëŠ”ì§€ë³´ë‹¤ 'ì´ìœ 'ì— ì§‘ì¤‘

ê¼¬ë¦¬ë§ (ì„ íƒ ì‚¬í•­)
- ì´ìŠˆ íŠ¸ë˜ì»¤ ID ë“±
```

### 2.2 íƒœê·¸ ëª©ë¡ (Type)

| íƒœê·¸ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `Feat` | ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ | `Feat: ì‚¬ìš©ì ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„` |
| `Fix` | ë²„ê·¸ ìˆ˜ì • | `Fix: ë¡œê·¸ì¸ ì‹œ NullPointerException ìˆ˜ì •` |
| `Docs` | ë¬¸ì„œ ìˆ˜ì • | `Docs: README.md ì„¤ì¹˜ ê°€ì´ë“œ ì—…ë°ì´íŠ¸` |
| `Style` | ì½”ë“œ í¬ë§·íŒ… (ë¡œì§ ë³€ê²½ ì—†ìŒ) | `Style: ì½”ë“œ í¬ë§·íŒ… ë° ì„¸ë¯¸ì½œë¡  ì¶”ê°€` |
| `Refactor` | ì½”ë“œ ë¦¬íŒ©í† ë§ | `Refactor: ì‚¬ìš©ì ì¸ì¦ ë¡œì§ ê°œì„ ` |
| `Test` | í…ŒìŠ¤íŠ¸ ì½”ë“œ | `Test: ë¡œê·¸ì¸ ì„±ê³µ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì¶”ê°€` |
| `Chore` | ë¹Œë“œ, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ë“± | `Chore: requirements.txt ì˜ì¡´ì„± ì—…ë°ì´íŠ¸` |

### 2.3 ì¢‹ì€ ì˜ˆì‹œ
```text
Feat: ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ êµ¬í˜„

- UI ìš”ì†Œì—ëŠ” ê°€ë³€í­ í°íŠ¸(Proportional) ì ìš©
- ë°ì´í„° í‘œì‹œ ì˜ì—­ì—ëŠ” ê³ ì •í­ í°íŠ¸(Fixed) ì ìš©
- ì„¤ì • ëŒ€í™”ìƒìì—ì„œ í°íŠ¸ ë³€ê²½ ê°€ëŠ¥í•˜ë„ë¡ ê°œì„ 

Resolves: #123
```

---

## 3. ë¸Œëœì¹˜ ì „ëµ (Branch Strategy)

### 3.1 ë¸Œëœì¹˜ êµ¬ì¡°
- **main**: ë°°í¬ ê°€ëŠ¥í•œ ì•ˆì • ë²„ì „ (Production)
- **develop**: ê°œë°œ ì¤‘ì¸ ìµœì‹  ë²„ì „ (ì„ íƒ ì‚¬í•­)
- **feature/ê¸°ëŠ¥ëª…**: ê¸°ëŠ¥ ê°œë°œ ë¸Œëœì¹˜
- **fix/ë²„ê·¸ëª…**: ë²„ê·¸ ìˆ˜ì • ë¸Œëœì¹˜

### 3.2 ì‘ì—… íë¦„ (Workflow)
1. `main` ë¸Œëœì¹˜ì—ì„œ ìµœì‹  ì½”ë“œ pull
2. ìƒˆ ë¸Œëœì¹˜ ìƒì„± (`feature/login-ui`)
3. ì‘ì—… ë° ì»¤ë°‹
4. ì›ê²© ì €ì¥ì†Œë¡œ push
5. Pull Request (PR) ìƒì„± ë° ë¦¬ë·° ìš”ì²­
6. ìŠ¹ì¸ í›„ `main`ìœ¼ë¡œ ë³‘í•© (Squash & Merge ê¶Œì¥)

---

## 4. PR ë° ì´ìŠˆ ê°€ì´ë“œ

### 4.1 Pull Request (PR)
PR ìƒì„± ì‹œ ë‹¤ìŒ ë‚´ìš©ì„ í¬í•¨í•˜ì—¬ ë¦¬ë·°ì–´ê°€ ë³€ê²½ ì‚¬í•­ì„ ì‰½ê²Œ íŒŒì•…í•˜ë„ë¡ í•©ë‹ˆë‹¤.

```markdown
## ğŸ” ë³€ê²½ ì‚¬í•­
- ë¡œê·¸ì¸ UI ë ˆì´ì•„ì›ƒ êµ¬í˜„
- ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ ì¶”ê°€

## ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· (UI ë³€ê²½ ì‹œ)
(ì´ë¯¸ì§€ ì²¨ë¶€)

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•
1. ì•± ì‹¤í–‰
2. ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
3. ...
```

### 4.2 Issue
ë²„ê·¸ ì œë³´ë‚˜ ê¸°ëŠ¥ ìš”ì²­ ì‹œ ëª…í™•í•˜ê²Œ ì‘ì„±í•©ë‹ˆë‹¤.

```markdown
## ğŸ› ë²„ê·¸ ì„¤ëª…
ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ ë°˜ì‘ì´ ì—†ìŠµë‹ˆë‹¤.

## ğŸ”„ ì¬í˜„ ë°©ë²•
1. ì•± ì‹¤í–‰
2. ì•„ì´ë”” ì…ë ¥
3. ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­

## âœ… ê¸°ëŒ€ ë™ì‘
ë¡œê·¸ì¸ì´ ë˜ê±°ë‚˜ ì—ëŸ¬ ë©”ì‹œì§€ê°€ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
```

---

## 5. ì‹¤ë¬´ Git ë ˆì‹œí”¼ (Cheat Sheet)

ì‹¤ìˆ˜í–ˆì„ ë•Œ ë‹¹í™©í•˜ì§€ ë§ˆì„¸ìš”! ìì£¼ ì“°ì´ëŠ” ë³µêµ¬ ëª…ë ¹ì–´ë“¤ì…ë‹ˆë‹¤.

### 5.1 ì»¤ë°‹ ìˆ˜ì •í•˜ê¸° (Amend)
ë°©ê¸ˆ í•œ ì»¤ë°‹ì˜ ë©”ì‹œì§€ë¥¼ ê³ ì¹˜ê±°ë‚˜, ë¹ ëœ¨ë¦° íŒŒì¼ì„ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
```bash
# 1. ë¹ ëœ¨ë¦° íŒŒì¼ ì¶”ê°€
git add missed_file.py

# 2. ì»¤ë°‹ ë®ì–´ì“°ê¸° (ë©”ì‹œì§€ ìˆ˜ì • ê°€ëŠ¥)
git commit --amend
```
> **ì£¼ì˜**: ì´ë¯¸ ì›ê²© ì €ì¥ì†Œ(Remote)ì— pushí•œ ì»¤ë°‹ì€ amend í•˜ì§€ ë§ˆì„¸ìš”! (íŒ€ì›ë“¤ê³¼ ì¶©ëŒ ë°œìƒ)

### 5.2 ì‘ì—… ì„ì‹œ ì €ì¥ (Stash)
ì‘ì—… ì¤‘ì¸ë° ê¸‰í•˜ê²Œ ë‹¤ë¥¸ ë¸Œëœì¹˜ë¡œ ì´ë™í•´ì•¼ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
```bash
# í˜„ì¬ ì‘ì—… ì„ì‹œ ì €ì¥
git stash

# ë‹¤ë¥¸ ë¸Œëœì¹˜ ë‹¤ë…€ì˜¤ê¸°...

# ì €ì¥í–ˆë˜ ì‘ì—… ë¶ˆëŸ¬ì˜¤ê¸°
git stash pop
```

### 5.3 ì»¤ë°‹ ì·¨ì†Œí•˜ê¸° (Reset vs Revert)

**1) Reset (ë‚˜ë§Œ ì“°ëŠ” ë¸Œëœì¹˜ì¼ ë•Œ)**
ê³¼ê±°ë¡œ ì‹œê°„ì„ ë˜ëŒë¦½ë‹ˆë‹¤. ì´í›„ì˜ ì»¤ë°‹ ê¸°ë¡ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.
```bash
# ë°”ë¡œ ì´ì „ ì»¤ë°‹ ì·¨ì†Œ (ì‘ì—… ë‚´ìš©ì€ ë³´ì¡´)
git reset --soft HEAD~1

# ë°”ë¡œ ì´ì „ ì»¤ë°‹ ì·¨ì†Œ (ì‘ì—… ë‚´ìš©ë„ ì‚­ì œ - ì£¼ì˜!)
git reset --hard HEAD~1
```

**2) Revert (ì´ë¯¸ Pushí•œ ê²½ìš°)**
íŠ¹ì • ì»¤ë°‹ì˜ ë³€ê²½ ì‚¬í•­ì„ ë°˜ëŒ€ë¡œ ì ìš©í•˜ëŠ” **ìƒˆë¡œìš´ ì»¤ë°‹**ì„ ë§Œë“­ë‹ˆë‹¤. ê¸°ë¡ì´ ìœ ì§€ë˜ë¯€ë¡œ ì•ˆì „í•©ë‹ˆë‹¤.
```bash
# íŠ¹ì • ì»¤ë°‹ì˜ ë³€ê²½ ì‚¬í•­ ë˜ëŒë¦¬ê¸°
git revert <ì»¤ë°‹í•´ì‹œ>
```

### 5.4 ë¡œê·¸ ì˜ˆì˜ê²Œ ë³´ê¸°
```bash
git log --graph --oneline --all
```

### 5.5 íŒŒì¼ ë³€ê²½ ì‚¬í•­ ë¬´ì‹œí•˜ê¸° (ì¶”ì  ì¤‘ë‹¨ ì•„ë‹˜)
ì„¤ì • íŒŒì¼ ë“±ì„ ë¡œì»¬ì—ì„œë§Œ ìˆ˜ì •í•˜ê³  ì»¤ë°‹í•˜ê³  ì‹¶ì§€ ì•Šì„ ë•Œ:
```bash
git update-index --assume-unchanged config/settings.json

# ë‹¤ì‹œ ì¶”ì í•˜ê¸°
git update-index --no-assume-unchanged config/settings.json
```

---

## 6. ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ì»¤ë°‹ ì „ í™•ì¸
- [ ] ë¶ˆí•„ìš”í•œ ê³µë°±ì´ë‚˜ ì£¼ì„ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ëŠ”ê°€?
- [ ] `print()` ë“± ë””ë²„ê¹… ì½”ë“œë¥¼ ì œê±°í–ˆëŠ”ê°€?
- [ ] ì»¤ë°‹ ë©”ì‹œì§€ëŠ” í•œêµ­ì–´ë¡œ ëª…í™•í•˜ê²Œ ì‘ì„±í–ˆëŠ”ê°€?
- [ ] ê´€ë ¨ ì´ìŠˆ ë²ˆí˜¸ê°€ ìˆë‹¤ë©´ í¬í•¨í–ˆëŠ”ê°€?
</file>

<file path="resources/icons/add_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M8 2a1 1 0 0 1 1 1v4h4a1 1 0 1 1 0 2H9v4a1 1 0 1 1-2 0V9H3a1 1 0 1 1 0-2h4V3a1 1 0 0 1 1-1z" fill="black"/></svg>
</file>

<file path="resources/icons/add_dark.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <line x1="12" y1="5" x2="12" y2="19"></line>
  <line x1="5" y1="12" x2="19" y2="12"></line>
</svg>
</file>

<file path="resources/icons/add_light.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <line x1="12" y1="5" x2="12" y2="19"></line>
  <line x1="5" y1="12" x2="19" y2="12"></line>
</svg>
</file>

<file path="resources/icons/add_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M8 2a1 1 0 0 1 1 1v4h4a1 1 0 1 1 0 2H9v4a1 1 0 1 1-2 0V9H3a1 1 0 1 1 0-2h4V3a1 1 0 0 1 1-1z" fill="white"/></svg>
</file>

<file path="resources/icons/arrow_down_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">
    <path d="M2 3 L5 7 L8 3" fill="none" stroke="black" stroke-width="1.5"/>
</svg>
</file>

<file path="resources/icons/arrow_down_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">
    <path d="M2 3 L5 7 L8 3" fill="none" stroke="white" stroke-width="1.5"/>
</svg>
</file>

<file path="resources/icons/close_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" fill="black"/></svg>
</file>

<file path="resources/icons/close_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" fill="white"/></svg>
</file>

<file path="resources/icons/delete_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M3 7a1 1 0 0 1 0-2h10a1 1 0 1 1 0 2H3z" fill="black"/></svg>
</file>

<file path="resources/icons/delete_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M3 7a1 1 0 0 1 0-2h10a1 1 0 1 1 0 2H3z" fill="white"/></svg>
</file>

<file path="resources/icons/down_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M8 13l5-5H10V3H6v5H3l5 5z" fill="black"/></svg>
</file>

<file path="resources/icons/down_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M8 13l5-5H10V3H6v5H3l5 5z" fill="white"/></svg>
</file>

<file path="resources/icons/find_next_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
</file>

<file path="resources/icons/find_next_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
</file>

<file path="resources/icons/find_prev_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
</file>

<file path="resources/icons/find_prev_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M15.41 7.41L14 6l6 6 6 6 1.41-1.41L10.83 12z"/></svg>
</file>

<file path="resources/icons/up_black.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M8 3l-5 5h3v5h4V8h3L8 3z" fill="black"/></svg>
</file>

<file path="resources/icons/up_white.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M8 3l-5 5h3v5h4V8h3L8 3z" fill="white"/></svg>
</file>

<file path="tests/README.md">
# View ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

ì´ ë””ë ‰í† ë¦¬ëŠ” View ê³„ì¸µì˜ ê° ì»´í¬ë„ŒíŠ¸ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” í…ŒìŠ¤íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í¬í•¨í•©ë‹ˆë‹¤.

## íŒŒì¼

### test_view.py
View ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜

**ì‹¤í–‰ ë°©ë²•:**
```bash
cd tests
python test_view.py
```

**í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸:**

1. **ReceivedArea Test**
   - ìƒ‰ìƒ ê·œì¹™ í…ŒìŠ¤íŠ¸ (OK, ERROR, URC ë“±)
   - Trim ë¡œì§ í…ŒìŠ¤íŠ¸ (2000ì¤„ ì œí•œ)
   - íƒ€ì„ìŠ¤íƒ¬í”„ ì˜µì…˜
   - HEX ëª¨ë“œ
   - Pause ê¸°ëŠ¥

2. **ManualControl Test**
   - Send ë²„íŠ¼
   - HEX ëª¨ë“œ ì „í™˜
   - Enter ì¶”ê°€ ì˜µì…˜
   - íŒŒì¼ ì„ íƒ/ì „ì†¡
   - í™œì„±í™”/ë¹„í™œì„±í™” í…ŒìŠ¤íŠ¸

3. **CommandList Test**
   - í–‰ ì¶”ê°€/ì‚­ì œ/ì´ë™
   - Select All ê¸°ëŠ¥
   - Send ë²„íŠ¼ í…ŒìŠ¤íŠ¸

4. **StatusArea Test**
   - INFO, ERROR, WARN, SUCCESS ë¡œê·¸
   - ìƒ‰ìƒë³„ í‘œì‹œ
   - íƒ€ì„ìŠ¤íƒ¬í”„

5. **PortPanel Test**
   - ì „ì²´ íŒ¨ë„ í†µí•© í…ŒìŠ¤íŠ¸
   - í¬íŠ¸ ì„¤ì • + ReceivedArea + StatusArea

## ì£¼ìš” ê¸°ëŠ¥

- âœ… MainWindow ì—†ì´ ê°œë³„ ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… íƒ­ ê¸°ë°˜ìœ¼ë¡œ ê° ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
- âœ… í…ŒìŠ¤íŠ¸ ë²„íŠ¼ìœ¼ë¡œ ë°ì´í„° ì£¼ì…
- âœ… SettingsManager í†µí•© í…ŒìŠ¤íŠ¸
- âœ… ì¢…ë£Œ ì‹œ ì°½ í¬ê¸° ì €ì¥

## ì¥ì 

1. **ì•ˆì „ì„±**: MainWindow ì†ìƒ ì—†ì´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
2. **ë…ë¦½ì„±**: ê° ìœ„ì ¯ì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
3. **ì‹ ì†ì„±**: íŠ¹ì • ê¸°ëŠ¥ë§Œ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸
4. **ë””ë²„ê¹…**: ë¬¸ì œ ë°œìƒ ì‹œ ì›ì¸ íŒŒì•… ìš©ì´
</file>

<file path="view/dialogs/__init__.py">
# Dialogs package
</file>

<file path="view/lang_manager.py">
try:
    import commentjson as json
except ImportError:
    import json
    print("Warning: commentjson not found, using standard json. Comments in language files will not be supported.")
import os
from typing import Dict, Optional
from PyQt5.QtCore import QObject, pyqtSignal
from core.logger import logger

class LangManager(QObject):
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ ì–¸ì–´ ê´€ë¦¬ í´ë˜ìŠ¤ (ì‹±ê¸€í†¤ íŒ¨í„´ ì ìš©).
    JSON íŒŒì¼ì—ì„œ ì–¸ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ê³  ë‹¤êµ­ì–´ í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
    """
    language_changed = pyqtSignal(str)

    _instance = None

    def __new__(cls):
        if cls._instance is None:
            cls._instance = super(LangManager, cls).__new__(cls)
            cls._instance._initialized = False
        return cls._instance

    def __init__(self):
        if self._initialized:
            return
        super().__init__()
        self._initialized = True
        self.current_language = 'en'
        self.resources: Dict[str, Dict[str, str]] = {}
        self.load_languages()

    def load_languages(self) -> None:
        """
        config/languages ë””ë ‰í† ë¦¬ì—ì„œ ì–¸ì–´ íŒŒì¼(*.json)ì„ ë¡œë“œí•©ë‹ˆë‹¤.
        """
        # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ ê³„ì‚° (view/lang_manager.py ê¸°ì¤€)
        base_dir = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
        lang_dir = os.path.join(base_dir, 'config', 'languages')

        if not os.path.exists(lang_dir):
            logger.error(f"Language directory not found: {lang_dir}")
            return

        for filename in os.listdir(lang_dir):
            if filename.endswith('.json'):
                lang_code = os.path.splitext(filename)[0]
                file_path = os.path.join(lang_dir, filename)
                try:
                    with open(file_path, 'r', encoding='utf-8') as f:
                        self.resources[lang_code] = json.load(f)
                except Exception as e:
                    logger.error(f"Failed to load language file {filename}: {e}")

    def set_language(self, lang_code: str) -> None:
        """
        í˜„ì¬ ì–¸ì–´ë¥¼ ì„¤ì •í•˜ê³  ì‹œê·¸ë„ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤.

        Args:
            lang_code (str): ì„¤ì •í•  ì–¸ì–´ ì½”ë“œ (ì˜ˆ: 'en', 'ko').
        """
        if lang_code in self.resources and self.current_language != lang_code:
            self.current_language = lang_code
            self.language_changed.emit(lang_code)

    def get_text(self, key: str, lang_code: Optional[str] = None) -> str:
        """
        ì§€ì •ëœ ì–¸ì–´(ë˜ëŠ” í˜„ì¬ ì–¸ì–´)ì— ë§ëŠ” í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Args:
            key (str): í…ìŠ¤íŠ¸ í‚¤.
            lang_code (Optional[str]): ì–¸ì–´ ì½”ë“œ. Noneì´ë©´ í˜„ì¬ ì–¸ì–´ ì‚¬ìš©.

        Returns:
            str: ë²ˆì—­ëœ í…ìŠ¤íŠ¸. í‚¤ê°€ ì—†ìœ¼ë©´ í‚¤ ìì²´ë¥¼ ë°˜í™˜.
        """
        target_lang = lang_code if lang_code else self.current_language
        lang_dict = self.resources.get(target_lang, {})
        text = lang_dict.get(key)

        if text is None:
            # ì§€ì •ëœ ì–¸ì–´ì— í‚¤ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ ì–¸ì–´(ì˜ì–´)ì—ì„œ ì‹œë„
            if target_lang != 'en':
                fallback_dict = self.resources.get('en', {})
                text = fallback_dict.get(key)

        # ì—¬ì „íˆ ì—†ìœ¼ë©´ í‚¤ ìì²´ë¥¼ ë°˜í™˜
        return text if text is not None else key

    def get_supported_languages(self) -> list:
        """
        ì§€ì›ë˜ëŠ” ëª¨ë“  ì–¸ì–´ ì½”ë“œ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            list: ì–¸ì–´ ì½”ë“œ ë¦¬ìŠ¤íŠ¸ (ì˜ˆ: ['en', 'ko']).
        """
        return list(self.resources.keys())

    def text_matches_key(self, text: str, key: str) -> bool:
        """
        ì£¼ì–´ì§„ í…ìŠ¤íŠ¸ê°€ íŠ¹ì • í‚¤ì˜ ì–´ë–¤ ì–¸ì–´ ë²ˆì—­ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

        Args:
            text (str): í™•ì¸í•  í…ìŠ¤íŠ¸.
            key (str): ì–¸ì–´ í‚¤.

        Returns:
            bool: ì¼ì¹˜í•˜ë©´ True, ì•„ë‹ˆë©´ False.
        """
        for lang_code in self.get_supported_languages():
            if text == self.get_text(key, lang_code):
                return True
        return False

# ì „ì—­ ì¸ìŠ¤í„´ìŠ¤
lang_manager = LangManager()
</file>

<file path="view/pyqt_customs/smart_number_edit.py">
from PyQt5.QtWidgets import QLineEdit
from PyQt5.QtGui import QRegExpValidator
from PyQt5.QtCore import QRegExp

class QSmartLineEdit(QLineEdit):
    """
    HEX ëª¨ë“œì™€ ì¼ë°˜ í…ìŠ¤íŠ¸ ëª¨ë“œë¥¼ ì§€ì›í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ë¼ì¸ ì—ë””íŠ¸ì…ë‹ˆë‹¤.
    HEX ëª¨ë“œì¼ ë•ŒëŠ” 0-9, A-F, ê³µë°±ë§Œ ì…ë ¥ì„ í—ˆìš©í•˜ê³  ìë™ìœ¼ë¡œ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
    """

    def __init__(self, parent=None):
        super().__init__(parent)
        self._hex_mode = False
        self._ascii_validator = None # ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ì…ë ¥ í—ˆìš©

        # HEX ëª¨ë“œìš© ê²€ì¦ê¸° (0-9, A-F, a-f, ê³µë°±)
        hex_regex = QRegExp("[0-9A-Fa-f ]+")
        self._hex_validator = QRegExpValidator(hex_regex)

    def set_hex_mode(self, enabled: bool):
        """
        HEX ëª¨ë“œ í™œì„±í™”/ë¹„í™œì„±í™”ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
        """
        self._hex_mode = enabled
        if enabled:
            self.setValidator(self._hex_validator)
            # í˜„ì¬ í…ìŠ¤íŠ¸ë¥¼ HEX í˜•ì‹ì— ë§ê²Œ ì •ë¦¬ (ì„ íƒ ì‚¬í•­)
            # self.setText(self.text().upper())
        else:
            self.setValidator(self._ascii_validator)

    def keyPressEvent(self, event):
        """
        í‚¤ ì…ë ¥ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        HEX ëª¨ë“œì¼ ë•Œ ì†Œë¬¸ìë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
        """
        if self._hex_mode:
            text = event.text()
            if text.isalnum():
                # ì†Œë¬¸ì a-fë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•˜ì—¬ ì…ë ¥
                if 'a' <= text <= 'f':
                    new_event = type(event)(
                        event.type(),
                        event.key(),
                        event.modifiers(),
                        text.upper(),
                        event.isAutoRepeat(),
                        event.count()
                    )
                    super().keyPressEvent(new_event)
                    return

        super().keyPressEvent(event)
</file>

<file path="core/logger.py">
import logging
import os
from logging.handlers import RotatingFileHandler
from datetime import datetime

class Logger:
    _instance = None
    _initialized = False

    def __new__(cls):
        if cls._instance is None:
            cls._instance = super(Logger, cls).__new__(cls)
        return cls._instance

    def __init__(self):
        """Loggerë¥¼ ì´ˆê¸°í™”í•˜ê³  í•¸ë“¤ëŸ¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤."""
        if self._initialized:
            return

        self.logger = logging.getLogger("SerialTool")
        self.logger.setLevel(logging.DEBUG)

        # Create logs directory if it doesn't exist
        log_dir = "logs"
        if not os.path.exists(log_dir):
            os.makedirs(log_dir)

        # File Handler
        log_file = os.path.join(log_dir, f"serial_tool_{datetime.now().strftime('%Y%m%d')}.log")
        file_handler = RotatingFileHandler(log_file, maxBytes=10*1024*1024, backupCount=5)
        file_handler.setLevel(logging.DEBUG)

        # Console Handler
        console_handler = logging.StreamHandler()
        console_handler.setLevel(logging.INFO)

        # Formatter
        formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
        file_handler.setFormatter(formatter)
        console_handler.setFormatter(formatter)

        self.logger.addHandler(file_handler)
        self.logger.addHandler(console_handler)

        self._initialized = True

    def debug(self, message):
        self.logger.debug(message)

    def info(self, message):
        self.logger.info(message)

    def warning(self, message):
        self.logger.warning(message)

    def error(self, message):
        self.logger.error(message)

    def critical(self, message):
        self.logger.critical(message)

# Global logger instance
logger = Logger()
</file>

<file path="core/utils.py">
import threading
from collections import deque
from typing import Optional, Any

class ThreadSafeQueue:
    """
    ìŠ¤ë ˆë“œ ì•ˆì „í•œ(Thread-safe) í ë˜í¼ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    ë‚´ë¶€ì ìœ¼ë¡œ dequeì™€ Lockì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.
    """
    def __init__(self):
        """ThreadSafeQueueë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        self._queue = deque()
        self._lock = threading.Lock()

    def enqueue(self, item: Any):
        """
        ì•„ì´í…œì„ íì— ì¶”ê°€í•©ë‹ˆë‹¤.

        Args:
            item (Any): ì¶”ê°€í•  ì•„ì´í…œ.
        """
        with self._lock:
            self._queue.append(item)

    def dequeue(self) -> Optional[Any]:
        """
        íì—ì„œ ì•„ì´í…œì„ í•˜ë‚˜ êº¼ë‚´ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            Optional[Any]: íê°€ ë¹„ì–´ìˆì§€ ì•Šìœ¼ë©´ ì•„ì´í…œ, ë¹„ì–´ìˆìœ¼ë©´ None.
        """
        with self._lock:
            if self._queue:
                return self._queue.popleft()
            return None

    def is_empty(self) -> bool:
        """
        íê°€ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

        Returns:
            bool: ë¹„ì–´ìˆìœ¼ë©´ True, ì•„ë‹ˆë©´ False.
        """
        with self._lock:
            return len(self._queue) == 0

    def clear(self):
        """íì˜ ëª¨ë“  ì•„ì´í…œì„ ì œê±°í•©ë‹ˆë‹¤."""
        with self._lock:
            self._queue.clear()

class RingBuffer:
    """
    ê³ ì • í¬ê¸° ë§ ë²„í¼(Circular Buffer) í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    ë°”ì´íŠ¸ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•˜ê³  ì½ì–´ì˜µë‹ˆë‹¤.
    """
    def __init__(self, size: int = 1024):
        """
        RingBufferë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            size (int): ë²„í¼ í¬ê¸° (ë°”ì´íŠ¸ ë‹¨ìœ„). ê¸°ë³¸ê°’ì€ 1024.
        """
        self._size = size
        self._buffer = bytearray(size)
        self._head = 0
        self._tail = 0
        self._count = 0
        self._lock = threading.Lock()

    def write(self, data: bytes) -> int:
        """
        ë°ì´í„°ë¥¼ ë²„í¼ì— ì”ë‹ˆë‹¤. ë²„í¼ê°€ ê°€ë“ ì°¨ë©´ ì˜¤ë˜ëœ ë°ì´í„°ë¥¼ ë®ì–´ì”ë‹ˆë‹¤.

        Args:
            data (bytes): ì“¸ ë°ì´í„°.

        Returns:
            int: ì“°ì—¬ì§„ ë°”ì´íŠ¸ ìˆ˜.
        """
        with self._lock:
            written = 0
            for byte in data:
                if self._count < self._size:
                    self._buffer[self._head] = byte
                    self._head = (self._head + 1) % self._size
                    self._count += 1
                    written += 1
                else:
                    # ë®ì–´ì“°ê¸° ëª¨ë“œ (Circular)
                    # ì˜¤ë˜ëœ ë°ì´í„°(tail)ë¥¼ ë®ì–´ì“°ê³  tailì„ ì´ë™ì‹œí‚´
                    self._buffer[self._head] = byte
                    self._head = (self._head + 1) % self._size
                    self._tail = (self._tail + 1) % self._size # Tail ì´ë™
                    written += 1
            return written

    def read(self, count: int) -> bytes:
        """
        ë²„í¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜µë‹ˆë‹¤.

        Args:
            count (int): ì½ì„ ë°”ì´íŠ¸ ìˆ˜.

        Returns:
            bytes: ì½ì€ ë°ì´í„°.
        """
        with self._lock:
            if self._count == 0:
                return b""

            read_count = min(count, self._count)
            result = bytearray(read_count)

            for i in range(read_count):
                result[i] = self._buffer[self._tail]
                self._tail = (self._tail + 1) % self._size
                self._count -= 1

            return bytes(result)

    def clear(self):
        """ë²„í¼ë¥¼ ë¹„ì›ë‹ˆë‹¤."""
        with self._lock:
            self._head = 0
            self._tail = 0
            self._count = 0
</file>

<file path="doc/session_summary_20251130.md">
# 2025-11-30 ê°œë°œ ì„¸ì…˜ ìš”ì•½

## 1. ì„¸ì…˜ ëª©í‘œ

- í”„ë¡œì íŠ¸ ëª…ì¹­ ë³€ê²½(`SerialManager` -> `SerialTool`) ë° ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¬ì •ë¦¬.
- Layered MVP ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ UI ê³¨ê²©(Skeleton) ì™„ì„±.
- ì£¼ìš” ìœ„ì ¯(`CommandList`, `ManualControl`)ì˜ ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„ ë° ë¦¬íŒ©í† ë§.

## 2. ì£¼ìš” ë³€ê²½ ì‚¬í•­

### A. í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ëª…ì¹­ (Structure & Naming)

- **ëª…ì¹­ ë³€ê²½**: í”„ë¡œì íŠ¸ ì´ë¦„ì„ `SerialManager`ì—ì„œ **`SerialTool`**ë¡œ ë³€ê²½í•˜ê³  ê´€ë ¨ ì½”ë“œ/ë¬¸ì„œ ì—…ë°ì´íŠ¸.
- **ë””ë ‰í† ë¦¬ ì´ë™**: ì†ŒìŠ¤ ì½”ë“œë¥¼ `serial_manager/` í•˜ìœ„ë¡œ ì´ë™í•˜ê³ , ê°€ìƒ í™˜ê²½(`.venv`) ìœ„ì¹˜ ì¡°ì •.
- **ëª¨ë“ˆí™”**: `core`, `model`, `view`, `presenter` íŒ¨í‚¤ì§€ êµ¬ì¡° í™•ë¦½.

### B. UI ì•„í‚¤í…ì²˜ (UI Architecture)

- **íŒ¨ë„ ë¶„ë¦¬**: `MainWindow`ë¥¼ **`LeftPanel`**(í¬íŠ¸/ìˆ˜ë™ì œì–´)ê³¼ **`RightPanel`**(ì»¤ë§¨ë“œ/ì¸ìŠ¤í™í„°)ë¡œ ë¶„ë¦¬í•˜ì—¬ êµ¬ì¡° ë‹¨ìˆœí™”.
- **ìœ„ì ¯ ë¦¬íŒ©í† ë§**:
  - `view/widgets/` íŒ¨í‚¤ì§€ ìƒì„± ë° í•˜ìœ„ ìœ„ì ¯ ë¶„ë¦¬.
  - `MacroListWidget`: í–‰ ì¶”ê°€/ì‚­ì œ/ì´ë™ ê¸°ëŠ¥ ë° ì²´í¬ë°•ìŠ¤ ë¡œì§ êµ¬í˜„.
  - `MacroCtrlWidget`: ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ ë° ìë™ ì‹¤í–‰ UI ì¶”ê°€.
  - `ManualControlWidget`: `OperationArea`ë¥¼ ì¬ì‘ì„±í•˜ì—¬ ìˆ˜ë™ ì œì–´ ê¸°ëŠ¥ í†µí•©.

### C. ë¬¸ì„œí™” (Documentation)

- **README.md**: í”„ë¡œì íŠ¸ ê°œìš”, ì„¤ì¹˜ ë°©ë²•, êµ¬ì¡° ì„¤ëª… ì¶”ê°€.
- **CHANGELOG.md**: ì´ˆê¸° ë²„ì „(`v0.1.0`) ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ ì‘ì„±.
- **task.md**: ì „ì²´ ì‘ì—… ëª©ë¡ ë° ì§„í–‰ ìƒí™© ì¶”ì  ì‹œì‘.

## 3. ë¹„ê³ 

- ì´ˆê¸° ê°œë°œ ë‹¨ê³„ë¡œì„œ UIì˜ ê¸°ëŠ¥ì  ê¸°ë°˜ì„ ë§ˆë ¨í•˜ëŠ” ë° ì§‘ì¤‘í•¨.
- ì´í›„ UI ë””ìì¸ ê°œì„ (12/01) ë° Core ë¡œì§ êµ¬í˜„ìœ¼ë¡œ ì´ì–´ì§.
</file>

<file path="guide/comment_guide.md">
# Source Code Comment Guide (ì†ŒìŠ¤ì½”ë“œ ì£¼ì„ ê°€ì´ë“œ)

ì´ ë¬¸ì„œëŠ” `mkdocs`ì™€ `mkdocstrings` í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ë¬¸ì„œë¥¼ ìë™í™”í•˜ê¸° ìœ„í•œ ì†ŒìŠ¤ì½”ë“œ ì£¼ì„ ì‘ì„± ê·œì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤. `code_style_guide.md`ì˜ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, ìë™í™” ë„êµ¬ê°€ ì¸ì‹í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ í˜•ì‹ì„ ì œì‹œí•©ë‹ˆë‹¤.

## 1. Docstring ìŠ¤íƒ€ì¼ (Style)

ë³¸ í”„ë¡œì íŠ¸ëŠ” **Google Style Docstring**ì„ í‘œì¤€ìœ¼ë¡œ ì±„íƒí•©ë‹ˆë‹¤.

### 1.1 Google Styleì´ë€?

Google Styleì€ Python ì½”ë“œì˜ ë¬¸ì„œí™”ë¥¼ ìœ„í•´ Googleì—ì„œ ì •ì˜í•œ í‘œì¤€ í˜•ì‹ì…ë‹ˆë‹¤.

*   **íŠ¹ì§•**: reStructuredText(Sphinx ê¸°ë³¸ê°’)ë³´ë‹¤ **ê°€ë…ì„±(Human-readable)**ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ê¸°í˜¸(`:param:`, `:return:`) ëŒ€ì‹  ëª…í™•í•œ ì„¹ì…˜ í—¤ë”(`Args:`, `Returns:`)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
*   **í˜¸í™˜ì„±**: `mkdocstrings` í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´ ì™„ë²½í•˜ê²Œ íŒŒì‹±ë˜ì–´ ê¹”ë”í•œ ì›¹ ë¬¸ì„œë¡œ ë³€í™˜ë©ë‹ˆë‹¤.
*   **ì°¸ê³  ë¬¸ì„œ**: [Google Python Style Guide - Docstrings](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)

### 1.2 ê¸°ë³¸ ê·œì¹™

*   ëª¨ë“  Docstringì€ ì‚¼ì¤‘ ë”°ì˜´í‘œ(`"""`)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
*   ì²« ì¤„ì€ ìš”ì•½ë¬¸ìœ¼ë¡œ ì‘ì„±í•˜ê³ , í•œ ì¤„ ë„ìš´ í›„ ìƒì„¸ ë‚´ìš©ì„ ì‘ì„±í•©ë‹ˆë‹¤.
*   ë“¤ì—¬ì“°ê¸°ëŠ” ìŠ¤í˜ì´ìŠ¤ 4ì¹¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

## 2. ëª¨ë“ˆ Docstring (Module Level)

ëª¨ë“ˆ íŒŒì¼ì˜ ìµœìƒë‹¨ì— ìœ„ì¹˜í•˜ë©°, `code_style_guide.md`ì—ì„œ ì •ì˜í•œ **WHY / WHAT / HOW** ì„¹ì…˜ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.

```python
"""
ëª¨ë“ˆì˜ ì—­í• ì„ í•œ ì¤„ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.

ìƒì„¸ ì„¤ëª…ì€ ì—¬ê¸°ì— ì‘ì„±í•©ë‹ˆë‹¤. ì´ ëª¨ë“ˆì€ ~~ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°,
~~ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©í•©ë‹ˆë‹¤.

Attributes:
    DICT_SET (dict): ì „ì—­ ì„¤ì • ë³€ìˆ˜
    module_level_variable (int): ëª¨ë“ˆ ë ˆë²¨ ë³€ìˆ˜ ì„¤ëª…

## WHY
*   ì´ ëª¨ë“ˆì´ í•„ìš”í•œ ì´ìœ  1
*   ì´ ëª¨ë“ˆì´ í•„ìš”í•œ ì´ìœ  2

## WHAT
*   ì£¼ìš” ê¸°ëŠ¥ 1
*   ì£¼ìš” ê¸°ëŠ¥ 2

## HOW
*   êµ¬í˜„ ë°©ì‹ ë° ì•Œê³ ë¦¬ì¦˜
*   ì‚¬ìš©ëœ íŒ¨í„´
"""
```

> **Note**: `mkdocs`ì—ì„œ `## Header` ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë©´ ë¬¸ì„œ í˜ì´ì§€ ë‚´ì—ì„œ ì„¹ì…˜ìœ¼ë¡œ ë Œë”ë§ë©ë‹ˆë‹¤.

## 3. í´ë˜ìŠ¤ Docstring (Class Level)

í´ë˜ìŠ¤ ì •ì˜ ë°”ë¡œ ì•„ë˜ì— ìœ„ì¹˜í•©ë‹ˆë‹¤.

```python
class ExampleClass:
    """
    í´ë˜ìŠ¤ì˜ ëª©ì ì„ í•œ ì¤„ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.

    í´ë˜ìŠ¤ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì‘ì„±í•©ë‹ˆë‹¤.
    ì—¬ëŸ¬ ì¤„ì— ê±¸ì³ì„œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    Attributes:
        attr1 (str): ì†ì„± 1ì— ëŒ€í•œ ì„¤ëª…
        attr2 (int): ì†ì„± 2ì— ëŒ€í•œ ì„¤ëª…
    """
```

## 4. í•¨ìˆ˜/ë©”ì„œë“œ Docstring (Function/Method Level)

í•¨ìˆ˜ ë˜ëŠ” ë©”ì„œë“œ ì •ì˜ ë°”ë¡œ ì•„ë˜ì— ìœ„ì¹˜í•©ë‹ˆë‹¤. **Args**, **Returns**, **Raises**, **Yields** ë“±ì˜ ì„¹ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```python
def example_function(param1: int, param2: str = "default") -> bool:
    """
    í•¨ìˆ˜ì˜ ê¸°ëŠ¥ì„ í•œ ì¤„ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.

    í•¨ìˆ˜ì˜ ë™ì‘ ë°©ì‹, ì£¼ì˜ì‚¬í•­ ë“±ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

    Logic:
        - ë¡œì§ì„¤ëª…
        - ë¡œì§ì„¤ëª…
        - ë¡œì§ì„¤ëª…

    Args:
        param1 (int): ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì„¤ëª….
        param2 (str, optional): ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì„¤ëª…. ê¸°ë³¸ê°’ì€ "default".

    Returns:
        bool: ì„±ê³µí•˜ë©´ True, ì‹¤íŒ¨í•˜ë©´ Falseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

    Raises:
        ValueError: param1ì´ ìŒìˆ˜ì¼ ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤.
        TypeError: param2ê°€ ë¬¸ìì—´ì´ ì•„ë‹ ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤.

    Examples:
        í•¨ìˆ˜ ì‚¬ìš© ì˜ˆì‹œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

        >>> example_function(10, "test")
        True
    """
    return True
```

### 4.1 ì£¼ìš” ì„¹ì…˜ ì„¤ëª…

* **Logic**: ì„¤ëª…ì´ í•„ìš”í•œ ë¡œì§ ì‘ì„±
* **Args**: ë§¤ê°œë³€ìˆ˜ ì„¤ëª…. `ì´ë¦„ (íƒ€ì…): ì„¤ëª…` í˜•ì‹.
* **Returns**: ë°˜í™˜ê°’ ì„¤ëª…. `íƒ€ì…: ì„¤ëª…` í˜•ì‹.
* **Raises**: ë°œìƒ ê°€ëŠ¥í•œ ì˜ˆì™¸ ì„¤ëª…. `ì˜ˆì™¸íƒ€ì…: ì„¤ëª…` í˜•ì‹.
* **Yields**: ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì¸ ê²½ìš° ë°˜í™˜ê°’ ì„¤ëª….
* **Examples**: ì‚¬ìš© ì˜ˆì‹œ ì½”ë“œ. `>>>` í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œë¡œ ì¸ì‹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 5. íƒ€ì… íŒíŠ¸ (Type Hinting)

`mkdocstrings`ëŠ” ì†ŒìŠ¤ì½”ë“œì˜ íƒ€ì… íŒíŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì½ì–´ ë¬¸ì„œì— í‘œì‹œí•©ë‹ˆë‹¤. ë”°ë¼ì„œ Docstringì— íƒ€ì…ì„ ì¤‘ë³µí•´ì„œ ì ëŠ” ê²ƒë³´ë‹¤, í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— íƒ€ì… íŒíŠ¸ë¥¼ ëª…ì‹œí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

**ê¶Œì¥ ë°©ì‹ (íƒ€ì… íŒíŠ¸ ì‚¬ìš©):**

```python
def connect(self, host: str, port: int) -> None:
    """
    ì„œë²„ì— ì—°ê²°í•©ë‹ˆë‹¤.

    Args:
        host: ì„œë²„ í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ
        port: ì„œë²„ í¬íŠ¸ ë²ˆí˜¸
    """
```

**ë¹„ê¶Œì¥ ë°©ì‹ (Docstringì—ë§Œ íƒ€ì… ëª…ì‹œ):**

```python
def connect(self, host, port):
    """
    ì„œë²„ì— ì—°ê²°í•©ë‹ˆë‹¤.

    Args:
        host (str): ì„œë²„ í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ
        port (int): ì„œë²„ í¬íŠ¸ ë²ˆí˜¸
    """
```

## 6. ì¸ë¼ì¸ ë° ë¸”ë¡ ì£¼ì„ (Inline & Block Comments)

Docstringì´ ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ëª…í•œë‹¤ë©´, ì¸ë¼ì¸ ì£¼ì„ì€ **ë‚´ë¶€ êµ¬í˜„ ë¡œì§**ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ë³µì¡í•œ ë¡œì§, ê¸´ ë©”ì„œë“œ, ìˆ˜ì‹ ë“±ì„ ë‹¤ë£° ë•Œ ë‹¤ìŒ ê·œì¹™ì„ ë”°ë¦…ë‹ˆë‹¤.

### 6.1 ê¸´ ë©”ì„œë“œ ë° ë³µì¡í•œ ë¡œì§ (Long Methods & Complexity)

ë©”ì„œë“œê°€ ê¸¸ì–´ì§€ê±°ë‚˜(ì•½ 50~100ì¤„ ì´ìƒ) ë¡œì§ì´ ë³µì¡í•œ ê²½ìš°, **ë¸”ë¡ ì£¼ì„**ì„ ì‚¬ìš©í•˜ì—¬ ë…¼ë¦¬ì  ë‹¨ìœ„ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.

```python
def complex_trading_logic(self):
    # ---------------------------------------------------------
    # 1. ì´ˆê¸° ìƒíƒœ ê²€ì¦ ë° ë°ì´í„° ë¡œë“œ
    # ---------------------------------------------------------
    if not self.is_market_open():
        return

    data = self.load_market_data()

    # ---------------------------------------------------------
    # 2. ë§¤ìˆ˜ ì‹ í˜¸ ë¶„ì„ (RSI + MACD)
    # ---------------------------------------------------------
    # RSIê°€ 30 ì´í•˜ì´ê³  MACDê°€ ê³¨ë“ í¬ë¡œìŠ¤ì¸ ê²½ìš° ë§¤ìˆ˜ í›„ë³´ë¡œ ì„ ì •
    if self.check_buy_signal(data):
        target_price = self.calculate_target(data)

        # -----------------------------------------------------
        # 3. ì£¼ë¬¸ ì‹¤í–‰ ë° ë¦¬ìŠ¤í¬ ê´€ë¦¬
        # -----------------------------------------------------
        if self.check_risk_limit(target_price):
            self.send_order("BUY", target_price)
```

### 6.2 ë¶„ê¸°ë¬¸ ì„¤ëª… (Branching)

`if`, `elif`, `else` ë“±ì˜ ë¶„ê¸°ê°€ ë³µì¡í•  ê²½ìš°, ê° ì¡°ê±´ì´ **ì–´ë–¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì‹œë‚˜ë¦¬ì˜¤**ë¥¼ ì˜ë¯¸í•˜ëŠ”ì§€ ì£¼ì„ìœ¼ë¡œ ëª…ì‹œí•©ë‹ˆë‹¤.

```python
if order_status == "FILLED":
    # ì²´ê²° ì™„ë£Œ: ì”ê³ ë¥¼ ê°±ì‹ í•˜ê³  ë‹¤ìŒ ì£¼ë¬¸ì„ ì¤€ë¹„
    self.update_balance()
elif order_status == "PARTIALLY_FILLED":
    # ë¶€ë¶„ ì²´ê²°: ë¯¸ì²´ê²° ìˆ˜ëŸ‰ì„ ê³„ì‚°í•˜ì—¬ ì •ì • ì£¼ë¬¸ ëŒ€ê¸°
    self.handle_partial_fill()
elif order_status == "REJECTED" and error_code == 9001:
    # ì£¼ë¬¸ ê±°ë¶€ (ì˜ˆìˆ˜ê¸ˆ ë¶€ì¡±): ë¦¬ìŠ¤í¬ ë ˆë²¨ ìƒí–¥ ì¡°ì • í›„ ì¬ì‹œë„ ì¤‘ì§€
    self.stop_strategy("Insufficient Funds")
else:
    # ê¸°íƒ€ ëŒ€ê¸° ìƒíƒœ ë˜ëŠ” ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜
    self.log_warning(f"Unknown status: {order_status}")
```

### 6.3 ìˆ˜ì‹ ë° ìƒìˆ˜ (Formulas & Constants)

ë³µì¡í•œ ê³„ì‚°ì‹ì´ë‚˜ ë§¤ì§ ë„˜ë²„(ìƒìˆ˜)ê°€ ì‚¬ìš©ë  ë•ŒëŠ” **ìˆ˜ì‹ì˜ ì˜ë¯¸, ì¶œì²˜, ìƒìˆ˜ì˜ ì •ì˜**ë¥¼ ë°˜ë“œì‹œ ì„¤ëª…í•©ë‹ˆë‹¤.

```python
# ë³€ë™ì„± ëŒíŒŒ ì „ëµ ëª©í‘œê°€ ê³„ì‚°
# Formula: ì‹œê°€ + (ì „ì¼ ê³ ê°€ - ì „ì¼ ì €ê°€) * K
# Kê°’ 0.5ëŠ” ë°±í…ŒìŠ¤íŒ…(2023-01 ~ 2023-12) ìµœì í™” ê²°ê³¼ì„
target_price = open_price + (prev_high - prev_low) * 0.5

# ìˆ˜ìˆ˜ë£Œ ê³„ì‚° (í‚¤ì›€ì¦ê¶Œ ê¸°ì¤€)
# 0.00015: ê±°ë˜ ìˆ˜ìˆ˜ë£Œ (0.015%)
# 0.0020: ì¦ê¶Œê±°ë˜ì„¸ (0.20%, ë§¤ë„ ì‹œì—ë§Œ ë¶€ê³¼)
fee = amount * 0.00015
tax = amount * 0.0020 if side == "SELL" else 0
```

### 6.4 TODO ë° FIXME

ì½”ë“œ ë‚´ì—ì„œ ê°œì„ ì´ í•„ìš”í•˜ê±°ë‚˜ ì ì¬ì ì¸ ë¬¸ì œê°€ ìˆëŠ” ë¶€ë¶„ì€ íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í‘œì‹œí•©ë‹ˆë‹¤.

* `# TODO`: í–¥í›„ êµ¬í˜„í•´ì•¼ í•  ê¸°ëŠ¥ì´ë‚˜ ê°œì„  ì‚¬í•­
* `# FIXME`: ì•Œê³  ìˆëŠ” ë²„ê·¸ë‚˜ ìˆ˜ì •ì´ ì‹œê¸‰í•œ ë¬¸ì œ
* `# NOTE`: íŠ¹ë³„íˆ ì£¼ì˜í•´ì•¼ í•  ì‚¬í•­ì´ë‚˜ ë°°ê²½ ì§€ì‹

```python
# TODO: í–¥í›„ ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ ì—°ë™ ì‹œ ë¹„ë™ê¸° í˜¸ì¶œë¡œ ë³€ê²½ í•„ìš”
prediction = self.cmd_table_model.predict(data)

# FIXME: ê°€ë” ë°ì´í„° ìˆ˜ì‹  ì§€ì—°ìœ¼ë¡œ ì¸í•´ IndexError ë°œìƒ ê°€ëŠ¥ì„± ìˆìŒ (ì˜ˆì™¸ ì²˜ë¦¬ ë³´ê°• í•„ìš”)
last_price = data[-1]
```

## 7. MkDocs ì„¤ì • ì°¸ê³  (Reference)

`mkdocs.yml` ì„¤ì • ì‹œ ë‹¤ìŒê³¼ ê°™ì´ `python` í•¸ë“¤ëŸ¬ë¥¼ ì„¤ì •í•˜ì—¬ Docstringì„ íŒŒì‹±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```yaml
plugins:
  - mkdocstrings:
      handlers:
        python:
          options:
            docstring_style: google
            show_source: true
            show_root_heading: true
```

## 8. ì²´í¬ë¦¬ìŠ¤íŠ¸ (Checklist)

### âœ… ì‘ì„± ì „ í™•ì¸
- [ ] ëª¨ë“  ì£¼ì„/Docstringì„ í•œêµ­ì–´ë¡œ ì‘ì„±í–ˆëŠ”ê°€?
- [ ] Google Style í˜•ì‹ì„ ë”°ë¥´ëŠ”ê°€?
- [ ] íƒ€ì… íŒíŠ¸ë¥¼ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— ì‘ì„±í–ˆëŠ”ê°€?

### âœ… ëª¨ë“ˆ Docstring
- [ ] WHY/WHAT/HOW ì„¹ì…˜ì´ ìˆëŠ”ê°€?
- [ ] ê° ì„¹ì…˜ì— ìµœì†Œ 1ê°œ ì´ìƒì˜ bullet pointê°€ ìˆëŠ”ê°€?

### âœ… í•¨ìˆ˜/ë©”ì„œë“œ Docstring
- [ ] ì²« ì¤„ ìš”ì•½ì´ ê°„ê²°í•œê°€?
- [ ] Args/Returns ì„¹ì…˜ì´ ì™„ì„±ë˜ì—ˆëŠ”ê°€?
- [ ] ë³µì¡í•œ ë¡œì§ì— Logic ì„¹ì…˜ì„ ì¶”ê°€í–ˆëŠ”ê°€?

### âœ… ì¸ë¼ì¸ ì£¼ì„
- [ ] ë³µì¡í•œ ë¡œì§ì— ë¸”ë¡ ì£¼ì„ìœ¼ë¡œ ë‹¨ìœ„ë¥¼ êµ¬ë¶„í–ˆëŠ”ê°€?
- [ ] ë¶„ê¸°ë¬¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸ë¥¼ ì„¤ëª…í–ˆëŠ”ê°€?
- [ ] ìˆ˜ì‹/ìƒìˆ˜ì— ì¶œì²˜ì™€ ì˜ë¯¸ë¥¼ ëª…ì‹œí–ˆëŠ”ê°€?
</file>

<file path="requirements.txt">
PyQt5>=5.15.9
pyserial>=3.5
commentjson>=0.9.0
requests>=2.28.0
qdarkstyle>=3.1
jsonschema>=4.20.0
pytest>=7.0
pytest-qt>=4.2
</file>

<file path="version.py">
"""
ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
"""
__version__ = "1.0.0"
</file>

<file path="view/panels/manual_control_panel.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout
from typing import Optional
from view.widgets.manual_control import ManualControlWidget

class ManualControlPanel(QWidget):
    """
    ManualControlWidgetì„ ê°ì‹¸ëŠ” íŒ¨ë„ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    Section -> Panel -> Widget ê³„ì¸µ êµ¬ì¡°ë¥¼ ì¤€ìˆ˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
    """

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        super().__init__(parent)
        self.manual_control_widget = None
        self.init_ui()

    def init_ui(self) -> None:
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)

        self.manual_control_widget = ManualControlWidget()
        layout.addWidget(self.manual_control_widget)

        self.setLayout(layout)

    def save_state(self) -> dict:
        """ìœ„ì ¯ì˜ ìƒíƒœë¥¼ ì €ì¥í•©ë‹ˆë‹¤."""
        return self.manual_control_widget.save_state()

    def load_state(self, state: dict) -> None:
        """ìœ„ì ¯ì˜ ìƒíƒœë¥¼ ë³µì›í•©ë‹ˆë‹¤."""
        self.manual_control_widget.load_state(state)

    def set_controls_enabled(self, enabled: bool) -> None:
        """ì œì–´ ìœ„ì ¯ì˜ í™œì„±í™” ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤."""
        self.manual_control_widget.set_controls_enabled(enabled)
</file>

<file path="view/widgets/macro_list.py">
from PyQt5.QtWidgets import (
    QWidget, QVBoxLayout, QHBoxLayout, QTableView, QPushButton,
    QHeaderView, QCheckBox
)
from PyQt5.QtGui import QStandardItemModel, QStandardItem
from PyQt5.QtCore import Qt, pyqtSignal
from typing import Optional, List, Dict, Any
from view.lang_manager import lang_manager

class MacroListWidget(QWidget):
    """
    ëª…ë ¹ì–´ ëª©ë¡(Macro List)ì„ ê´€ë¦¬í•˜ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    ëª…ë ¹ì–´ì˜ ì¶”ê°€, ì‚­ì œ, ìˆœì„œ ë³€ê²½ ë° ì„ íƒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
    """

    # ì‹œê·¸ë„ ì •ì˜
    send_row_requested = pyqtSignal(int) # row_index
    macro_list_changed = pyqtSignal()  # ë°ì´í„° ë³€ê²½ ì‹œê·¸ë„

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        MacroListWidgetì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.cmd_table_model = None
        self.cmd_table = None
        self.down_cmd_btn = None
        self.up_cmd_btn = None
        self.del_cmd_btn = None
        self.add_cmd_btn = None
        self.select_all_chk = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)

        # í—¤ë” / ì œì–´ ë²„íŠ¼ (Header / Controls)
        header_layout = QHBoxLayout()

        # ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ (Tristate ì§€ì›)
        self.select_all_chk = QCheckBox(lang_manager.get_text("macro_list_chk_select_all"))
        self.select_all_chk.setToolTip(lang_manager.get_text("macro_list_chk_select_all_tooltip"))
        self.select_all_chk.setTristate(True)
        self.select_all_chk.stateChanged.connect(self.on_select_all_changed)

        self.add_cmd_btn = QPushButton()
        self.add_cmd_btn.setObjectName("add_cmd_btn")
        self.add_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_add_cmd_tooltip"))
        self.add_cmd_btn.setFixedSize(30, 30)

        self.del_cmd_btn = QPushButton()
        self.del_cmd_btn.setObjectName("del_cmd_btn")
        self.del_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_del_cmd_tooltip"))
        self.del_cmd_btn.setFixedSize(30, 30)

        self.up_cmd_btn = QPushButton()
        self.up_cmd_btn.setObjectName("up_cmd_btn")
        self.up_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_up_cmd_tooltip"))
        self.up_cmd_btn.setFixedSize(30, 30)

        self.down_cmd_btn = QPushButton()
        self.down_cmd_btn.setObjectName("down_cmd_btn")
        self.down_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_down_cmd_tooltip"))
        self.down_cmd_btn.setFixedSize(30, 30)

        header_layout.addWidget(self.select_all_chk)
        header_layout.addStretch()
        header_layout.addWidget(self.add_cmd_btn)
        header_layout.addWidget(self.del_cmd_btn)
        header_layout.addWidget(self.up_cmd_btn)
        header_layout.addWidget(self.down_cmd_btn)

        # ì‹œê·¸ë„ ì—°ê²°
        self.add_cmd_btn.clicked.connect(self.add_cmd_row)
        self.del_cmd_btn.clicked.connect(self.del_cmd_rows)
        self.up_cmd_btn.clicked.connect(self.move_cmd_up)
        self.down_cmd_btn.clicked.connect(self.move_cmd_down)

        # í…Œì´ë¸” ë·° (Table View)
        self.cmd_table = QTableView()
        self.cmd_table.setProperty("class", "fixed-font")  # í…Œì´ë¸”ì— ê³ ì •í­ í°íŠ¸ ì ìš©
        self.cmd_table_model = QStandardItemModel()
        # ì»¬ëŸ¼: ì„ íƒ, ì ‘ë‘ì‚¬, ëª…ë ¹ì–´, ì ‘ë¯¸ì‚¬, HEX, ì§€ì—°ì‹œê°„, ì „ì†¡ë²„íŠ¼
        self.update_header_labels()
        self.cmd_table.setModel(self.cmd_table_model)
        self.cmd_table.setToolTip(lang_manager.get_text("macro_list_table_cmd"))

        # ìŠ¤í¬ë¡¤ë°” ì •ì±… - í•­ìƒ í‘œì‹œ
        self.cmd_table.setVerticalScrollBarPolicy(Qt.ScrollBarAlwaysOn)
        self.cmd_table.setHorizontalScrollBarPolicy(Qt.ScrollBarAsNeeded)

        # ìˆ˜ì§ í—¤ë”(í–‰ ë²ˆí˜¸) ìˆ¨ê¹€
        self.cmd_table.verticalHeader().setVisible(False)

        # ì„ íƒ ëª¨ë“œ ì„¤ì •
        self.cmd_table.setSelectionBehavior(QTableView.SelectRows)
        self.cmd_table.setSelectionMode(QTableView.ExtendedSelection)

        # ì»¬ëŸ¼ ë„ˆë¹„ ì¡°ì •
        header = self.cmd_table.horizontalHeader()
        header.setSectionResizeMode(0, QHeaderView.ResizeToContents) # Select
        header.setSectionResizeMode(1, QHeaderView.ResizeToContents) # Prefix
        header.setSectionResizeMode(2, QHeaderView.Stretch)          # Command
        header.setSectionResizeMode(3, QHeaderView.ResizeToContents) # Suffix
        header.setSectionResizeMode(4, QHeaderView.ResizeToContents) # HEX
        header.setSectionResizeMode(5, QHeaderView.ResizeToContents) # Delay
        header.setSectionResizeMode(6, QHeaderView.ResizeToContents) # Send Btn

        layout.addLayout(header_layout)
        layout.addWidget(self.cmd_table)

        self.setLayout(layout)

        # ëª¨ë¸ ì‹œê·¸ë„ ì—°ê²°
        self.cmd_table_model.itemChanged.connect(self.on_item_changed)
        self.cmd_table_model.rowsInserted.connect(lambda: self.macro_list_changed.emit())
        self.cmd_table_model.rowsRemoved.connect(lambda: self.macro_list_changed.emit())
        self.cmd_table_model.rowsMoved.connect(lambda: self.macro_list_changed.emit())

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.select_all_chk.setText(lang_manager.get_text("macro_list_chk_select_all"))
        self.select_all_chk.setToolTip(lang_manager.get_text("macro_list_chk_select_all_tooltip"))

        self.add_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_add_cmd_tooltip"))
        self.del_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_del_cmd_tooltip"))
        self.up_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_up_cmd_tooltip"))
        self.down_cmd_btn.setToolTip(lang_manager.get_text("macro_list_btn_down_cmd_tooltip"))

        self.cmd_table.setToolTip(lang_manager.get_text("macro_list_table_cmd"))
        self.update_header_labels()

        # Send ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (ëª¨ë“  í–‰)
        for row in range(self.cmd_table_model.rowCount()):
            index = self.cmd_table_model.index(row, 6)
            widget = self.cmd_table.indexWidget(index)
            if widget:
                btn_send = widget.findChild(QPushButton)
                if btn_send:
                    btn_send.setText(lang_manager.get_text("macro_list_btn_send"))

    def update_header_labels(self) -> None:
        """í…Œì´ë¸” í—¤ë” ë¼ë²¨ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        labels = [
            "",
            lang_manager.get_text("macro_list_col_prefix"),
            lang_manager.get_text("macro_list_col_command"),
            lang_manager.get_text("macro_list_col_suffix"),
            lang_manager.get_text("macro_list_col_hex"),
            lang_manager.get_text("macro_list_col_delay"),
            lang_manager.get_text("macro_list_col_send")
        ]
        self.cmd_table_model.setHorizontalHeaderLabels(labels)

    def on_item_changed(self, item: QStandardItem) -> None:
        """
        ëª¨ë¸ ì•„ì´í…œ ë³€ê²½ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.
        Select ì»¬ëŸ¼ì´ ë³€ê²½ë˜ë©´ Select All ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
        """
        if item.column() == 0:  # Select column
            self.update_select_all_state()

        # ë°ì´í„° ë³€ê²½ ì‹œê·¸ë„ ë°œìƒ (Select ì»¬ëŸ¼ ì œì™¸)
        if item.column() != 0:
            self.macro_list_changed.emit()

    def get_macro_list(self) -> List[Dict[str, Any]]:
        """
        í˜„ì¬ ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            List[Dict[str, Any]]: ì»¤ë§¨ë“œ ë°ì´í„° ë¦¬ìŠ¤íŠ¸.
        """
        commands = []
        for row in range(self.cmd_table_model.rowCount()):
            cmd_data = {
                "enabled": self.cmd_table_model.item(row, 0).checkState() == Qt.Checked,
                "prefix": self.cmd_table_model.item(row, 1).checkState() == Qt.Checked,
                "command": self.cmd_table_model.item(row, 2).text(),
                "suffix": self.cmd_table_model.item(row, 3).checkState() == Qt.Checked,
                "hex_mode": self.cmd_table_model.item(row, 4).checkState() == Qt.Checked,
                "delay": self.cmd_table_model.item(row, 5).text()
            }
            commands.append(cmd_data)
        return commands

    def set_macro_list(self, commands: List[Dict[str, Any]]) -> None:
        """
        ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            commands (List[Dict[str, Any]]): ì»¤ë§¨ë“œ ë°ì´í„° ë¦¬ìŠ¤íŠ¸.
        """
        self.cmd_table_model.removeRows(0, self.cmd_table_model.rowCount())
        for cmd in commands:
            self._append_row(
                cmd.get("command", ""),
                cmd.get("prefix", True),
                cmd.get("hex_mode", False),
                cmd.get("suffix", True),
                str(cmd.get("delay", "100")),
                cmd.get("enabled", True)
            )
        self.update_select_all_state()

    def add_dummy_row(self, cmd: str, hex_mode: bool, suffix: bool, delay: str) -> None:
        """í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ ë°ì´í„°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤."""
        self._append_row(cmd, True, hex_mode, suffix, delay)

    def add_cmd_row(self) -> None:
        """ë¹ˆ í–‰ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ì„ íƒëœ í–‰ì´ ìˆìœ¼ë©´ ì˜µì…˜ ë³µì‚¬, ì—†ìœ¼ë©´ ë§ˆì§€ë§‰ í–‰ ì˜µì…˜ ë³µì‚¬."""
        # ê¸°ë³¸ê°’
        cmd = ""
        prefix = True
        hex_mode = False
        suffix = True
        delay = "100"
        enabled = True

        # ì„ íƒëœ í–‰ í™•ì¸
        selected_rows = self.cmd_table.selectionModel().selectedRows()
        target_row = -1

        if selected_rows:
            target_row = selected_rows[-1].row()  # ë§ˆì§€ë§‰ ì„ íƒëœ í–‰
        elif self.cmd_table_model.rowCount() > 0:
            target_row = self.cmd_table_model.rowCount() - 1  # ë§ˆì§€ë§‰ í–‰

        if target_row >= 0:
            # ì˜µì…˜ ë³µì‚¬
            enabled = self.cmd_table_model.item(target_row, 0).checkState() == Qt.Checked
            prefix = self.cmd_table_model.item(target_row, 1).checkState() == Qt.Checked
            cmd = ""
            suffix = self.cmd_table_model.item(target_row, 3).checkState() == Qt.Checked
            hex_mode = self.cmd_table_model.item(target_row, 4).checkState() == Qt.Checked
            delay = self.cmd_table_model.item(target_row, 5).text()

        self._append_row(cmd, prefix, hex_mode, suffix, delay, enabled)

    def _append_row(self, cmd: str, prefix: bool, hex_mode: bool, suffix: bool, delay: str, enabled: bool = True) -> None:
        """
        ìƒˆë¡œìš´ í–‰ì„ ëª¨ë¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.

        Args:
            cmd (str): ëª…ë ¹ì–´.
            prefix (bool): ì ‘ë‘ì‚¬ ì‚¬ìš© ì—¬ë¶€.
            hex_mode (bool): HEX ëª¨ë“œ ì—¬ë¶€.
            suffix (bool): ì ‘ë¯¸ì‚¬ ì‚¬ìš© ì—¬ë¶€.
            delay (str): ì§€ì—° ì‹œê°„.
            enabled (bool): í™œì„±í™” ì—¬ë¶€ (Select).
        """
        row_idx = self.cmd_table_model.rowCount()

        # 0: Select Checkbox
        item_select = QStandardItem()
        item_select.setCheckable(True)
        item_select.setCheckState(Qt.Checked if enabled else Qt.Unchecked)
        item_select.setEditable(False)

        # 1: Prefix Checkbox
        item_prefix = QStandardItem()
        item_prefix.setCheckable(True)
        item_prefix.setCheckState(Qt.Checked if prefix else Qt.Unchecked)
        item_prefix.setEditable(False)

        # 2: Command
        item_cmd = QStandardItem(cmd)

        # 3: Suffix Checkbox
        item_suffix = QStandardItem()
        item_suffix.setCheckable(True)
        item_suffix.setCheckState(Qt.Checked if suffix else Qt.Unchecked)
        item_suffix.setEditable(False)

        # 4: HEX
        item_hex = QStandardItem()
        item_hex.setCheckable(True)
        item_hex.setCheckState(Qt.Checked if hex_mode else Qt.Unchecked)
        item_hex.setEditable(False)

        # 5: Delay
        item_delay = QStandardItem(delay)

        # 6: Send (Placeholder)
        item_send = QStandardItem("")
        item_send.setEditable(False)

        self.cmd_table_model.appendRow([item_select, item_prefix, item_cmd, item_suffix, item_hex, item_delay, item_send])

        # Send ë²„íŠ¼ ì„¤ì •
        self._set_send_button(row_idx)

        # Select All ìƒíƒœ ì—…ë°ì´íŠ¸
        self.update_select_all_state()

    def _set_send_button(self, row: int) -> None:
        """
        í•´ë‹¹ í–‰ì— Send ë²„íŠ¼ì„ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            row (int): í–‰ ì¸ë±ìŠ¤.
        """
        widget = QWidget()
        layout = QHBoxLayout(widget)
        layout.setContentsMargins(2, 2, 2, 2)
        layout.setAlignment(Qt.AlignCenter)

        btn = QPushButton(lang_manager.get_text("macro_list_btn_send"))
        btn.setCursor(Qt.PointingHandCursor)
        # ì´ˆê¸° ìƒíƒœëŠ” ë¹„í™œì„±í™” (í¬íŠ¸ ì—°ê²° ì „)
        btn.setEnabled(False)

        # ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ë²„íŠ¼ì˜ ìœ„ì¹˜ë¥¼ ì°¾ì•„ ì‹œê·¸ë„ ë°œìƒ
        btn.clicked.connect(lambda: self._on_send_btn_clicked(btn))

        layout.addWidget(btn)

        index = self.cmd_table_model.index(row, 6)
        self.cmd_table.setIndexWidget(index, widget)

    def _on_send_btn_clicked(self, btn: QPushButton) -> None:
        """
        Send ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.
        ë²„íŠ¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í–‰ ì¸ë±ìŠ¤ë¥¼ ì°¾ì•„ ì‹œê·¸ë„ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤.

        Args:
            btn (QPushButton): í´ë¦­ëœ ë²„íŠ¼ ê°ì²´.
        """
        # ë²„íŠ¼ì˜ ë¶€ëª¨ ìœ„ì ¯(ì»¨í…Œì´ë„ˆ)ì„ í†µí•´ ìœ„ì¹˜ í™•ì¸
        # btn -> layout -> widget -> table_view
        # viewport mapFromGlobalì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì •í™•í•¨
        pos = self.cmd_table.viewport().mapFromGlobal(btn.mapToGlobal(btn.rect().center()))
        index = self.cmd_table.indexAt(pos)
        if index.isValid():
            self.send_row_requested.emit(index.row())

    def set_send_enabled(self, enabled: bool) -> None:
        """
        ëª¨ë“  Send ë²„íŠ¼ì˜ í™œì„±í™” ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.

        Args:
            enabled (bool): í™œì„±í™” ì—¬ë¶€.
        """
        for row in range(self.cmd_table_model.rowCount()):
            index = self.cmd_table_model.index(row, 6)
            widget = self.cmd_table.indexWidget(index)
            if widget:
                # widgetì€ ì»¨í…Œì´ë„ˆì´ë¯€ë¡œ ê·¸ ì•ˆì˜ ë²„íŠ¼ì„ ì°¾ì•„ì•¼ í•¨
                btn = widget.findChild(QPushButton)
                if btn:
                    btn.setEnabled(enabled)

    def del_cmd_rows(self) -> None:
        """ì„ íƒëœ í–‰ë“¤ì„ ì‚­ì œí•©ë‹ˆë‹¤."""
        rows = sorted(set(index.row() for index in self.cmd_table.selectionModel().selectedRows()), reverse=True)
        for row in rows:
            self.cmd_table_model.removeRow(row)
        self.update_select_all_state()

    def move_cmd_up(self) -> None:
        """ì„ íƒëœ í–‰ë“¤ì„ ìœ„ë¡œ ì´ë™í•©ë‹ˆë‹¤."""
        rows = sorted(set(index.row() for index in self.cmd_table.selectionModel().selectedRows()))
        if not rows or rows[0] == 0:
            return

        # ìœ„ì—ì„œë¶€í„° ìˆœì„œëŒ€ë¡œ ì´ë™í•´ì•¼ ì¸ë±ìŠ¤ê°€ ê¼¬ì´ì§€ ì•ŠìŒ
        for row in rows:
            self._move_row(row, row - 1)

        # ì„ íƒ ìƒíƒœ ë³µêµ¬
        for row in rows:
            self.cmd_table.selectRow(row - 1)

    def move_cmd_down(self) -> None:
        """ì„ íƒëœ í–‰ë“¤ì„ ì•„ë˜ë¡œ ì´ë™í•©ë‹ˆë‹¤."""
        rows = sorted(set(index.row() for index in self.cmd_table.selectionModel().selectedRows()), reverse=True)
        if not rows or rows[0] == self.cmd_table_model.rowCount() - 1:
            return

        # ì•„ë˜ì—ì„œë¶€í„° ì´ë™
        for row in rows:
            self._move_row(row, row + 1)

        # ì„ íƒ ìƒíƒœ ë³µêµ¬
        for row in rows:
            self.cmd_table.selectRow(row + 1)

    def _move_row(self, source_row: int, dest_row: int) -> None:
        """
        í–‰ì„ ì´ë™í•˜ê³  ìœ„ì ¯(ë²„íŠ¼)ì„ ë³µêµ¬í•©ë‹ˆë‹¤.

        Args:
            source_row (int): ì›ë³¸ í–‰ ì¸ë±ìŠ¤.
            dest_row (int): ëŒ€ìƒ í–‰ ì¸ë±ìŠ¤.
        """
        # 0. ì´ë™ ì „ ë²„íŠ¼ ìƒíƒœ ì €ì¥
        is_enabled = False
        index = self.cmd_table_model.index(source_row, 6)
        widget = self.cmd_table.indexWidget(index)
        if widget:
            btn = widget.findChild(QPushButton)
            if btn:
                is_enabled = btn.isEnabled()

        # 1. ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        items = self.cmd_table_model.takeRow(source_row)

        # 2. ìƒˆ ìœ„ì¹˜ì— ì‚½ì…
        self.cmd_table_model.insertRow(dest_row, items)

        # 3. ìœ„ì ¯(ë²„íŠ¼) ë³µêµ¬
        # ì´ë™ ì‹œ ê¸°ì¡´ ìœ„ì ¯ì€ ì‚­ì œë˜ë¯€ë¡œ ìƒˆë¡œ ìƒì„±í•´ì•¼ í•¨
        self._set_send_button(dest_row)

        # 4. ë²„íŠ¼ ìƒíƒœ ë³µì›
        new_index = self.cmd_table_model.index(dest_row, 6)
        new_widget = self.cmd_table.indexWidget(new_index)
        if new_widget:
            new_btn = new_widget.findChild(QPushButton)
            if new_btn:
                new_btn.setEnabled(is_enabled)

    def get_selected_indices(self) -> List[int]:
        """
        ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒëœ í•­ëª©ì˜ ì¸ë±ìŠ¤ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            List[int]: ì„ íƒëœ í–‰ ì¸ë±ìŠ¤ ë¦¬ìŠ¤íŠ¸.
        """
        indices: List[int] = []
        for row in range(self.cmd_table_model.rowCount()):
            item = self.cmd_table_model.item(row, 0)
            if item.checkState() == Qt.Checked:
                indices.append(row)
        return indices

    def on_select_all_changed(self, state: int) -> None:
        """
        Select All ì²´í¬ë°•ìŠ¤ ìƒíƒœ ë³€ê²½ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.

        Args:
            state (int): ì²´í¬ë°•ìŠ¤ ìƒíƒœ (Qt.Checked ë“±).
        """
        if state == Qt.PartiallyChecked:
            # PartiallyChecked ìƒíƒœì—ì„œ í´ë¦­í•˜ë©´ ëª¨ë‘ ì„ íƒìœ¼ë¡œ ë³€ê²½
            self.select_all_chk.setCheckState(Qt.Checked)
        elif state == Qt.Checked:
            self.set_all_checked(True)
        else:  # Qt.Unchecked
            self.set_all_checked(False)

    def save_state(self) -> list:
        """
        í˜„ì¬ ëª…ë ¹ì–´ ëª©ë¡ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            list: ëª…ë ¹ì–´ ëª©ë¡ ë°ì´í„°.
        """
        commands = self.get_macro_list()
        return commands

    def load_state(self, state: list) -> None:
        """
        ì €ì¥ëœ ëª…ë ¹ì–´ ëª©ë¡ì„ ìœ„ì ¯ì— ì ìš©í•©ë‹ˆë‹¤.

        Args:
            state (list): ëª…ë ¹ì–´ ëª©ë¡ ë°ì´í„°.
        """
        if not state:
            return

        self.set_macro_list(state)



    def set_all_checked(self, checked: bool) -> None:
        """
        ëª¨ë“  í•­ëª©ì˜ ì²´í¬ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.

        Args:
            checked (bool): ì²´í¬ ì—¬ë¶€.
        """
        state = Qt.Checked if checked else Qt.Unchecked
        for row in range(self.cmd_table_model.rowCount()):
            item = self.cmd_table_model.item(row, 0)
            item.setCheckState(state)
        self.update_select_all_state()

    def update_select_all_state(self) -> None:
        """Select All ì²´í¬ë°•ìŠ¤ì˜ ìƒíƒœ(ì „ì²´/ë¶€ë¶„/ì—†ìŒ)ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        total = self.cmd_table_model.rowCount()
        if total == 0:
            self.select_all_chk.setCheckState(Qt.Unchecked)
            return

        checked_count = 0
        for row in range(total):
            item = self.cmd_table_model.item(row, 0)
            if item and item.checkState() == Qt.Checked:
                checked_count += 1

        # ì¬ê·€ í˜¸ì¶œ ë°©ì§€ë¥¼ ìœ„í•´ ì‹œê·¸ë„ ì°¨ë‹¨
        self.select_all_chk.blockSignals(True)
        if checked_count == 0:
            self.select_all_chk.setCheckState(Qt.Unchecked)
        elif checked_count == total:
            self.select_all_chk.setCheckState(Qt.Checked)
        else:
            self.select_all_chk.setCheckState(Qt.PartiallyChecked)
        self.select_all_chk.blockSignals(False)
</file>

<file path="view/widgets/status.py">
from PyQt5.QtWidgets import QWidget, QGroupBox, QGridLayout, QLabel
from view.lang_manager import lang_manager

class StatusWidget(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.last_recv_label = None
        self.uptime_label = None
        self.errors_label = None
        self.tx_label = None
        self.recv_label = None
        self.group_box = None
        self.init_ui()
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self):
        layout = QGridLayout()
        layout.setContentsMargins(0, 0, 0, 0)

        self.group_box = QGroupBox(lang_manager.get_text("status_grp_title"))
        gb_layout = QGridLayout()

        self.recv_label = QLabel("RX: 0 B")
        self.tx_label = QLabel("TX: 0 B")
        self.errors_label = QLabel("Errors: 0")
        self.uptime_label = QLabel("Uptime: 00:00:00")
        self.last_recv_label = QLabel("Last RX: [--:--:--.---]")

        gb_layout.addWidget(self.recv_label, 0, 0)
        gb_layout.addWidget(self.tx_label, 0, 1)
        gb_layout.addWidget(self.errors_label, 1, 0)
        gb_layout.addWidget(self.uptime_label, 1, 1)
        gb_layout.addWidget(self.last_recv_label, 2, 0, 1, 2)

        self.group_box.setLayout(gb_layout)
        layout.addWidget(self.group_box, 0, 0)
        self.setLayout(layout)

    def retranslate_ui(self):
        self.group_box.setTitle(lang_manager.get_text("status_grp_title"))

    def update_rx(self, bytes_count: int):
        self.recv_label.setText(f"RX: {self.format_bytes(bytes_count)}")

    def update_tx(self, bytes_count: int):
        self.tx_label.setText(f"TX: {self.format_bytes(bytes_count)}")

    def update_errors(self, count: int):
        self.errors_label.setText(f"Errors: {count}")

    def update_uptime(self, seconds: int):
        m, s = divmod(seconds, 60)
        h, m = divmod(m, 60)
        self.uptime_label.setText(f"Uptime: {h:02d}:{m:02d}:{s:02d}")

    def update_last_rx(self, timestamp: str):
        self.last_recv_label.setText(f"Last RX: [{timestamp}]")

    @staticmethod
    def format_bytes(size: int) -> str:
        power = 2**10
        n = 0
        power_labels = {0 : 'B', 1: 'KB', 2: 'MB', 3: 'GB', 4: 'TB'}
        while size > power:
            size /= power
            n += 1
        return f"{size:.2f} {power_labels[n]}"
</file>

<file path="core/event_bus.py">
from PyQt5.QtCore import QObject, pyqtSignal
from typing import Any, Callable
import logging

class EventBus(QObject):
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì—­ ì´ë²¤íŠ¸ ë²„ìŠ¤ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    Singleton íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    PyQtì˜ Signal/Slot ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤ë ˆë“œ ê°„ ì•ˆì „í•œ í†µì‹ ì„ ì§€ì›í•©ë‹ˆë‹¤.
    """
    _instance = None

    # ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬í•˜ëŠ” ì œë„¤ë¦­ ì‹œê·¸ë„ (topic, data)
    # dataëŠ” ì–´ë–¤ ê°ì²´ë“  ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (Any).
    _event_signal = pyqtSignal(str, object)

    def __new__(cls):
        if cls._instance is None:
            cls._instance = super(EventBus, cls).__new__(cls)
        return cls._instance

    def __init__(self):
        super().__init__()
        if not hasattr(self, '_initialized'):
            self._logger = logging.getLogger("EventBus")
            self._initialized = True

    def publish(self, topic: str, data: Any = None) -> None:
        """
        ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•©ë‹ˆë‹¤.

        Args:
            topic (str): ì´ë²¤íŠ¸ ì£¼ì œ (ì˜ˆ: "port.opened", "rx.data").
            data (Any, optional): ì „ë‹¬í•  ë°ì´í„°. ê¸°ë³¸ê°’ì€ None.
        """
        # self._logger.debug(f"Publishing event: {topic}")
        self._event_signal.emit(topic, data)

    def subscribe(self, topic: str, callback: Callable[[Any], None]) -> None:
        """
        íŠ¹ì • í† í”½ì„ êµ¬ë…í•©ë‹ˆë‹¤.

        ì£¼ì˜: í˜„ì¬ êµ¬í˜„ì—ì„œëŠ” ëª¨ë“  ì´ë²¤íŠ¸ê°€ ë‹¨ì¼ ì‹œê·¸ë„ì„ í†µí•´ ì „ë‹¬ë˜ë¯€ë¡œ,
        ì´ ë©”ì„œë“œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ëŒë‹¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í† í”½ì„ í•„í„°ë§í•©ë‹ˆë‹¤.

        ê¶Œì¥ ì‚¬í•­: ì»´í¬ë„ŒíŠ¸ì—ì„œ `event_bus.signal.connect(self.on_event)`ë¥¼ ì‚¬ìš©í•˜ì—¬
        ì§ì ‘ ì—°ê²°í•˜ê³ , `on_event` ë©”ì„œë“œ ë‚´ì—ì„œ í† í”½ì„ í™•ì¸í•˜ëŠ” ê²ƒì´
        Qtì˜ ìŠ¤ë ˆë“œ ìë™ ì—°ê²°(Auto Connection) ê¸°ëŠ¥ì„ ë” ì˜ í™œìš©í•˜ëŠ” ë°©ë²•ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

        Args:
            topic (str): êµ¬ë…í•  ì´ë²¤íŠ¸ ì£¼ì œ.
            callback (Callable[[Any], None]): ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í˜¸ì¶œë  ì½œë°± í•¨ìˆ˜.
        """
        # ë‹¨ìˆœ ì—°ê²° (í•„í„°ë§ ëŒë‹¤ ì‚¬ìš©)
        self._event_signal.connect(lambda t, d: callback(d) if t == topic else None)

    @property
    def signal(self) -> pyqtSignal:
        """
        ì´ë²¤íŠ¸ ì‹œê·¸ë„ ê°ì²´ì— ì§ì ‘ ì ‘ê·¼í•©ë‹ˆë‹¤.

        Returns:
            pyqtSignal: (topic, data)ë¥¼ ì „ë‹¬í•˜ëŠ” ì‹œê·¸ë„.
        """
        return self._event_signal
</file>

<file path="doc/session_summary_20251201.md">
# 2025-12-01 ê°œë°œ ì„¸ì…˜ ìš”ì•½

## 1. ì„¸ì…˜ ëª©í‘œ

- UI í…Œë§ˆ ì‹œìŠ¤í…œ(Dark/Light) ë° SVG ì•„ì´ì½˜ ì‹œìŠ¤í…œ êµ¬í˜„.
- `PortSettingsWidget` ë° `MacroListWidget` ë ˆì´ì•„ì›ƒ ìµœì í™”.
- í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¬ì •ë¦¬ (`resources/` ë¶„ë¦¬).
- í”„ë¡œì íŠ¸ ë¬¸ì„œ(`CHANGELOG.md`, `README.md` ë“±) ìµœì‹ í™” ë° í•œê¸€í™”.

## 2. ì£¼ìš” ë³€ê²½ ì‚¬í•­

### A. UI/UX ê°œì„  (UI/UX Improvements)

- **PortSettingsWidget**:
  - ê¸°ì¡´ ì„¸ë¡œ ë‚˜ì—´ ë°©ì‹ì—ì„œ **ì»´íŒ©íŠ¸í•œ 2ì¤„ ë ˆì´ì•„ì›ƒ**ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ê³µê°„ íš¨ìœ¨ì„± ê·¹ëŒ€í™”.
  - 1í–‰: Port | Scan | Baud | Open
  - 2í–‰: Data | Parity | Stop | Flow | DTR | RTS
- **MacroListWidget**:
  - **Prefix/Suffix** ì»¬ëŸ¼ ì¶”ê°€ (ê¸°ì¡´ Head/Tail ìš©ì–´ ë³€ê²½).
  - **3ë‹¨ê³„ Select All ì²´í¬ë°•ìŠ¤** êµ¬í˜„ (ì „ì²´ ì„ íƒ/ë¶€ë¶„ ì„ íƒ/ì„ íƒ ì•ˆí•¨).
  - ì„¸ë¡œ ìŠ¤í¬ë¡¤ë°” í•­ìƒ í‘œì‹œ ì •ì±… ì ìš©.
  - ê° í–‰ë³„ **Send** ë²„íŠ¼ ì¶”ê°€.
- **MacroCtrlWidget**:
  - ì „ì—­ ëª…ë ¹ ìˆ˜ì •ì„ ìœ„í•œ **Prefix/Suffix ì…ë ¥ í•„ë“œ** ì¶”ê°€.
  - ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ ë° ìë™ ì‹¤í–‰ ì„¤ì •(Delay, Max Runs) UI êµ¬í˜„.

### B. í…Œë§ˆ ë° ì•„ì´ì½˜ ì‹œìŠ¤í…œ (Theme & Icon System)

- **ThemeManager êµ¬í˜„**:
  - `view/theme_manager.py`ë¥¼ í†µí•´ QSS í…Œë§ˆ ë¡œë”© ë° ë™ì  ì „í™˜ ê´€ë¦¬.
  - **Dark Theme** (`resources/themes/dark_theme.qss`) ë° **Light Theme** (`resources/themes/light_theme.qss`) êµ¬í˜„.
  - **í°íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•** ê¸°ëŠ¥ ì¶”ê°€ (View -> Font ë©”ë‰´).
- **SVG ì•„ì´ì½˜ ì‹œìŠ¤í…œ**:
  - í…Œë§ˆì— ë”°ë¼ ìƒ‰ìƒì´ ìë™ ë³€ê²½ë˜ëŠ” SVG ì•„ì´ì½˜ ì„¸íŠ¸ ì ìš© (`resources/icons/`).
  - ì•„ì´ì½˜: Add, Delete, Up, Down, Close, ComboBox Arrow (White/Black ë³€í˜•).
  - QSSì˜ `objectName` ì„ íƒìë¥¼ í™œìš©í•œ ìë™ ì•„ì´ì½˜ ë¡œë”©.

### C. í”„ë¡œì íŠ¸ êµ¬ì¡° ì¬ì •ë¦¬ (Directory Restructuring)

- ë¦¬ì†ŒìŠ¤ íŒŒì¼ì˜ ê´€ë¦¬ë¥¼ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ë””ë ‰í† ë¦¬ êµ¬ì¡° ë³€ê²½:
  - `view/resources/` â†’ **`resources/`** (ë£¨íŠ¸ ë ˆë²¨ë¡œ ì´ë™)
  - `view/styles/` â†’ **`resources/themes/`**
  - ê´€ë ¨ ì½”ë“œ ë° QSS íŒŒì¼ ë‚´ì˜ ëª¨ë“  ê²½ë¡œ ì°¸ì¡° ì—…ë°ì´íŠ¸ ì™„ë£Œ.

### D. ë¬¸ì„œí™” (Documentation)

- **CHANGELOG.md**: UI êµ¬í˜„ ë° êµ¬ì¡° ë³€ê²½ ì‚¬í•­ì„ í¬í•¨í•˜ì—¬ **í•œê¸€ë¡œ ì‘ì„±**.
- **README.md**: ê°€ìƒ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ ì¶”ê°€ ë° í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¹ì…˜ ì—…ë°ì´íŠ¸.
- **task.md** & **implementation_plan.md**: ì™„ë£Œëœ UI ì‘ì—… ì²´í¬ ë° ë‹¤ìŒ ë‹¨ê³„(Core/Model) ëª…ì‹œ.

## 3. í˜„ì¬ ìƒíƒœ ë° ë‹¤ìŒ ë‹¨ê³„

- **í˜„ì¬ ìƒíƒœ**: UI ë ˆì´ì•„ì›ƒ ë° í…Œë§ˆ ì‹œìŠ¤í…œ êµ¬í˜„ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©°, ë””ë ‰í† ë¦¬ êµ¬ì¡°ê°€ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.
- **ë‹¤ìŒ ë‹¨ê³„**:
  - **Core ìœ í‹¸ë¦¬í‹° êµ¬í˜„**: `RingBuffer`, `ThreadSafeQueue`, `EventBus`.
  - **Model ê³„ì¸µ êµ¬í˜„**: `SerialWorker` (QThread), `PortController`.
  - **Presenter í†µí•©**: UIì™€ ë¡œì§ ì—°ê²° ë° ì‹¤ì œ ì‹œë¦¬ì–¼ í†µì‹  í…ŒìŠ¤íŠ¸.

## 4. ë¹„ê³ 

- ì´ íŒŒì¼ì€ 2025-12-01 ì§„í–‰ëœ UI/UX ê³ ë„í™” ë° í…Œë§ˆ ì‹œìŠ¤í…œ êµ¬í˜„ ì‘ì—…ì„ ìš”ì•½í•œ ê²ƒì…ë‹ˆë‹¤.

---

## 5. ì¶”ê°€ ì„¸ì…˜: ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ (Dual Font System)

### 5.1 ì„¸ì…˜ ëª©í‘œ
- View ê³„ì¸µì˜ í°íŠ¸ ì‹œìŠ¤í…œ ê°œì„ : Proportional/Fixed í°íŠ¸ ë¶„ë¦¬
- Git ë¸Œëœì¹˜ ìƒì„± ë° ì²´ê³„ì ì¸ ë²„ì „ ê´€ë¦¬
- í”„ë¡œì íŠ¸ ë¬¸ì„œ ì—…ë°ì´íŠ¸ ë° ì»¤ë°‹

### 5.2 ì£¼ìš” ë³€ê²½ ì‚¬í•­

#### A. Git ë¸Œëœì¹˜ ê´€ë¦¬
- **ë¸Œëœì¹˜ ìƒì„±**: `feature/dual-font-system` ë¸Œëœì¹˜ ìƒì„±
- **ëª©ì **: View ê³„ì¸µì˜ í°íŠ¸ ì‹œìŠ¤í…œ ê°œì„  ì‘ì—… ê²©ë¦¬

#### B. ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ ì„¤ê³„

**Proportional Font (ê°€ë³€í­ í°íŠ¸)**
- **ì ìš© ëŒ€ìƒ**: ë©”ë‰´, íˆ´ë°”, ìƒíƒœë°”, ë ˆì´ë¸”, ë²„íŠ¼, ê·¸ë£¹ë°•ìŠ¤, íƒ­ ë“± ì¼ë°˜ UI ìš”ì†Œ
- **ê¸°ë³¸ í°íŠ¸**:
  - Windows: "Segoe UI" 9pt
  - Linux: "Ubuntu" 9pt
- **íŠ¹ì§•**: ìì—°ìŠ¤ëŸ¬ìš´ í…ìŠ¤íŠ¸ í‘œì‹œ, UI ìš”ì†Œì— ìµœì í™”

**Fixed Font (ê³ ì •í­ í°íŠ¸)**
- **ì ìš© ëŒ€ìƒ**: TextEdit, LineEdit, CommandListì˜ Command ì»¬ëŸ¼, íŒ¨í‚· ì¸ìŠ¤í™í„° ë“± í…ìŠ¤íŠ¸ ë°ì´í„°
- **ê¸°ë³¸ í°íŠ¸**:
  - Windows: "Consolas" 9pt
  - Linux: "Monospace" 9pt
- **íŠ¹ì§•**: ì •ë ¬ëœ í…ìŠ¤íŠ¸ í‘œì‹œ, ì½”ë“œ/ë°ì´í„° ê°€ë…ì„± í–¥ìƒ

### 5.3 êµ¬í˜„ ê³„íš

**ThemeManager í™•ì¥**
- `set_proportional_font(family: str, size: int)`: Proportional í°íŠ¸ ì„¤ì •
- `set_fixed_font(family: str, size: int)`: Fixed í°íŠ¸ ì„¤ì •
- `get_proportional_font() -> QFont`: Proportional í°íŠ¸ ë°˜í™˜
- `get_fixed_font() -> QFont`: Fixed í°íŠ¸ ë°˜í™˜

**í°íŠ¸ ì„¤ì • ëŒ€í™”ìƒì ê°œì„ **
- Proportional/Fixed í°íŠ¸ ê°œë³„ ì„ íƒ
- ì‹¤ì‹œê°„ í”„ë¦¬ë·° ê¸°ëŠ¥
- í¬ê¸° ì¡°ì ˆ (6pt ~ 16pt)
- ê¸°ë³¸ê°’ ë³µì› ë²„íŠ¼

**QSS í…Œë§ˆ ì‹œìŠ¤í…œ í™•ì¥**
- `.proportional-font` í´ë˜ìŠ¤: ê°€ë³€í­ í°íŠ¸ ì ìš©
- `.fixed-font` í´ë˜ìŠ¤: ê³ ì •í­ í°íŠ¸ ì ìš©
- ëª¨ë“  ìœ„ì ¯ì— ì ì ˆí•œ í°íŠ¸ í´ë˜ìŠ¤ ì ìš©

**ì„¤ì • ì €ì¥/ë³µì›**
- `settings.json`ì— í°íŠ¸ ì •ë³´ ì €ì¥
- ì•± ì¬ì‹œì‘ ì‹œ í°íŠ¸ ì„¤ì • ë³µì›

### 5.4 ë¬¸ì„œ ì—…ë°ì´íŠ¸

**Artifact ë¬¸ì„œ**
- `task.md`: ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ ì‘ì—… í•­ëª© ì¶”ê°€
- `implementation_plan.md`: ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ ìƒì„¸ ì‚¬ì–‘ ì¶”ê°€

**í”„ë¡œì íŠ¸ ë¬¸ì„œ**
- `doc/CHANGELOG.md`: ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ ë³€ê²½ ì´ë ¥ ì¶”ê°€
- `doc/task.md`: ì‘ì—… ëª©ë¡ ë™ê¸°í™”
- `doc/implementation_plan.md`: êµ¬í˜„ ê³„íš ë™ê¸°í™”

### 5.5 ë‹¤ìŒ ë‹¨ê³„ (Next Steps)
1. **ThemeManager í™•ì¥**: í°íŠ¸ ê´€ë¦¬ ë©”ì„œë“œ ì¶”ê°€
2. **í°íŠ¸ ì„¤ì • ëŒ€í™”ìƒì**: UI êµ¬í˜„ ë° ê¸°ëŠ¥ ì—°ë™
3. **QSS ì—…ë°ì´íŠ¸**: í°íŠ¸ í´ë˜ìŠ¤ ì •ì˜ ë° ì ìš©
4. **ìœ„ì ¯ ì—…ë°ì´íŠ¸**: ëª¨ë“  ìœ„ì ¯ì— ì ì ˆí•œ í°íŠ¸ í´ë˜ìŠ¤ ì ìš©
5. **ì„¤ì • ê´€ë¦¬**: í°íŠ¸ ì •ë³´ ì €ì¥/ë³µì› êµ¬í˜„
6. **í…ŒìŠ¤íŠ¸**: í°íŠ¸ ë³€ê²½ ë° ì¬ì‹œì‘ í›„ ë³µì› í™•ì¸
7. **ì»¤ë°‹ ë° ë³‘í•©**: main ë¸Œëœì¹˜ë¡œ ë³‘í•©

## 4. ë¹„ê³ 

- ì´ ì„¸ì…˜ì—ì„œëŠ” ê³„íš ë° ë¬¸ì„œí™” ë‹¨ê³„ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.
- ë‹¤ìŒ ì„¸ì…˜ì—ì„œ ì‹¤ì œ êµ¬í˜„ì„ ì§„í–‰í•  ì˜ˆì •ì…ë‹ˆë‹¤.
- Git ë¸Œëœì¹˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ì—…ì„ ê²©ë¦¬í•˜ê³  ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•©ë‹ˆë‹¤.
</file>

<file path="doc/session_summary_20251202.md">
# 2025-12-02 ê°œë°œ ì„¸ì…˜ ìš”ì•½

## 1. ê°œìš”
ì´ë²ˆ ì„¸ì…˜ì€ SerialTool ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **View ê³„ì¸µ ë§ˆë¬´ë¦¬(View Layer Completion)**, **ë‹¤êµ­ì–´ ì§€ì›(Multilingual Support)**, ê·¸ë¦¬ê³  **ì½”ë“œ í’ˆì§ˆ ê°œì„ (Code Quality Refinement)**ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. ì£¼ìš” ëª©í‘œëŠ” View ê³„ì¸µì„ ì™„ì„±í•˜ê³ , ë‹¤êµ­ì–´ ì§€ì›ì„ êµ¬í˜„í•˜ë©°, ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì˜ í’ˆì§ˆì„ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

## 2. ì£¼ìš” í™œë™

### A. View ê³„ì¸µ ë§ˆë¬´ë¦¬ ë° ë‹¤êµ­ì–´ ì§€ì›

#### ë‹¤êµ­ì–´ ì§€ì› (Phase 1 & 2)
- **LanguageManager í™•ì¥**:
  - 50ê°œ ì´ìƒì˜ UI ë¬¸ìì—´ ì¶”ê°€ (í•œêµ­ì–´/ì˜ì–´)
  - ì–¸ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ ì½”ë“œì—ì„œ JSON íŒŒì¼ë¡œ ë¶„ë¦¬ (`config/languages/en.json`, `ko.json`)
  - ë™ì  ì–¸ì–´ ë³€ê²½ í•¸ë“¤ëŸ¬ êµ¬í˜„ (`on_language_changed`)

- **UI ì»´í¬ë„ŒíŠ¸ ë‹¤êµ­ì–´ ì ìš©**:
  - **MainWindow**: ë©”ë‰´ ì‹œìŠ¤í…œ, ìœˆë„ìš° ì œëª©, ìƒíƒœë°” í•œê¸€í™”
  - **PortSettingsWidget**: í¬íŠ¸, ìŠ¤ìº”, ë³´ë ˆì´íŠ¸ ë²„íŠ¼ ë‹¤êµ­ì–´ ì§€ì›
  - **ManualControlWidget**: ëª¨ë“  ë ˆì´ë¸”, ë²„íŠ¼, íˆ´íŒ ë‹¤êµ­ì–´ ì§€ì›
  - **ReceivedArea**: ë¡œê·¸ ê´€ë ¨ UI ìš”ì†Œ ë‹¤êµ­ì–´ ì§€ì›
  - **MacroListWidget**: í…Œì´ë¸” í—¤ë” ë° ë²„íŠ¼ ë‹¤êµ­ì–´ ì§€ì›
  - **MacroCtrlWidget**: ìŠ¤í¬ë¦½íŠ¸ ê´€ë ¨ UI ë‹¤êµ­ì–´ ì§€ì›
  - **FileProgressWidget**: ì§„í–‰ ìƒíƒœ ë©”ì‹œì§€ ë‹¤êµ­ì–´ ì§€ì›
  - AboutDialog í…ŒìŠ¤íŠ¸
  - FileProgressWidget í…ŒìŠ¤íŠ¸
  - Language switching í…ŒìŠ¤íŠ¸

### B. ì½”ë“œ í’ˆì§ˆ ê°œì„  (ì „ì—­)
- **í•œêµ­ì–´ í˜„ì§€í™”**: ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì— ê±¸ì³ ëª¨ë“  ì½”ë“œ ì£¼ì„ê³¼ Docstringì„ í•œêµ­ì–´ë¡œ ì²´ê³„ì ìœ¼ë¡œ ë²ˆì—­
- **Docstring í‘œì¤€í™”**: ëª¨ë“  ë©”ì„œë“œ ë° í´ë˜ìŠ¤ Docstringì„ ìƒì„¸ ì„¤ëª…, `Args`, `Returns` ì„¹ì…˜ì„ í¬í•¨í•˜ë„ë¡ ì—…ë°ì´íŠ¸
- **íƒ€ì… íŒíŒ…**: í•¨ìˆ˜ ë° ë©”ì„œë“œì— ëˆ„ë½ëœ íƒ€ì… íŒíŠ¸ í™•ì¸ ë° ì¶”ê°€
- **ëŒ€ìƒ íŒŒì¼**:
  - **Core**: `event_bus.py`, `settings_manager.py`, `utils.py`
  - **View**: `theme_manager.py`, `main_window.py`, `color_rules.py`
  - **Widgets**: ëª¨ë“  ìœ„ì ¯ íŒŒì¼
  - **Panels**: ëª¨ë“  íŒ¨ë„ íŒŒì¼
  - **Presenters**: `main_presenter.py`, `port_presenter.py`
  - **Models**: `port_controller.py`, `serial_worker.py`
  - **ê¸°íƒ€**: `main.py`, `version.py`, `tests/test_view.py`

### C. ë²„ê·¸ ìˆ˜ì • ë° ê²¬ê³ ì„± ê°œì„ 
- **êµ¬ë¬¸ ì˜¤ë¥˜ ìˆ˜ì •**:
  - `view/widgets/port_settings.py`: ë‹«íˆì§€ ì•Šì€ ê´„í˜¸ ë° ì¤‘ë³µ import ìˆ˜ì •, í•„ìˆ˜ ë©”ì„œë“œ ë³µì›
  - `view/widgets/packet_inspector.py`: `Optional` import ì¶”ê°€
  - `model/serial_worker.py`: `QObject` import ì¶”ê°€
  - `core/utils.py`: `Any` import ì¶”ê°€, `ThreadSafeQueue` í´ë˜ìŠ¤ ì •ì˜ ë³µì›
  - `view/widgets/command_control.py`: SyntaxError ìˆ˜ì • (ì¤‘ë³µ ì½”ë“œ ì œê±°)

- **ë¡œì§ ì˜¤ë¥˜ ìˆ˜ì •**:
  - `ThemeManager`: `load_theme()` ë©”ì„œë“œì˜ `@staticmethod` ë°ì½”ë ˆì´í„° ì œê±° (NameError ë°©ì§€)
  - `ColorRulesManager`: ì„¤ì • íŒŒì¼ ê²½ë¡œ ê³„ì‚° ì˜¤ë¥˜ ìˆ˜ì •
  - `MainWindow`: Import êµ¬ë¬¸ì„ íŒŒì¼ ìƒë‹¨ìœ¼ë¡œ ì´ë™, `on_language_changed` ë° `_save_window_state` ë©”ì„œë“œ ë³µêµ¬
  - `tests/test_view.py`: `ThemeManager.apply_theme` ì •ì  ë©”ì„œë“œ ì‚¬ìš© ìˆ˜ì •
  - `CommandControl`: ì´ˆê¸°í™” ë¬¸ì œ ìˆ˜ì •
  - `MacroListPanel`: ì´ˆê¸°í™” ìˆœì„œ ë³€ê²½ìœ¼ë¡œ ìƒíƒœ ë³µì› ì‹œ ì˜¤ë¥˜ í•´ê²°

- **ì£¼ìš” ë²„ê·¸ ìˆ˜ì •**:
  - **íƒ­ ì¦ì‹ ë¬¸ì œ**: ì¬ì‹œì‘ ì‹œ í¬íŠ¸ íƒ­ì´ ê³„ì† ì¶”ê°€ë˜ë˜ ë²„ê·¸ ìˆ˜ì •
  - **About Dialog**: êµ¬í˜„ ì™„ë£Œ ë° ë™ì‘ ìˆ˜ì •
  - **manage_lang_keys.py**: JSON íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬ ì¶”ê°€

- **ê²¬ê³ ì„± ê°œì„ **:
  - **í…Œë§ˆ í´ë°±**: `ThemeManager`ì— `_get_fallback_stylesheet` êµ¬í˜„
  - **ì„¤ì • í´ë°±**: `settings.json`ì— ëŒ€í•œ í´ë°± ë©”ì»¤ë‹ˆì¦˜ ê²€ì¦
  - **ì•„ì´ì½˜ ì•ˆì „ì„±**: ì•„ì´ì½˜ íŒŒì¼ ëˆ„ë½ ì‹œ ì¶©ëŒ ë°©ì§€ í™•ì¸

- **ë””ë²„ê·¸ ë¡œê¹…**:
  - ê°œë°œ ì¤‘ ëª¨ë“  ì£¼ìš” ì»´í¬ë„ŒíŠ¸ì— ì €ì¥/ë³µêµ¬ ë””ë²„ê·¸ ë¡œê·¸ ì¶”ê°€
  - ê²€ì¦ ì™„ë£Œ í›„ ë””ë²„ê·¸ ë¡œê·¸ ì œê±°

## 3. ê²°ê³¼
- View ê³„ì¸µì´ ì™„ì „íˆ êµ¬í˜„ë˜ê³  ë‹¤êµ­ì–´ ì§€ì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì½”ë“œë² ì´ìŠ¤ê°€ í•œêµ­ì–´ë¡œ ì™„ì „íˆ ì£¼ì„ ì²˜ë¦¬ë˜ì–´ ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- íƒ€ì… ì•ˆì „ì„± ë° ì½”ë“œ í’ˆì§ˆì´ ì „ë°˜ì ìœ¼ë¡œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í™˜ê²½ ë¬¸ì œ(íŒŒì¼ ëˆ„ë½)ì— ëŒ€í•´ ë” ê²¬ê³ í•´ì¡ŒìŠµë‹ˆë‹¤.
- ëª¨ë“  ìë™í™” í…ŒìŠ¤íŠ¸ì™€ ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
- Command List ë°ì´í„°ê°€ ì˜ì†ì ìœ¼ë¡œ ë³´ì¡´ë©ë‹ˆë‹¤.

## 4. ë‹¤ìŒ ë‹¨ê³„
- Core ìœ í‹¸ë¦¬í‹° êµ¬í˜„ (RingBuffer, ThreadSafeQueue, EventBus)
- Model ê³„ì¸µ êµ¬í˜„ ì‹œì‘
- ì‹¤ì œ ì‹œë¦¬ì–¼ ì¥ì¹˜ë¥¼ ì‚¬ìš©í•œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì§„í–‰
</file>

<file path="doc/session_summary_20251203.md">
# 2025-12-03 ê°œë°œ ì„¸ì…˜ ìš”ì•½

## 1. ê°œìš”
ì´ë²ˆ ì„¸ì…˜ì€ SerialTool ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ì–¸ì–´ í‚¤ í‘œì¤€í™”(Language Key Standardization)** ë° **ë¡œê¹… í”„ë ˆì„ì›Œí¬ êµ¬í˜„(Logging Framework Implementation)**ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. ì£¼ìš” ëª©í‘œëŠ” ëª¨ë“  ì–¸ì–´ í‚¤ë¥¼ ì¼ê´€ëœ ëª…ëª… ê·œì¹™ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ê³ , êµ¬ì¡°í™”ëœ ë¡œê¹… ì‹œìŠ¤í…œì„ ë„ì…í•˜ë©°, ë°œê²¬ëœ UI ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

## 2. ì£¼ìš” í™œë™

### A. ì–¸ì–´ í‚¤ ë¦¬íŒ©í† ë§
- **ëª…ëª… ê·œì¹™ í™•ë¦½**: `[context]_[type]_[name]` í˜•ì‹ìœ¼ë¡œ í‘œì¤€í™”
  - ì˜ˆ: `port_btn_connect`, `manual_chk_hex`, `main_menu_file`
- **ì „ì²´ ì½”ë“œë² ì´ìŠ¤ ì ìš©**:
  - `config/languages/en.json`, `ko.json` ì—…ë°ì´íŠ¸ (192ê°œ í‚¤)
  - ëª¨ë“  UI ì»´í¬ë„ŒíŠ¸ì—ì„œ `lang_manager.get_text()` í˜¸ì¶œ ìˆ˜ì •
  - ì£¼ì„ ì œê±° ë° JSON êµ¬ì¡° ì •ë¦¬
- **ëŒ€ìƒ íŒŒì¼**:
  - **Widgets**: `manual_control.py`, `command_list.py`, `command_control.py`, `received_area.py`, `port_settings.py`, `status_area.py`, `file_progress_widget.py`, `packet_inspector.py`
  - **Panels**: `left_panel.py`, `right_panel.py`
  - **Dialogs**: `font_settings_dialog.py`, `about_dialog.py`, `preferences_dialog.py`
  - **Main**: `main_window.py` (MenuBar ë° StatusBar ë¶„ë¦¬)

### B. ë¡œê¹… í”„ë ˆì„ì›Œí¬ êµ¬í˜„
- **Logger í´ë˜ìŠ¤ ìƒì„±** (`core/logger.py`):
  - ì‹±ê¸€í†¤ íŒ¨í„´ êµ¬í˜„
  - ë¡œê·¸ ë ˆë²¨: DEBUG, INFO, WARNING, ERROR, CRITICAL
  - íŒŒì¼ ë¡œê¹…: RotatingFileHandler (10MB x 5ê°œ)
  - ì½˜ì†” ë¡œê¹…: ìƒ‰ìƒ êµ¬ë¶„
  - íƒ€ì„ìŠ¤íƒ¬í”„ ìë™ ì¶”ê°€
- **ê¸°ì¡´ ì½”ë“œ ì—…ë°ì´íŠ¸**:
  - `view/theme_manager.py`: print ë¬¸ì„ logger í˜¸ì¶œë¡œ êµì²´
  - `view/lang_manager.py`: print ë¬¸ì„ logger í˜¸ì¶œë¡œ êµì²´

### C. UI ê°œì„  ë° ë²„ê·¸ ìˆ˜ì •
- **About Dialog ìˆ˜ì •**:
  - `MainWindow`ì— `AboutDialog` import ì¶”ê°€
  - `open_about_dialog()` ë©”ì„œë“œ êµ¬í˜„
  - ë©”ë‰´ ì‹œê·¸ë„ ì—°ê²° (Help â†’ About)
- **MainWindow êµ¬ì¡° ê°œì„ **:
  - `MainMenuBar` ìœ„ì ¯ìœ¼ë¡œ ë¶„ë¦¬ (`view/widgets/main_menu_bar.py`)
  - `MainStatusBar` ìœ„ì ¯ìœ¼ë¡œ ë¶„ë¦¬ (`view/widgets/main_status_bar.py`)
  - ì½”ë“œ ê°€ë…ì„± ë° ì¬ì‚¬ìš©ì„± í–¥ìƒ

### D. ë„êµ¬ ê°œì„ 
- **manage_lang_keys.py ë¦¬íŒ©í† ë§**:
  - í•˜ë“œì½”ë”©ëœ ëª¨ë“ˆ ë¦¬ìŠ¤íŠ¸ ì œê±°
  - ìë™ ëª¨ë“ˆ íƒì§€ ê¸°ëŠ¥ ì¶”ê°€
  - `__pycache__` ë° `__init__.py` ìë™ ì œì™¸
  - ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì •ë ¬ (main_window â†’ widgets â†’ panels â†’ dialogs)
  - ë” ì´ìƒ ìœ„ì ¯ ì¶”ê°€/ì‚­ì œ ì‹œ ìˆ˜ì • ë¶ˆí•„ìš”

### E. í…ŒìŠ¤íŠ¸ ìë™í™”
- **ìë™í™”ëœ ë²ˆì—­ í…ŒìŠ¤íŠ¸** (`tests/test_ui_translations.py`):
  - 8ê°œ UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
  - ì–¸ì–´ ì „í™˜ ê²€ì¦ (English â†” Korean)
  - 6ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼, 2ê°œ í™˜ê²½ ì´ìŠˆ

## 3. ê²°ê³¼
- ëª¨ë“  ì–¸ì–´ í‚¤ê°€ ì¼ê´€ëœ ëª…ëª… ê·œì¹™ì„ ë”°ë¥´ë©° ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- êµ¬ì¡°í™”ëœ ë¡œê¹… ì‹œìŠ¤í…œìœ¼ë¡œ ë””ë²„ê¹… ë° ì˜¤ë¥˜ ì¶”ì ì´ ìš©ì´í•´ì¡ŒìŠµë‹ˆë‹¤.
- About ë‹¤ì´ì–¼ë¡œê·¸ê°€ ì •ìƒ ë™ì‘í•©ë‹ˆë‹¤.
- ì–¸ì–´ í‚¤ ê´€ë¦¬ê°€ ìë™í™”ë˜ì–´ ê°œë°œ íš¨ìœ¨ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- ì½”ë“œ í’ˆì§ˆ ê°€ì´ë“œì— ì–¸ì–´ í‚¤ ëª…ëª… ê·œì¹™ì´ ë¬¸ì„œí™”ë˜ì—ˆìŠµë‹ˆë‹¤.

## 4. ë‹¤ìŒ ë‹¨ê³„
- âœ… CHANGELOG.md ì—…ë°ì´íŠ¸ ì™„ë£Œ (12/2 ë° 12/3 ì„¸ì…˜ ë‚´ìš© í¬í•¨)
- âœ… session_summary_20251202.md ì—…ë°ì´íŠ¸ ì™„ë£Œ
- ë³€ê²½ ì‚¬í•­ ì»¤ë°‹ ë° í‘¸ì‹œ
- Core ìœ í‹¸ë¦¬í‹° êµ¬í˜„ ì‹œì‘ (RingBuffer, ThreadSafeQueue, EventBus)
</file>

<file path="doc/session_summary_20251209.md">
# ì‘ì—… ì„¸ì…˜ ìš”ì•½ (2025-12-09)

## ì£¼ìš” ì‘ì—… ë‚´ìš©

### 1. ì‹œê·¸ë„ ë„¤ì´ë° ë¦¬íŒ©í† ë§ ë° ì¼ê´€ì„± í™•ë³´
- **MacroCtrlWidget**:
  - `cmd_run_single_requested` â†’ `cmd_run_once_requested` (ë²„íŠ¼ í…ìŠ¤íŠ¸ì™€ ì¼ì¹˜)
  - `cmd_stop_requested` â†’ `cmd_stop_run_requested` (ëª…í™•ì„± í–¥ìƒ)
  - `cmd_auto_start_requested` â†’ `cmd_repeat_start_requested` (ê¸°ëŠ¥ ëª…í™•í™”)
- **PortSettingsWidget**:
  - `scan_requested` â†’ `port_scan_requested` (ì¼ê´€ì„± í™•ë³´)
- **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—…ë°ì´íŠ¸**:
  - `tests/test_view.py` ë° `tests/test_ui_translations.py`ì—ì„œ ë³€ê²½ëœ ìœ„ì ¯ ì´ë¦„ ë° ì‹œê·¸ë„ ë°˜ì˜
  - `ReceivedArea` â†’ `ReceivedAreaWidget` ë“± í´ë˜ìŠ¤ëª… ë³€ê²½ ì‚¬í•­ ì ìš©

### 2. ë²„ê·¸ ìˆ˜ì • ë° ì•ˆì •ì„± ê°œì„ 
- **MainWindow ì´ˆê¸°í™” ì˜¤ë¥˜ ìˆ˜ì •**:
  - `AttributeError: 'MainWindow' object has no attribute 'left_section'` í•´ê²°
  - `_connect_toolbar_signals()` í˜¸ì¶œ ì‹œì ì„ `left_section` ì´ˆê¸°í™” ì´í›„ë¡œ ì´ë™
- **PortController Import ì˜¤ë¥˜ ìˆ˜ì •**:
  - `ModuleNotFoundError: No module named 'serial_worker'` í•´ê²°
  - `from serial_worker import SerialWorker` â†’ `from model.serial_worker import SerialWorker`ë¡œ ê²½ë¡œ ìˆ˜ì •
- **íˆ´ë°” 'Close' ë²„íŠ¼ ë™ì‘ ìˆ˜ì •**:
  - ê¸°ì¡´: `open_current_port` (í† ê¸€)ì— ì—°ê²°ë˜ì–´ ë‹«íŒ í¬íŠ¸ë¥¼ ì—¬ëŠ” ë¬¸ì œ ë°œìƒ
  - ìˆ˜ì •: `close_current_port` ë©”ì„œë“œ ì‹ ì„¤ ë° ì—°ê²° (ì—°ê²°ëœ ìƒíƒœì—ì„œë§Œ ë™ì‘í•˜ë„ë¡ ë¡œì§ ì¶”ê°€)
  - `PortSettingsWidget` ë° `PortPanel`ì— `is_connected()` ë©”ì„œë“œ ì¶”ê°€í•˜ì—¬ ìƒíƒœ í™•ì¸ ë¡œì§ ë³´ê°•

### 3. UI/UX ê°œì„ 
- **ë™ì  ìœˆë„ìš° í¬ê¸° ì¡°ì •**:
  - `MainWindow`ì˜ ìš°ì¸¡ íŒ¨ë„(Right Panel) í† ê¸€ ì‹œ ìœˆë„ìš° í¬ê¸°ê°€ ìë™ìœ¼ë¡œ ì¡°ì •ë˜ë„ë¡ êµ¬í˜„
  - íŒ¨ë„ ìˆ¨ê¹€ ì‹œ: ìœˆë„ìš° ë„ˆë¹„ ê°ì†Œ (íŒ¨ë„ ë„ˆë¹„ë§Œí¼)
  - íŒ¨ë„ í‘œì‹œ ì‹œ: ìœˆë„ìš° ë„ˆë¹„ ì¦ê°€ (ê¸°ë³¸ê°’ 400px)
  - **ì¢Œì¸¡ íŒ¨ë„ í¬ê¸° ìœ ì§€**: `splitter.setSizes()` ì‚¬ìš©í•˜ì—¬ ì¢Œì¸¡ íŒ¨ë„ì´ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ìˆ˜ì •

### 4. ë„¤ì´ë° ë¦¬íŒ©í† ë§ (Command -> Macro)
- **ìš©ì–´ ë³€ê²½**: `Command` â†’ `Macro` (ì‹œìŠ¤í…œ ëª…ë ¹ê³¼ì˜ í˜¼ë™ ë°©ì§€ ë° ê¸°ëŠ¥ ëª…í™•í™”)
- **í´ë˜ìŠ¤ëª… ë³€ê²½**:
  - `CommandListWidget` â†’ `MacroListWidget`
  - `CommandControlWidget` â†’ `MacroControlWidget`
  - `CommandListPanel` â†’ `MacroPanel`
- **íŒŒì¼ëª… ë³€ê²½**:
  - `view/widgets/command_list.py` â†’ `view/widgets/macro_list.py`
  - `view/widgets/command_control.py` â†’ `view/widgets/macro_control.py`
  - `view/panels/command_list_panel.py` â†’ `view/panels/macro_panel.py`

### 5. MVP íŒ¨í„´ ì¤€ìˆ˜ ê°•í™”
- **PreferencesDialog ë¦¬íŒ©í† ë§**:
  - `SettingsManager` ì§ì ‘ ì ‘ê·¼ ì œê±° (MVP íŒ¨í„´ ìœ„ë°˜ í•´ê²°)
  - Presenter(`MainWindow`)ë¥¼ í†µí•´ ì„¤ì •ì„ ì „ë‹¬ë°›ì•„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
  - `_get_setting()` í—¬í¼ ë©”ì„œë“œ ì¶”ê°€: ì¤‘ì²©ëœ ì„¤ì • í‚¤(`"settings.theme"`) ì•ˆì „ ì ‘ê·¼
  - View ê³„ì¸µì´ Model ê³„ì¸µì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ ê°œì„ 
- **ì„¤ì • í‚¤ êµ¬ì¡° ì •ë¦¬**:
  - `PreferencesDialog`ì— `port_newline` ì„¤ì • ì¶”ê°€
  - `main_presenter.py`ì—ì„œ ì„¤ì • í‚¤ ë§¤í•‘ ì—…ë°ì´íŠ¸ (`port_baudrate`, `port_scan_interval` ë“±)

### 6. ì™„ì„±ë„ ê°œì„  (Polish)
- **ì–¸ì–´ í‚¤ ì™„ì„±**:
  - `MainToolBar`: ëª¨ë“  ì•¡ì…˜ì— ì–¸ì–´ í‚¤ ì ìš© (`toolbar_open`, `toolbar_close`, `toolbar_clear`, `toolbar_save_log`, `toolbar_settings`)
  - `MainMenuBar`: ë©”ë‰´ ì•¡ì…˜ì— ì–¸ì–´ í‚¤ ì ìš© (`main_menu_open_port`, `main_menu_close_tab`, `main_menu_save_log`, `main_menu_toggle_right_panel`)
  - `MacroCtrlWidget`: Pause ë²„íŠ¼ ì¶”ê°€ ë° ì–¸ì–´ í‚¤ ì ìš© (`macro_ctrl_btn_repeat_pause`)
  - í•œêµ­ì–´/ì˜ì–´ ì–¸ì–´ íŒŒì¼ì— ëª¨ë“  í‚¤ ì¶”ê°€
- **TODO ì£¼ì„ ì •ë¦¬**:
  - ëª¨ë“  TODO ì£¼ì„ì„ Noteë¡œ ë³€ê²½í•˜ê³  í–¥í›„ êµ¬í˜„ ê³„íš ëª…ì‹œ
  - `macro_panel.py`: Repeat íŒŒë¼ë¯¸í„° ì „ë‹¬ ë°©ì‹ ì„¤ëª…
  - `port_presenter.py`, `main_presenter.py`: ìƒíƒœë°” ì—ëŸ¬ í‘œì‹œ ê³„íš
  - `received_area.py`: ì •ê·œì‹ ê²€ìƒ‰ ì§€ì› ê³„íš
- **í…Œë§ˆ ë©”ë‰´ ê°œì„ **:
  - View -> Theme ë©”ë‰´ì— í˜„ì¬ ì„ íƒëœ í…Œë§ˆ ì²´í¬ í‘œì‹œ ì¶”ê°€
  - `MainMenuBar.set_current_theme()` ë©”ì„œë“œ ì¶”ê°€
  - í…Œë§ˆ ì•¡ì…˜ì„ checkableë¡œ ì„¤ì •
- **ìš°ì¸¡ íŒ¨ë„ í† ê¸€ ê°œì„ **:
  - íŒ¨ë„ ìˆ¨ê¹€ ì‹œ ì™¼ìª½ íŒ¨ë„ ë„ˆë¹„ ì €ì¥ (`_saved_left_width`)
  - íŒ¨ë„ í‘œì‹œ ì‹œ ì €ì¥ëœ ì™¼ìª½ íŒ¨ë„ ë„ˆë¹„ ë³µì›
  - ì¢Œì¸¡ íŒ¨ë„ í¬ê¸°ê°€ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ê°œì„ 
- **QSS ìŠ¤íƒ€ì¼ í™•ì¥**:
  - `warning` í´ë˜ìŠ¤ ì¶”ê°€ (ë…¸ë€ìƒ‰ ë²„íŠ¼ ìŠ¤íƒ€ì¼)
  - Pause ë²„íŠ¼ì— warning ìŠ¤íƒ€ì¼ ì ìš©
  - Dark/Light í…Œë§ˆ ëª¨ë‘ì— warning ìŠ¤íƒ€ì¼ ì •ì˜

## ë³€ê²½ëœ íŒŒì¼
- `view/widgets/macro_ctrl.py`: (êµ¬ command_control.py) Pause ë²„íŠ¼ ì¶”ê°€, ì‹œê·¸ë„ ë¦¬ë„¤ì„
- `view/widgets/macro_list.py`: (êµ¬ command_list.py) ìƒˆë¡œ ìƒì„±, ì™„ì „í•œ êµ¬í˜„
- `view/panels/macro_panel.py`: (êµ¬ command_list_panel.py) í´ë˜ìŠ¤ëª… ë³€ê²½, Note ì£¼ì„ ì¶”ê°€
- `view/widgets/main_toolbar.py`: ì–¸ì–´ í‚¤ ì ìš©
- `view/sections/main_menu_bar.py`: ì–¸ì–´ í‚¤ ì ìš©, í…Œë§ˆ ì²´í¬ í‘œì‹œ ê¸°ëŠ¥ ì¶”ê°€
- `view/widgets/port_settings.py`: ì‹œê·¸ë„ ë¦¬ë„¤ì„, `is_connected` ì¶”ê°€
- `view/panels/port_panel.py`: `is_connected` ì¶”ê°€
- `view/sections/main_left_section.py`: `open/close_current_port` ë¡œì§ ê°œì„ 
- `view/main_window.py`: ìš°ì¸¡ íŒ¨ë„ í† ê¸€ ê°œì„ , í…Œë§ˆ ì²´í¬ í‘œì‹œ ì—…ë°ì´íŠ¸
- `view/dialogs/preferences_dialog.py`: MVP íŒ¨í„´ ì¤€ìˆ˜, `_get_setting()` ì¶”ê°€
- `view/widgets/received_area.py`: Note ì£¼ì„ ì¶”ê°€
- `presenter/main_presenter.py`: ì„¤ì • í‚¤ ë§¤í•‘ ì—…ë°ì´íŠ¸, Note ì£¼ì„ ì¶”ê°€
- `presenter/port_presenter.py`: Note ì£¼ì„ ì¶”ê°€
- `model/port_controller.py`: Import ê²½ë¡œ ìˆ˜ì •
- `tests/test_view.py`: í…ŒìŠ¤íŠ¸ ì½”ë“œ ìµœì‹ í™” (MacroListWidget ë°˜ì˜)
- `tests/test_ui_translations.py`: í…ŒìŠ¤íŠ¸ ì½”ë“œ ìµœì‹ í™” (MacroListWidget ë°˜ì˜)
- `config/languages/en.json`: ì–¸ì–´ í‚¤ ì¶”ê°€ (toolbar, menu, macro_ctrl, pref)
- `config/languages/ko.json`: ì–¸ì–´ í‚¤ ì¶”ê°€ (toolbar, menu, macro_ctrl, pref)
- `config/settings.json`: ì„¤ì • í‚¤ êµ¬ì¡° ì—…ë°ì´íŠ¸
- `resources/themes/common.qss`: warning í´ë˜ìŠ¤ ì¶”ê°€
- `resources/themes/dark_theme.qss`: warning ìŠ¤íƒ€ì¼ ì •ì˜
- `resources/themes/light_theme.qss`: warning ìŠ¤íƒ€ì¼ ì •ì˜

## ë‹¤ìŒ ë‹¨ê³„ (Next Steps)
- **Presenter ê³„ì¸µ ì™„ì„±**: Modelê³¼ View ì—°ë™ ê°•í™”
- **SerialWorker í†µí•©**: ì‹¤ì œ ì‹œë¦¬ì–¼ í†µì‹  ê¸°ëŠ¥ êµ¬í˜„
- **Macro ìë™í™” ì—”ì§„**: Repeat ì‹¤í–‰ ë¡œì§ êµ¬í˜„
- **íŒŒì¼ ì „ì†¡ ê¸°ëŠ¥**: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì „ì†¡ ë° ì§„í–‰ë¥  í‘œì‹œ
</file>

<file path="guide/code_style_guide.md">
# SerialTool ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” SerialTool í”„ë¡œì íŠ¸ì˜ ì½”ë”© í‘œì¤€ ë° ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¼ì¸ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ì´ ê°€ì´ë“œë¼ì¸ì„ ì¤€ìˆ˜í•¨ìœ¼ë¡œì¨ ì½”ë“œì˜ ì¼ê´€ì„±, ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

## 1. ì¼ë°˜ Python í‘œì¤€
- **PEP 8**: Python ì½”ë“œì— ëŒ€í•œ í‘œì¤€ [PEP 8](https://peps.python.org/pep-0008/) ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¥¼ ë”°ë¦…ë‹ˆë‹¤.
- **ë“¤ì—¬ì“°ê¸°**: ë“¤ì—¬ì“°ê¸°ì—ëŠ” 4ê°œì˜ ê³µë°±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. íƒ­(Tab)ì€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- **ì¤„ ê¸¸ì´**: ê°€ëŠ¥í•œ í•œ ì¤„ ê¸¸ì´ë¥¼ 79ìë¡œ ì œí•œí•˜ì§€ë§Œ, ë³µì¡í•œ í‘œí˜„ì‹ì´ë‚˜ ê¸´ ë¬¸ìì—´ì˜ ê²½ìš° ìµœëŒ€ 100ìê¹Œì§€ í—ˆìš©ë©ë‹ˆë‹¤.
- **Import**:
    - í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ importë¥¼ ê°€ì¥ ë¨¼ì € ì‘ì„±í•©ë‹ˆë‹¤.
    - ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ importë¥¼ ë‘ ë²ˆì§¸ë¡œ ì‘ì„±í•©ë‹ˆë‹¤ (ì˜ˆ: PyQt5, serial).
    - ë¡œì»¬ ì• í”Œë¦¬ì¼€ì´ì…˜ importë¥¼ ë§ˆì§€ë§‰ì— ì‘ì„±í•©ë‹ˆë‹¤.
    - ì™€ì¼ë“œì¹´ë“œ import (`from module import *`)ëŠ” í”¼í•©ë‹ˆë‹¤.

## 2. í•œê¸€í™” (Localization)
- **ì£¼ì„**: ëª¨ë“  ì½”ë“œ ì£¼ì„ì€ **í•œêµ­ì–´**ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.
- **Docstring**: ëª¨ë“  Docstringì€ **í•œêµ­ì–´**ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.
- **ì»¤ë°‹ ë©”ì‹œì§€**: Git ì»¤ë°‹ ë©”ì‹œì§€ëŠ” **í•œêµ­ì–´**ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

## 3. ì£¼ì„ ë° Docstrings

**ì£¼ì„ ì‘ì„±ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œëŠ” ë³„ë„ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:**

ğŸ‘‰ **[ì£¼ì„ ê°€ì´ë“œ (Comment Guide)](comment_guide.md)**

### 3.1 ê¸°ë³¸ ì›ì¹™
- **ì–¸ì–´**: ëª¨ë“  ì£¼ì„ ë° Docstringì€ **í•œêµ­ì–´**ë¡œ ì‘ì„±
- **í˜•ì‹**: Google Style Docstring ì‚¬ìš©
- **íƒ€ì… íŒíŠ¸**: í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— íƒ€ì… íŒíŠ¸ í•„ìˆ˜

### 3.2 ê°„ë‹¨í•œ ì˜ˆì‹œ

```python
def get_available_ports() -> List[str]:
    """ì‚¬ìš© ê°€ëŠ¥í•œ ì‹œë¦¬ì–¼ í¬íŠ¸ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤

    Returns:
        List[str]: í¬íŠ¸ ì´ë¦„ ë¦¬ìŠ¤íŠ¸
    """
    # êµ¬í˜„ ë‚´ìš©...
```

> [!NOTE]
> ëª¨ë“ˆ Docstringì˜ WHY/WHAT/HOW êµ¬ì¡°, ë³µì¡í•œ í•¨ìˆ˜ ì‘ì„±ë²•, ì¸ë¼ì¸ ì£¼ì„ ê·œì¹™ ë“± ìƒì„¸í•œ ë‚´ìš©ì€ [ì£¼ì„ ê°€ì´ë“œ](comment_guide.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.


## 4. íƒ€ì… íŒíŒ… (Type Hinting)
- **í•„ìˆ˜**: ëª¨ë“  í•¨ìˆ˜ ì¸ìˆ˜ ë° ë°˜í™˜ ê°’ì— ëŒ€í•´ íƒ€ì… íŒíŠ¸ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤.
- **Typing ëª¨ë“ˆ**: ë³µì¡í•œ íƒ€ì…ì˜ ê²½ìš° `typing` ëª¨ë“ˆ(ì˜ˆ: `List`, `Dict`, `Optional`, `Any`)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- **í´ë˜ìŠ¤ íƒ€ì…**: ì ì ˆí•œ ê²½ìš° í´ë˜ìŠ¤ ì´ë¦„ì„ íƒ€ì… íŒíŠ¸ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ
```python
from typing import List, Optional

def get_available_ports() -> List[str]:
    """
    ì‚¬ìš© ê°€ëŠ¥í•œ ì‹œë¦¬ì–¼ í¬íŠ¸ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

    Returns:
        List[str]: í¬íŠ¸ ì´ë¦„ ë¦¬ìŠ¤íŠ¸.
    """
    # êµ¬í˜„ ë‚´ìš©...
```

## 5. ëª…ëª… ê·œì¹™ (Naming Conventions)

ìì„¸í•œ ëª…ëª… ê·œì¹™ì€ [**Naming Convention Guide**](../guide/naming_convention.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### 5.1 ê¸°ë³¸ ê·œì¹™ ìš”ì•½
- **í´ë˜ìŠ¤**: `PascalCase` (ì˜ˆ: `SerialManager`, `MainWindow`)
- **í•¨ìˆ˜/ë©”ì„œë“œ**: `snake_case` (ì˜ˆ: `connect_port`, `update_ui`)
- **ë³€ìˆ˜**: `snake_case` (ì˜ˆ: `port_name`, `is_connected`)
- **ìƒìˆ˜**: `UPPER_CASE` (ì˜ˆ: `DEFAULT_BAUDRATE`, `MAX_RETRIES`)
- **ë¹„ê³µê°œ ë©¤ë²„**: `_prefix` (ì˜ˆ: `_internal_helper`, `_buffer`)
- **ì–¸ì–´ í‚¤**: `[context]_[type]_[name]` í˜•ì‹ (ì˜ˆ: `port_btn_connect`, `manual_ctrl_chk_hex`)

> [!NOTE]
> ì–¸ì–´ í‚¤ì˜ ìƒì„¸ ê·œì¹™, íŠ¹ìˆ˜ ì¼€ì´ìŠ¤, ì ìš© ê°€ì´ë“œëŠ” ë³„ë„ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.


## 6. Git ê´€ë¦¬ (Git Management)

**Git ì‚¬ìš©ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œëŠ” ë³„ë„ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:**

ğŸ‘‰ **[Git ê´€ë¦¬ ê°€ì´ë“œ (Git Guide)](git_guide.md)**

### 6.1 í•µì‹¬ ìš”ì•½
- **ì–¸ì–´**: ì»¤ë°‹ ë©”ì‹œì§€, PR, ì´ìŠˆëŠ” **í•œêµ­ì–´**ë¡œ ì‘ì„±
- **ì»¤ë°‹ ì£¼ê¸°**: ìµœì†Œ **í•˜ë£¨ 1íšŒ ì´ìƒ** ê¶Œì¥
- **ë©”ì‹œì§€ í˜•ì‹**: `íƒœê·¸: ì œëª©` (ì˜ˆ: `Feat: ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„`)

### 6.2 ì£¼ìš” íƒœê·¸
- `Feat`: ê¸°ëŠ¥ ì¶”ê°€
- `Fix`: ë²„ê·¸ ìˆ˜ì •
- `Docs`: ë¬¸ì„œ ìˆ˜ì •
- `Refactor`: ë¦¬íŒ©í† ë§

> [!TIP]
> ì»¤ë°‹ ìˆ˜ì •(amend), ë˜ëŒë¦¬ê¸°(reset/revert), ì„ì‹œ ì €ì¥(stash) ë“± ìœ ìš©í•œ ì‹¤ë¬´ ëª…ë ¹ì–´ëŠ” [Git ê´€ë¦¬ ê°€ì´ë“œ](git_guide.md)ì˜ **ì‹¤ë¬´ Git ë ˆì‹œí”¼** ì„¹ì…˜ì„ í™•ì¸í•˜ì„¸ìš”.

## 7. í”„ë¡œì íŠ¸ êµ¬ì¡° (Project Structure)
- **Core**: í•µì‹¬ ë¡œì§ ë° ìœ í‹¸ë¦¬í‹° (`core/`).
- **Model**: ë°ì´í„° ëª¨ë¸ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (`model/`).
- **View**: UI ì»´í¬ë„ŒíŠ¸ ë° ìœ„ì ¯ (`view/`).
- **Presenter**: Viewì™€ Modelì„ ì—°ê²°í•˜ëŠ” ë¡œì§ (`presenter/`).
- **Resources**: í…Œë§ˆ ë° ì•„ì´ì½˜ê³¼ ê°™ì€ ì •ì  ìì‚° (`resources/`).
- **Config**: êµ¬ì„± íŒŒì¼ (`config/`).
</file>

<file path="model/port_controller.py">
from PyQt5.QtCore import QObject, pyqtSignal
from typing import Optional
from model.serial_worker import SerialWorker
from core.utils import ThreadSafeQueue

class PortController(QObject):
    """
    ì‹œë¦¬ì–¼ í¬íŠ¸ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ê³  í¬íŠ¸ ì„¤ì •ì„ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    Presenterì™€ SerialWorker ì‚¬ì´ì˜ ë¸Œë¦¬ì§€ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

    Signals:
        port_opened(str): í¬íŠ¸ê°€ ì—´ë ¸ì„ ë•Œ ë°œìƒ (í¬íŠ¸ ì´ë¦„)
        port_closed(str): í¬íŠ¸ê°€ ë‹«í˜”ì„ ë•Œ ë°œìƒ (í¬íŠ¸ ì´ë¦„)
        error_occurred(str): ì—ëŸ¬ ë°œìƒ ì‹œ ë°œìƒ (ì—ëŸ¬ ë©”ì‹œì§€)
        data_received(bytes): ë°ì´í„° ìˆ˜ì‹  ì‹œ ë°œìƒ (ìˆ˜ì‹  ë°ì´í„°)
    """
    # ì‹œê·¸ë„ ì •ì˜
    port_opened = pyqtSignal(str)
    port_closed = pyqtSignal(str)
    error_occurred = pyqtSignal(str)
    data_received = pyqtSignal(bytes)

    def __init__(self) -> None:
        """
        PortControllerë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
        SerialWorkerì™€ ì†¡ì‹  íë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
        """
        super().__init__()
        self.worker: Optional[SerialWorker] = None
        self.tx_queue = ThreadSafeQueue()
        self._port_name = ""
        self._baudrate = 115200

    @property
    def is_open(self) -> bool:
        """
        í¬íŠ¸ê°€ ì—´ë ¤ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

        Returns:
            bool: í¬íŠ¸ê°€ ì—´ë ¤ìˆê³  ì‘ë™ ì¤‘ì´ë©´ True, ì•„ë‹ˆë©´ False.
        """
        return self.worker is not None and self.worker.isRunning()

    def open_port(self, port_name: str, baudrate: int) -> bool:
        """
        ì‹œë¦¬ì–¼ í¬íŠ¸ë¥¼ ì—½ë‹ˆë‹¤.

        Args:
            port_name (str): í¬íŠ¸ ì´ë¦„ (ì˜ˆ: 'COM3', '/dev/ttyUSB0').
            baudrate (int): í†µì‹  ì†ë„ (ì˜ˆ: 115200).

        Returns:
            bool: ì„±ê³µ ì‹œ True, ì‹¤íŒ¨ ì‹œ False.
        """
        if self.is_open:
            self.error_occurred.emit("Port is already open.")
            return False

        self._port_name = port_name
        self._baudrate = baudrate

        self.worker = SerialWorker(port_name, baudrate)

        # ì‹œê·¸ë„ ì—°ê²°
        self.worker.port_opened.connect(self.port_opened)
        self.worker.port_closed.connect(self.port_closed)
        self.worker.error_occurred.connect(self.error_occurred)
        self.worker.data_received.connect(self.data_received)

        self.worker.start()
        return True

    def close_port(self) -> None:
        """
        ì‹œë¦¬ì–¼ í¬íŠ¸ë¥¼ ë‹«ìŠµë‹ˆë‹¤.
        SerialWorkerë¥¼ ì •ì§€ì‹œí‚¤ê³  ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.
        """
        if self.worker:
            self.worker.stop()
            self.worker = None

    def send_data(self, data: bytes) -> None:
        """
        ì‹œë¦¬ì–¼ í¬íŠ¸ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.

        Args:
            data (bytes): ì „ì†¡í•  ë°”ì´íŠ¸ ë°ì´í„°.
        """
        if self.is_open and self.worker:
            self.worker.write_data(data)
        else:
            self.error_occurred.emit("Port is not open.")

    def set_dtr(self, state: bool) -> None:
        """
        DTR(Data Terminal Ready) ì‹ í˜¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            state (bool): Trueë©´ í™œì„±í™”, Falseë©´ ë¹„í™œì„±í™”.
        """
        if self.is_open and self.worker:
            self.worker.set_dtr(state)

    def set_rts(self, state: bool) -> None:
        """
        RTS(Request To Send) ì‹ í˜¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            state (bool): Trueë©´ í™œì„±í™”, Falseë©´ ë¹„í™œì„±í™”.
        """
        if self.is_open and self.worker:
            self.worker.set_rts(state)
</file>

<file path="tools/check_lang_keys.py">
import re
try:
    import commentjson as json
except ImportError:
    import json
from pathlib import Path

# view í´ë”ì˜ ëª¨ë“  .py íŒŒì¼ì—ì„œ get_text í˜¸ì¶œì„ ì°¾ê¸°
root_dir = Path(__file__).parent.parent
view_dir = root_dir / "view"
used_keys = set()

for py_file in view_dir.rglob("*.py"):
    content = py_file.read_text(encoding='utf-8')
    # get_text("key") ë˜ëŠ” get_text('key') íŒ¨í„´ ì°¾ê¸°
    matches = re.findall(r'get_text\(["\']([^"\']+)["\']\)', content)
    used_keys.update(matches)

# JSON íŒŒì¼ì˜ í‚¤ë“¤ ì½ê¸°
en_json = root_dir / "config/languages/en.json"
ko_json = root_dir / "config/languages/ko.json"

en_keys = set(json.loads(en_json.read_text(encoding='utf-8')).keys())
ko_keys = set(json.loads(ko_json.read_text(encoding='utf-8')).keys())

# ë¹„êµ
print("=== ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ì§€ë§Œ JSONì— ì—†ëŠ” í‚¤ ===")
missing_in_en = used_keys - en_keys
missing_in_ko = used_keys - ko_keys

if missing_in_en:
    print(f"\nen.jsonì— ì—†ëŠ” í‚¤ ({len(missing_in_en)}ê°œ):")
    for key in sorted(missing_in_en):
        print(f"  - {key}")
else:
    print("\nen.json: ëª¨ë“  í‚¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤!")

if missing_in_ko:
    print(f"\nko.jsonì— ì—†ëŠ” í‚¤ ({len(missing_in_ko)}ê°œ):")
    for key in sorted(missing_in_ko):
        print(f"  - {key}")
else:
    print("\nko.json: ëª¨ë“  í‚¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤!")

print("\n=== JSONì—ëŠ” ìˆì§€ë§Œ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ ===")
unused_in_en = en_keys - used_keys
unused_in_ko = ko_keys - used_keys

if unused_in_en:
    print(f"\nen.jsonì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ ({len(unused_in_en)}ê°œ):")
    for key in sorted(unused_in_en):
        print(f"  - {key}")

if unused_in_ko:
    print(f"\nko.jsonì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ ({len(unused_in_ko)}ê°œ):")
    for key in sorted(unused_in_ko):
        print(f"  - {key}")

print(f"\n=== í†µê³„ ===")
print(f"ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ëŠ” í‚¤: {len(used_keys)}ê°œ")
print(f"en.jsonì˜ í‚¤: {len(en_keys)}ê°œ")
print(f"ko.jsonì˜ í‚¤: {len(ko_keys)}ê°œ")
</file>

<file path="view/panels/packet_inspector_panel.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout
from typing import Optional
from view.lang_manager import lang_manager
from view.widgets.packet_inspector import PacketInspectorWidget

class PacketInspectorPanel(QWidget):
    """
    PacketInspectorWidgetì„ ê°ì‹¸ëŠ” íŒ¨ë„ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    Section -> Panel -> Widget ê³„ì¸µ êµ¬ì¡°ë¥¼ ì¤€ìˆ˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
    """

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        super().__init__(parent)
        self.packet_inspector_widget = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ íˆ´íŒ ì—…ë°ì´íŠ¸ ë“±ì„ ìœ„í•´ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)

        self.packet_inspector_widget = PacketInspectorWidget()
        layout.addWidget(self.packet_inspector_widget)

        self.setLayout(layout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        # íŒ¨ë„ ìì²´ì˜ íˆ´íŒì´ë‚˜ íƒ€ì´í‹€ì´ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ ì—…ë°ì´íŠ¸
        # í˜„ì¬ëŠ” RightSectionì—ì„œ íƒ­ íˆ´íŒì„ ê´€ë¦¬í•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ìœ„ì ¯ ë‚´ë¶€ ê°±ì‹ ë§Œ íŠ¸ë¦¬ê±°ë  ìˆ˜ ìˆìŒ
        pass

    def setToolTip(self, text: str) -> None:
        """íŒ¨ë„ì˜ íˆ´íŒì„ ì„¤ì •í•©ë‹ˆë‹¤ (ì£¼ë¡œ íƒ­ íˆ´íŒìš©)."""
        super().setToolTip(text)
</file>

<file path="view/panels/port_tab_panel.py">
from PyQt5.QtWidgets import QTabWidget, QWidget, QTabBar, QInputDialog
from PyQt5.QtCore import pyqtSignal
from PyQt5.QtGui import QIcon
from typing import Optional, TYPE_CHECKING
from view.lang_manager import lang_manager
from view.theme_manager import ThemeManager
from view.panels.port_panel import PortPanel

class PortTabPanel(QTabWidget):
    """
    í¬íŠ¸ íƒ­ë“¤ì„ ê´€ë¦¬í•˜ëŠ” íŒ¨ë„ì…ë‹ˆë‹¤.
    íƒ­ ì¶”ê°€/ì‚­ì œ ë° '+' íƒ­ ê¸°ëŠ¥ì„ ìº¡ìŠí™”í•©ë‹ˆë‹¤.
    """

    # ì‹œê·¸ë„ ì •ì˜
    tab_added = pyqtSignal(object)  # ìƒˆ íƒ­ì´ ì¶”ê°€ë˜ì—ˆì„ ë•Œ (íŒ¨ë„ ì „ë‹¬)

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        super().__init__(parent)
        self.setTabsClosable(True)
        self.tabCloseRequested.connect(self.close_port_tab)
        self.currentChanged.connect(self.on_tab_changed)
        self.setToolTip(lang_manager.get_text("left_tooltip_port_tab"))

        # íƒ­ë°”ì—ì„œ ë”ë¸”í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ìœ„í•´ ì´ë²¤íŠ¸ í•„í„° ì„¤ì¹˜
        self.tabBar().installEventFilter(self)

        # ì´ˆê¸°í™”
        self.add_plus_tab()

        # ì–¸ì–´ ë³€ê²½ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def retranslate_ui(self) -> None:
        self.setToolTip(lang_manager.get_text("left_tooltip_port_tab"))

    def eventFilter(self, obj, event):
        """íƒ­ë°” ë”ë¸”í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•©ë‹ˆë‹¤."""
        if obj == self.tabBar() and event.type() == event.MouseButtonDblClick:
            # ë”ë¸”í´ë¦­ëœ íƒ­ ì¸ë±ìŠ¤ ì°¾ê¸°
            index = self.tabBar().tabAt(event.pos())
            if 0 <= index < self.count() - 1:  # í”ŒëŸ¬ìŠ¤ íƒ­ ì œì™¸
                self.edit_tab_name(index)
                return True
        return super().eventFilter(obj, event)

    def edit_tab_name(self, index: int) -> None:
        """íƒ­ ì´ë¦„ì„ ìˆ˜ì •í•©ë‹ˆë‹¤."""
        from view.panels.port_panel import PortPanel

        widget = self.widget(index)
        if not isinstance(widget, PortPanel):
            return

        current_name = widget.get_custom_name()
        new_name, ok = QInputDialog.getText(
            self,
            "Edit Tab Name",
            "Enter custom name:",
            text=current_name
        )

        if ok and new_name and new_name != current_name:
            widget.set_custom_name(new_name)

    def add_plus_tab(self) -> None:
        """íƒ­ ì¶”ê°€ë¥¼ ìœ„í•œ '+' íƒ­ì„ ìƒì„±í•©ë‹ˆë‹¤."""
        # ë¹ˆ ìœ„ì ¯ ì¶”ê°€
        self.addTab(QWidget(), "")

        self.update_plus_tab_icon()

        # ë§ˆì§€ë§‰ íƒ­(+)ì€ ë‹«ê¸° ë²„íŠ¼ ì œê±°
        index = self.count() - 1
        self.tabBar().setTabButton(index, QTabBar.RightSide, None)
        self.tabBar().setTabButton(index, QTabBar.LeftSide, None)

    def update_plus_tab_icon(self) -> None:
        """í”ŒëŸ¬ìŠ¤ íƒ­ì˜ ì•„ì´ì½˜ì„ í…Œë§ˆì— ë§ì¶° ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        count = self.count()
        if count == 0:
            return

        index = count - 1
        theme_manager = ThemeManager()
        icon = theme_manager.get_icon("add")

        if icon.isNull():
             self.setTabText(index, "+")
             self.setTabIcon(index, QIcon())
        else:
             self.setTabIcon(index, icon)
             self.setTabText(index, "")

    def close_port_tab(self, index: int) -> None:
        """íƒ­ ë‹«ê¸° ìš”ì²­ ì²˜ë¦¬"""
        # ë§ˆì§€ë§‰ íƒ­(+)ì€ ë‹«ì„ ìˆ˜ ì—†ìŒ
        if index == self.count() - 1:
            return

        # ìµœì†Œ 1ê°œì˜ í¬íŠ¸ íƒ­ì€ ìœ ì§€ (í”ŒëŸ¬ìŠ¤ íƒ­ ì œì™¸)
        # countê°€ 2ì´ë©´ [í¬íŠ¸íƒ­1ê°œ, +íƒ­] ì´ë¯€ë¡œ ì‚­ì œ ë¶ˆê°€
        if self.count() <= 2:
            return

        # ì‹œê·¸ë„ ì°¨ë‹¨í•˜ì—¬ íƒ­ ì‚­ì œ ì‹œ on_tab_changedê°€ í˜¸ì¶œë˜ì§€ ì•Šë„ë¡ í•¨
        self.blockSignals(True)
        try:
            self.removeTab(index)

            # ì‚­ì œ í›„ ì ì ˆí•œ íƒ­ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
            # í”ŒëŸ¬ìŠ¤ íƒ­ì´ ì•„ë‹Œ íƒ­ìœ¼ë¡œ ì´ë™
            if self.count() > 1:  # í”ŒëŸ¬ìŠ¤ íƒ­ ì™¸ì— ë‹¤ë¥¸ íƒ­ì´ ìˆìœ¼ë©´
                # ì‚­ì œëœ íƒ­ì˜ ì´ì „ íƒ­ìœ¼ë¡œ ì´ë™ (ë˜ëŠ” 0ë²ˆ íƒ­)
                new_index = max(0, index - 1)
                self.setCurrentIndex(new_index)
            # else: í”ŒëŸ¬ìŠ¤ íƒ­ë§Œ ë‚¨ì€ ê²½ìš°ëŠ” ê·¸ëŒ€ë¡œ ë‘ 
        finally:
            self.blockSignals(False)

    def on_tab_changed(self, index: int) -> None:
        """íƒ­ ë³€ê²½ ì‹œ ì²˜ë¦¬"""
        if index == -1: return

        # ë§ˆì§€ë§‰ íƒ­(+)ì„ í´ë¦­í•˜ë©´ ìƒˆ íƒ­ ì¶”ê°€
        if index == self.count() - 1:
            self.add_new_port_tab()

    def add_new_port_tab(self) -> "PortPanel":
        """ìƒˆë¡œìš´ í¬íŠ¸ íƒ­ì„ ì¶”ê°€í•˜ê³  íŒ¨ë„ì„ ë°˜í™˜í•©ë‹ˆë‹¤."""
        # ì‹œê·¸ë„ ì°¨ë‹¨ (íƒ­ ì¡°ì‘ ì¤‘ ë¶ˆí•„ìš”í•œ ì´ë²¤íŠ¸ ë°©ì§€)
        self.blockSignals(True)
        try:
            # 1. ê¸°ì¡´ í”ŒëŸ¬ìŠ¤ íƒ­ ì œê±° (í•­ìƒ ë§ˆì§€ë§‰ì— ìˆìŒ)
            count = self.count()
            if count > 0:
                self.removeTab(count - 1)

            # 2. ìƒˆ íŒ¨ë„ ì¶”ê°€ (ë‹«ê¸° ë²„íŠ¼ ìë™ ìƒì„±ë¨)
            panel = PortPanel()
            initial_title = panel.get_tab_title()
            self.addTab(panel, initial_title)

            # íƒ­ ì œëª© ë³€ê²½ ì‹œê·¸ë„ ì—°ê²°
            panel.tab_title_changed.connect(lambda title, p=panel: self._on_panel_title_changed(p, title))

            # 3. í”ŒëŸ¬ìŠ¤ íƒ­ ë‹¤ì‹œ ì¶”ê°€
            self.add_plus_tab()

            # 4. ìƒˆ íƒ­ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
            # í”ŒëŸ¬ìŠ¤ íƒ­ì´ ì¶”ê°€ë˜ì—ˆìœ¼ë¯€ë¡œ ìƒˆ íƒ­ì€ count-2 ì¸ë±ìŠ¤ì„
            new_tab_index = self.count() - 2
            self.setCurrentIndex(new_tab_index)

        finally:
            self.blockSignals(False)

        # ì‹œê·¸ë„ ì°¨ë‹¨ í•´ì œ í›„ ë³€ê²½ ì•Œë¦¼ (í•„ìš” ì‹œ)
        # self.currentChanged.emit(self.currentIndex())

        self.tab_added.emit(panel)
        return panel

    def _on_panel_title_changed(self, panel: "PortPanel", title: str) -> None:
        """íŒ¨ë„ì˜ íƒ­ ì œëª©ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤."""
        index = self.indexOf(panel)
        if index >= 0:
            self.setTabText(index, title)
</file>

<file path="view/sections/main_right_section.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout, QTabWidget
from typing import Optional
from view.lang_manager import lang_manager

from view.panels.macro_panel import MacroPanel
from view.panels.packet_inspector_panel import PacketInspectorPanel

class MainRightSection(QWidget):
    """
    MainWindowì˜ ìš°ì¸¡ ì˜ì—­ì„ ë‹´ë‹¹í•˜ëŠ” íŒ¨ë„ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    Macro Listì™€ Packet Inspectorë¥¼ íƒ­ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
    """

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        RightSectionì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.packet_inspector = None
        self.macro_panel = None
        self.tabs = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)

        self.tabs = QTabWidget()

        self.macro_panel = MacroPanel()
        self.macro_panel.setToolTip(lang_manager.get_text("right_tooltip_macro_list"))

        self.packet_inspector = PacketInspectorPanel()
        self.packet_inspector.setToolTip(lang_manager.get_text("right_tooltip_packet"))

        self.tabs.addTab(self.macro_panel, lang_manager.get_text("right_tab_macro_list"))
        self.tabs.addTab(self.packet_inspector, lang_manager.get_text("right_tab_packet"))

        layout.addWidget(self.tabs)
        self.setLayout(layout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.macro_panel.setToolTip(lang_manager.get_text("right_macro_panel_tooltip"))
        self.packet_inspector.setToolTip(lang_manager.get_text("right_packet_inspector_tooltip"))

        self.tabs.setTabText(0, lang_manager.get_text("right_tab_macro_list"))
        self.tabs.setTabText(1, lang_manager.get_text("right_tab_packet"))

    def save_state(self) -> None:
        """íŒ¨ë„ ìƒíƒœë¥¼ ì €ì¥í•©ë‹ˆë‹¤."""
        self.macro_panel.save_state()
        # PacketInspector ìƒíƒœ ì €ì¥ë„ í•„ìš”í•˜ë‹¤ë©´ ì—¬ê¸°ì— ì¶”ê°€
</file>

<file path="view/sections/main_status_bar.py">
from PyQt5.QtWidgets import QStatusBar, QLabel, QProgressBar
from PyQt5.QtCore import Qt
from view.lang_manager import lang_manager

class MainStatusBar(QStatusBar):
    """
    ë©”ì¸ ìœˆë„ìš°ì˜ ìƒíƒœë°”ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    """
    def __init__(self, parent=None):
        super().__init__(parent)
        self.init_ui()

    def init_ui(self) -> None:
        """ìƒíƒœë°” ì´ˆê¸°í™”"""
        self.showMessage(lang_manager.get_text("main_status_msg_ready"))
        self.init_widgets()

    def init_widgets(self):
        # 1. Port Label
        self.port_label = QLabel("Port: -- â—‹")
        self.addPermanentWidget(self.port_label)

        # 2. RX Speed
        self.recv_label = QLabel("RX: 0 KB/s")
        self.addPermanentWidget(self.recv_label)

        # 3. TX Speed
        self.tx_label = QLabel("TX: 0 KB/s")
        self.addPermanentWidget(self.tx_label)

        # 4. BPS
        self.bps_label = QLabel("BPS: 0")
        self.addPermanentWidget(self.bps_label)

        # 5. Buffer Bar
        self.buffer_bar = QProgressBar()
        self.buffer_bar.setMaximum(100)
        self.buffer_bar.setMaximumWidth(100)
        self.buffer_bar.setFormat("Buffer: %p%")
        self.buffer_bar.setAlignment(Qt.AlignCenter)
        self.addPermanentWidget(self.buffer_bar)

        # 6. Time Label
        self.time_label = QLabel("00:00:00")
        self.addPermanentWidget(self.time_label)

    def update_port_status(self, port: str, connected: bool):
        status_symbol = "â—" if connected else "â—‹"
        color = "green" if connected else "gray"
        self.port_label.setText(f"Port: {port} <span style='color:{color}'>{status_symbol}</span>")

    def update_recv_speed(self, bytes_per_sec: int):
        speed = bytes_per_sec / 1024
        self.recv_label.setText(f"RX: {speed:.1f} KB/s")

    def update_tx_speed(self, bytes_per_sec: int):
        speed = bytes_per_sec / 1024
        self.tx_label.setText(f"TX: {speed:.1f} KB/s")

    def update_buffer(self, percent: int):
        self.buffer_bar.setValue(percent)
        if percent >= 80:
            self.buffer_bar.setStyleSheet("QProgressBar::chunk { background-color: red; }")
        else:
            self.buffer_bar.setStyleSheet("")

    def update_time(self, time_str: str):
        self.time_label.setText(time_str)

    def show_message(self, message: str, timeout: int = 0) -> None:
        """
        ìƒíƒœë°”ì— ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

        Args:
            message (str): í‘œì‹œí•  ë©”ì‹œì§€
            timeout (int): ë©”ì‹œì§€ í‘œì‹œ ì‹œê°„ (ms). 0ì´ë©´ ê³„ì† í‘œì‹œ.
        """
        self.showMessage(message, timeout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ ìƒíƒœë°” í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        # (ì„ì‹œ ë©”ì‹œì§€ê°€ ë– ìˆëŠ” ê²½ìš°ëŠ” ê·¸ëŒ€ë¡œ ë‘ )
        current_msg = self.currentMessage()
        if not current_msg or lang_manager.text_matches_key(current_msg, "main_status_msg_ready"):
            self.showMessage(lang_manager.get_text("main_status_msg_ready"))
</file>

<file path="view/widgets/main_toolbar.py">
from PyQt5.QtWidgets import QToolBar, QAction
from PyQt5.QtCore import Qt, pyqtSignal
from view.lang_manager import lang_manager

class MainToolBar(QToolBar):
    open_requested = pyqtSignal()
    close_requested = pyqtSignal()
    clear_requested = pyqtSignal()
    save_log_requested = pyqtSignal()
    settings_requested = pyqtSignal()

    def __init__(self, parent=None):
        super().__init__(parent)
        self.settings_action = None
        self.save_log_action = None
        self.clear_action = None
        self.close_action = None
        self.open_action = None
        self.setMovable(False)
        self.setToolButtonStyle(Qt.ToolButtonTextUnderIcon)
        self.init_ui()
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self):
        self.clear()

        # Open
        self.open_action = QAction(lang_manager.get_text("toolbar_open"), self)
        self.open_action.triggered.connect(self.open_requested.emit)
        self.addAction(self.open_action)

        # Close
        self.close_action = QAction(lang_manager.get_text("toolbar_close"), self)
        self.close_action.triggered.connect(self.close_requested.emit)
        self.addAction(self.close_action)

        # Clear
        self.clear_action = QAction(lang_manager.get_text("toolbar_clear"), self)
        self.clear_action.triggered.connect(self.clear_requested.emit)
        self.addAction(self.clear_action)

        # Save Log
        self.save_log_action = QAction(lang_manager.get_text("toolbar_save_log"), self)
        self.save_log_action.triggered.connect(self.save_log_requested.emit)
        self.addAction(self.save_log_action)

        # Settings
        self.settings_action = QAction(lang_manager.get_text("toolbar_settings"), self)
        self.settings_action.triggered.connect(self.settings_requested.emit)
        self.addAction(self.settings_action)

    def retranslate_ui(self):
        self.open_action.setText(lang_manager.get_text("toolbar_open"))
        self.close_action.setText(lang_manager.get_text("toolbar_close"))
        self.clear_action.setText(lang_manager.get_text("toolbar_clear"))
        self.save_log_action.setText(lang_manager.get_text("toolbar_save_log"))
        self.settings_action.setText(lang_manager.get_text("toolbar_settings"))
</file>

<file path=".gitignore">
# Python
__pycache__/
*.py[cod]
*$py.class

# C extensions
*.so

# Distribution / packaging
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
share/python-wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# PyInstaller
#  Usually these files are written by a python script from a template
#  before PyInstaller builds the exe, so as to inject date/other infos into it.
*.manifest
*.spec

# Installer logs
pip-log.txt
pip-delete-this-directory.txt

# Unit test / coverage reports
htmlcov/
.tox/
.nox/
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.py,cover
.hypothesis/
.pytest_cache/
cover/

# Translations
*.mo
*.pot

# Django stuff:
*.log
local_settings.py
db.sqlite3
db.sqlite3-journal

# Flask stuff:
instance/
.webassets-cache

# Scrapy stuff:
.scrapy

# Sphinx documentation
docs/_build/

# PyBuilder
.pybuilder/

# Jupyter Notebook
.ipynb_checkpoints

# IPython
profile_default/
ipython_config.py

# pyenv
.python-version

# pipenv
#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.
#   However, in case of collaboration, if having platform-specific dependencies or dependencies
#   having no cross-platform support, pipenv may install dependencies that don't work, or not
#   install all needed dependencies.
#Pipfile.lock

# poetry
#   Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control.
#   This is especially recommended for binary dependencies to ensure reproducible builds.
#poetry.lock

# PEP 582; used by e.g. github.com/David-OConnor/pyflow
__pypackages__/

# Celery stuff
celerybeat-schedule
celerybeat.pid

# SageMath parsed files
*.sage.py

# Environments
.env
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# Spyder project settings
.spyderproject
.spyproject

# Rope project settings
.ropeproject

# mkdocs documentation
/site

# mypy
.mypy_cache/
.dmypy.json
dmypy.json

# Pyre type checker
.pyre/

# pytype static type analyzer
.pytype/

# Cython debug symbols
cython_debug/

# IDE
.vscode/
.idea/

# OS
.DS_Store
Thumbs.db

# ETC
*.bak
*ë³µì‚¬ë³¸*
*repomix*

# Ignore folder (practice/test files)
ignore/
</file>

<file path="doc/session_summary_20251205.md">
# 2025-12-05 ê°œë°œ ì„¸ì…˜ ìš”ì•½

## 1. ê°œìš”
ì´ë²ˆ ì„¸ì…˜ì€ **ì•„í‚¤í…ì²˜ ê°œì„ (Architecture Refinement)** ë° **ì½”ë“œ í’ˆì§ˆ í–¥ìƒ(Code Quality Improvement)**ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. ì£¼ìš” ëª©í‘œëŠ” MVP íŒ¨í„´ ì¤€ìˆ˜, ë¬¸ì„œ í†µí•©, ì‹±ê¸€í†¤ íŒ¨í„´ ê°œì„ , ê·¸ë¦¬ê³  ì„¤ì • êµ¬ì¡° ë¦¬íŒ©í† ë§ì´ì—ˆìŠµë‹ˆë‹¤.

## 2. ì£¼ìš” í™œë™

### A. MVP ì•„í‚¤í…ì²˜ ë¦¬íŒ©í† ë§
- **ë¬¸ì œ ì‹ë³„**:
  - `ManualControlWidget.on_send_clicked()`ì—ì„œ `SettingsManager`ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨
  - View ê³„ì¸µì´ ì„¤ì • ê´€ë¦¬ ì˜ì¡´ì„±ì„ ê°€ì§€ëŠ” ì•„í‚¤í…ì²˜ ìœ„ë°˜

- **í•´ê²° ë°©ì•ˆ**:
  - Viewì—ì„œ `SettingsManager` import ë° ì‚¬ìš© ì™„ì „ ì œê±°
  - `send_command_requested` ì‹œê·¸ë„ ë³€ê²½: `(text, hex_mode, with_enter)` â†’ `(text, hex_mode, use_prefix, use_suffix)`
  - ViewëŠ” ì›ë³¸ í…ìŠ¤íŠ¸ì™€ ì²´í¬ë°•ìŠ¤ ìƒíƒœë§Œ ì „ë‹¬
  - `MainPresenter.on_send_command_requested()` ë©”ì„œë“œì—ì„œ prefix/suffix ì²˜ë¦¬ ë¡œì§ ìˆ˜í–‰
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 40+ ë¼ì¸ì„ Presenterë¡œ ì´ë™

- **ê²°ê³¼**:
  - View ê³„ì¸µì˜ ì±…ì„ ë²”ìœ„ ëª…í™•í™” (UIë§Œ ë‹´ë‹¹)
  - Presenter ê³„ì¸µì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì§‘ì¤‘ ê´€ë¦¬
  - MVP íŒ¨í„´ ì¤€ìˆ˜ë¥¼ í†µí•œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± í–¥ìƒ

### B. ì½”ë“œ í’ˆì§ˆ ê°œì„  (3ê°€ì§€)

#### 1. ë„¤ì´ë° ê·œì¹™ ë¬¸ì„œ í†µí•©
- **ë³€ê²½ ì‚¬í•­**:
  - `docs/naming_convention.md` ìƒì„±: ëª¨ë“  ë„¤ì´ë° ê·œì¹™ì„ í•˜ë‚˜ì˜ ë¬¸ì„œë¡œ í†µí•©
    - ê¸°ë³¸ ê·œì¹™: í´ë˜ìŠ¤(PascalCase), í•¨ìˆ˜/ë©”ì„œë“œ(snake_case), ë³€ìˆ˜(snake_case), ìƒìˆ˜(UPPER_CASE), ë¹„ê³µê°œ ë©¤ë²„(_prefix)
    - ì–¸ì–´ í‚¤ ê·œì¹™: `[context]_[type]_[name]` í˜•ì‹, ìƒì„¸ ì˜ˆì‹œ ë° íŠ¹ìˆ˜ ì¼€ì´ìŠ¤
  - `doc/code_style_guide.md` ê°„ì†Œí™”: 50+ ë¼ì¸ì„ ìš”ì•½ê³¼ ì°¸ì¡° ë§í¬ë¡œ ëŒ€ì²´

- **ì´ì **:
  - ë‹¨ì¼ ì†ŒìŠ¤ ì›ì¹™(Single Source of Truth) ì ìš©
  - ë¬¸ì„œ ê´€ë¦¬ ì¼ì›í™” ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

#### 2. Logger ì‹±ê¸€í†¤ íŒ¨í„´ ê°œì„ 
- **ê¸°ì¡´ ë¬¸ì œ**:
  ```python
  def __init__(self):
      if Logger._instance is not None:
          raise Exception("This class is a singleton!")  # âŒ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¤‘ë‹¨ ìœ„í—˜
  ```

- **ê°œì„  ë‚´ìš©**:
  ```python
  def __new__(cls):
      if cls._instance is None:
          cls._instance = super(Logger, cls).__new__(cls)
      return cls._instance

  def __init__(self):
      if self._initialized:
          return  # âœ… ì•ˆì „í•˜ê²Œ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
  ```

- **ì´ì **:
  - `Logger()` ë‹¤ì¤‘ í˜¸ì¶œ ì‹œì—ë„ ì˜ˆì™¸ ì—†ì´ ë™ì¼ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
  - `SettingsManager`ì™€ ë™ì¼í•œ íŒ¨í„´ ì ìš©ìœ¼ë¡œ ì¼ê´€ì„± í™•ë³´

#### 3. ì„¤ì • í‚¤ ì¼ê´€ì„± í™•ë³´
- **ë¬¸ì œ**: `settings.json`(`theme`, `language`)ê³¼ ì½”ë“œ ë‚´ë¶€(`menu_theme`, `menu_language`) ê°„ì˜ í‚¤ ë¶ˆì¼ì¹˜ë¡œ í˜¼ë€ ë°œìƒ
- **í•´ê²°**:
  - `SettingsManager` Fallback ì„¤ì •: `menu_theme`, `menu_language` ì‚¬ìš©
  - `PreferencesDialog`: `menu_theme`, `menu_language` í‚¤ë¡œ ì‹œê·¸ë„ ì „ì†¡
  - `MainWindow`: `settings_map`ì„ í†µí•´ ë‚´ë¶€ í‚¤ë¥¼ `global.theme`, `global.language` ì„¤ì • ê²½ë¡œë¡œ ì˜¬ë°”ë¥´ê²Œ ë§¤í•‘
- **ì´ì **: ì„¤ì • íë¦„ì˜ ì¼ê´€ì„± ë° ì•ˆì •ì„± í™•ë³´

#### 4. ì„¤ì • êµ¬ì¡° ë¦¬íŒ©í† ë§
- **ê¸°ì¡´ ë¬¸ì œ**:
  - ëª¨ë“  ì„¤ì •ì´ `global.*` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— í‰íƒ„í•˜ê²Œ ì €ì¥
  - ì˜ˆ: `global.default_baudrate`, `global.command_prefix`, `global.log_path` ë“±

- **ê°œì„  ë‚´ìš©**:
  - ë…¼ë¦¬ì  ê·¸ë£¹ë³„ë¡œ ì„¤ì • ë¶„ë¦¬:
    - `global.*`: í…Œë§ˆ, ì–¸ì–´ (ì „ì—­ ì„¤ì •)
    - `ui.*`: í°íŠ¸, ìœˆë„ìš° í¬ê¸°, ë¡œê·¸ ë¼ì¸ ìˆ˜
    - `serial.*`: ê¸°ë³¸ ë³´ë ˆì´íŠ¸, ìŠ¤ìº” ê°„ê²©
    - `command.*`: prefix, suffix
    - `logging.*`: ë¡œê·¸ ê²½ë¡œ

  - `view/main_window.py` ìˆ˜ì •:
    - `apply_preferences()`ì— settings_map ì¶”ê°€
    - ê° ì„¤ì •ì„ ì ì ˆí•œ ê·¸ë£¹ìœ¼ë¡œ ë§¤í•‘

  - `presenter/main_presenter.py` ìˆ˜ì •:
    - `global.command_prefix` â†’ `command.prefix`
    - `global.command_suffix` â†’ `command.suffix`

  - `config/settings.json` ì¬êµ¬ì¡°í™”

- **ì´ì **:
  - ë…¼ë¦¬ì  ê·¸ë£¹í™”ë¡œ ì„¤ì • ê´€ë¦¬ ìš©ì´
  - ì¥ê¸° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
  - ì„¤ì • íŒŒì¼ ê°€ë…ì„± ê°œì„ 

### C. ë¬¸ì„œí™” ë° ê°€ì´ë“œ ê°œì„ 

#### 1. README.md ì—…ë°ì´íŠ¸
- **ë³€ê²½ ì‚¬í•­**:
  - í”„ë¡œì íŠ¸ ì„¤ëª… í™•ì¥: Serial í†µì‹ ë¿ë§Œ ì•„ë‹ˆë¼ í–¥í›„ SPI, I2C ë“± ë‹¤ì–‘í•œ í”„ë¡œí† ì½œ ì§€ì› ëª…ì‹œ
  - í´ë” êµ¬ì¡° ì •ë¦¬:
    - `guide/` í´ë”ë¡œ ê°œë°œ ê°€ì´ë“œ ë¶„ë¦¬
    - ì¤‘ë³µ íŒŒì¼ ì œê±° (`doc/naming_convention.md` â†’ `guide/naming_convention.md`ë¡œ í†µì¼)
  - í–¥í›„ ê³„íš ìƒì„¸í™”:
    - ë‹¨ê¸° (Current Sprint): Command List ìë™í™”, íŒŒì¼ ì „ì†¡, íŒ¨í‚· íŒŒì„œ
    - ì¤‘ì¥ê¸° (Future): í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ, **í†µì‹  í”„ë¡œí† ì½œ í™•ì¥** (SPI/I2C ì§€ì›, FT4222 ì¹© ë“±)
  - ë¬¸ì„œ ì°¸ì¡° í‘œ ë³´ê°•: ì½”ë”© ê·œì¹™, ëª…ëª… ê·œì¹™ ì¶”ê°€
  - Git ê´€ë¦¬ ê°€ì´ë“œ ê°•í™”: ì§€ì†ì  ë°±ì—… ê¶Œì¥ ëª…ì‹œ

- **ì´ì **:
  - í”„ë¡œì íŠ¸ ë¹„ì „ ëª…í™•í™” (Serial ì „ìš© â†’ ë²”ìš© í†µì‹  ë„êµ¬)
  - ë¬¸ì„œ êµ¬ì¡° ê°œì„  ë° ì¤‘ë³µ ì œê±°
  - ê°œë°œì ì˜¨ë³´ë”© ìë£Œ ê°•í™”

#### 2. ì£¼ì„ ê°€ì´ë“œ ë¬¸ì„œ ìƒì„±
- **ìƒì„±ëœ íŒŒì¼**: `guide/comment_guide.md`
- **ë‚´ìš©**:
  - Google Style Docstring í‘œì¤€ ì±„íƒ ì´ìœ  ë° ì •ì˜
  - ê³µì‹ ë¬¸ì„œ ë§í¬: [Google Python Style Guide - Docstrings](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)
  - ëª¨ë“ˆ Docstring: WHY/WHAT/HOW ì„¹ì…˜ êµ¬ì¡°
  - í´ë˜ìŠ¤/í•¨ìˆ˜ Docstring: Args/Returns/Raises/Examples ì„¹ì…˜
  - íƒ€ì… íŒíŠ¸ ê¶Œì¥ ë°©ì‹ (í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ìš°ì„ )
  - ì¸ë¼ì¸ ì£¼ì„ ê·œì¹™:
    - ê¸´ ë©”ì„œë“œ: ë¸”ë¡ ì£¼ì„ìœ¼ë¡œ ë…¼ë¦¬ì  ë‹¨ìœ„ êµ¬ë¶„
    - ë¶„ê¸°ë¬¸: ë¹„ì¦ˆë‹ˆìŠ¤ ì‹œë‚˜ë¦¬ì˜¤ ëª…ì‹œ
    - ìˆ˜ì‹/ìƒìˆ˜: ì˜ë¯¸, ì¶œì²˜, ì •ì˜ ì„¤ëª…
    - íŠ¹ìˆ˜ íƒœê·¸: TODO/FIXME/NOTE
  - MkDocs ìë™ ë¬¸ì„œí™” ì„¤ì •
  - ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œê³µ

- **code_style_guide.md ê°„ì†Œí™”**:
  - Docstring ìƒì„¸ ë‚´ìš© ì œê±° (117ì¤„ â†’ 31ì¤„)
  - `comment_guide.md` ì°¸ì¡° ë§í¬ë¡œ ëŒ€ì²´

- **ì´ì **:
  - ì£¼ì„ ì‘ì„± í‘œì¤€ ëª…í™•í™”
  - ìë™ ë¬¸ì„œí™” ë„êµ¬ í˜¸í™˜ì„± í™•ë³´
  - ë¬¸ì„œ ê´€ë¦¬ ì¼ì›í™” (ì£¼ì„ ê°€ì´ë“œ ë…ë¦½)

#### 3. Git ê´€ë¦¬ ê°€ì´ë“œ ë¬¸ì„œ ìƒì„±
- **ìƒì„±ëœ íŒŒì¼**: `guide/git_guide.md`
- **ë‚´ìš©**:
  - ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™: íƒœê·¸ë³„ ìƒì„¸ ì˜ˆì‹œ, Body/Footer ì‘ì„±ë²•
  - ì›Œí¬í”Œë¡œìš°: ë¸Œëœì¹˜ ì „ëµ, PR/ì´ìŠˆ í…œí”Œë¦¿
  - **ì‹¤ë¬´ Git ë ˆì‹œí”¼**:
    - ì‹¤ìˆ˜ ìˆ˜ìŠµ (Amend, Reset, Revert)
    - ì„ì‹œ ì €ì¥ (Stash)
    - ë¡œê·¸ í™•ì¸ ë° íŒŒì¼ ë¬´ì‹œ
- **ì´ì **:
  - íŒ€ ë‚´ ë²„ì „ ê´€ë¦¬ ê·œì¹™ í†µì¼
  - ì‹¤ë¬´ íŒ ê³µìœ ë¡œ Git í™œìš© ëŠ¥ë ¥ í–¥ìƒ

#### 4. View êµ¬í˜„ ê³„íš ë³´ê°•
- **íŒŒì¼**: `view/doc/implementation_plan.md`
- **ì¶”ê°€ ë‚´ìš©**:
  - ì„¹ì…˜ 11: Packet Inspector ì„¤ì • (Preferences ë‹¤ì´ì–¼ë¡œê·¸ íƒ­)
  - Parser íƒ€ì… ì„ íƒ: Auto Detect, AT Parser, Delimiter Parser, Fixed Length Parser, Raw Parser
  - Delimiter ì„¤ì •: ê¸°ë³¸ê°’ (`\r\n`, `0xFF`, `0x7E`) + ì‚¬ìš©ì ì •ì˜
  - Fixed Length ì„¤ì •: íŒ¨í‚· ê¸¸ì´ (1-4096 ë°”ì´íŠ¸)
  - AT Parser ìƒ‰ìƒ ê·œì¹™: OK/ERROR/URC/Prompt ìƒ‰ìƒ ì„¤ì •
  - Inspector ë™ì‘ ì˜µì…˜: ë²„í¼ í¬ê¸°, ì‹¤ì‹œê°„ ì¶”ì , ìë™ ìŠ¤í¬ë¡¤
  - UI ë ˆì´ì•„ì›ƒ ì •ì˜ (QRadioButton, QListWidget, QSpinBox, QCheckBox, QComboBox)
  - ì„¤ì • ì €ì¥ ê²½ë¡œ: `config/settings.json` â†’ `parser.*` ì„¹ì…˜

- **ìš°ì„ ìˆœìœ„ ì¡°ì •**:
  - ì¼ì • í‘œê¸° ì œê±° ("1-2ì¼" â†’ ì œê±°)
  - Packet Inspector ì„¤ì •ì„ ì„ íƒì  í•­ëª©ìœ¼ë¡œ ì¶”ê°€

- **ì´ì **:
  - Packet Inspector UI ìš”êµ¬ì‚¬í•­ ëª…í™•í™”
  - View ê³„ì¸µ ì™„ì„±ë„ í–¥ìƒ
  - í–¥í›„ Parser ê¸°ëŠ¥ êµ¬í˜„ ì‹œ ì°¸ì¡° ìë£Œ í™•ë³´

## 3. íŒŒì¼ ë³€ê²½ ì‚¬í•­

### ìˆ˜ì •ëœ íŒŒì¼ (Modified)
- `view/widgets/manual_control.py`: ì‹œê·¸ë„ ë³€ê²½, SettingsManager ì˜ì¡´ì„± ì œê±°
- `presenter/main_presenter.py`: prefix/suffix ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¶”ê°€, ì„¤ì • ê²½ë¡œ ë³€ê²½
- `core/logger.py`: ì‹±ê¸€í†¤ íŒ¨í„´ ê°œì„ 
- `view/main_window.py`: settings_map ì¶”ê°€
- `README.md`: í”„ë¡œì íŠ¸ ì„¤ëª… í™•ì¥, í´ë” êµ¬ì¡° ì •ë¦¬, í–¥í›„ ê³„íš ìƒì„¸í™”
- `guide/code_style_guide.md`: Docstring ì„¹ì…˜ ê°„ì†Œí™” (117ì¤„ â†’ 31ì¤„), comment_guide.md ì°¸ì¡° ì¶”ê°€
- `view/doc/implementation_plan.md`: Packet Inspector ì„¤ì • ì„¹ì…˜ ì¶”ê°€, ìš°ì„ ìˆœìœ„ ì¡°ì •

### ìƒì„±ëœ íŒŒì¼ (Created)
- `guide/naming_convention.md`: í†µí•© ë„¤ì´ë° ê·œì¹™ ê°€ì´ë“œ
- `guide/comment_guide.md`: Google Style Docstring ì£¼ì„ ê°€ì´ë“œ
- `guide/git_guide.md`: Git ê´€ë¦¬ ê°€ì´ë“œ (ì»¤ë°‹/PR/ì´ìŠˆ/ì‹¤ë¬´íŒ)

### ì¬êµ¬ì¡°í™”ëœ íŒŒì¼ (Restructured)
- `config/settings.json`: ë…¼ë¦¬ì  ê·¸ë£¹ êµ¬ì¡°ë¡œ ë³€ê²½

## 4. ê²°ê³¼
- âœ… MVP ì•„í‚¤í…ì²˜ íŒ¨í„´ ì¤€ìˆ˜: Viewì™€ Presenter ì±…ì„ ë¶„ë¦¬ ëª…í™•í™”
- âœ… ë¬¸ì„œ í†µí•©: ë„¤ì´ë° ê·œì¹™ì— ëŒ€í•œ ë‹¨ì¼ ì°¸ì¡° ë¬¸ì„œ í™•ë³´
- âœ… ì‹±ê¸€í†¤ íŒ¨í„´ ê°œì„ : ì˜ˆì™¸ ë°œìƒ ì œê±°, ì•ˆì •ì„± í–¥ìƒ
- âœ… ì„¤ì • í‚¤ ì¼ê´€ì„± í™•ë³´: ë‚´ë¶€ í‚¤(`menu_*`)ì™€ ì €ì¥ í‚¤(`global.*`) ë§¤í•‘ ëª…í™•í™”
- âœ… ì„¤ì • êµ¬ì¡° ê°œì„ : ë…¼ë¦¬ì  ê·¸ë£¹í™”ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- âœ… ë¬¸ì„œí™” ê°•í™”: README ì—…ë°ì´íŠ¸, ì£¼ì„ ê°€ì´ë“œ ìƒì„±, View êµ¬í˜„ ê³„íš ë³´ê°•
- âœ… í”„ë¡œì íŠ¸ ë¹„ì „ ëª…í™•í™”: Serial ì „ìš© â†’ ë²”ìš© í†µì‹  ë„êµ¬ (SPI/I2C í™•ì¥ ì˜ˆì •)

## 5. ë‹¤ìŒ ë‹¨ê³„ (Next Steps)
- **ì„¤ì • ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œì§**: ì´ì „ `global.*` ì„¤ì •ì„ ìƒˆ êµ¬ì¡°ë¡œ ìë™ ë³€í™˜í•˜ëŠ” ë¡œì§ ì¶”ê°€ ê³ ë ¤
- **í†µí•© í…ŒìŠ¤íŠ¸**: ë¦¬íŒ©í† ë§ëœ ì½”ë“œì˜ ì •ìƒ ë™ì‘ í™•ì¸
  - Preferences ë‹¤ì´ì–¼ë¡œê·¸ì—ì„œ ì„¤ì • ë³€ê²½ í…ŒìŠ¤íŠ¸
  - Manual Controlì—ì„œ prefix/suffix ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- **ë¬¸ì„œ ê²€í† **: ìƒˆë¡œ ì‘ì„±ëœ `guide/comment_guide.md` ë° ì—…ë°ì´íŠ¸ëœ README ê²€í† 
- **Packet Inspector UI êµ¬í˜„**: `view/doc/implementation_plan.md` ê¸°ë°˜ìœ¼ë¡œ ì„¤ì • íƒ­ êµ¬í˜„
- **Model ê³„ì¸µ êµ¬í˜„ ê³„ì†**: Core ìœ í‹¸ë¦¬í‹° ë° SerialWorker êµ¬í˜„

---

## 6. ì¸ìˆ˜ì¸ê³„ ë° í™˜ê²½ ì„¤ì • (Handover Information)

### A. ê°œë°œ í™˜ê²½ (Environment)
- **Python**: 3.10 ì´ìƒ ê¶Œì¥ (3.11 í…ŒìŠ¤íŠ¸ ì™„ë£Œ)
- **OS**: Windows 10/11 (ê¸°ë³¸ ê°œë°œ í™˜ê²½), Linux/macOS í˜¸í™˜ ê°€ëŠ¥
- **ì˜ì¡´ì„± (Dependencies)**:
  ```bash
  pip install PyQt5 pyserial commentjson
  ```

### B. ì‹¤í–‰ ë°©ë²• (Execution)
í”„ë¡œì íŠ¸ ë£¨íŠ¸(`serial_tool2/`)ì—ì„œ:
```bash
python main.py
```

### C. í˜„ì¬ ìƒíƒœ ìš”ì•½ (Current Status)
- **UI**: 100% êµ¬í˜„ ì™„ë£Œ (ë‹¤êµ­ì–´, í…Œë§ˆ, í°íŠ¸ ì ìš©ë¨)
- **ì•„í‚¤í…ì²˜**: MVP íŒ¨í„´ ì¤€ìˆ˜ ê°•í™” ì™„ë£Œ
- **ì½”ë“œ í’ˆì§ˆ**: ë¬¸ì„œ, ì‹±ê¸€í†¤, ì„¤ì • êµ¬ì¡° ê°œì„  ì™„ë£Œ
- **ë¡œì§**:
  - View ê³„ì¸µ ë¡œì§ (ìœ„ì ¯ ë™ì‘, ì„¤ì • ì €ì¥/ë³µì›) ì™„ë£Œ
  - Presenter ê³„ì¸µ ê°„ ì‹œê·¸ë„ ê¸°ë°˜ í†µì‹  ì™„ë£Œ
  - Core/Model ê³„ì¸µì€ ì•„ì§ êµ¬í˜„ ì „

### D. ì£¼ì˜ ì‚¬í•­ (Notes)
- **ì„¤ì • íŒŒì¼**: ê¸°ì¡´ `global.*` ì„¤ì •ì€ ìƒˆ êµ¬ì¡°ë¡œ ìˆ˜ë™ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”í•  ìˆ˜ ìˆìŒ
- **í…ŒìŠ¤íŠ¸ ê¶Œì¥**: Preferences ë‹¤ì´ì–¼ë¡œê·¸ ë° ëª…ë ¹ prefix/suffix ê¸°ëŠ¥ ë™ì‘ í™•ì¸
- **ë¡œê·¸**: `logs/` ë””ë ‰í† ë¦¬ì— ì‹¤í–‰ ë¡œê·¸ ì €ì¥ë¨
</file>

<file path="resources/themes/common.qss">
/* Common Styles (Layout, Spacing, Fonts, Shapes) */

/* Global Settings */
QWidget {
    /* Font settings are handled dynamically by ThemeManager */
}

/* QMainWindow Separator */
QMainWindow::separator {
    width: 2px;
    height: 2px;
}

/* QTabWidget */
QTabBar::tab {
    padding: 8px 16px;
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    margin-right: 2px;
    border-bottom: none;
}

QTabBar::close-button {
    subcontrol-origin: padding;
    subcontrol-position: right;
}

/* QPushButton */
QPushButton {
    border-radius: 4px;
    padding: 6px 12px;
    border-width: 1px;
    border-style: solid;
}

/* QLineEdit, QTextEdit */
QLineEdit, QTextEdit, QPlainTextEdit {
    border-radius: 4px;
    padding: 4px;
    border-width: 1px;
    border-style: solid;
}

/* QComboBox */
QComboBox {
    border-radius: 4px;
    padding: 4px 8px;
    min-width: 60px;
    border-width: 1px;
    border-style: solid;
}

QComboBox::drop-down {
    subcontrol-origin: padding;
    subcontrol-position: top right;
    width: 20px;
    border-left-width: 0px;
    border-top-right-radius: 3px;
    border-bottom-right-radius: 3px;
}

QComboBox::down-arrow {
    width: 10px;
    height: 10px;
}

/* QScrollBar */
QScrollBar:vertical {
    border: none;
    width: 12px;
    margin: 0px;
}

QScrollBar::handle:vertical {
    min-height: 20px;
    border-radius: 6px;
    margin: 2px;
}

QScrollBar::add-line:vertical, QScrollBar::sub-line:vertical {
    height: 0px;
}

QScrollBar:horizontal {
    border: none;
    height: 12px;
    margin: 0px;
}

QScrollBar::handle:horizontal {
    min-width: 20px;
    border-radius: 6px;
    margin: 2px;
}

QScrollBar::add-line:horizontal, QScrollBar::sub-line:horizontal {
    width: 0px;
}

/* QTableView */
QTableView {
    border-width: 1px;
    border-style: solid;
}

QHeaderView::section {
    padding: 4px;
    border: none;
    border-right-width: 1px;
    border-right-style: solid;
    border-bottom-width: 1px;
    border-bottom-style: solid;
}

QTableView QTableCornerButton::section {
    border: none;
}

/* QCheckBox */
QCheckBox {
    spacing: 5px;
}

QCheckBox::indicator {
    width: 16px;
    height: 16px;
    border-width: 1px;
    border-style: solid;
    border-radius: 3px;
}

/* QGroupBox */
QGroupBox {
    border-width: 1px;
    border-style: solid;
    border-radius: 4px;
    margin-top: 1.5em;
    padding-top: 10px;
}

QGroupBox::title {
    subcontrol-origin: margin;
    subcontrol-position: top left;
    padding: 0 5px;
    font-weight: bold;
}

/* QStatusBar */
QStatusBar {
    border-top-width: 1px;
    border-top-style: solid;
}

/* QMenu */
QMenu {
    border-width: 1px;
    border-style: solid;
}

QMenu::item {
    padding: 4px 24px 4px 12px;
}

/* QToolBar */
QToolBar {
    border-bottom-width: 1px;
    border-bottom-style: solid;
    spacing: 5px;
}

QToolBar QToolButton {
    border: none;
    border-radius: 4px;
    padding: 4px;
}

/* Custom Classes Fonts */
QPushButton[class="accent"], QPushButton[class="danger"], QPushButton[class="warning"] {
    font-weight: bold;
}

/* Font Classes - Proportional (Variable-width) Font */
.proportional-font {
    font-family: "Segoe UI", "Ubuntu", "Arial", sans-serif;
    font-size: 9pt;
}

/* Font Classes - Fixed (Monospace) Font */
.fixed-font {
    font-family: "Consolas", "Monospace", "Courier New", monospace;
    font-size: 9pt;
}

/* Apply Fixed Font to Text Data Widgets */
QTextEdit.fixed-font,
QPlainTextEdit.fixed-font,
QLineEdit.fixed-font {
    font-family: "Consolas", "Monospace", "Courier New", monospace;
    font-size: 9pt;
}
</file>

<file path="view/panels/macro_panel.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout, QFileDialog, QMessageBox
from PyQt5.QtCore import pyqtSignal
import commentjson
from typing import Optional

from view.widgets.macro_list import MacroListWidget
from view.widgets.macro_ctrl import MacroCtrlWidget
from view.lang_manager import lang_manager

from core.settings_manager import SettingsManager

class MacroPanel(QWidget):
    """
    MacroListWidgetê³¼ MacroCtrlWidgetì„ ì¡°í•©í•˜ì—¬
    ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ ë° ì‹¤í–‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” íŒ¨ë„ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    """

    repeat_start_requested = pyqtSignal(list) # indices
    repeat_stop_requested = pyqtSignal()

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        MacroListPanelì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.settings = None
        self.marco_ctrl = None
        self.macro_list = None
        self._loading = False
        self.init_ui()

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(5)

        self.macro_list = MacroListWidget()
        self.marco_ctrl = MacroCtrlWidget()

        # ì„¤ì • ê´€ë¦¬ì (Settings Manager)
        self.settings = SettingsManager()

        # ì‹œê·¸ë„ ì—°ê²°
        self.marco_ctrl.cmd_repeat_start_requested.connect(self.on_repeat_start_requested)
        self.marco_ctrl.cmd_repeat_stop_requested.connect(self.on_repeat_stop_requested) # Stop signal is same for now

        self.marco_ctrl.script_save_requested.connect(self.save_script_to_file)
        self.marco_ctrl.script_load_requested.connect(self.load_script_from_file)

        # ë°ì´í„° ë³€ê²½ ì‹œ ìë™ ì €ì¥
        self.macro_list.macro_list_changed.connect(self.save_state)

        # CommandControlì˜ ì…ë ¥ í•„ë“œ ë³€ê²½ ì‹œì—ë„ ì €ì¥ (textChanged, valueChanged ë“±)
        self.marco_ctrl.repeat_delay_input.textChanged.connect(self.save_state)
        self.marco_ctrl.repeat_count_spin.valueChanged.connect(self.save_state)

        layout.addWidget(self.macro_list)
        layout.addWidget(self.marco_ctrl)

        self.setLayout(layout)

        # ì´ˆê¸° ë°ì´í„° ë¡œë“œ (ìœ„ì ¯ ìƒì„± í›„)
        self.load_state()

    def load_state(self) -> None:
        """ì„¤ì •ì—ì„œ ìƒíƒœë¥¼ ë¡œë“œí•©ë‹ˆë‹¤."""
        self._loading = True
        try:
            # ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ë¡œë“œ
            commands = self.settings.get("macro_list.commands", [])
            if commands:
                self.macro_list.load_state(commands)

            # ì»¨íŠ¸ë¡¤ ì„¤ì • ë¡œë“œ
            control_state = self.settings.get("macro_list.control_state", {})
            if control_state:
                self.marco_ctrl.load_state(control_state)
        finally:
            self._loading = False

    def save_state(self) -> None:
        """í˜„ì¬ ìƒíƒœë¥¼ ì„¤ì •ì— ì €ì¥í•©ë‹ˆë‹¤."""
        if self._loading:
            return

        # ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ì €ì¥
        commands = self.macro_list.save_state()
        self.settings.set("macro_list.commands", commands)

        # ì»¨íŠ¸ë¡¤ ì„¤ì • ì €ì¥
        control_state = self.marco_ctrl.save_state()
        self.settings.set("macro_list.control_state", control_state)

        self.settings.save_settings()

    def on_repeat_start_requested(self, delay: int, max_runs: int) -> None:
        """
        Repeat Start ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.

        Args:
            delay (int): ì‹¤í–‰ ê°„ ì§€ì—° ì‹œê°„(ms).
            max_runs (int): ìµœëŒ€ ì‹¤í–‰ íšŸìˆ˜.
        """
        indices = self.macro_list.get_selected_indices()
        if indices:
            # Note: delayì™€ max_runs íŒŒë¼ë¯¸í„°ëŠ” í˜„ì¬ ì‹œê·¸ë„ì— í¬í•¨ë˜ì§€ ì•ŠìŒ
            # Presenterì—ì„œ MacroCtrlWidgetì˜ ìƒíƒœë¥¼ ì§ì ‘ ì½ì–´ì„œ ì‚¬ìš©í•´ì•¼ í•¨
            self.repeat_start_requested.emit(indices)
            self.marco_ctrl.set_running_state(True, is_auto=True)

    def on_repeat_stop_requested(self) -> None:
        """
        Repeat Stop ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.
        """
        self.repeat_stop_requested.emit()

    def set_running_state(self, running: bool) -> None:
        """
        ì‹¤í–‰ ìƒíƒœë¥¼ ì „íŒŒí•©ë‹ˆë‹¤.

        Args:
            running (bool): ì‹¤í–‰ ì¤‘ ì—¬ë¶€.
        """
        # Note: í˜„ì¬ëŠ” ë‹¨ìˆœíˆ running ìƒíƒœë§Œ ì „ë‹¬
        # í–¥í›„ is_repeat íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•˜ì—¬ Repeat/Pause ë²„íŠ¼ ìƒíƒœë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆìŒ
        self.marco_ctrl.set_running_state(running)

    def save_script_to_file(self) -> None:
        """í˜„ì¬ ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ì™€ ì„¤ì •ì„ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤."""
        filter_str = "JSON Files (*.json);;All Files (*)"
        path, _ = QFileDialog.getSaveFileName(self, lang_manager.get_text("macro_list_dialog_title_save"), "", filter_str)

        if not path:
            return

        data = {
            "commands": self.macro_list.save_state(),
            "control_state": self.marco_ctrl.save_state()
        }

        try:
            with open(path, 'w', encoding='utf-8') as f:
                commentjson.dump(data, f, indent=4)
        except Exception as e:
            QMessageBox.critical(self, "Error", f"Failed to save script: {str(e)}")

    def load_script_from_file(self) -> None:
        """íŒŒì¼ì—ì„œ ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ì™€ ì„¤ì •ì„ ë¡œë“œí•©ë‹ˆë‹¤."""
        filter_str = "JSON Files (*.json);;All Files (*)"
        path, _ = QFileDialog.getOpenFileName(self, lang_manager.get_text("macro_list_dialog_title_open"), "", filter_str)

        if not path:
            return

        try:
            with open(path, 'r', encoding='utf-8') as f:
                data = commentjson.load(f)

            if "commands" in data:
                self.macro_list.load_state(data["commands"])

            if "control_state" in data:
                self.marco_ctrl.load_state(data["control_state"])

        except Exception as e:
            QMessageBox.critical(self, "Error", f"Failed to load script: {str(e)}")
</file>

<file path="view/sections/main_left_section.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout
from typing import Optional
from view.lang_manager import lang_manager

from view.panels.port_panel import PortPanel
from view.panels.manual_control_panel import ManualControlPanel
from view.panels.port_tab_panel import PortTabPanel
from core.settings_manager import SettingsManager

class MainLeftSection(QWidget):
    """
    MainWindowì˜ ì¢Œì¸¡ ì˜ì—­ì„ ë‹´ë‹¹í•˜ëŠ” íŒ¨ë„ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    ì—¬ëŸ¬ í¬íŠ¸ íƒ­(PortTabs)ê³¼ ì „ì—­ ìˆ˜ë™ ì œì–´(ManualControlWidget)ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
    """

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        LeftSectionì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.port_tabs = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(5)

        # í¬íŠ¸ íƒ­ (Port Tabs) - PortTabPanel ì‚¬ìš©
        self.port_tabs = PortTabPanel()
        self.port_tabs.tab_added.connect(self._on_tab_added)

        # ìˆ˜ë™ ì œì–´ íŒ¨ë„ (í˜„ì¬ í¬íŠ¸ì— ëŒ€í•œ ì „ì—­ ì œì–´)
        self.manual_control = ManualControlPanel()

        layout.addWidget(self.port_tabs, 1) # íƒ­ì´ ë‚¨ì€ ê³µê°„ ì°¨ì§€
        layout.addWidget(self.manual_control) # ìˆ˜ë™ ì œì–´ëŠ” í•˜ë‹¨ì— ìœ„ì¹˜

        self.setLayout(layout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        # PortTabPanel ë‚´ë¶€ì—ì„œ ì²˜ë¦¬ë¨
        pass

    def add_new_port_tab(self) -> None:
        """ìƒˆë¡œìš´ í¬íŠ¸ íƒ­ì„ ì¶”ê°€í•©ë‹ˆë‹¤. (ì™¸ë¶€ í˜¸ì¶œìš© ë˜í¼)"""
        self.port_tabs.add_new_port_tab()

    def open_current_port(self) -> None:
        """í˜„ì¬ í™œì„±í™”ëœ íƒ­ì˜ í¬íŠ¸ë¥¼ ì—½ë‹ˆë‹¤ (ì´ë¯¸ ì—´ë ¤ìˆìœ¼ë©´ ë¬´ì‹œ)."""
        current_index = self.port_tabs.currentIndex()
        current_widget = self.port_tabs.widget(current_index)
        if isinstance(current_widget, PortPanel):
            if not current_widget.is_connected():
                current_widget.toggle_connection()

    def close_current_port(self) -> None:
        """í˜„ì¬ í™œì„±í™”ëœ íƒ­ì˜ í¬íŠ¸ë¥¼ ë‹«ìŠµë‹ˆë‹¤ (ì´ë¯¸ ë‹«í˜€ìˆìœ¼ë©´ ë¬´ì‹œ)."""
        current_index = self.port_tabs.currentIndex()
        current_widget = self.port_tabs.widget(current_index)
        if isinstance(current_widget, PortPanel):
            if current_widget.is_connected():
                current_widget.toggle_connection()

    def close_current_tab(self) -> None:
        """í˜„ì¬ í™œì„±í™”ëœ íƒ­ì„ ë‹«ìŠµë‹ˆë‹¤."""
        current_index = self.port_tabs.currentIndex()
        # ë§ˆì§€ë§‰ íƒ­(í”ŒëŸ¬ìŠ¤ íƒ­)ì€ ë‹«ì„ ìˆ˜ ì—†ìŒ
        if current_index == self.port_tabs.count() - 1:
            return

        if current_index >= 0:
            self.port_tabs.removeTab(current_index)

    def _on_tab_added(self, panel: PortPanel) -> None:
        """ìƒˆ íƒ­ì´ ì¶”ê°€ë˜ì—ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¸ë“¤ëŸ¬"""
        # í¬íŠ¸ ì„¤ì •ì˜ ì—°ê²° ìƒíƒœ ë³€ê²½ ì‹œê·¸ë„ì„ ìˆ˜ë™ ì œì–´ ìœ„ì ¯ì— ì—°ê²°
        panel.port_settings.connection_state_changed.connect(
            self._on_port_connection_changed
        )

    def save_state(self) -> list:
        """
        ëª¨ë“  í¬íŠ¸ íƒ­ì˜ ìƒíƒœë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
        ë˜í•œ ManualControlWidgetì˜ ìƒíƒœë¥¼ ë³„ë„ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

        Returns:
            list: íƒ­ ìƒíƒœ ë¦¬ìŠ¤íŠ¸.
        """
        # ManualControl ìƒíƒœ ì €ì¥
        settings = SettingsManager()
        manual_state = self.manual_control.save_state()
        settings.set("manual_control", manual_state)

        states = []
        count = self.port_tabs.count()
        for i in range(count):
            # ë§ˆì§€ë§‰ íƒ­(+) ì œì™¸
            if i == count - 1:
                continue
            widget = self.port_tabs.widget(i)
            if isinstance(widget, PortPanel):
                state = widget.save_state()
                states.append(state)
        return states

    def load_state(self, states: list) -> None:
        """
        ì €ì¥ëœ ìƒíƒœ ë¦¬ìŠ¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íƒ­ì„ ë³µì›í•©ë‹ˆë‹¤.
        ë˜í•œ ManualControlWidgetì˜ ìƒíƒœë¥¼ ë³µì›í•©ë‹ˆë‹¤.

        Args:
            states (list): íƒ­ ìƒíƒœ ë¦¬ìŠ¤íŠ¸.
        """
        # ManualControl ìƒíƒœ ë³µì›
        settings = SettingsManager()
        manual_state = settings.get("manual_control", {})
        if manual_state:
            self.manual_control.load_state(manual_state)

        # ì‹œê·¸ë„ ì°¨ë‹¨
        self.port_tabs.blockSignals(True)
        try:
            # ê¸°ì¡´ íƒ­ ëª¨ë‘ ì œê±° (í”ŒëŸ¬ìŠ¤ íƒ­ ì œì™¸)
            # ì—­ìˆœìœ¼ë¡œ ì œê±°í•´ì•¼ ì¸ë±ìŠ¤ ë¬¸ì œ ì—†ìŒ, ë‹¨ í”ŒëŸ¬ìŠ¤ íƒ­ì€ ìœ ì§€
            count = self.port_tabs.count()
            for i in range(count - 2, -1, -1): # ë§ˆì§€ë§‰ íƒ­(count-1)ì€ +íƒ­ì´ë¯€ë¡œ ì œì™¸
                self.port_tabs.removeTab(i)

            # ì €ì¥ëœ ìƒíƒœê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ íƒ­ í•˜ë‚˜ ì¶”ê°€
            if not states:
                self.port_tabs.add_new_port_tab()
                return

            # ìƒíƒœ ë³µì›
            for state in states:
                panel = self.port_tabs.add_new_port_tab()
                panel.load_state(state)
        finally:
            self.port_tabs.blockSignals(False)

    def _on_port_connection_changed(self, connected: bool) -> None:
        """
        í¬íŠ¸ ì—°ê²° ìƒíƒœ ë³€ê²½ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.
        í˜„ì¬ í™œì„± íƒ­ì˜ ì—°ê²° ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ManualControlì„ í™œì„±í™”/ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.

        Args:
            connected (bool): ì—°ê²° ì—¬ë¶€.
        """
        # í˜„ì¬ í™œì„± íƒ­ì˜ ë³€ê²½ì¸ì§€ í™•ì¸
        sender_widget = self.sender()
        if sender_widget:
            # senderì˜ ë¶€ëª¨ë¥¼ ì°¾ì•„ì„œ í˜„ì¬ í™œì„± íƒ­ì¸ì§€ í™•ì¸
            current_index = self.port_tabs.currentIndex()
            current_widget = self.port_tabs.widget(current_index)
            if current_widget and hasattr(current_widget, 'port_settings'):
                if current_widget.port_settings == sender_widget:
                    # í˜„ì¬ íƒ­ì˜ ë³€ê²½ì´ë©´ ManualControl ì—…ë°ì´íŠ¸
                    self.manual_control.set_controls_enabled(connected)
</file>

<file path="view/widgets/macro_ctrl.py">
from PyQt5.QtWidgets import (
    QWidget, QHBoxLayout, QVBoxLayout, QPushButton,
    QLabel, QLineEdit, QSpinBox, QGroupBox, QGridLayout
)
from PyQt5.QtCore import pyqtSignal, Qt
from typing import Optional
from view.lang_manager import lang_manager

class MacroCtrlWidget(QWidget):
    """
    Command List ì‹¤í–‰ì„ ì œì–´í•˜ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    Repeat, ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
    """

    # ì‹œê·¸ë„ ì •ì˜
    cmd_repeat_start_requested = pyqtSignal(int, int) # delay_ms, max_runs
    cmd_repeat_stop_requested = pyqtSignal()
    cmd_repeat_pause_requested = pyqtSignal()

    script_save_requested = pyqtSignal()
    script_load_requested = pyqtSignal()

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        MacroCtrlWidgetì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.cmd_repeat_count_lbl = None
        self.cmd_repeat_stop_btn = None
        self.cmd_repeat_start_btn = None
        self.repeat_count_spin = None
        self.repeat_max_lbl = None
        self.repeat_delay_input = None
        self.interval_lbl = None
        self.execution_settings_grp = None
        self.script_load_btn = None
        self.script_save_btn = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(2)

        # 1. ìƒë‹¨ í–‰: ìŠ¤í¬ë¦½íŠ¸ ì œì–´ ë° ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ (Top Row)
        top_layout = QHBoxLayout()
        top_layout.setContentsMargins(0, 0, 0, 0)

        self.script_save_btn = QPushButton(lang_manager.get_text("macro_ctrl_btn_save_script"))
        self.script_save_btn.setToolTip(lang_manager.get_text("macro_ctrl_btn_save_script_tooltip"))
        self.script_save_btn.clicked.connect(self.on_script_save_requested)

        self.script_load_btn = QPushButton(lang_manager.get_text("macro_ctrl_btn_load_script"))
        self.script_load_btn.setToolTip(lang_manager.get_text("macro_ctrl_btn_load_script_tooltip"))
        self.script_load_btn.clicked.connect(self.on_script_load_requested)

        top_layout.addStretch()
        top_layout.addWidget(self.script_save_btn)
        top_layout.addWidget(self.script_load_btn)

        # 2. ìë™ ì‹¤í–‰ ì„¤ì • ê·¸ë£¹ (Repeat Settings Group)
        self.execution_settings_grp = QGroupBox(lang_manager.get_text("macro_ctrl_grp_execution"))
        execution_layout = QGridLayout()
        execution_layout.setContentsMargins(2, 2, 2, 2)
        execution_layout.setSpacing(5)

        # Row 0: ìë™ ì‹¤í–‰ ì„¤ì •
        self.interval_lbl = QLabel(lang_manager.get_text("macro_ctrl_lbl_interval"))
        execution_layout.addWidget(self.interval_lbl, 0, 0)

        self.repeat_delay_input = QLineEdit("1000")
        self.repeat_delay_input.setFixedWidth(50)
        self.repeat_delay_input.setAlignment(Qt.AlignRight)
        execution_layout.addWidget(self.repeat_delay_input, 1, 1)

        self.repeat_max_lbl = QLabel(lang_manager.get_text("macro_ctrl_lbl_repeat_max"))
        execution_layout.addWidget(self.repeat_max_lbl, 0, 2)

        self.repeat_count_spin = QSpinBox()
        self.repeat_count_spin.setRange(0, 9999)
        self.repeat_count_spin.setValue(0)
        self.repeat_count_spin.setToolTip(lang_manager.get_text("macro_ctrl_spin_repeat_tooltip"))
        execution_layout.addWidget(self.repeat_count_spin, 0, 3)

        # Row 1: ìë™ ì‹¤í–‰ ì œì–´
        self.cmd_repeat_start_btn = QPushButton(lang_manager.get_text("macro_ctrl_btn_repeat_start"))
        self.cmd_repeat_start_btn.setToolTip(lang_manager.get_text("macro_ctrl_btn_repeat_start_tooltip"))
        self.cmd_repeat_start_btn.setProperty("class", "accent") # ì´ˆë¡ìƒ‰ ìŠ¤íƒ€ì¼
        self.cmd_repeat_start_btn.clicked.connect(self.on_cmd_repeat_start_clicked)

        self.cmd_repeat_stop_btn = QPushButton(lang_manager.get_text("macro_ctrl_btn_repeat_stop"))
        self.cmd_repeat_stop_btn.setToolTip(lang_manager.get_text("macro_ctrl_btn_repeat_stop_tooltip"))
        self.cmd_repeat_stop_btn.setEnabled(False)
        self.cmd_repeat_stop_btn.setProperty("class", "danger") # ë¹¨ê°„ìƒ‰ ìŠ¤íƒ€ì¼
        self.cmd_repeat_stop_btn.clicked.connect(self.on_cmd_repeat_stop_clicked)

        self.cmd_repeat_pause_btn = QPushButton(lang_manager.get_text("macro_ctrl_btn_repeat_pause"))
        self.cmd_repeat_pause_btn.setToolTip(lang_manager.get_text("macro_ctrl_btn_repeat_pause_tooltip"))
        self.cmd_repeat_pause_btn.setEnabled(False)
        self.cmd_repeat_pause_btn.setProperty("class", "warning") # ë…¸ë€ìƒ‰ ìŠ¤íƒ€ì¼
        self.cmd_repeat_pause_btn.clicked.connect(self.on_cmd_repeat_pause_clicked)

        self.cmd_repeat_count_lbl = QLabel("0 / âˆ")
        self.cmd_repeat_count_lbl.setAlignment(Qt.AlignCenter)

        execution_layout.addWidget(self.cmd_repeat_start_btn, 1, 0, 1, 2)
        execution_layout.addWidget(self.cmd_repeat_stop_btn, 1, 2)
        execution_layout.addWidget(self.cmd_repeat_count_lbl, 1, 3)

        self.execution_settings_grp.setLayout(execution_layout)

        layout.addLayout(top_layout)
        layout.addWidget(self.execution_settings_grp)

        self.setLayout(layout)

        # ì´ˆê¸° ìƒíƒœ: ì—°ê²° ì „ê¹Œì§€ ë¹„í™œì„±í™”
        self.set_controls_enabled(False)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.script_save_btn.setText(lang_manager.get_text("macro_ctrl_btn_save_script"))
        self.script_save_btn.setToolTip(lang_manager.get_text("macro_ctrl_btn_save_script_tooltip"))

        self.script_load_btn.setText(lang_manager.get_text("macro_ctrl_btn_load_script"))
        self.script_load_btn.setToolTip(lang_manager.get_text("macro_ctrl_btn_load_script_tooltip"))

        self.execution_settings_grp.setTitle(lang_manager.get_text("macro_ctrl_grp_execution"))

        self.interval_lbl.setText(lang_manager.get_text("macro_ctrl_lbl_interval"))
        self.repeat_max_lbl.setText(lang_manager.get_text("macro_ctrl_lbl_repeat_max"))
        self.repeat_count_spin.setToolTip(lang_manager.get_text("macro_ctrl_spin_repeat_tooltip"))

        self.cmd_repeat_start_btn.setText(lang_manager.get_text("macro_ctrl_btn_repeat_start"))
        self.cmd_repeat_stop_btn.setText(lang_manager.get_text("macro_ctrl_btn_repeat_stop"))

    def on_cmd_repeat_start_clicked(self) -> None:
        """ìë™ ì‹¤í–‰ ì‹œì‘ ë²„íŠ¼ í•¸ë“¤ëŸ¬"""
        try:
            delay = int(self.repeat_delay_input.text())
        except ValueError:
            delay = 1000
        max_runs = self.repeat_count_spin.value()
        self.cmd_repeat_start_requested.emit(delay, max_runs)

    def on_cmd_repeat_stop_clicked(self) -> None:
        """ìë™ ì‹¤í–‰ ì •ì§€ ë²„íŠ¼ í•¸ë“¤ëŸ¬"""
        self.cmd_repeat_stop_requested.emit()

    def on_cmd_repeat_pause_clicked(self) -> None:
        """ìë™ ì‹¤í–‰ ì •ì§€ ë²„íŠ¼ í•¸ë“¤ëŸ¬"""
        self.cmd_repeat_pause_requested.emit()

    def on_script_save_requested(self) -> None:
        """ìŠ¤í¬ë¦½íŠ¸ ì €ì¥ ë²„íŠ¼ í•¸ë“¤ëŸ¬"""
        self.script_save_requested.emit()

    def on_script_load_requested(self) -> None:
        """ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ë²„íŠ¼ í•¸ë“¤ëŸ¬"""
        self.script_load_requested.emit()

    def set_running_state(self, running: bool, is_repeat: bool = False) -> None:
        """
        ì‹¤í–‰ ìƒíƒœì— ë”°ë¼ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            running (bool): ì‹¤í–‰ ì¤‘ ì—¬ë¶€.
            is_repeat (bool): ìë™ ì‹¤í–‰ ëª¨ë“œ ì—¬ë¶€.
        """
        if running:
            self.cmd_repeat_start_btn.setEnabled(False)
            if is_repeat:
                self.cmd_repeat_stop_btn.setEnabled(True)
        else:
            self.cmd_repeat_start_btn.setEnabled(True)
            self.cmd_repeat_stop_btn.setEnabled(False)

    def update_auto_count(self, current: int, total: int) -> None:
        """
        ìë™ ì‹¤í–‰ ì¹´ìš´íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

        Args:
            current (int): í˜„ì¬ ì‹¤í–‰ íšŸìˆ˜.
            total (int): ì „ì²´ ì‹¤í–‰ íšŸìˆ˜ (0ì´ë©´ ë¬´í•œ).
        """
        total_str = "âˆ" if total == 0 else str(total)
        self.cmd_repeat_count_lbl.setText(f"{current} / {total_str}")

    def set_controls_enabled(self, enabled: bool) -> None:
        """
        ì œì–´ ìœ„ì ¯ë“¤ì˜ í™œì„±í™” ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            enabled (bool): í™œì„±í™” ì—¬ë¶€.
        """
        self.cmd_repeat_start_btn.setEnabled(enabled)
        # Stop ë²„íŠ¼ì€ ì‹¤í–‰ ìƒíƒœì— ë”°ë¼ ë³„ë„ ê´€ë¦¬ë˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ê±´ë“œë¦¬ì§€ ì•ŠìŒ

    def save_state(self) -> dict:
        """
        í˜„ì¬ ìœ„ì ¯ì˜ ìƒíƒœë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            dict: ìœ„ì ¯ ìƒíƒœ ë°ì´í„°.
        """
        state = {
            "delay": self.repeat_delay_input.text(),
            "max_runs": self.repeat_count_spin.value()
        }
        return state

    def load_state(self, state: dict) -> None:
        """
        ì €ì¥ëœ ìƒíƒœë¥¼ ìœ„ì ¯ì— ì ìš©í•©ë‹ˆë‹¤.

        Args:
            state (dict): ìœ„ì ¯ ìƒíƒœ ë°ì´í„°.
        """
        if not state:
            return

        self.repeat_delay_input.setText(state.get("delay", "1000"))
        self.repeat_count_spin.setValue(state.get("max_runs", 0))
</file>

<file path="guide/naming_convention.md">
# SerialTool Naming Convention Guide

ì´ ë¬¸ì„œëŠ” SerialTool í”„ë¡œì íŠ¸ì˜ ëª…ëª… ê·œì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤. ì¼ê´€ëœ ëª…ëª… ê·œì¹™ì„ í†µí•´ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

## 1. ê¸°ë³¸ ëª…ëª… ê·œì¹™

### 1.1 í´ë˜ìŠ¤ (Classes)
**ê·œì¹™**: `PascalCase` - ê° ë‹¨ì–´ì˜ ì²« ê¸€ìë¥¼ ëŒ€ë¬¸ìë¡œ ì‘ì„±

**ì˜ˆì‹œ**:
```python
class SerialManager:
    pass

class MainWindow:
    pass

class PortController:
    pass
```

### 1.2 í•¨ìˆ˜ ë° ë©”ì„œë“œ (Functions/Methods)
**ê·œì¹™**: `snake_case` - ì†Œë¬¸ìì™€ ë°‘ì¤„ ì‚¬ìš©

**ì˜ˆì‹œ**:
```python
def connect_port():
    pass

def update_ui():
    pass

def get_available_ports():
    pass
```

### 1.3 ë³€ìˆ˜ (Variables)
**ê·œì¹™**: `snake_case` - ì†Œë¬¸ìì™€ ë°‘ì¤„ ì‚¬ìš©

**ì˜ˆì‹œ**:
```python
port_name = "COM1"
is_connected = False
baudrate = 115200
```

### 1.4 ìƒìˆ˜ (Constants)
**ê·œì¹™**: `UPPER_CASE` - ëª¨ë‘ ëŒ€ë¬¸ìì™€ ë°‘ì¤„ ì‚¬ìš©

**ì˜ˆì‹œ**:
```python
DEFAULT_BAUDRATE = 115200
MAX_RETRIES = 3
TIMEOUT_SECONDS = 5
```

### 1.5 ë¹„ê³µê°œ ë©¤ë²„ (Private Members)
**ê·œì¹™**: `_prefix` - ë°‘ì¤„ ì ‘ë‘ì‚¬ ì‚¬ìš©

**ì˜ˆì‹œ**:
```python
class Example:
    def __init__(self):
        self._internal_buffer = []
        self._helper_method()

    def _helper_method(self):
        pass
```

---

## 2. ì–¸ì–´ í‚¤ ë„¤ì´ë° ê·œì¹™ (Language Keys)

ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•œ ì–¸ì–´ í‚¤ëŠ” ë‹¤ìŒ í˜•ì‹ì„ **ì—„ê²©íˆ** ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.

### 2.1 ê¸°ë³¸ í˜•ì‹
**íŒ¨í„´**: `[context]_[type]_[name]`

| ìš”ì†Œ | ì„¤ëª… | í•„ìˆ˜ |
|------|------|------|
| **context** | ìœ„ì ¯/ì»´í¬ë„ŒíŠ¸ ì´ë¦„ | âœ… í•„ìˆ˜ |
| **type** | UI ìš”ì†Œ íƒ€ì… | âœ… í•„ìˆ˜ |
| **name** | êµ¬ì²´ì ì¸ ê¸°ëŠ¥/ìš©ë„ | âœ… í•„ìˆ˜ |

### 2.2 Context (ìœ„ì ¯/ì„¹ì…˜)

| Context | ì„¤ëª… | ì˜ˆì‹œ |
|---------|------|------|
| `global` | ì•± ì „ì—­ ê³µìœ  | `global_btn_ok`, `global_btn_cancel` |
| `main` | ë©”ì¸ ìœˆë„ìš° | `main_menu_file`, `main_title` |
| `port` | í¬íŠ¸ ì„¤ì • ìœ„ì ¯ | `port_lbl_baudrate`, `port_btn_connect` |
| `manual_ctrl` | ìˆ˜ë™ ì œì–´ ìœ„ì ¯ | `manual_ctrl_btn_send`, `manual_ctrl_chk_hex` |
| `cmd` | ëª…ë ¹ ë¦¬ìŠ¤íŠ¸/ì œì–´ | `cmd_btn_add`, `cmd_col_command` |
| `macro_list` | ëª…ë ¹ ë¦¬ìŠ¤íŠ¸ íŒ¨ë„ | `macro_list_col_delay` |
| `recv` | ìˆ˜ì‹  ì˜ì—­ ìœ„ì ¯ | `recv_btn_clear`, `recv_chk_timestamp` |
| `pref` | Preferences ë‹¤ì´ì–¼ë¡œê·¸ | `pref_lbl_font_size`, `pref_tab_general` |
| `about` | About ë‹¤ì´ì–¼ë¡œê·¸ | `about_title`, `about_lbl_version` |
| `font` | í°íŠ¸ ì„¤ì • ë‹¤ì´ì–¼ë¡œê·¸ | `font_grp_fixed`, `font_btn_reset` |
| `inspector` | íŒ¨í‚· ì¸ìŠ¤í™í„° | `inspector_col_field` |
| `file_prog` | íŒŒì¼ ì „ì†¡ ì§„í–‰ | `file_prog_status_completed` |

### 2.3 Type (UI ìš”ì†Œ íƒ€ì…)

| Type | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `title` | ìœˆë„ìš°/ë‹¤ì´ì–¼ë¡œê·¸ ì œëª© | `main_title`, `about_title` |
| `menu` | ë©”ë‰´ í•­ëª© | `main_menu_file`, `main_menu_edit` |
| `btn` | ë²„íŠ¼ | `port_btn_connect`, `recv_btn_clear` |
| `lbl` | ë¼ë²¨ | `port_lbl_port`, `pref_lbl_theme` |
| `chk` | ì²´í¬ë°•ìŠ¤ | `manual_ctrl_chk_rts`, `recv_chk_hex` |
| `combo` | ì½¤ë³´ë°•ìŠ¤ | `port_combo_baud` |
| `input` | ì…ë ¥ í•„ë“œ | `manual_ctrl_input_cmd` |
| `grp` | ê·¸ë£¹ë°•ìŠ¤ | `cmd_grp_auto`, `font_grp_fixed` |
| `tab` | íƒ­ | `pref_tab_general`, `right_tab_packet` |
| `col` | í…Œì´ë¸” ì»¬ëŸ¼ | `macro_list_col_command`, `inspector_col_field` |
| `dialog` | ë‹¤ì´ì–¼ë¡œê·¸ | `manual_ctrl_dialog_select_file` |
| `txt` | í…ìŠ¤íŠ¸ ì˜ì—­ | `recv_txt_log` |
| `status` | ìƒíƒœ ë©”ì‹œì§€ | `file_prog_status_sending` |
| `msg` | ì¼ë°˜ ë©”ì‹œì§€ | `global_msg_saved` |

### 2.4 Suffix (ì„ íƒì  ì†ì„±)

| Suffix | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|
| `_tooltip` | íˆ´íŒ í…ìŠ¤íŠ¸ | `port_btn_connect_tooltip` |
| `_placeholder` | í”Œë ˆì´ìŠ¤í™€ë” í…ìŠ¤íŠ¸ | `manual_ctrl_input_cmd_placeholder` |

### 2.5 ì˜¬ë°”ë¥¸ ì˜ˆì‹œ

```python
# âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
"port_btn_connect"                    # í¬íŠ¸ ì—°ê²° ë²„íŠ¼
"port_combo_baud_tooltip"             # ë³´ë“œë ˆì´íŠ¸ ì½¤ë³´ë°•ìŠ¤ì˜ íˆ´íŒ
"macro_list_col_command"                # ëª…ë ¹ ë¦¬ìŠ¤íŠ¸ì˜ ëª…ë ¹ ì»¬ëŸ¼
"manual_ctrl_grp_control"             # ìˆ˜ë™ ì œì–´ì˜ ì œì–´ ê·¸ë£¹ë°•ìŠ¤
"recv_txt_log_placeholder"            # ìˆ˜ì‹  ì˜ì—­ì˜ ë¡œê·¸ í…ìŠ¤íŠ¸ í”Œë ˆì´ìŠ¤í™€ë”
"about_lbl_app_name"                  # About ë‹¤ì´ì–¼ë¡œê·¸ì˜ ì•± ì´ë¦„ ë¼ë²¨
"font_grp_fixed_tooltip"              # í°íŠ¸ ì„¤ì •ì˜ ê³ ì •í­ ê·¸ë£¹ë°•ìŠ¤ íˆ´íŒ
"pref_tab_general"                    # Preferencesì˜ ì¼ë°˜ íƒ­
"file_prog_status_completed"          # íŒŒì¼ ì „ì†¡ ì™„ë£Œ ìƒíƒœ
```

### 2.6 ì˜ëª»ëœ ì˜ˆì‹œ

```python
# âŒ ì˜ëª»ëœ ì˜ˆì‹œ
"port_baud_combo_tooltip"       # typeì´ name ë’¤ì— ìœ„ì¹˜
"port_settings"                 # type ëˆ„ë½ (port_grp_settingsê°€ ì˜¬ë°”ë¦„)
"inspector_field"               # type ëˆ„ë½ (inspector_col_fieldê°€ ì˜¬ë°”ë¦„)
"save"                          # contextì™€ type ëˆ„ë½
"btn_save"                      # context ëˆ„ë½
"port_baudrate"                 # type ëˆ„ë½
```

### 2.7 íŠ¹ìˆ˜ ì¼€ì´ìŠ¤

#### ë‹¤ì´ì–¼ë¡œê·¸ íƒ€ì´í‹€
**íŒ¨í„´**: `[context]_dialog_title_[purpose]` ë˜ëŠ” `[context]_dialog_[action]_title`

```python
"manual_ctrl_dialog_save_log_title"        # ë¡œê·¸ ì €ì¥ ë‹¤ì´ì–¼ë¡œê·¸ ì œëª©
"pref_dialog_select_dir"                   # ë””ë ‰í† ë¦¬ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
"macro_list_dialog_title_save"               # ì €ì¥ ë‹¤ì´ì–¼ë¡œê·¸ ì œëª©
```

#### íŒŒì¼ í•„í„°
**íŒ¨í„´**: `[context]_dialog_file_filter_[extension]`

```python
"manual_ctrl_dialog_file_filter_txt"       # .txt íŒŒì¼ í•„í„°
"manual_ctrl_dialog_file_filter_all"       # ëª¨ë“  íŒŒì¼ í•„í„°
```

#### ìƒíƒœ ë©”ì‹œì§€
**íŒ¨í„´**: `[context]_status_[state]`

```python
"file_prog_status_completed"               # ì™„ë£Œ ìƒíƒœ
"file_prog_status_sending"                 # ì „ì†¡ ì¤‘ ìƒíƒœ
"file_prog_status_failed"                  # ì‹¤íŒ¨ ìƒíƒœ
"status_ready"                             # ì¤€ë¹„ ìƒíƒœ
```

---

## 3. ì ìš© ê°€ì´ë“œ

### 3.1 ìƒˆ UI ìš”ì†Œ ì¶”ê°€ ì‹œ
1. Context í™•ì¸ (ì–´ëŠ ìœ„ì ¯/ë‹¤ì´ì–¼ë¡œê·¸ì¸ê°€?)
2. Type ê²°ì • (ë²„íŠ¼? ë¼ë²¨? ì²´í¬ë°•ìŠ¤?)
3. Name ì •ì˜ (ë¬´ì—‡ì„ í•˜ëŠ”ê°€?)
4. í•„ìš”ì‹œ Suffix ì¶”ê°€ (íˆ´íŒ? í”Œë ˆì´ìŠ¤í™€ë”?)

### 3.2 ê¸°ì¡´ ì½”ë“œ ë¦¬íŒ©í† ë§ ì‹œ
- ê·œì¹™ì— ë§ì§€ ì•ŠëŠ” í‚¤ë¥¼ ë°œê²¬í•˜ë©´ ìˆ˜ì •
- ì¼ê´„ ë³€ê²½ ì‹œ `tools/manage_lang_keys.py` í™œìš©

### 3.3 ì¼ê´€ì„± ìœ ì§€
- ë¹„ìŠ·í•œ ê¸°ëŠ¥ì€ ë¹„ìŠ·í•œ ì´ë¦„ ì‚¬ìš©
- ì˜ˆ: ëª¨ë“  "ì—°ê²°" ë²„íŠ¼ì€ `*_btn_connect` íŒ¨í„´

---

## 4. ì°¸ê³ ì‚¬í•­

### 4.1 ì™œ ì´ëŸ¬í•œ ê·œì¹™ì„ ë”°ë¼ì•¼ í•˜ëŠ”ê°€?
- **ê²€ìƒ‰ì„±**: ì¼ê´€ëœ íŒ¨í„´ìœ¼ë¡œ ì‰½ê²Œ ê²€ìƒ‰ ê°€ëŠ¥
- **ê°€ë…ì„±**: í‚¤ ì´ë¦„ë§Œìœ¼ë¡œ UI ìš”ì†Œ ìœ„ì¹˜ì™€ íƒ€ì… íŒŒì•…
- **ìë™í™”**: ìŠ¤í¬ë¦½íŠ¸ë¡œ í‚¤ ê²€ì¦ ë° ìë™ ìƒì„± ê°€ëŠ¥
- **í˜‘ì—…**: íŒ€ì› ê°„ ëª…í™•í•œ ì†Œí†µ

### 4.2 ë„êµ¬ í™œìš©
í”„ë¡œì íŠ¸ì—ëŠ” ì–¸ì–´ í‚¤ ê´€ë¦¬ë¥¼ ìœ„í•œ ë„êµ¬ê°€ ìˆìŠµë‹ˆë‹¤:
```bash
python tools/manage_lang_keys.py
```

ì´ ë„êµ¬ëŠ”:
- ì½”ë“œì—ì„œ ì‚¬ìš©ëœ ëª¨ë“  ì–¸ì–´ í‚¤ ì¶”ì¶œ
- ëˆ„ë½ëœ í‚¤ ê°ì§€
- ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ ì‹ë³„
- í…œí”Œë¦¿ íŒŒì¼ ìë™ ìƒì„±

---

## 5. UI ìœ„ì ¯ ë³€ìˆ˜ëª… (Widget Variable Names)

PyQt5 ìœ„ì ¯ ë³€ìˆ˜ëª…ì€ `[ìš©ë„]_[ì•½ì–´]` í˜•ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 5.1 í‘œì¤€ ì•½ì–´ ê·œì¹™

| UI ìš”ì†Œ | ì•½ì–´ | ì˜ˆì‹œ |
|---------|------|------|
| Button | `_btn` | `send_btn`, `clear_btn`, `connect_btn` |
| Label | `_lbl` | `status_lbl`, `port_lbl`, `title_lbl` |
| CheckBox | `_chk` | `hex_chk`, `prefix_chk`, `suffix_chk` |
| ComboBox | `_combo` | `port_combo`, `baud_combo` |
| GroupBox | `_grp` | `option_grp`, `file_grp` |
| SpinBox | `_spin` | `font_size_spin`, `repeat_spin` |
| LineEdit | `_input` | `cmd_input`, `search_input` |
| TextEdit | `_txt` | `log_txt`, `preview_txt` |
| TableView | `_table` | `cmd_table` |
| ProgressBar | `_bar` | `progress_bar` |

### 5.2 ë³µí•© ìœ„ì ¯ (ì „ì²´ ì´ë¦„ ì‚¬ìš©)

ë‹¤ìŒì€ ì•½ì–´ê°€ ì•„ë‹Œ ì „ì²´ ì´ë¦„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
- `menu_bar` (QMenuBar)
- `status_bar` (QStatusBar)
- `progress_bar` (QProgressBar)

### 5.3 ì˜ëª»ëœ ì˜ˆì‹œ

```python
# âŒ ì˜ëª»ëœ ì˜ˆì‹œ
self.reset_button = QPushButton()  # â†’ reset_btn
self.title_label = QLabel()        # â†’ title_lbl
self.option_group = QGroupBox()    # â†’ option_grp
self.log_edit = QTextEdit()        # â†’ log_txt

# âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
self.reset_btn = QPushButton()
self.title_lbl = QLabel()
self.option_grp = QGroupBox()
self.log_txt = QTextEdit()
```

---

## 6. ì‹œê·¸ë„ ë° í•¸ë“¤ëŸ¬ (Signals & Handlers)

### 6.1 ì‹œê·¸ë„ ë„¤ì´ë°

| íŒ¨í„´ | ìš©ë„ | ì˜ˆì‹œ |
|------|------|------|
| `[ëŒ€ìƒ]_changed` | ê°’/ìƒíƒœ ë³€ê²½ | `theme_changed`, `language_changed` |
| `[ë™ì‘]_requested` | ì‚¬ìš©ì ìš”ì²­ | `manual_cmd_send_requested`, `exit_requested` |
| `[ëŒ€ìƒ]_[ë™ì‚¬]ed` | ì™„ë£Œ ì•Œë¦¼ | `data_received`, `port_opened` |
| `[ëŒ€ìƒ]_selected` | ì„ íƒ ì´ë²¤íŠ¸ | `transfer_file_selected`, `item_selected` |
| `[ëŒ€ìƒ]_added` | ì¶”ê°€ ì´ë²¤íŠ¸ | `tab_added`, `row_added` |
| `[ëŒ€ìƒ]_removed` | ì œê±° ì´ë²¤íŠ¸ | `tab_removed`, `row_removed` |

### 6.2 ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë„¤ì´ë°

| íŒ¨í„´ | ìš©ë„ | ì˜ˆì‹œ |
|------|------|------|
| `on_[ìœ„ì ¯]_[ë™ì‘]` | ìœ„ì ¯ëª…ì´ ë¶ˆëª…í™•í•  ë•Œ | `on_send_manual_cmd_clicked` |
| `on_[ë™ì‘]` | ìœ„ì ¯ëª…ì´ ëª…í™•í•  ë•Œ | `on_send_clicked` (send_btnë§Œ ìˆëŠ” ê²½ìš°) |
| `on_[ëŒ€ìƒ]_[ë™ì‘]` | ìƒíƒœ ë³€ê²½ í•¸ë“¤ëŸ¬ | `on_language_changed` |
| `_on_[ëŒ€ìƒ]_[ë™ì‘]` | ë‚´ë¶€ í•¸ë“¤ëŸ¬ | `_on_port_changed` |

**ì°¸ê³ **: ìœ„ì ¯ëª…ì´ ë¬¸ë§¥ìƒ ëª…í™•í•œ ê²½ìš° `_btn`, `_chk` ë“±ì˜ ì ‘ë¯¸ì‚¬ë¥¼ ìƒëµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê°€ê¸‰ì  êµ¬ì²´ì ì¸ ì´ë¦„ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

## 7. í´ë˜ìŠ¤ ì ‘ë¯¸ì‚¬ (Class Suffixes)

| íƒ€ì… | ì ‘ë¯¸ì‚¬ | ì˜ˆì‹œ |
|------|--------|------|
| ë…ë¦½ ìœ„ì ¯ | `Widget` | `PortSettingsWidget`, `ManualControlWidget` |
| ë³µí•© íŒ¨ë„ | `Panel` | `PortPanel`, `MacroListPanel` |
| ë‹¤ì´ì–¼ë¡œê·¸ | `Dialog` | `PreferencesDialog`, `AboutDialog` |
| ë ˆì´ì•„ì›ƒ ì˜ì—­ | `Section` | `LeftSection`, `RightSection` |
| ê´€ë¦¬ í´ë˜ìŠ¤ | `Manager` | `SettingsManager`, `LanguageManager` |

---

## 8. ìš”ì•½

| í•­ëª© | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| í´ë˜ìŠ¤ | PascalCase | `MainWindow` |
| í•¨ìˆ˜/ë©”ì„œë“œ | snake_case | `connect_port()` |
| ë³€ìˆ˜ | snake_case | `port_name` |
| ìƒìˆ˜ | UPPER_CASE | `DEFAULT_BAUDRATE` |
| ë¹„ê³µê°œ ë©¤ë²„ | _prefix | `_internal_method()` |
| ì–¸ì–´ í‚¤ | [context]_[type]_[name] | `port_btn_connect` |
| UI ìœ„ì ¯ ë³€ìˆ˜ | [ìš©ë„]_[ì•½ì–´] | `send_btn`, `status_lbl` |

**í•µì‹¬ ì›ì¹™**: ëª…í™•í•˜ê³ , ì¼ê´€ë˜ë©°, ê²€ìƒ‰ ê°€ëŠ¥í•œ ì´ë¦„ì„ ì‚¬ìš©í•˜ì„¸ìš”!
</file>

<file path="model/serial_worker.py">
import serial
from PyQt5.QtCore import QThread, pyqtSignal, QMutex, QMutexLocker, QObject
from typing import Optional

class SerialWorker(QThread):
    """
    ì‹œë¦¬ì–¼ í¬íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ì§€ì†ì ìœ¼ë¡œ ì½ì–´ì˜¤ëŠ” ì›Œì»¤ ìŠ¤ë ˆë“œ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    """
    # ì‹œê·¸ë„ ì •ì˜
    data_received = pyqtSignal(bytes)
    error_occurred = pyqtSignal(str)
    port_opened = pyqtSignal(str)
    port_closed = pyqtSignal(str)

    def __init__(self, port_name: str, baudrate: int, parent: Optional[QObject] = None) -> None:
        """
        SerialWorkerë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            port_name (str): í¬íŠ¸ ì´ë¦„.
            baudrate (int): í†µì‹  ì†ë„.
            parent (Optional[QObject]): ë¶€ëª¨ ê°ì²´. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.port_name = port_name
        self.baudrate = baudrate
        self.serial_port: Optional[serial.Serial] = None
        self._is_running = False
        self._mutex = QMutex()

        # ì„¤ì • (Settings)
        self.datasize = serial.EIGHTBITS
        self.stopbits = serial.STOPBITS_ONE
        self.parity = serial.PARITY_NONE
        self.flow = False # RTS/CTS

    def run(self) -> None:
        """ìŠ¤ë ˆë“œ ì‹¤í–‰ ë£¨í”„ì…ë‹ˆë‹¤."""
        try:
            self.serial_port = serial.Serial(
                port=self.port_name,
                baudrate=self.baudrate,
                datasize=self.datasize,
                parity=self.parity,
                stopbits=self.stopbits,
                timeout=0.1,
                xonxoff=False,
                rtscts=self.flow,
                dsrdtr=False
            )

            if self.serial_port.is_open:
                self._is_running = True
                self.port_opened.emit(self.port_name)

                while self._is_running:
                    try:
                        if self.serial_port.in_waiting > 0:
                            data = self.serial_port.read(self.serial_port.in_waiting)
                            if data:
                                self.data_received.emit(data)
                        else:
                            # CPU ì ìœ ìœ¨ ë°©ì§€ë¥¼ ìœ„í•œ ì§§ì€ ëŒ€ê¸°
                            self.msleep(10)
                    except Exception as e:
                        self.error_occurred.emit(f"Read Error: {str(e)}")
                        break

        except serial.SerialException as e:
            self.error_occurred.emit(f"Open Error: {str(e)}")
        finally:
            self.close_port()

    def stop(self) -> None:
        """ìŠ¤ë ˆë“œ ì¤‘ì§€ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤."""
        with QMutexLocker(self._mutex):
            self._is_running = False
        self.wait() # ìŠ¤ë ˆë“œ ì¢…ë£Œ ëŒ€ê¸°

    def close_port(self) -> None:
        """í¬íŠ¸ë¥¼ ë‹«ìŠµë‹ˆë‹¤."""
        if self.serial_port and self.serial_port.is_open:
            try:
                self.serial_port.close()
                self.port_closed.emit(self.port_name)
            except Exception as e:
                self.error_occurred.emit(f"Close Error: {str(e)}")
        self.serial_port = None

    def write_data(self, data: bytes) -> bool:
        """
        ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤ (ìŠ¤ë ˆë“œ ì•ˆì „).

        Args:
            data (bytes): ì „ì†¡í•  ë°ì´í„°.

        Returns:
            bool: ì„±ê³µ ì‹œ True, ì‹¤íŒ¨ ì‹œ False.
        """
        with QMutexLocker(self._mutex):
            if self.serial_port and self.serial_port.is_open:
                try:
                    self.serial_port.write(data)
                    return True
                except Exception as e:
                    self.error_occurred.emit(f"Write Error: {str(e)}")
        return False

    def set_dtr(self, state: bool) -> None:
        """
        DTR ì‹ í˜¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            state (bool): ìƒíƒœ ê°’.
        """
        if self.serial_port and self.serial_port.is_open:
            self.serial_port.dtr = state

    def set_rts(self, state: bool) -> None:
        """
        RTS ì‹ í˜¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            state (bool): ìƒíƒœ ê°’.
        """
        if self.serial_port and self.serial_port.is_open:
            self.serial_port.rts = state
</file>

<file path="presenter/port_presenter.py">
from PyQt5.QtCore import QObject
import serial.tools.list_ports

from view.sections.main_left_section import MainLeftSection
from model.port_controller import PortController

class PortPresenter(QObject):
    """
    í¬íŠ¸ ì„¤ì • ë° ì œì–´ë¥¼ ìœ„í•œ Presenter í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    PortSettingsWidget(View)ì™€ PortController(Model)ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
    """
    def __init__(self, left_panel: MainLeftSection, port_controller: PortController) -> None:
        """
        PortPresenterë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            left_panel (MainLeftSection): ì¢Œì¸¡ íŒ¨ë„ (í¬íŠ¸ íƒ­ ë° ì„¤ì • í¬í•¨).
            port_controller (PortController): í¬íŠ¸ ì œì–´ê¸° ëª¨ë¸.
        """
        super().__init__()
        self.left_panel = left_panel

        # í˜„ì¬ í™œì„± í¬íŠ¸ íŒ¨ë„ ê°€ì ¸ì˜¤ê¸°
        self.current_port_panel = None
        self.update_current_port_panel()

        self.port_controller = port_controller

        # ì´ˆê¸° í¬íŠ¸ ìŠ¤ìº”
        self.scan_ports()

        # View ì‹œê·¸ë„ ì—°ê²° (í˜„ì¬ í¬íŠ¸ íŒ¨ë„ì˜ ì„¤ì • ìœ„ì ¯ì—ì„œ)
        if self.current_port_panel:
            self.current_port_panel.port_settings.port_scan_requested.connect(self.scan_ports)
            # ì°¸ê³ : connect_btnì€ ìì²´ í•¸ë“¤ëŸ¬ê°€ ìˆì§€ë§Œ, ì—¬ê¸°ì„œ ì§ì ‘ ì—°ê²°í•˜ì—¬ ì˜¤ë²„ë¼ì´ë“œí•©ë‹ˆë‹¤.
            # ê¸°ì¡´ í•¸ë“¤ëŸ¬ ì—°ê²° í•´ì œ
            try:
                self.current_port_panel.port_settings.connect_btn.clicked.disconnect()
            except:
                pass
            self.current_port_panel.port_settings.connect_btn.clicked.connect(self.handle_connect_click)

        # Model ì‹œê·¸ë„ ì—°ê²°
        self.port_controller.port_opened.connect(self.on_port_opened)
        self.port_controller.port_closed.connect(self.on_port_closed)
        self.port_controller.error_occurred.connect(self.on_error)

    def update_current_port_panel(self) -> None:
        """í˜„ì¬ í™œì„± í¬íŠ¸ íŒ¨ë„ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        index = self.left_panel.port_tabs.currentIndex()
        if index >= 0:
            widget = self.left_panel.port_tabs.widget(index)
            if hasattr(widget, 'port_settings'):
                self.current_port_panel = widget

    def scan_ports(self) -> None:
        """ì‚¬ìš© ê°€ëŠ¥í•œ ì‹œë¦¬ì–¼ í¬íŠ¸ë¥¼ ìŠ¤ìº”í•˜ì—¬ UIì— í‘œì‹œí•©ë‹ˆë‹¤."""
        ports = [port.device for port in serial.tools.list_ports.comports()]
        if self.current_port_panel:
            self.current_port_panel.port_settings.set_port_list(ports)

    def handle_connect_click(self) -> None:
        """
        ì—°ê²° ë²„íŠ¼ í´ë¦­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        í¬íŠ¸ê°€ ì—´ë ¤ìˆìœ¼ë©´ ë‹«ê³ , ë‹«í˜€ìˆìœ¼ë©´ ì—½ë‹ˆë‹¤.
        """
        if not self.current_port_panel:
            return

        if self.port_controller.is_open:
            self.port_controller.close_port()
        else:
            port = self.current_port_panel.port_settings.port_combo.currentText()
            try:
                baud = int(self.current_port_panel.port_settings.baud_combo.currentText())
            except ValueError:
                print("Invalid baudrate")
                return

            if port:
                self.port_controller.open_port(port, baud)
            else:
                print("No port selected")

    def on_port_opened(self, port_name: str) -> None:
        """
        í¬íŠ¸ ì—´ë¦¼ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        UIë¥¼ ì—°ê²°ë¨ ìƒíƒœë¡œ ì—…ë°ì´íŠ¸í•˜ê³  íƒ­ ì œëª©ì„ ë³€ê²½í•©ë‹ˆë‹¤.

        Args:
            port_name (str): ì—´ë¦° í¬íŠ¸ì˜ ì´ë¦„.
        """
        if self.current_port_panel:
            self.current_port_panel.port_settings.set_connected(True)
            # íƒ­ ì œëª© ì—…ë°ì´íŠ¸
            index = self.left_panel.port_tabs.currentIndex()
            self.left_panel.update_tab_title(index, port_name)

    def on_port_closed(self, port_name: str) -> None:
        """
        í¬íŠ¸ ë‹«í˜ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        UIë¥¼ ì—°ê²° í•´ì œë¨ ìƒíƒœë¡œ ì—…ë°ì´íŠ¸í•˜ê³  íƒ­ ì œëª©ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

        Args:
            port_name (str): ë‹«íŒ í¬íŠ¸ì˜ ì´ë¦„.
        """
        if self.current_port_panel:
            self.current_port_panel.port_settings.set_connected(False)
            # íƒ­ ì œëª© ì—…ë°ì´íŠ¸
            index = self.left_panel.port_tabs.currentIndex()
            self.left_panel.update_tab_title(index, "-")

    def on_error(self, message: str) -> None:
        """
        ì—ëŸ¬ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        í˜„ì¬ëŠ” ì½˜ì†”ì— ì¶œë ¥í•˜ë©°, í–¥í›„ ìƒíƒœë°”ì— í‘œì‹œí•  ì˜ˆì •ì…ë‹ˆë‹¤.

        Args:
            message (str): ì—ëŸ¬ ë©”ì‹œì§€.
        """
        # Note: í–¥í›„ MainWindowì˜ status_barë¥¼ í†µí•´ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ ì˜ˆì •
        print(f"Port Error: {message}")
        # ì—´ê¸°/ë‹«ê¸° ì¤‘ ì—ëŸ¬ ë°œìƒ ì‹œ UI ë™ê¸°í™” ë³´ì¥
        if not self.port_controller.is_open and self.current_port_panel:
            self.current_port_panel.port_settings.set_connected(False)
</file>

<file path="view/doc/implementation_plan.md">
# View ê³„ì¸µ êµ¬í˜„ ê°€ì´ë“œ

> **ëª©ì **: View ê³„ì¸µì—ì„œ êµ¬í˜„í•´ì•¼ í•  UI ì»´í¬ë„ŒíŠ¸ ëª©ë¡ê³¼ ìš”êµ¬ì‚¬í•­ ì •ì˜

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-09

---

## ğŸ“‹ êµ¬í˜„ í•­ëª© í•œëˆˆì— ë³´ê¸°

| # | í•­ëª© | ë‚œì´ë„ | íŒŒì¼ | View ì „ìš© | ìƒíƒœ |
|---|------|--------|------|----------|------|
| 1 | Connect ë²„íŠ¼ ìƒ‰ìƒ | â­ ì‰¬ì›€ | `view/widgets/port_settings.py` | âœ… | âŒ ë¶€ë¶„ |
| 2 | ìƒ‰ìƒ ì½”ë“œ í‘œì¤€í™” | â­ ì‰¬ì›€ | `.qss` íŒŒì¼ë“¤ | âœ… | âŒ ë¶€ë¶„ |
| 3 | Packet Inspector ì„¤ì • | â­â­ ë³´í†µ | `view/dialogs/preferences_dialog.py` | âœ… | âŒ ëˆ„ë½ |

**View ì „ìš© âœ…**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—†ì´ ìˆœìˆ˜ UIë§Œìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥
**View ì „ìš© âŒ**: Presenter/Model ë¡œì§ í•„ìš” (ì œì™¸)

---

## ğŸ¯ êµ¬í˜„ í•­ëª© ìƒì„¸

### 1. Connect ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½ â­ ì‰¬ì›€

**3ê°€ì§€ ìƒíƒœë³„ UI**:

| ìƒíƒœ | í…ìŠ¤íŠ¸ | ë°°ê²½ìƒ‰ | í…ìŠ¤íŠ¸ ìƒ‰ |
|------|--------|--------|-----------|
| Disconnected | "Connect" | ê¸°ë³¸ í…Œë§ˆ | ê¸°ë³¸ |
| Connected | "Disconnect" | `#4CAF50` (ë…¹ìƒ‰) | `white` |
| Error | "Reconnect" | `#F44336` (ë¹¨ê°•) | `white` |

**êµ¬í˜„ ì‚¬í•­**:
- `view/widgets/port_settings.py`ì— ë©”ì„œë“œ ì¶”ê°€
- `set_connection_state(state: str)` ë©”ì„œë“œ
  - ì¸ì: `'disconnected'`, `'connected'`, `'error'`
  - í…ìŠ¤íŠ¸ ë³€ê²½: `setText()`
  - ìŠ¤íƒ€ì¼ ë³€ê²½: `setStyleSheet()`
  - property ì„¤ì •: `setProperty("state", value)`
  - ì¦‰ì‹œ ì ìš©: `style().unpolish()` + `style().polish()`

---

### 2. ìƒ‰ìƒ ì½”ë“œ í‘œì¤€í™” â­ ì‰¬ì›€

**í‘œì¤€ ìƒ‰ìƒ íŒ”ë ˆíŠ¸** (ì¼ê´€ì„± ìœ ì§€):

**ìƒíƒœ ìƒ‰ìƒ** (ë²„íŠ¼, ë°°ê²½):
- âœ… Connected: `#4CAF50` (ë…¹ìƒ‰)
- âšª Disconnected: `#9E9E9E` (íšŒìƒ‰)
- âŒ Error: `#F44336` (ë¹¨ê°•)
- â–¶ï¸ Running: `#2196F3` (íŒŒë‘)
- âš ï¸ Warning: `#FF9800` (ì£¼í™©)

**ë¡œê·¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ** (ReceivedArea):
- OK: `#4CAF50` (ë…¹ìƒ‰)
- ERROR: `#F44336` (ë¹¨ê°•)
- URC: `#FFEB3B` (ë…¸ë‘)
- Prompt (>): `#00BCD4` (ì²­ë¡)
- Timestamp: `#9E9E9E` (íšŒìƒ‰)

**ì ìš© ìœ„ì¹˜**:
- `resources/themes/dark_theme.qss`
- `resources/themes/light_theme.qss`
- `view/widgets/received_area.py` (appendHtml ì‹œ ì ìš©)

**QSS ì„ íƒì**:
- `QPushButton[state="connected"]`
- `QPushButton[state="error"]`
- `QProgressBar[warning="true"]::chunk`

---

### 3. Packet Inspector ì„¤ì • (Preferences) â­â­ ë³´í†µ

**ëª©ì **: íŒ¨í‚· íŒŒì„œ ë™ì‘ì„ ì‚¬ìš©ìê°€ ì„¤ì •í•  ìˆ˜ ìˆëŠ” UI ì œê³µ

**ì„¤ì • í•­ëª©**:

1. **Parser íƒ€ì… ì„ íƒ**:
   - Auto Detect (ìë™ ê°ì§€)
   - AT Parser (AT ëª…ë ¹)
   - Delimiter Parser (êµ¬ë¶„ì ê¸°ë°˜)
   - Fixed Length Parser (ê³ ì • ê¸¸ì´)
   - Raw Parser (ì›ì‹œ ë°ì´í„°)

2. **Delimiter ì„¤ì •**:
   - ê¸°ë³¸ê°’: `\r\n`, `0xFF`, `0x7E`
   - ì‚¬ìš©ì ì •ì˜ êµ¬ë¶„ì ì¶”ê°€/ì‚­ì œ
   - 16ì§„ìˆ˜ ì…ë ¥ ì§€ì›

3. **Fixed Length ì„¤ì •**:
   - íŒ¨í‚· ê¸¸ì´ (ë°”ì´íŠ¸)
   - ë²”ìœ„: 1-4096

4. **AT Parser ìƒ‰ìƒ ê·œì¹™**:
   - OK: ë…¹ìƒ‰ (#4CAF50) â˜‘
   - ERROR: ë¹¨ê°• (#F44336) â˜‘
   - URC: ë…¸ë‘ (#FFEB3B) â˜‘
   - Prompt: ì²­ë¡ (#00BCD4) â˜‘
   - ì‚¬ìš©ì ì •ì˜ íŒ¨í„´ ì¶”ê°€

5. **Inspector ë™ì‘**:
   - ìµœê·¼ íŒ¨í‚· ë²„í¼ í¬ê¸° (ê¸°ë³¸: 100ê°œ)
   - ì‹¤ì‹œê°„ ì¶”ì  í™œì„±í™” â˜‘
   - ìë™ ìŠ¤í¬ë¡¤ â˜‘

**UI ë ˆì´ì•„ì›ƒ** (Preferences ëŒ€í™”ìƒì ë‚´ íƒ­):
```
â”Œâ”€ Parser Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parser Type:                           â”‚
â”‚   â—‹ Auto Detect                        â”‚
â”‚   â— AT Parser                          â”‚
â”‚   â—‹ Delimiter Parser                   â”‚
â”‚   â—‹ Fixed Length Parser                â”‚
â”‚   â—‹ Raw Parser                         â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€ Delimiter Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Delimiters:                      â”‚   â”‚
â”‚ â”‚ [Ã—] \r\n    [Ã—] 0xFF   [Ã—] 0x7E  â”‚   â”‚
â”‚ â”‚ [Add Custom] [____________]      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€ Fixed Length â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Packet Length: [64] bytes        â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€ AT Color Rules â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â˜‘ OK Pattern:     [Green  â–¼]    â”‚   â”‚
â”‚ â”‚ â˜‘ ERROR Pattern:  [Red    â–¼]    â”‚   â”‚
â”‚ â”‚ â˜‘ URC Pattern:    [Yellow â–¼]    â”‚   â”‚
â”‚ â”‚ â˜‘ Prompt Pattern: [Cyan   â–¼]    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€ Inspector Options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Buffer Size: [100] packets       â”‚   â”‚
â”‚ â”‚ â˜‘ Real-time Tracking             â”‚   â”‚
â”‚ â”‚ â˜‘ Auto Scroll                    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚         [Apply] [Reset] [Cancel]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬í˜„ ìœ„ì¹˜**:
- `view/dialogs/preferences_dialog.py`ì— ìƒˆ íƒ­ ì¶”ê°€
- íƒ­ ì´ë¦„: "Packet Inspector" ë˜ëŠ” "Parser"

**í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸**:
- QRadioButton ê·¸ë£¹ (Parser íƒ€ì…)
- QListWidget + QPushButton (Delimiter ê´€ë¦¬)
- QSpinBox (Fixed Length, Buffer Size)
- QCheckBox (ìƒ‰ìƒ ê·œì¹™, ì˜µì…˜)
- QComboBox (ìƒ‰ìƒ ì„ íƒ)

**ì„¤ì • ì €ì¥ ê²½ë¡œ**:
```json
{
  "parser": {
    "type": "at",
    "delimiters": ["\r\n", "0xFF"],
    "fixed_length": 64,
    "at_colors": {
      "ok": "#4CAF50",
      "error": "#F44336",
      "urc": "#FFEB3B",
      "prompt": "#00BCD4"
    },
    "inspector": {
      "buffer_size": 100,
      "real_time_tracking": true,
      "auto_scroll": true
    }
  }
}
```

**ì—…ë°ì´íŠ¸ ë©”ì„œë“œ**:
- `load_parser_settings()` - ì„¤ì • ë¡œë“œ
- `save_parser_settings()` - ì„¤ì • ì €ì¥
- `apply_parser_settings()` - ì„¤ì • ì ìš© (Presenterì— ì‹œê·¸ë„ emit)
- `reset_parser_settings()` - ê¸°ë³¸ê°’ ë³µì›

**ì–¸ì–´ ì§€ì›**:
- `parser_settings_title`
- `parser_type_auto`, `parser_type_at` ë“±
- `delimiter_custom_hint`
- `inspector_buffer_size`

---

## ğŸš« View ë²”ìœ„ ë°– (ì œì™¸ í•­ëª©)

ë‹¤ìŒ í•­ëª©ë“¤ì€ **Presenter/Model êµ¬í˜„ í•„ìš”** (í˜„ì¬ ì œì™¸):

1. âŒ **PortCombo ìë™ ìŠ¤ìº”** - íƒ€ì´ë¨¸ ë¡œì§
2. âŒ **ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸** - QTimer í˜¸ì¶œ
3. âŒ **RxLogView ì„±ëŠ¥ ìµœì í™”** - Chunk ë Œë”ë§, Virtual Scrolling
4. âŒ **CommandList Drag&Drop** - ë³µì¡í•œ ì´ë²¤íŠ¸ ì²˜ë¦¬
5. âŒ **ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼** - QPropertyAnimation
6. âŒ **Console íŒ¨ë„** - logger ì—°ë™

**ë°ì´í„° ì—°ë™ì€ ë‹¤ìŒ ë‹¨ê³„(Presenter êµ¬í˜„)ì—ì„œ!**
</file>

<file path="view/sections/main_menu_bar.py">
from PyQt5.QtWidgets import QMenuBar, QAction
from PyQt5.QtCore import pyqtSignal
from pygments.lexers.sql import language_re

from view.lang_manager import lang_manager

class MainMenuBar(QMenuBar):
    """
    ë©”ì¸ ìœˆë„ìš°ì˜ ë©”ë‰´ë°”ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    """
    # Signals
    new_tab_requested = pyqtSignal()
    exit_requested = pyqtSignal()
    theme_changed = pyqtSignal(str)
    font_settings_requested = pyqtSignal()
    language_changed = pyqtSignal(str)
    preferences_requested = pyqtSignal()
    about_requested = pyqtSignal()
    open_port_requested = pyqtSignal()
    close_tab_requested = pyqtSignal()
    save_log_requested = pyqtSignal()
    toggle_right_panel_requested = pyqtSignal(bool)

    def __init__(self, parent=None):
        super().__init__(parent)
        # Theme action references for checkable state
        self.theme_dark_action = None
        self.theme_light_action = None
        self.init_menu()

    def init_menu(self) -> None:
        """ë©”ë‰´ë°”ë¥¼ ì´ˆê¸°í™”í•˜ê³  ì•¡ì…˜ì„ ì„¤ì •í•©ë‹ˆë‹¤."""
        self.clear()

        # íŒŒì¼ ë©”ë‰´ (File Menu)
        file_menu = self.addMenu(lang_manager.get_text("main_menu_file"))

        new_tab_action = QAction(lang_manager.get_text("main_menu_new_tab"), self)
        new_tab_action.setShortcut("Ctrl+T")
        new_tab_action.setToolTip(lang_manager.get_text("main_menu_new_tab_tooltip"))
        new_tab_action.triggered.connect(self.new_tab_requested.emit)
        file_menu.addAction(new_tab_action)

        open_port_action = QAction(lang_manager.get_text("main_menu_open_port"), self)
        open_port_action.setShortcut("Ctrl+O")
        open_port_action.triggered.connect(self.open_port_requested.emit)
        file_menu.addAction(open_port_action)

        close_tab_action = QAction(lang_manager.get_text("main_menu_close_tab"), self)
        close_tab_action.setShortcut("Ctrl+W")
        close_tab_action.triggered.connect(self.close_tab_requested.emit)
        file_menu.addAction(close_tab_action)

        save_log_action = QAction(lang_manager.get_text("main_menu_save_log"), self)
        save_log_action.setShortcut("Ctrl+Shift+S")
        save_log_action.triggered.connect(self.save_log_requested.emit)
        file_menu.addAction(save_log_action)

        file_menu.addSeparator()

        exit_action = QAction(lang_manager.get_text("main_menu_exit"), self)
        exit_action.setShortcut("Ctrl+Q")
        exit_action.setToolTip(lang_manager.get_text("main_menu_exit_tooltip"))
        exit_action.triggered.connect(self.exit_requested.emit)
        file_menu.addAction(exit_action)

        # ë³´ê¸° ë©”ë‰´ (View Menu)
        view_menu = self.addMenu(lang_manager.get_text("main_menu_view"))

        # Right Panel Toggle
        self.toggle_right_panel_action = QAction(lang_manager.get_text("main_menu_toggle_right_panel"), self)
        self.toggle_right_panel_action.setCheckable(True)
        self.toggle_right_panel_action.setChecked(True) # Default, will be updated by MainWindow
        self.toggle_right_panel_action.triggered.connect(self.toggle_right_panel_requested.emit)
        view_menu.addAction(self.toggle_right_panel_action)

        view_menu.addSeparator()

        # í…Œë§ˆ ì„œë¸Œë©”ë‰´
        theme_menu = view_menu.addMenu(lang_manager.get_text("main_menu_theme"))

        self.theme_dark_action = QAction(lang_manager.get_text("main_menu_theme_dark"), self)
        self.theme_dark_action.setCheckable(True)
        self.theme_dark_action.triggered.connect(lambda: self.theme_changed.emit("dark"))
        theme_menu.addAction(self.theme_dark_action)

        self.theme_light_action = QAction(lang_manager.get_text("main_menu_theme_light"), self)
        self.theme_light_action.setCheckable(True)
        self.theme_light_action.triggered.connect(lambda: self.theme_changed.emit("light"))
        theme_menu.addAction(self.theme_light_action)

        # í°íŠ¸ ì„¤ì • ì•¡ì…˜
        font_action = QAction(lang_manager.get_text("main_menu_font"), self)
        font_action.setShortcut("Ctrl+Shift+F")
        font_action.setToolTip(lang_manager.get_text("main_menu_font_tooltip"))
        font_action.triggered.connect(self.font_settings_requested.emit)
        view_menu.addAction(font_action)

        # ì–¸ì–´ ì„œë¸Œë©”ë‰´ (Language Submenu)
        lang_menu = view_menu.addMenu(lang_manager.get_text("main_menu_lang"))

        lang_en_action = QAction(lang_manager.get_text("main_menu_lang_en"), self)
        lang_en_action.triggered.connect(lambda: self.language_changed.emit("en"))
        lang_menu.addAction(lang_en_action)

        lang_ko_action = QAction(lang_manager.get_text("main_menu_lang_ko"), self)
        lang_ko_action.triggered.connect(lambda: self.language_changed.emit("ko"))
        lang_menu.addAction(lang_ko_action)

        # Preferences ì•¡ì…˜
        preferences_action = QAction(lang_manager.get_text("main_menu_preferences"), self)
        preferences_action.setShortcut("Ctrl+,")
        preferences_action.triggered.connect(self.preferences_requested.emit)
        view_menu.addAction(preferences_action)

        # ë„êµ¬ ë©”ë‰´ (Tools Menu)
        tools_menu = self.addMenu(lang_manager.get_text("main_menu_tools"))

        # ë„ì›€ë§ ë©”ë‰´ (Help Menu)
        help_menu = self.addMenu(lang_manager.get_text("main_menu_help"))
        about_action = QAction(lang_manager.get_text("main_menu_about"), self)
        about_action.triggered.connect(self.about_requested.emit)
        help_menu.addAction(about_action)

    def set_right_panel_checked(self, checked: bool) -> None:
        """ìš°ì¸¡ íŒ¨ë„ í† ê¸€ ì•¡ì…˜ì˜ ì²´í¬ ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤."""
        if hasattr(self, 'toggle_right_panel_action'):
            self.toggle_right_panel_action.setChecked(checked)

    def set_current_theme(self, theme_name: str) -> None:
        """
        í˜„ì¬ í…Œë§ˆë¥¼ ì„¤ì •í•˜ê³  ë©”ë‰´ì— ì²´í¬ í‘œì‹œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

        Args:
            theme_name (str): í…Œë§ˆ ì´ë¦„ ("dark" ë˜ëŠ” "light")
        """
        if self.theme_dark_action and self.theme_light_action:
            self.theme_dark_action.setChecked(theme_name.lower() == "dark")
            self.theme_light_action.setChecked(theme_name.lower() == "light")

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ ë©”ë‰´ í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.init_menu()
</file>

<file path="view/widgets/file_progress.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout, QHBoxLayout, QProgressBar, QLabel, QPushButton
from PyQt5.QtCore import pyqtSignal
from typing import Optional
from view.lang_manager import lang_manager

class FileProgressWidget(QWidget):
    """
    íŒŒì¼ ì „ì†¡ ì§„í–‰ë¥ ì„ í‘œì‹œí•˜ëŠ” ìœ„ì ¯ì…ë‹ˆë‹¤.
    ì§„í–‰ë¥  ë°”, ì „ì†¡ ì†ë„, ë‚¨ì€ ì‹œê°„(ETA), ì·¨ì†Œ ë²„íŠ¼ì„ í¬í•¨í•©ë‹ˆë‹¤.
    """

    cancel_requested = pyqtSignal()  # ì·¨ì†Œ ìš”ì²­ ì‹œê·¸ë„

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        super().__init__(parent)
        self.cancel_btn = None
        self.eta_lbl = None
        self.speed_lbl = None
        self.progress_bar = None
        self.status_lbl = None
        self.init_ui()
        self.reset()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(5, 5, 5, 5)
        layout.setSpacing(2)

        # íŒŒì¼ëª… ë° ìƒíƒœ ë ˆì´ë¸”
        self.status_lbl = QLabel(lang_manager.get_text("file_prog_lbl_status_ready"))
        self.status_lbl.setStyleSheet("font-weight: bold;")

        # ì§„í–‰ë¥  ë°”
        self.progress_bar = QProgressBar()
        self.progress_bar.setRange(0, 100)
        self.progress_bar.setValue(0)
        self.progress_bar.setTextVisible(True)
        self.progress_bar.setFormat("%p%")

        # ìƒì„¸ ì •ë³´ (ì†ë„, ETA) ë° ì·¨ì†Œ ë²„íŠ¼
        info_layout = QHBoxLayout()

        self.speed_lbl = QLabel("0 KB/s")
        self.eta_lbl = QLabel(lang_manager.get_text("file_prog_lbl_eta_placeholder"))

        self.cancel_btn = QPushButton(lang_manager.get_text("file_prog_btn_cancel"))
        self.cancel_btn.setFixedWidth(60)
        self.cancel_btn.clicked.connect(self.on_cancel_clicked)
        self.cancel_btn.setEnabled(False)

        info_layout.addWidget(self.speed_lbl)
        info_layout.addStretch()
        info_layout.addWidget(self.eta_lbl)
        info_layout.addWidget(self.cancel_btn)

        layout.addWidget(self.status_lbl)
        layout.addWidget(self.progress_bar)
        layout.addLayout(info_layout)

        self.setLayout(layout)

    def on_cancel_clicked(self) -> None:
        """ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤."""
        self.cancel_requested.emit()

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        # ìƒíƒœ ë ˆì´ë¸”ì€ í˜„ì¬ ìƒíƒœì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë³€ê²½ë˜ë¯€ë¡œ ì—¬ê¸°ì„œ ì¼ê´„ ë³€ê²½í•˜ê¸° ì–´ë ¤ì›€
        # ë‹¤ë§Œ, Ready ìƒíƒœë¼ë©´ ë³€ê²½ ê°€ëŠ¥
        if lang_manager.text_matches_key(self.status_lbl.text(), "file_prog_lbl_status_ready"):
            self.status_lbl.setText(lang_manager.get_text("file_prog_lbl_status_ready"))

        self.cancel_btn.setText(lang_manager.get_text("file_prog_btn_cancel"))

        # ETA í”Œë ˆì´ìŠ¤í™€ë” ì—…ë°ì´íŠ¸ (ì§„í–‰ ì¤‘ì´ ì•„ë‹ ë•Œ)
        if lang_manager.text_matches_key(self.eta_lbl.text(), "file_prog_lbl_eta_placeholder"):
            self.eta_lbl.setText(lang_manager.get_text("file_prog_lbl_eta_placeholder"))

    def update_progress(self, sent_bytes: int, total_bytes: int, speed_bps: float, eta_seconds: float) -> None:
        """
        ì§„í–‰ë¥  ë° ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

        Args:
            sent_bytes (int): ì „ì†¡ëœ ë°”ì´íŠ¸ ìˆ˜
            total_bytes (int): ì „ì²´ ë°”ì´íŠ¸ ìˆ˜
            speed_bps (float): ì „ì†¡ ì†ë„ (bytes/sec)
            eta_seconds (float): ë‚¨ì€ ì‹œê°„ (ì´ˆ)
        """
        if total_bytes > 0:
            percent = int((sent_bytes / total_bytes) * 100)
            self.progress_bar.setValue(percent)

        # ì†ë„ í¬ë§·íŒ… (KB/s, MB/s)
        if speed_bps < 1024:
            speed_str = f"{speed_bps:.1f} B/s"
        elif speed_bps < 1024 * 1024:
            speed_str = f"{speed_bps/1024:.1f} KB/s"
        else:
            speed_str = f"{speed_bps/(1024*1024):.1f} MB/s"

        self.speed_lbl.setText(speed_str)

        # ETA í¬ë§·íŒ… (MM:SS)
        eta_min = int(eta_seconds // 60)
        eta_sec = int(eta_seconds % 60)
        self.eta_lbl.setText(f"ETA: {eta_min:02d}:{eta_sec:02d}")

        # ìƒíƒœ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
        status_msg = lang_manager.get_text("file_prog_lbl_status_sending").format(sent_bytes, total_bytes)
        self.status_lbl.setText(status_msg)
        self.cancel_btn.setEnabled(True)

    def reset(self) -> None:
        """ìœ„ì ¯ ìƒíƒœë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        self.progress_bar.setValue(0)
        self.status_lbl.setText(lang_manager.get_text("file_prog_lbl_status_ready"))
        self.speed_lbl.setText("0 KB/s")
        self.eta_lbl.setText(lang_manager.get_text("file_prog_lbl_eta_placeholder"))
        self.cancel_btn.setEnabled(False)

    def set_complete(self, success: bool, message: str = "") -> None:
        """
        ì „ì†¡ ì™„ë£Œ ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            success (bool): ì„±ê³µ ì—¬ë¶€
            message (str): ì™„ë£Œ ë©”ì‹œì§€
        """
        self.cancel_btn.setEnabled(False)
        if success:
            self.progress_bar.setValue(100)
            status_msg = lang_manager.get_text("file_prog_lbl_status_completed").format(message)
            self.status_lbl.setText(status_msg)
        else:
            status_msg = lang_manager.get_text("file_prog_lbl_status_failed").format(message)
            self.status_lbl.setText(status_msg)
            self.progress_bar.setStyleSheet("QProgressBar::chunk { background-color: red; }")
</file>

<file path="doc/session_summary_20251204.md">
# 2025-12-04 ê°œë°œ ì„¸ì…˜ ìš”ì•½

## 1. ê°œìš”
ì´ë²ˆ ì„¸ì…˜ì€ ì‚¬ìš©ì í”¼ë“œë°±ì„ ë°”íƒ•ìœ¼ë¡œ í•œ **UI ê°œì„ (UI Improvements)** ë° **ê¸°ëŠ¥ ë³´ì™„(Feature Enhancements)**ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. ì£¼ìš” ëª©í‘œëŠ” ì•„ì´ì½˜ ëˆ„ë½ ìˆ˜ì •, ìˆ˜ë™ ì œì–´ ê¸°ëŠ¥ ê°•í™”, ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„, ê·¸ë¦¬ê³  í…Œë§ˆ ê´€ë ¨ ë²„ê·¸ ìˆ˜ì •ì´ì—ˆìŠµë‹ˆë‹¤.

## 2. ì£¼ìš” í™œë™

### A. UI ê°œì„ 
- **ì•„ì´ì½˜ ì¶”ê°€ ë° ìŠ¤íƒ€ì¼ ìˆ˜ì •**:
  - `ReceivedArea`ì˜ ê²€ìƒ‰ íƒìƒ‰ ë²„íŠ¼(ì´ì „/ë‹¤ìŒ)ì— SVG ì•„ì´ì½˜ ì ìš© (`find_prev`, `find_next`)
  - `MacroListWidget`ì˜ ë²„íŠ¼(`add`, `del`, `up`, `down`) objectName ë¶ˆì¼ì¹˜ ìˆ˜ì •í•˜ì—¬ ì•„ì´ì½˜ ì •ìƒ í‘œì‹œ
  - ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ QSS ì—…ë°ì´íŠ¸

- **í…Œë§ˆ ë²„ê·¸ ìˆ˜ì •**:
  - ë‹¤í¬ í…Œë§ˆì—ì„œ `QLineEdit`, `QTextEdit`ì˜ Placeholder í…ìŠ¤íŠ¸ê°€ í°íŠ¸ ì„¤ì • ë³€ê²½ ì‹œ íšŒìƒ‰ì—ì„œ ê²€ì€ìƒ‰ìœ¼ë¡œ ë³€í•˜ëŠ” ë¬¸ì œ ìˆ˜ì •
  - `dark_theme.qss`ì— `placeholder-text-color` ì†ì„± ëª…ì‹œì  ì¶”ê°€

### B. ê¸°ëŠ¥ ê°•í™”
- **Manual Control ê¸°ëŠ¥ í™•ì¥**:
  - `ManualControlWidget`ì— ì ‘ë‘ì‚¬(Prefix) ë° ì ‘ë¯¸ì‚¬(Suffix) ì„¤ì • ê¸°ëŠ¥ ì¶”ê°€
  - ì²´í¬ë°•ìŠ¤ë¥¼ í†µí•´ ì „ì†¡ ì‹œ ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ ìë™ ì¶”ê°€ ì—¬ë¶€ ì„ íƒ ê°€ëŠ¥
  - ê´€ë ¨ ì–¸ì–´ í‚¤(`manual_grp_format`, `manual_chk_prefix`, `manual_chk_suffix`) ì¶”ê°€ (í•œê¸€/ì˜ì–´)

- **ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ êµ¬í˜„**:
  - `MacroCtrlWidget`ì˜ ì €ì¥/ë¡œë“œ ë²„íŠ¼ì„ `MacroListPanel`ì˜ ê¸°ëŠ¥ê³¼ ì—°ê²°
  - `MacroListPanel`ì— `save_script_to_file`, `load_script_from_file` ë©”ì„œë“œ êµ¬í˜„
  - ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ì™€ ì»¨íŠ¸ë¡¤ ì„¤ì •(ì§€ì—° ì‹œê°„, ë°˜ë³µ íšŸìˆ˜ ë“±)ì„ JSON íŒŒì¼ë¡œ ì¼ê´„ ì €ì¥/ë³µì›
  - `commentjson` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©í•˜ì—¬ JSON ê°€ë…ì„± í™•ë³´

### C. UI ì•„í‚¤í…ì²˜ ë¦¬íŒ©í† ë§
- **4ë‹¨ê³„ ê³„ì¸µ êµ¬ì¡° í™•ë¦½ (`Window â†’ Section â†’ Panel â†’ Widget`)**:
  - `view/sections/` ë””ë ‰í† ë¦¬ ìƒì„±
  - `LeftPanel` â†’ `LeftSection`, `RightPanel` â†’ `RightSection`ìœ¼ë¡œ ë³€ê²½
  - `ManualControlPanel` (`ManualControlWidget` ë˜í•‘), `PacketInspectorPanel` (`PacketInspectorWidget` ë˜í•‘) ìƒì„±
  - ê° ê³„ì¸µì˜ ì—­í•  ëª…í™•í™”:
    - **Section**: í™”ë©´ êµ¬íš, Panelë§Œ í¬í•¨
    - **Panel**: ê¸°ëŠ¥ ê·¸ë£¹, Widgetë§Œ í¬í•¨
    - **Widget**: ì‹¤ì œ UI ìš”ì†Œ
  - Presenter ê³„ì¸µ ì„í¬íŠ¸ ë° ì°¸ì¡° ê²½ë¡œ ì—…ë°ì´íŠ¸ (`port_presenter.py`, `main_presenter.py`)

### E. ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ë° Preferences ë‹¤ì´ì–¼ë¡œê·¸ ê°œì„ 
- **ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì—…ë°ì´íŠ¸**:
  - `doc/code_style_guide.md`ì— ì–¸ì–´ í‚¤ ë„¤ì´ë° ê·œì¹™ ì„¹ì…˜(5.1) ì¶”ê°€
  - `[context]_[type]_[name]` í˜•ì‹ ëª…ì‹œ
  - UI ìš”ì†Œ íƒ€ì… ëª©ë¡ ì œê³µ: `btn`, `lbl`, `chk`, `combo`, `input`, `grp`, `col`, `tab`, `dialog`, `txt`, `tooltip`
  - ì˜¬ë°”ë¥¸ ì˜ˆì‹œ ë° ì˜ëª»ëœ ì˜ˆì‹œ ì œê³µ
  - íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ ë¬¸ì„œí™” (ë‹¤ì´ì–¼ë¡œê·¸ íƒ€ì´í‹€, ìƒíƒœ ë©”ì‹œì§€ ë“±)

- **Preferences ë‹¤ì´ì–¼ë¡œê·¸ ì ‘ê·¼ì„± ìˆ˜ì •**:
  - `MainWindow`ì—ì„œ `preferences_requested` ì‹œê·¸ë„ ì—°ê²° (ì´ì „ì— ì£¼ì„ ì²˜ë¦¬ë˜ì–´ ìˆì—ˆìŒ)
  - `PreferencesDialog` import ì¶”ê°€
  - `open_preferences_dialog()` ë©”ì„œë“œ êµ¬í˜„
  - `apply_preferences()` ë©”ì„œë“œ êµ¬í˜„ (í…Œë§ˆ/ì–¸ì–´ ë³€ê²½ ì ìš©)
  - ë©”ë‰´ë°” â†’ View â†’ Preferences ë©”ë‰´ ì •ìƒ ì‘ë™

### F. ë¬¸ì„œí™”
- **CHANGELOG ì—…ë°ì´íŠ¸**: 12ì›” 2ì¼~3ì¼ ëˆ„ë½ëœ ë³€ê²½ ì‚¬í•­(ì„¤ì • ì €ì¥, commentjson ë“±) ë³´ì™„
- **Session Summary ì—…ë°ì´íŠ¸**: 12ì›” 2ì¼, 3ì¼, 4ì¼ ìš”ì•½ ë¬¸ì„œ í˜„í–‰í™”

## 3. ê²°ê³¼
- ì‚¬ìš©ìê°€ ìš”ì²­í•œ ëª¨ë“  UI ê°œì„  ì‚¬í•­ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
- Manual Controlì—ì„œ ë” ìœ ì—°í•œ ë°ì´í„° ì „ì†¡ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.
- Command Listì˜ ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
- UI í…Œë§ˆì˜ ì¼ê´€ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
- ì–¸ì–´ í‚¤ ë„¤ì´ë°ì— ëŒ€í•œ ëª…í™•í•œ ê°€ì´ë“œë¼ì¸ì´ ë¬¸ì„œí™”ë˜ì—ˆìŠµë‹ˆë‹¤.
- Preferences ë‹¤ì´ì–¼ë¡œê·¸ê°€ ë©”ë‰´ì—ì„œ ì •ìƒì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## 4. ë‹¤ìŒ ë‹¨ê³„ (Next Steps)
> **Note**: ì´í›„ ì‘ì—…ì€ 2025-12-05 ì„¸ì…˜ì—ì„œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ `doc/session_summary_20251205.md` ì°¸ì¡°.

- **Phase 3: Core ìœ í‹¸ë¦¬í‹° êµ¬í˜„**
  - `RingBuffer` (core/utils.py): ê³ ì† ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì›í˜• ë²„í¼
  - `ThreadSafeQueue` (core/utils.py): ìŠ¤ë ˆë“œ ê°„ ì•ˆì „í•œ ë°ì´í„° ì „ë‹¬
  - `EventBus` (core/event_bus.py): ì»´í¬ë„ŒíŠ¸ ê°„ ëŠìŠ¨í•œ ê²°í•©ì„ ìœ„í•œ ì´ë²¤íŠ¸ ë²„ìŠ¤
- **Model ê³„ì¸µ êµ¬í˜„ ì‹œì‘**
  - `SerialWorker`: ì‹¤ì œ ì‹œë¦¬ì–¼ í†µì‹  ë¡œì§

---

## 5. ì¸ìˆ˜ì¸ê³„ ë° í™˜ê²½ ì„¤ì • (Handover Information)

ì´ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ì´ì–´ì„œ ì‘ì—…í•˜ê¸° ìœ„í•œ ì •ë³´ì…ë‹ˆë‹¤.

### A. ê°œë°œ í™˜ê²½ (Environment)
- **Python**: 3.10 ì´ìƒ ê¶Œì¥ (3.11 í…ŒìŠ¤íŠ¸ ì™„ë£Œ)
- **OS**: Windows 10/11 (ê¸°ë³¸ ê°œë°œ í™˜ê²½), Linux/macOS í˜¸í™˜ ê°€ëŠ¥
- **ì˜ì¡´ì„± (Dependencies)**:
  ```bash
  pip install PyQt5 pyserial commentjson
  ```
  *(ì°¸ê³ : `requirements.txt`ê°€ ìˆë‹¤ë©´ `pip install -r requirements.txt` ì‚¬ìš©)*

### B. ì‹¤í–‰ ë°©ë²• (Execution)
í”„ë¡œì íŠ¸ ë£¨íŠ¸(`serial_tool2/`)ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤:
```bash
python main.py
```

### C. í˜„ì¬ ìƒíƒœ ìš”ì•½ (Current Status)
- **UI**: 100% êµ¬í˜„ ì™„ë£Œ (ë‹¤êµ­ì–´, í…Œë§ˆ, í°íŠ¸ ì ìš©ë¨)
- **ë¡œì§**:
  - View ê³„ì¸µ ë¡œì§ (ìœ„ì ¯ ë™ì‘, ì„¤ì • ì €ì¥/ë³µì›) ì™„ë£Œ
  - Core/Model ê³„ì¸µì€ ì•„ì§ êµ¬í˜„ ì „ (Mock ë˜ëŠ” ë¹„ì–´ ìˆìŒ)
- **ë¬¸ì„œ**: `doc/task.md`ì™€ `doc/implementation_plan.md`ê°€ ìµœì‹  ì‚¬ì–‘(`Implementation_Specification.md`)ê³¼ ë™ê¸°í™”ë¨ (í•œê¸€)

### D. ì£¼ì˜ ì‚¬í•­ (Notes)
- **ê°€ìƒ ì‹œë¦¬ì–¼ í¬íŠ¸**: ì‹¤ì œ ì¥ë¹„ê°€ ì—†ë‹¤ë©´ `com0com`(Windows) ë˜ëŠ” `socat`(Linux)ì„ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.
- **ì„¤ì • íŒŒì¼**: `config/settings.json`ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ìë™ ìƒì„±ë©ë‹ˆë‹¤.
- **ë¡œê·¸**: `logs/` ë””ë ‰í† ë¦¬ì— ì‹¤í–‰ ë¡œê·¸ê°€ ì €ì¥ë©ë‹ˆë‹¤. ë¬¸ì œ ë°œìƒ ì‹œ í™•ì¸í•˜ì„¸ìš”.
</file>

<file path="tests/test_ui_translations.py">
import sys
import os
import pytest
from PyQt5.QtWidgets import QApplication

from view.lang_manager import lang_manager
from view.widgets.manual_control import ManualControlWidget
from view.widgets.macro_list import MacroListWidget
from view.widgets.received_area import ReceivedAreaWidget
from view.widgets.packet_inspector import PacketInspectorWidget
from view.widgets.file_progress import FileProgressWidget
from view.widgets.status_area import StatusAreaWidget
from view.sections.main_left_section import MainLeftSection
from view.sections.main_right_section import MainRightSection

# ë¶€ëª¨ ë””ë ‰í† ë¦¬ë¥¼ ê²½ë¡œì— ì¶”ê°€í•˜ì—¬ ëª¨ë“ˆ import ê°€ëŠ¥í•˜ê²Œ í•¨
current_dir = os.path.dirname(os.path.abspath(__file__))
parent_dir = os.path.dirname(current_dir)
sys.path.insert(0, parent_dir)

@pytest.fixture(scope="session")
def app():
    app = QApplication.instance()
    if app is None:
        app = QApplication([])
    yield app

def test_manual_control_translation(app, qtbot):
    widget = ManualControlWidget()
    qtbot.addWidget(widget)

    # Switch to English
    lang_manager.set_language('en')
    assert widget.send_manual_cmd_btn.text() == "Send"
    assert widget.hex_chk.text() == "Hex"

    # Switch to Korean
    lang_manager.set_language('ko')
    assert widget.send_manual_cmd_btn.text() == "ì „ì†¡"
    assert widget.hex_chk.text() == "Hex"

def test_macro_list_translation(app, qtbot):
    widget = MacroListWidget()
    qtbot.addWidget(widget)

    lang_manager.set_language('en')
    # Check tooltips for buttons as they have no text
    assert widget.add_cmd_btn.toolTip() == "Add new command"

    lang_manager.set_language('ko')
    assert widget.add_cmd_btn.toolTip() == "ìƒˆ ëª…ë ¹ ì¶”ê°€"

def test_received_area_translation(app, qtbot):
    widget = ReceivedAreaWidget()
    qtbot.addWidget(widget)

    lang_manager.set_language('en')
    assert widget.recv_clear_log_btn.text() == "Clear"

    lang_manager.set_language('ko')
    assert widget.recv_clear_log_btn.text() == "ì§€ìš°ê¸°"

def test_packet_inspector_translation(app, qtbot):
    widget = PacketInspectorWidget()
    qtbot.addWidget(widget)

    lang_manager.set_language('en')
    assert widget.title_label.text() == "Packet Inspector"

    lang_manager.set_language('ko')
    assert widget.title_label.text() == "íŒ¨í‚· ì¸ìŠ¤í™í„°"

def test_file_progress_translation(app, qtbot):
    widget = FileProgressWidget()
    qtbot.addWidget(widget)

    # Force switch to Korean first to ensure change to English triggers signal
    lang_manager.set_language('ko')
    lang_manager.set_language('en')
    assert widget.cancel_btn.text() == "Cancel"

    lang_manager.set_language('ko')
    assert widget.cancel_btn.text() == "ì·¨ì†Œ"

def test_status_area_translation(app, qtbot):
    widget = StatusAreaWidget()
    qtbot.addWidget(widget)

    lang_manager.set_language('en')
    assert widget.log_lbl.text() == "Status Log"

    lang_manager.set_language('ko')
    assert widget.log_lbl.text() == "ìƒíƒœ ë¡œê·¸"

def test_left_panel_translation(app, qtbot):
    widget = MainLeftSection()
    qtbot.addWidget(widget)

    lang_manager.set_language('en')
    assert widget.port_tabs.toolTip() == "Port Tabs"

    lang_manager.set_language('ko')
    assert widget.port_tabs.toolTip() == "í¬íŠ¸ íƒ­"

def test_right_panel_translation(app, qtbot):
    widget = MainRightSection()
    qtbot.addWidget(widget)

    lang_manager.set_language('en')
    assert widget.tabs.tabText(0) == "Macro List"
    assert widget.tabs.tabText(1) == "Inspector"

    lang_manager.set_language('ko')
    assert widget.tabs.tabText(0) == "ë§¤í¬ë¡œ ë¦¬ìŠ¤íŠ¸"
    assert widget.tabs.tabText(1) == "ì¸ìŠ¤í™í„°"
</file>

<file path="view/color_rules.py">
"""
ìƒ‰ìƒ ê·œì¹™ ê´€ë¦¬
ReceivedAreaì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ ë§¤ì¹­ ìƒ‰ìƒ ê·œì¹™ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
"""
from dataclasses import dataclass
from typing import List
import re
from pathlib import Path
import os

try:
    import commentjson as json
except ImportError:
    import json

@dataclass
class ColorRule:
    """ë‹¨ì¼ ìƒ‰ìƒ ê·œì¹™ ë°ì´í„° í´ë˜ìŠ¤ì…ë‹ˆë‹¤."""
    name: str           # ê·œì¹™ ì´ë¦„ (ì˜ˆ: "AT_OK")
    pattern: str        # ì •ê·œì‹ íŒ¨í„´ ë˜ëŠ” ë¬¸ìì—´
    color: str          # HTML ìƒ‰ìƒ ì½”ë“œ (ì˜ˆ: "#FF0000")
    is_regex: bool = True  # ì •ê·œì‹ ì‚¬ìš© ì—¬ë¶€
    enabled: bool = True   # ê·œì¹™ í™œì„±í™” ì—¬ë¶€

class ColorRulesManager:
    """
    ìƒ‰ìƒ ê·œì¹™ ê´€ë¦¬ì í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    íŒ¨í„´ ë§¤ì¹­ì„ í†µí•´ í…ìŠ¤íŠ¸ì— ìƒ‰ìƒì„ ì…íˆëŠ” ê·œì¹™ë“¤ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
    """

    # ê¸°ë³¸ ê·œì¹™ (Implementation_Specification.md ì„¹ì…˜ 11.3.1 ê¸°ì¤€)
    DEFAULT_RULES = [
        ColorRule("AT_OK", r'\bOK\b', '#4CAF50'),
        ColorRule("AT_ERROR", r'\bERROR\b', '#F44336'),
        ColorRule("URC", r'(\+\w+:)', '#FFEB3B'),
        ColorRule("PROMPT", r'^>', '#00BCD4'),
    ]

    def __init__(self) -> None:
        """
        ColorRulesManagerë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
        config/color_rules.json íŒŒì¼ì´ ìˆìœ¼ë©´ ë¡œë“œí•˜ê³ , ì—†ìœ¼ë©´ ê¸°ë³¸ ê·œì¹™ì„ ìƒì„±í•˜ì—¬ ì €ì¥í•©ë‹ˆë‹¤.
        """
        self.rules: List[ColorRule] = []
        self.config_path = self._get_config_path()

        # ì„¤ì • íŒŒì¼ ë¡œë“œ ì‹œë„, ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ê·œì¹™ ì‚¬ìš©
        if self.config_path.exists():
            self.load_from_json(str(self.config_path))
        else:
            self.rules = self.DEFAULT_RULES.copy()
            # ì„¤ì • ë””ë ‰í† ë¦¬ ìƒì„± ë° ê¸°ë³¸ ê·œì¹™ ì €ì¥
            self.config_path.parent.mkdir(parents=True, exist_ok=True)
            self.save_to_json(str(self.config_path))

    def apply_rules(self, text: str) -> str:
        """
        í…ìŠ¤íŠ¸ì— ëª¨ë“  í™œì„±í™”ëœ ìƒ‰ìƒ ê·œì¹™ì„ ì ìš©í•©ë‹ˆë‹¤.

        Args:
            text (str): ìƒ‰ìƒ ê·œì¹™ì„ ì ìš©í•  ì›ë³¸ í…ìŠ¤íŠ¸.

        Returns:
            str: HTML span íƒœê·¸ë¡œ ìƒ‰ìƒì´ ì ìš©ëœ í…ìŠ¤íŠ¸.
        """
        result = text
        for rule in self.rules:
            if rule.enabled:
                result = self._apply_single_rule(result, rule)
        return result

    def add_custom_rule(self, name: str, pattern: str, color: str, is_regex: bool = True) -> None:
        """
        ì‚¬ìš©ì ì •ì˜ ìƒ‰ìƒ ê·œì¹™ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

        Args:
            name (str): ê·œì¹™ ì´ë¦„.
            pattern (str): ë§¤ì¹­ íŒ¨í„´ (ì •ê·œì‹ ë˜ëŠ” ì¼ë°˜ ë¬¸ìì—´).
            color (str): HTML ìƒ‰ìƒ ì½”ë“œ (ì˜ˆ: '#FF0000').
            is_regex (bool, optional): ì •ê·œì‹ íŒ¨í„´ ì—¬ë¶€. ê¸°ë³¸ê°’ì€ True.
        """
        self.rules.append(ColorRule(name, pattern, color, is_regex))

    def remove_rule(self, name: str) -> None:
        """
        ì´ë¦„ìœ¼ë¡œ ìƒ‰ìƒ ê·œì¹™ì„ ì œê±°í•©ë‹ˆë‹¤.

        Args:
            name (str): ì œê±°í•  ê·œì¹™ì˜ ì´ë¦„.
        """
        self.rules = [r for r in self.rules if r.name != name]

    def toggle_rule(self, name: str) -> None:
        """
        ê·œì¹™ì˜ í™œì„±í™” ìƒíƒœë¥¼ í† ê¸€í•©ë‹ˆë‹¤.

        Args:
            name (str): í† ê¸€í•  ê·œì¹™ì˜ ì´ë¦„.
        """
        for rule in self.rules:
            if rule.name == name:
                rule.enabled = not rule.enabled
                break

    def save_to_json(self, filepath: str) -> None:
        """
        í˜„ì¬ ê·œì¹™ë“¤ì„ JSON íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

        Args:
            filepath (str): ì €ì¥í•  íŒŒì¼ ê²½ë¡œ.
        """
        rules_data = [
            {
                'name': r.name,
                'pattern': r.pattern,
                'color': r.color,
                'is_regex': r.is_regex,
                'enabled': r.enabled
            }
            for r in self.rules
        ]

        # êµ¬ì¡° ê°œì„ ì„ ìœ„í•´ color_rules í‚¤ë¡œ ë˜í•‘
        data = {'color_rules': rules_data}

        with open(filepath, 'w', encoding='utf-8') as f:
            json.dump(data, f, indent=2, ensure_ascii=False)

    def load_from_json(self, filepath: str) -> None:
        """
        JSON íŒŒì¼ì—ì„œ ê·œì¹™ë“¤ì„ ë¡œë“œí•©ë‹ˆë‹¤.
        íŒŒì¼ì´ ì—†ê±°ë‚˜ ì˜ëª»ëœ ê²½ìš° ê¸°ë³¸ ê·œì¹™ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

        Args:
            filepath (str): ì½ì„ íŒŒì¼ ê²½ë¡œ.
        """
        try:
            with open(filepath, 'r', encoding='utf-8') as f:
                data = json.load(f)

            # ë‘ ê°€ì§€ í˜•ì‹ ì§€ì›: ì§ì ‘ ë°°ì—´ ë˜ëŠ” "color_rules" í‚¤ë¡œ ë˜í•‘
            if isinstance(data, dict) and 'color_rules' in data:
                rules_data = data['color_rules']
            else:
                rules_data = data

            self.rules = [
                ColorRule(
                    r['name'],
                    r['pattern'],
                    r['color'],
                    r.get('is_regex', True),
                    r.get('enabled', True)
                )
                for r in rules_data
            ]
        except (FileNotFoundError, json.JSONDecodeError, KeyError) as e:
            # íŒŒì¼ì´ ì—†ê±°ë‚˜ ì˜ëª»ëœ ê²½ìš° ê¸°ë³¸ ê·œì¹™ ì‚¬ìš©
            print(f"ìƒ‰ìƒ ê·œì¹™ ë¡œë“œ ì‹¤íŒ¨ ({filepath}): {e}")
            self.rules = self.DEFAULT_RULES.copy()

    @staticmethod
    def _get_config_path() -> 'Path':
        """
        ìƒ‰ìƒ ê·œì¹™ ì„¤ì • íŒŒì¼ì˜ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            Path: config/color_rules.json íŒŒì¼ì˜ Path ê°ì²´.
        """

        # ì• í”Œë¦¬ì¼€ì´ì…˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ í™•ì¸
        if hasattr(os, '_MEIPASS'):
            # PyInstaller ë²ˆë“¤ í™˜ê²½
            base_path = Path(os._MEIPASS)
        else:
            # ê°œë°œ ëª¨ë“œ í™˜ê²½
            base_path = Path(__file__).parent.parent

        return base_path / 'config' / 'color_rules.json'

    @staticmethod
    def _apply_single_rule(text: str, rule: ColorRule) -> str:
        """
        ë‹¨ì¼ ìƒ‰ìƒ ê·œì¹™ì„ í…ìŠ¤íŠ¸ì— ì ìš©í•©ë‹ˆë‹¤.

        Args:
            text (str): ì›ë³¸ í…ìŠ¤íŠ¸.
            rule (ColorRule): ì ìš©í•  ìƒ‰ìƒ ê·œì¹™ ê°ì²´.

        Returns:
            str: ê·œì¹™ì´ ì ìš©ëœ í…ìŠ¤íŠ¸.
        """
        if rule.is_regex:
            try:
                return re.sub(
                    rule.pattern,
                    rf'<span style="color:{rule.color};">\g<0></span>',
                    text
                )
            except re.error:
                return text
        else:
            # ë‹¨ìˆœ ë¬¸ìì—´ ì¹˜í™˜
            return text.replace(
                rule.pattern,
                f'<span style="color:{rule.color};">{rule.pattern}</span>'
            )
</file>

<file path="view/panels/tx_panel.py">
from typing import Optional

from PyQt5.QtWidgets import (
    QWidget, QVBoxLayout, QHBoxLayout, QTextEdit, QPushButton,
    QCheckBox, QLabel, QComboBox
)
from PyQt5.QtCore import pyqtSignal

class TxPanel(QWidget):
    """
    ë°ì´í„° ì „ì†¡ì„ ë‹´ë‹¹í•˜ëŠ” íŒ¨ë„ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    í…ìŠ¤íŠ¸ ì…ë ¥, HEX ëª¨ë“œ, CR/LF ì„¤ì • ë° ì „ì†¡ ë‚´ì—­ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
    """
    text_data_send_requested = pyqtSignal(str, bool, bool) # text, hex_mode, with_enter

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        TxPanelì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.tx_history_combo = None
        self.send_text_data_btn = None
        self.tx_lf_chk = None
        self.tx_cr_chk = None
        self.tx_hex_chk = None
        self.init_ui()

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)

        # ì…ë ¥ ì˜ì—­ (Input Area)
        self.tx_data_edit = QTextEdit()
        self.tx_data_edit.setMaximumHeight(60)
        self.tx_data_edit.setPlaceholderText("Enter command here...")
        self.tx_data_edit.setToolTip("ì „ì†¡í•  ë°ì´í„°ë¥¼ ì…ë ¥í•˜ì„¸ìš” (Ctrl+Enterë¡œ ì „ì†¡)")

        # ì œì–´ ë²„íŠ¼ ì˜ì—­ (Controls)
        controls_layout = QHBoxLayout()

        self.tx_hex_chk = QCheckBox("HEX")
        self.tx_hex_chk.setToolTip("HEX ë¬¸ìì—´ë¡œ ì „ì†¡í•©ë‹ˆë‹¤ (ì˜ˆ: '41 42')")
        self.tx_cr_chk = QCheckBox("CR")
        self.tx_cr_chk.setChecked(True)
        self.tx_cr_chk.setToolTip("Carriage Return (\\r)ì„ ì¶”ê°€í•©ë‹ˆë‹¤")
        self.tx_lf_chk = QCheckBox("LF")
        self.tx_lf_chk.setChecked(True)
        self.tx_lf_chk.setToolTip("Line Feed (\\n)ì„ ì¶”ê°€í•©ë‹ˆë‹¤")

        self.send_text_data_btn = QPushButton("Send")
        self.send_text_data_btn.clicked.connect(self.on_send_text_data_clicked)
        self.send_text_data_btn.setToolTip("ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤ (Enter)")

        controls_layout.addWidget(self.tx_hex_chk)
        controls_layout.addWidget(self.tx_cr_chk)
        controls_layout.addWidget(self.tx_lf_chk)
        controls_layout.addStretch()
        controls_layout.addWidget(self.send_text_data_btn)

        # ì „ì†¡ ë‚´ì—­ (History)
        self.tx_history_combo = QComboBox()
        self.tx_history_combo.setPlaceholderText("History...")
        self.tx_history_combo.setToolTip("ì „ì†¡ ë‚´ì—­")
        self.tx_history_combo.currentIndexChanged.connect(self.on_tx_history_selected)

        layout.addWidget(QLabel("TX Input"))
        layout.addWidget(QLabel("TX Input"))
        layout.addWidget(self.tx_data_edit)
        layout.addLayout(controls_layout)
        layout.addWidget(self.tx_history_combo)

        self.setLayout(layout)

    def on_send_text_data_clicked(self) -> None:
        """ì „ì†¡ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤."""
        text = self.tx_data_edit.toPlainText()
        if not text:
            return

        hex_mode = self.tx_hex_chk.isChecked()

        # CR/LF ì²˜ë¦¬
        # Presenterë¡œ í”Œë˜ê·¸ë¥¼ ë„˜ê¸°ëŠ” ê²ƒì´ ë” ê¹”ë”í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ì§ì ‘ ì²˜ë¦¬ í›„ ì „ì†¡
        with_enter = False

        suffix = ""
        if self.tx_cr_chk.isChecked(): suffix += "\r"
        if self.tx_lf_chk.isChecked(): suffix += "\n"

        # HEX ëª¨ë“œê°€ ì•„ë‹ ê²½ìš°ì—ë§Œ ì ‘ë¯¸ì‚¬ ì¶”ê°€
        if not hex_mode:
            text += suffix

        self.text_data_send_requested.emit(text, hex_mode, False) # with_enterëŠ” ìˆ˜ë™ ì²˜ë¦¬í–ˆìœ¼ë¯€ë¡œ False

        # ë‚´ì—­ì— ì¶”ê°€
        if self.tx_history_combo.findText(text.strip()) == -1:
            self.tx_history_combo.addItem(text.strip())

    def on_tx_history_selected(self, index: int) -> None:
        """
        ì „ì†¡ ë‚´ì—­ ì„ íƒ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.

        Args:
            index (int): ì„ íƒëœ ë‚´ì—­ì˜ ì¸ë±ìŠ¤.
        """
        if index >= 0:
            self.tx_data_edit.setPlainText(self.tx_history_combo.itemText(index))
</file>

<file path="main.py">
import sys
import os
import logging
from PyQt5.QtWidgets import QApplication
from PyQt5.QtCore import Qt

from version import __version__
from view.main_window import MainWindow

from presenter.main_presenter import MainPresenter

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œë¥¼ sys.pathì— ì¶”ê°€í•˜ì—¬ ëª¨ë“ˆ import ê°€ëŠ¥í•˜ê²Œ í•¨
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

def setup_logging() -> None:
    """
    ë¡œê¹… ì„¤ì •ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    ë¡œê·¸ ë ˆë²¨, í¬ë§·, ë‚ ì§œ í˜•ì‹ì„ ì„¤ì •í•©ë‹ˆë‹¤.
    """
    logging.basicConfig(
        level=logging.INFO,
        format='[%(asctime)s] [%(levelname)s] %(message)s',
        datefmt='%H:%M:%S'
    )

def main() -> None:
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì ì…ë‹ˆë‹¤.
    ë¡œê¹… ì„¤ì •, QApplication ì´ˆê¸°í™”, ë©”ì¸ ìœˆë„ìš° ìƒì„± ë° ì‹¤í–‰ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
    """
    setup_logging()
    logging.info(f"Starting Serial Tool v{__version__}")

    # ê³ í•´ìƒë„(High DPI) ìŠ¤ì¼€ì¼ë§ ì„¤ì •
    QApplication.setAttribute(Qt.AA_EnableHighDpiScaling)
    QApplication.setAttribute(Qt.AA_UseHighDpiPixmaps)

    app = QApplication(sys.argv)

    # MainWindow ì´ˆê¸°í™”
    window = MainWindow()

    # MainPresenter ì´ˆê¸°í™” (Viewì™€ Model ì—°ê²°)
    presenter = MainPresenter(window)

    window.show()

    logging.info("Application initialized")
    sys.exit(app.exec_())

if __name__ == "__main__":
    main()
</file>

<file path="resources/themes/dark_theme.qss">
/* Dark Theme Colors */

/* Global Settings */
QWidget {
    background-color: #2b2b2b;
    color: #e0e0e0;
    selection-background-color: #3d7848;
    selection-color: #ffffff;
}

/* MainWindow */
QMainWindow {
    background-color: #1e1e1e;
}

QMainWindow::separator {
    background-color: #404040;
}

QMainWindow::separator:hover {
    background-color: #505050;
}

/* QTabWidget */
QTabWidget::pane {
    border-color: #404040;
    background-color: #2b2b2b;
}

QTabBar::tab {
    background-color: #333333;
    color: #b0b0b0;
    border: 1px solid #404040;
    border-bottom: none;
}

QTabBar::tab:selected {
    background-color: #2b2b2b;
    color: #ffffff;
    border-bottom: 2px solid #4CAF50;
}

QTabBar::tab:hover {
    background-color: #3a3a3a;
}

QTabBar::close-button {
    image: url(resources/icons/close_white.svg);
}

QTabBar::close-button:hover {
    background-color: #505050;
}

/* QPushButton */
QPushButton {
    background-color: #3a3a3a;
    border-color: #505050;
    color: #e0e0e0;
}

QPushButton:hover {
    background-color: #454545;
    border-color: #606060;
}

QPushButton:pressed {
    background-color: #2a2a2a;
    border-color: #4CAF50;
}

QPushButton:disabled {
    background-color: #252525;
    color: #606060;
    border-color: #303030;
}

QPushButton#add_cmd_btn { qproperty-icon: url(resources/icons/add_white.svg); }
QPushButton#del_cmd_btn { qproperty-icon: url(resources/icons/delete_white.svg); }
QPushButton#up_cmd_btn { qproperty-icon: url(resources/icons/up_white.svg); }
QPushButton#down_cmd_btn { qproperty-icon: url(resources/icons/down_white.svg); }
QPushButton#recv_search_prev_btn { qproperty-icon: url(resources/icons/find_prev_white.svg); }
QPushButton#recv_search_next_btn { qproperty-icon: url(resources/icons/find_next_white.svg); }

/* QLineEdit, QTextEdit */
QLineEdit, QTextEdit, QPlainTextEdit {
    background-color: #1e1e1e;
    border-color: #404040;
    color: #e0e0e0;
    selection-background-color: #264f78;
}

QLineEdit:focus, QTextEdit:focus, QPlainTextEdit:focus {
    border-color: #4CAF50;
}

QLineEdit:!active, QTextEdit:!active, QPlainTextEdit:!active {
    background-color: #1e1e1e;
    color: #e0e0e0;
}

/* QComboBox */
QComboBox {
    background-color: #3a3a3a;
    border-color: #505050;
}

QComboBox:hover {
    background-color: #454545;
}

QComboBox::down-arrow {
    image: url(resources/icons/arrow_down_white.svg);
}

QComboBox QAbstractItemView {
    background-color: #3a3a3a;
    border: 1px solid #505050;
    selection-background-color: #4CAF50;
    selection-color: #ffffff;
}

/* QScrollBar */
QScrollBar:vertical {
    background-color: #2b2b2b;
}

QScrollBar::handle:vertical {
    background-color: #505050;
}

QScrollBar::handle:vertical:hover {
    background-color: #606060;
}

QScrollBar:horizontal {
    background-color: #2b2b2b;
}

QScrollBar::handle:horizontal {
    background-color: #505050;
}

QScrollBar::handle:horizontal:hover {
    background-color: #606060;
}

/* QTableView */
QTableView {
    background-color: #1e1e1e;
    border-color: #404040;
    gridline-color: #303030;
    selection-background-color: #264f78;
    selection-color: #ffffff;
}

QHeaderView::section {
    background-color: #333333;
    color: #b0b0b0;
    border-right-color: #404040;
    border-bottom-color: #404040;
}

QTableView QTableCornerButton::section {
    background-color: #333333;
}

/* QCheckBox */
QCheckBox::indicator {
    border-color: #505050;
    background-color: #1e1e1e;
}

QCheckBox::indicator:checked {
    background-color: #4CAF50;
    border-color: #4CAF50;
}

QCheckBox::indicator:hover {
    border-color: #4CAF50;
}

/* QGroupBox */
QGroupBox {
    border-color: #404040;
}

QGroupBox::title {
    color: #4CAF50;
}

/* QStatusBar */
QStatusBar {
    background-color: #333333;
    color: #b0b0b0;
    border-top-color: #404040;
}

/* QMenu */
QMenu {
    background-color: #2b2b2b;
    border-color: #404040;
}

QMenu::item:selected {
    background-color: #4CAF50;
    color: #ffffff;
}

/* QToolBar */
QToolBar {
    background-color: #333333;
    border-bottom-color: #404040;
}

QToolBar QToolButton:hover {
    background-color: #454545;
}

QToolBar QToolButton:pressed {
    background-color: #2a2a2a;
}

/* Custom Classes */
QPushButton[class="accent"] {
    background-color: #2E7D32;
    border-color: #4CAF50;
    color: #ffffff;
}

QPushButton[class="accent"]:hover {
    background-color: #388E3C;
    border-color: #66BB6A;
}

QPushButton[class="accent"]:pressed {
    background-color: #1B5E20;
}

QPushButton[class="accent"]:disabled {
    background-color: #1b3a20;
    border-color: #2e5030;
    color: #507050;
}

QPushButton[class="danger"] {
    background-color: #C62828;
    border-color: #F44336;
    color: #ffffff;
}

QPushButton[class="danger"]:hover {
    background-color: #D32F2F;
    border-color: #EF5350;
}

QPushButton[class="danger"]:pressed {
    background-color: #B71C1C;
}

QPushButton[class="danger"]:disabled {
    background-color: #4a1b1b;
    border-color: #602525;
    color: #804040;
}

QPushButton[class="warning"] {
    background-color: #FFC107;
    border-color: #FFD740;
    color: #ffffff;
}

QPushButton[class="warning"]:hover {
    background-color: #FFD740;
    border-color: #FFD740;
}

QPushButton[class="warning"]:pressed {
    background-color: #B71C1C;
}

QPushButton[class="warning"]:disabled {
    background-color: #4a1b1b;
    border-color: #602525;
    color: #804040;
}
</file>

<file path="resources/themes/light_theme.qss">
/* Light Theme Colors */

/* Global Settings */
QWidget {
    background-color: #f5f5f5;
    color: #333333;
    selection-background-color: #a0c8f0;
    selection-color: #000000;
}

/* MainWindow */
QMainWindow {
    background-color: #ffffff;
}

QMainWindow::separator {
    background-color: #d0d0d0;
}

QMainWindow::separator:hover {
    background-color: #c0c0c0;
}

/* QTabWidget */
QTabWidget::pane {
    border-color: #d0d0d0;
    background-color: #f5f5f5;
}

QTabBar::tab {
    background-color: #e0e0e0;
    color: #505050;
    border: 1px solid #d0d0d0;
    border-bottom: none;
}

QTabBar::tab:selected {
    background-color: #f5f5f5;
    color: #000000;
    border-bottom: 2px solid #2196F3;
}

QTabBar::tab:hover {
    background-color: #f0f0f0;
}

QTabBar::close-button {
    image: url(resources/icons/close_black.svg);
}

QTabBar::close-button:hover {
    background-color: #d0d0d0;
}

/* QPushButton */
QPushButton {
    background-color: #e0e0e0;
    border-color: #c0c0c0;
    color: #333333;
}

QPushButton:hover {
    background-color: #d0d0d0;
    border-color: #b0b0b0;
}

QPushButton:pressed {
    background-color: #c0c0c0;
    border-color: #2196F3;
}

QPushButton:disabled {
    background-color: #f0f0f0;
    color: #a0a0a0;
    border-color: #e0e0e0;
}

QPushButton#add_cmd_btn { qproperty-icon: url(resources/icons/add_black.svg); }
QPushButton#del_cmd_btn { qproperty-icon: url(resources/icons/delete_black.svg); }
QPushButton#up_cmd_btn { qproperty-icon: url(resources/icons/up_black.svg); }
QPushButton#down_cmd_btn { qproperty-icon: url(resources/icons/down_black.svg); }
QPushButton#recv_search_prev_btn { qproperty-icon: url(resources/icons/find_prev_black.svg); }
QPushButton#recv_search_next_btn { qproperty-icon: url(resources/icons/find_next_black.svg); }

/* QLineEdit, QTextEdit */
QLineEdit, QTextEdit, QPlainTextEdit {
    background-color: #ffffff;
    border-color: #c0c0c0;
    color: #333333;
    selection-background-color: #cce8ff;
}

QLineEdit:focus, QTextEdit:focus, QPlainTextEdit:focus {
    border-color: #2196F3;
}

QLineEdit:!active, QTextEdit:!active, QPlainTextEdit:!active {
    background-color: #ffffff;
    color: #333333;
}

/* QComboBox */
QComboBox {
    background-color: #ffffff;
    border-color: #c0c0c0;
}

QComboBox:hover {
    background-color: #f0f0f0;
}

QComboBox::down-arrow {
    image: url(resources/icons/arrow_down_black.svg);
}

QComboBox QAbstractItemView {
    background-color: #ffffff;
    border: 1px solid #c0c0c0;
    selection-background-color: #e0f0ff;
    selection-color: #000000;
}

/* QScrollBar */
QScrollBar:vertical {
    background-color: #f0f0f0;
}

QScrollBar::handle:vertical {
    background-color: #c0c0c0;
}

QScrollBar::handle:vertical:hover {
    background-color: #a0a0a0;
}

QScrollBar:horizontal {
    background-color: #f0f0f0;
}

QScrollBar::handle:horizontal {
    background-color: #c0c0c0;
}

QScrollBar::handle:horizontal:hover {
    background-color: #a0a0a0;
}

/* QTableView */
QTableView {
    background-color: #ffffff;
    border-color: #c0c0c0;
    gridline-color: #e0e0e0;
    selection-background-color: #e0f0ff;
    selection-color: #000000;
}

QHeaderView::section {
    background-color: #f0f0f0;
    color: #505050;
    border-right-color: #d0d0d0;
    border-bottom-color: #d0d0d0;
}

QTableView QTableCornerButton::section {
    background-color: #f0f0f0;
}

/* QCheckBox */
QCheckBox::indicator {
    border-color: #c0c0c0;
    background-color: #ffffff;
}

QCheckBox::indicator:checked {
    background-color: #2196F3;
    border-color: #2196F3;
}

QCheckBox::indicator:hover {
    border-color: #2196F3;
}

/* QGroupBox */
QGroupBox {
    border-color: #c0c0c0;
}

QGroupBox::title {
    color: #2196F3;
}

/* QStatusBar */
QStatusBar {
    background-color: #f0f0f0;
    color: #505050;
    border-top-color: #d0d0d0;
}

/* QMenu */
QMenu {
    background-color: #ffffff;
    border-color: #c0c0c0;
}

QMenu::item:selected {
    background-color: #e0f0ff;
    color: #000000;
}

/* QToolBar */
QToolBar {
    background-color: #f0f0f0;
    border-bottom-color: #d0d0d0;
}

QToolBar QToolButton:hover {
    background-color: #e0e0e0;
}

QToolBar QToolButton:pressed {
    background-color: #d0d0d0;
}

/* Custom Classes */
QPushButton[class="accent"] {
    background-color: #4CAF50;
    border-color: #388E3C;
    color: #ffffff;
}

QPushButton[class="accent"]:hover {
    background-color: #66BB6A;
    border-color: #2E7D32;
}

QPushButton[class="accent"]:pressed {
    background-color: #388E3C;
}

QPushButton[class="accent"]:disabled {
    background-color: #A5D6A7; /* Light Green Tint for Disabled */
    border-color: #81C784;
    color: #E8F5E9;
}

QPushButton[class="danger"] {
    background-color: #F44336;
    border-color: #D32F2F;
    color: #ffffff;
}

QPushButton[class="danger"]:hover {
    background-color: #EF5350;
    border-color: #C62828;
}

QPushButton[class="danger"]:pressed {
    background-color: #D32F2F;
}

QPushButton[class="danger"]:disabled {
    background-color: #EF9A9A; /* Light Red Tint for Disabled */
    border-color: #E57373;
    color: #FFEBEE;
}

QPushButton[class="warning"] {
    background-color: #FFC107;
    border-color: #FFD740;
    color: #ffffff;
}

QPushButton[class="warning"]:hover {
    background-color: #FFD740;
    border-color: #FFD740;
}

QPushButton[class="warning"]:pressed {
    background-color: #B71C1C;
}

QPushButton[class="warning"]:disabled {
    background-color: #4a1b1b;
    border-color: #602525;
    color: #804040;
}
</file>

<file path="view/dialogs/about_dialog.py">
from PyQt5.QtWidgets import QDialog, QVBoxLayout, QLabel, QPushButton
from PyQt5.QtCore import Qt
from view.lang_manager import lang_manager

class AboutDialog(QDialog):
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” About ë‹¤ì´ì–¼ë¡œê·¸ì…ë‹ˆë‹¤.
    """

    def __init__(self, parent=None):
        super().__init__(parent)
        self.setWindowTitle(lang_manager.get_text("about_title"))
        self.setFixedSize(400, 300)
        self.init_ui()

    def init_ui(self):
        layout = QVBoxLayout()
        layout.setAlignment(Qt.AlignCenter)
        layout.setSpacing(20)

        # ì•± ì´ë¦„ ë° ë²„ì „
        title_label = QLabel(lang_manager.get_text("about_lbl_app_name"))
        title_label.setStyleSheet("font-size: 24px; font-weight: bold;")
        title_label.setAlignment(Qt.AlignCenter)

        version_label = QLabel(lang_manager.get_text("about_lbl_version"))
        version_label.setStyleSheet("font-size: 14px; color: #888;")
        version_label.setAlignment(Qt.AlignCenter)

        # ì„¤ëª…
        desc_label = QLabel(lang_manager.get_text("about_lbl_description"))
        desc_label.setAlignment(Qt.AlignCenter)

        # ì €ì‘ê¶Œ
        copyright_label = QLabel(lang_manager.get_text("about_lbl_copyright"))
        copyright_label.setStyleSheet("font-size: 12px; color: #666;")
        copyright_label.setAlignment(Qt.AlignCenter)

        # ë‹«ê¸° ë²„íŠ¼
        close_btn = QPushButton(lang_manager.get_text("about_btn_close"))
        close_btn.setFixedWidth(100)
        close_btn.clicked.connect(self.accept)

        layout.addStretch()
        layout.addWidget(title_label)
        layout.addWidget(version_label)
        layout.addWidget(desc_label)
        layout.addStretch()
        layout.addWidget(copyright_label)
        layout.addStretch()
        layout.addWidget(close_btn)
        layout.setAlignment(close_btn, Qt.AlignCenter)
        layout.addStretch()

        self.setLayout(layout)
</file>

<file path="view/panels/port_panel.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout
from PyQt5.QtCore import pyqtSignal
from typing import Optional

from view.widgets.port_settings import PortSettingsWidget
from view.widgets.received_area import ReceivedAreaWidget
from view.widgets.status_area import StatusAreaWidget
from view.widgets.status import StatusWidget

class PortPanel(QWidget):
    """
    ê°œë³„ ì‹œë¦¬ì–¼ í¬íŠ¸ íƒ­ì˜ ë©”ì¸ ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    í¬íŠ¸ ì„¤ì •(PortSettings), ìˆ˜ì‹  ë¡œê·¸(ReceivedArea), ìƒíƒœ ë¡œê·¸(StatusArea) ì˜ì—­ì„ í¬í•¨í•©ë‹ˆë‹¤.
    """

    # ì‹œê·¸ë„ ì •ì˜
    tab_title_changed = pyqtSignal(str)  # íƒ­ ì œëª© ë³€ê²½ ì‹œê·¸ë„

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        PortPanelì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.status_area = None
        self.received_area = None
        self.status_panel = None
        self.port_settings = None
        self.custom_name = "Port"  # ì»¤ìŠ¤í…€ ì´ë¦„ (ê¸°ë³¸ê°’)
        self.init_ui()

        # í¬íŠ¸ ë³€ê²½ ì‹œ íƒ­ ì œëª© ì—…ë°ì´íŠ¸
        self.port_settings.port_combo.currentTextChanged.connect(self._on_port_changed)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(2)

        # ì»´í¬ë„ŒíŠ¸ ìƒì„±
        self.port_settings = PortSettingsWidget()
        self.status_panel = StatusWidget()
        self.received_area = ReceivedAreaWidget()
        self.status_area = StatusAreaWidget()

        # ë ˆì´ì•„ì›ƒ êµ¬ì„±
        # ìƒë‹¨: ì„¤ì • (Top: Settings)
        layout.addWidget(self.port_settings)

        # ìƒíƒœ íŒ¨ë„ (Status Panel)
        layout.addWidget(self.status_panel)

        # ì¤‘ê°„: ë¡œê·¸ (Middle: Log)
        layout.addWidget(self.received_area, 1) # Stretch 1

        # í•˜ë‹¨: ìƒíƒœ ë¡œê·¸ ì˜ì—­ (Bottom: Status Log Area)
        layout.addWidget(self.status_area)

        self.setLayout(layout)

    def toggle_connection(self) -> None:
        """ì—°ê²° ìƒíƒœë¥¼ í† ê¸€í•©ë‹ˆë‹¤."""
        self.port_settings.toggle_connection()

    def is_connected(self) -> bool:
        """í˜„ì¬ ì—°ê²° ìƒíƒœë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤."""
        return self.port_settings.is_connected()

    def _on_port_changed(self, port_name: str) -> None:
        """í¬íŠ¸ ë³€ê²½ ì‹œ íƒ­ ì œëª©ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.update_tab_title()

    def set_custom_name(self, name: str) -> None:
        """
        ì»¤ìŠ¤í…€ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            name (str): ì»¤ìŠ¤í…€ ì´ë¦„.
        """
        self.custom_name = name
        self.update_tab_title()

    def get_custom_name(self) -> str:
        """
        ì»¤ìŠ¤í…€ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            str: ì»¤ìŠ¤í…€ ì´ë¦„.
        """
        return self.custom_name

    def get_port_name(self) -> str:
        """
        í˜„ì¬ ì„ íƒëœ í¬íŠ¸ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            str: í¬íŠ¸ ì´ë¦„.
        """
        return self.port_settings.port_combo.currentText()

    def get_tab_title(self) -> str:
        """
        íƒ­ ì œëª©ì„ ìƒì„±í•©ë‹ˆë‹¤ ("[ì»¤ìŠ¤í…€ëª…]:í¬íŠ¸ëª…" í˜•ì‹).

        Returns:
            str: íƒ­ ì œëª©.
        """
        port_name = self.get_port_name()
        if port_name:
            return f"{self.custom_name}:{port_name}"
        else:
            return self.custom_name

    def update_tab_title(self) -> None:
        """íƒ­ ì œëª© ë³€ê²½ ì‹œê·¸ë„ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤."""
        self.tab_title_changed.emit(self.get_tab_title())

    def save_state(self) -> dict:
        """
        íŒ¨ë„ ìƒíƒœë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

        Returns:
            dict: íŒ¨ë„ ìƒíƒœ ë°ì´í„°.
        """
        return {
            "custom_name": self.custom_name,
            "port_settings": self.port_settings.save_state(),
            "received_area": self.received_area.save_state()
        }

    def load_state(self, state: dict) -> None:
        """
        íŒ¨ë„ ìƒíƒœë¥¼ ë³µì›í•©ë‹ˆë‹¤.

        Args:
            state (dict): íŒ¨ë„ ìƒíƒœ ë°ì´í„°.
        """
        if not state:
            return
        self.custom_name = state.get("custom_name", "Port")
        self.port_settings.load_state(state.get("port_settings", {}))
        self.received_area.load_state(state.get("received_area", {}))
        self.update_tab_title()
</file>

<file path="doc/session_summary_20251208.md">
# ì„¸ì…˜ ìš”ì•½ - 2025ë…„ 12ì›” 8ì¼

## ğŸ“‹ ì‘ì—… ê°œìš”

ì´ë²ˆ ì„¸ì…˜ì—ì„œëŠ” ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ UI/UX ê°œì„ , ë²„ê·¸ ìˆ˜ì •, ê·¸ë¦¬ê³  ìƒˆë¡œìš´ ìœ„ì ¯ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì£¼ìš” ì‘ì—…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **SmartNumberEdit ìœ„ì ¯ ìƒì„±**: HEX ëª¨ë“œ ì§€ì› ì…ë ¥ í•„ë“œ
2. **PortTabWidget ìƒì„±**: í¬íŠ¸ íƒ­ ê´€ë¦¬ ìº¡ìŠí™”
3. **MacroListWidget ë²„ê·¸ ìˆ˜ì •**: Send ë²„íŠ¼ ìƒíƒœ ìœ ì§€
4. **í…Œë§ˆë³„ ì•„ì´ì½˜ ì§€ì›**: SVG ì•„ì´ì½˜ ë¡œë”©
5. **í¬íŠ¸ íƒ­ ë‹«ê¸° ë²„íŠ¼ ìˆ˜ì •**: íƒ­ ì‚­ì œ ë¬¸ì œ í•´ê²°
6. **í¬íŠ¸ íƒ­ ì´ë¦„ ìˆ˜ì • ê¸°ëŠ¥**: ì»¤ìŠ¤í…€ ì´ë¦„ ì§€ì •
7. **ìˆœí™˜ import ë¬¸ì œ í•´ê²°**: TYPE_CHECKING í™œìš©
8. **íƒ­ ì‚­ì œ ì‹œ ìƒˆ íƒ­ ìƒì„± ë²„ê·¸ ìˆ˜ì •**: ì‹œê·¸ë„ ì°¨ë‹¨ ë° ìµœì†Œ íƒ­ ìœ ì§€
9. **ì–¸ì–´ í™•ì¥ì„± ê°œì„ **: í•˜ë“œì½”ë”©ëœ ì–¸ì–´ ë¹„êµ ì œê±°
10. **UI ì•„ì´ì½˜ ìˆ˜ì •**: ë²„íŠ¼ objectName ë¶ˆì¼ì¹˜ í•´ê²°
11. **UI/ì‹œê·¸ë„/ë©”ì„œë“œ ë„¤ì´ë° ë¦¬íŒ©í† ë§**: êµ¬ì²´ì ì´ê³  ì¼ê´€ëœ ì´ë¦„ìœ¼ë¡œ ë³€ê²½

---

## âœ¨ ì£¼ìš” ë³€ê²½ ì‚¬í•­

### 11. UI ìš”ì†Œ ë° ì‹œê·¸ë„/ë©”ì„œë“œ ë„¤ì´ë° ë¦¬íŒ©í† ë§

**íŒŒì¼**: `manual_control.py`, `received_area.py`, `tx_panel.py`, `command_control.py`, `main_presenter.py` ë“±

**ëª©ì **: ëª¨í˜¸í•œ ë³€ìˆ˜ëª…(`send_btn` ë“±)ì„ êµ¬ì²´ì ì¸ ì´ë¦„(`send_manual_cmd_btn` ë“±)ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚´.

**ì£¼ìš” ë³€ê²½ ë‚´ìš©**:
- **UI ìœ„ì ¯**:
  - `send_btn` â†’ `send_manual_cmd_btn` (Manual Control)
  - `send_btn` â†’ `send_text_data_btn` (Tx Panel)
  - `clear_btn` â†’ `recv_clear_log_btn` (Received Area)
  - `run_once_btn` â†’ `cmd_run_once_btn` (Command Control)
- **ì‹œê·¸ë„**:
  - `send_command_requested` â†’ `manual_cmd_send_requested`
  - `run_single_requested` â†’ `cmd_run_single_requested`
- **ë©”ì„œë“œ**:
  - `on_send_clicked` â†’ `on_send_manual_cmd_clicked`
  - `find_next` â†’ `on_recv_search_next_clicked`

**ë¬¸ì„œ ì—…ë°ì´íŠ¸**:
- `guide/naming_convention.md`: ì‹œê·¸ë„ ë° í•¸ë“¤ëŸ¬ ë„¤ì´ë° ê·œì¹™ ì˜ˆì‹œ ì¶”ê°€

### 12. PreferencesDialog ë¦¬íŒ©í† ë§

**íŒŒì¼**: `view/dialogs/preferences_dialog.py`

**ëª©ì **: ì„¤ì • ë¡œë“œ/ì €ì¥ ë¡œì§ì„ ê°œì„ í•˜ê³  MVP ì•„í‚¤í…ì²˜ë¥¼ ì—„ê²©íˆ ì¤€ìˆ˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§.

**ë³€ê²½ ë‚´ìš©**:
- **View (`PreferencesDialog`)**:
  - `load_settings`: `SettingsManager` ì§ì ‘ ì‚¬ìš©
  - `apply_settings`: `.lower()`, `int()` ë“± ë°ì´í„° ë³€í™˜ ë¡œì§ ì œê±°, ì›ë³¸ ë°ì´í„° ì‹œê·¸ë„ ì „ì†¡
- **View (`MainWindow`)**:
  - `preferences_save_requested` ì‹œê·¸ë„ ì¶”ê°€
  - ë‹¤ì´ì–¼ë¡œê·¸ ì‹œê·¸ë„ì„ Presenterë¡œ ì „ë‹¬ (`apply_preferences` ë©”ì„œë“œ ì œê±°)
- **Presenter (`MainPresenter`)**:
  - `on_preferences_save_requested` í•¸ë“¤ëŸ¬ êµ¬í˜„
  - ë°ì´í„° ê²€ì¦, ë³€í™˜, `SettingsManager` ì—…ë°ì´íŠ¸, UI ê°±ì‹  ë¡œì§ í†µí•©

### 1. SmartNumberEdit ìœ„ì ¯ ìƒì„±

**íŒŒì¼**: `view/widgets/common/smart_number_edit.py`

**ëª©ì **: `ManualControlWidget`ì˜ ì…ë ¥ í•„ë“œì—ì„œ HEX ëª¨ë“œì™€ ì¼ë°˜ í…ìŠ¤íŠ¸ ëª¨ë“œë¥¼ ì§€ì›í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì…ë ¥ ìœ„ì ¯

**ì£¼ìš” ê¸°ëŠ¥**:
- HEX ëª¨ë“œ í™œì„±í™” ì‹œ 0-9, A-F, ê³µë°±ë§Œ ì…ë ¥ í—ˆìš©
- ì†Œë¬¸ì ì…ë ¥ ì‹œ ìë™ìœ¼ë¡œ ëŒ€ë¬¸ìë¡œ ë³€í™˜
- `QRegExpValidator`ë¥¼ ì‚¬ìš©í•œ ì…ë ¥ ê²€ì¦
- `set_hex_mode(bool)` ë©”ì„œë“œë¡œ ëª¨ë“œ ì „í™˜

**ì ìš©**:
- `ManualControlWidget`ì—ì„œ `QLineEdit` ëŒ€ì‹  `SmartNumberEdit` ì‚¬ìš©
- HEX ì²´í¬ë°•ìŠ¤ì™€ ì—°ë™í•˜ì—¬ ìë™ ëª¨ë“œ ì „í™˜

### 2. PortTabPanel ìœ„ì ¯ ìƒì„±

**íŒŒì¼**: `view/panels/port_tab_panel.py`

**ëª©ì **: í¬íŠ¸ íƒ­ ê´€ë¦¬ ë¡œì§ì„ ìº¡ìŠí™”í•˜ì—¬ ì½”ë“œ ì¬ì‚¬ìš©ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

**ì£¼ìš” ê¸°ëŠ¥**:
- íƒ­ ì¶”ê°€/ì‚­ì œ ê´€ë¦¬
- í”ŒëŸ¬ìŠ¤(+) íƒ­ ê¸°ëŠ¥
- í…Œë§ˆë³„ ì•„ì´ì½˜ ì ìš©
- íƒ­ ë”ë¸”í´ë¦­ ì‹œ ì´ë¦„ ìˆ˜ì •

**ë³€ê²½ ì‚¬í•­**:
- `LeftSection`ì—ì„œ `QTabWidget` â†’ `PortTabPanel` ì‚¬ìš©
- íƒ­ ê´€ë¦¬ ë©”ì„œë“œë“¤ì„ `PortTabPanel`ë¡œ ì´ë™

### 3. MacroListWidget Send ë²„íŠ¼ ìƒíƒœ ë²„ê·¸ ìˆ˜ì •

**íŒŒì¼**: `view/widgets/command_list.py`

**ë¬¸ì œ**: í–‰ì„ ì´ë™í•  ë•Œ `_set_send_button`ì„ í˜¸ì¶œí•˜ì—¬ ìƒˆ ë²„íŠ¼ì„ ìƒì„±í•˜ë©´ì„œ, ë²„íŠ¼ì˜ í™œì„±í™” ìƒíƒœê°€ ì´ˆê¸°ê°’(ë¹„í™œì„±í™”)ìœ¼ë¡œ ë¦¬ì…‹ë˜ëŠ” ë²„ê·¸

**í•´ê²°**:

```python
def _move_row(self, source_row: int, dest_row: int) -> None:
    # 0. ì´ë™ ì „ ë²„íŠ¼ ìƒíƒœ ì €ì¥
    is_enabled = False
    index = self.cmd_table_model.index(source_row, 6)
    widget = self.cmd_table.indexWidget(index)
    if widget:
        btn = widget.findChild(QPushButton)
        if btn:
            is_enabled = btn.isEnabled()

    # 1-2. í–‰ ì´ë™
    items = self.cmd_table_model.takeRow(source_row)
    self.cmd_table_model.insertRow(dest_row, items)

    # 3. ìœ„ì ¯(ë²„íŠ¼) ë³µêµ¬
    self._set_send_button(dest_row)

    # 4. ë²„íŠ¼ ìƒíƒœ ë³µì›
    new_index = self.cmd_table_model.index(dest_row, 6)
    new_widget = self.cmd_table.indexWidget(new_index)
    if new_widget:
        new_btn = new_widget.findChild(QPushButton)
        if new_btn:
            new_btn.setEnabled(is_enabled)
```

### 4. í…Œë§ˆë³„ SVG ì•„ì´ì½˜ ì§€ì›

**íŒŒì¼**: `view/theme_manager.py`

**ì¶”ê°€ëœ ë©”ì„œë“œ**:
```python
def get_icon(self, name: str) -> QIcon:
    """
    í˜„ì¬ í…Œë§ˆì— ë§ëŠ” ì•„ì´ì½˜ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
    ì•„ì´ì½˜ íŒŒì¼ëª… ê·œì¹™: {name}_{theme}.svg
    """
    icon_path = f"resources/icons/{name}_{self._current_theme}.svg"

    if not os.path.exists(icon_path):
        fallback_path = f"resources/icons/{name}.svg"
        if os.path.exists(fallback_path):
            return QIcon(fallback_path)
        return QIcon()

    return QIcon(icon_path)
```

**ìƒì„±ëœ ì•„ì´ì½˜**:
- `resources/icons/add_dark.svg`: ë‹¤í¬ í…Œë§ˆìš© (í°ìƒ‰)
- `resources/icons/add_light.svg`: ë¼ì´íŠ¸ í…Œë§ˆìš© (ê²€ì€ìƒ‰)

### 5. í¬íŠ¸ íƒ­ ë‹«ê¸° ë²„íŠ¼ ë¬¸ì œ ìˆ˜ì •

**ë¬¸ì œ**: `insertTab`ì„ ì‚¬ìš©í•˜ì—¬ í”ŒëŸ¬ìŠ¤ íƒ­ ì•ì— ìƒˆ íƒ­ì„ ì‚½ì…í•˜ë©´, ì¸ë±ìŠ¤ê°€ ë°€ë¦¬ë©´ì„œ ë‹«ê¸° ë²„íŠ¼ ìƒíƒœê°€ ê¼¬ì´ëŠ” í˜„ìƒ

**í•´ê²° ë°©ë²•**:
```python
def add_new_port_tab(self) -> PortPanel:
    self.blockSignals(True)
    try:
        # 1. ê¸°ì¡´ í”ŒëŸ¬ìŠ¤ íƒ­ ì œê±°
        count = self.count()
        if count > 0:
            self.removeTab(count - 1)

        # 2. ìƒˆ íŒ¨ë„ ì¶”ê°€ (ë‹«ê¸° ë²„íŠ¼ ìë™ ìƒì„±ë¨)
        panel = PortPanel()
        initial_title = panel.get_tab_title()
        self.addTab(panel, initial_title)

        # 3. í”ŒëŸ¬ìŠ¤ íƒ­ ë‹¤ì‹œ ì¶”ê°€
        self.add_plus_tab()

        # 4. ìƒˆ íƒ­ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
        new_tab_index = self.count() - 2
        self.setCurrentIndex(new_tab_index)
    finally:
        self.blockSignals(False)

    self.tab_added.emit(panel)
    return panel
```

ì´ ë°©ì‹ì€ `insertTab` ëŒ€ì‹  í”ŒëŸ¬ìŠ¤ íƒ­ì„ ì œê±°í•˜ê³  ì¬ì¶”ê°€í•˜ì—¬ ëª¨ë“  íƒ­ì´ ì˜¬ë°”ë¥¸ ë‹«ê¸° ë²„íŠ¼ì„ ê°–ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

### 6. í¬íŠ¸ íƒ­ ì´ë¦„ ìˆ˜ì • ê¸°ëŠ¥

**íŒŒì¼**: `view/panels/port_panel.py`, `view/widgets/port_tab_widget.py`

**ê¸°ëŠ¥**:
- íƒ­ ì œëª© í˜•ì‹: `[ì»¤ìŠ¤í…€ëª…]:í¬íŠ¸ëª…`
- íƒ­ ë”ë¸”í´ë¦­ ì‹œ ì»¤ìŠ¤í…€ ì´ë¦„ ìˆ˜ì • ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
- í¬íŠ¸ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ íƒ­ ì œëª© ì—…ë°ì´íŠ¸
- ì»¤ìŠ¤í…€ ì´ë¦„ì„ ì„¤ì • íŒŒì¼ì— ì €ì¥/ë³µì›

**êµ¬í˜„**:

**PortPanel**:
```python
class PortPanel(QWidget):
    tab_title_changed = pyqtSignal(str)

    def __init__(self, parent=None):
        super().__init__(parent)
        self.custom_name = "Port"
        self.init_ui()
        self.port_settings.port_combo.currentTextChanged.connect(self._on_port_changed)

    def get_tab_title(self) -> str:
        port_name = self.get_port_name()
        if port_name:
            return f"{self.custom_name}:{port_name}"
        else:
            return self.custom_name

    def set_custom_name(self, name: str) -> None:
        self.custom_name = name
        self.update_tab_title()
```

**PortTabWidget**:
```python
def eventFilter(self, obj, event):
    """íƒ­ë°” ë”ë¸”í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•©ë‹ˆë‹¤."""
    if obj == self.tabBar() and event.type() == event.MouseButtonDblClick:
        index = self.tabBar().tabAt(event.pos())
        if index >= 0 and index < self.count() - 1:
            self.edit_tab_name(index)
            return True
    return super().eventFilter(obj, event)

def edit_tab_name(self, index: int) -> None:
    widget = self.widget(index)
    if not isinstance(widget, PortPanel):
        return

    current_name = widget.get_custom_name()
    new_name, ok = QInputDialog.getText(
        self, "Edit Tab Name", "Enter custom name:", text=current_name
    )

    if ok and new_name and new_name != current_name:
        widget.set_custom_name(new_name)
```

### 7. ìˆœí™˜ import ë¬¸ì œ í•´ê²°

**íŒŒì¼**: `view/widgets/port_tab_widget.py`

**ë¬¸ì œ**: `PortTabWidget`ì´ `PortPanel`ì„ importí•˜ê³ , `PortPanel`ì´ ë‹¤ì‹œ ë‹¤ë¥¸ ëª¨ë“ˆì„ importí•˜ë©´ì„œ ìˆœí™˜ import ë°œìƒ

**í•´ê²° ë°©ë²•**:
```python
from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from view.panels.port_panel import PortPanel

class PortTabWidget(QTabWidget):
    tab_added = pyqtSignal(object)  # PortPanel ëŒ€ì‹  object ì‚¬ìš©

    def add_new_port_tab(self) -> "PortPanel":
        from view.panels.port_panel import PortPanel  # ëŸ°íƒ€ì„ import
        panel = PortPanel()
        # ...
```

**í•µì‹¬**:
- `TYPE_CHECKING`ì„ ì‚¬ìš©í•˜ì—¬ íƒ€ì… íŒíŠ¸ë§Œ import
- ì‹¤ì œ ëŸ°íƒ€ì„ì—ëŠ” í•„ìš”í•œ ê³³ì—ì„œë§Œ import
- ì‹œê·¸ë„ì€ `object` íƒ€ì… ì‚¬ìš©

### 8. íƒ­ ì‚­ì œ ì‹œ ìƒˆ íƒ­ ìƒì„± ë²„ê·¸ ìˆ˜ì •

**íŒŒì¼**: `view/widgets/port_tab_widget.py`

**ë¬¸ì œ**:
- í”ŒëŸ¬ìŠ¤ íƒ­ ë°”ë¡œ ì™¼ìª½ íƒ­ì„ ì‚­ì œí•˜ë©´ `on_tab_changed` ì‹œê·¸ë„ì´ ë°œìƒ
- í˜„ì¬ íƒ­ ì¸ë±ìŠ¤ê°€ í”ŒëŸ¬ìŠ¤ íƒ­ ì¸ë±ìŠ¤ì™€ ê°™ì•„ì ¸ ìƒˆ íƒ­ì´ ìƒì„±ë¨

**í•´ê²° ë°©ë²•**:
```python
def close_port_tab(self, index: int) -> None:
    """íƒ­ ë‹«ê¸° ìš”ì²­ ì²˜ë¦¬"""
    # ë§ˆì§€ë§‰ íƒ­(+)ì€ ë‹«ì„ ìˆ˜ ì—†ìŒ
    if index == self.count() - 1:
        return

    # ìµœì†Œ 1ê°œì˜ í¬íŠ¸ íƒ­ì€ ìœ ì§€ (í”ŒëŸ¬ìŠ¤ íƒ­ ì œì™¸)
    if self.count() <= 2:
        return

    # ì‹œê·¸ë„ ì°¨ë‹¨í•˜ì—¬ íƒ­ ì‚­ì œ ì‹œ on_tab_changedê°€ í˜¸ì¶œë˜ì§€ ì•Šë„ë¡ í•¨
    self.blockSignals(True)
    try:
        self.removeTab(index)

        # ì‚­ì œ í›„ ì ì ˆí•œ íƒ­ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
        if self.count() > 1:
            new_index = max(0, index - 1)
            self.setCurrentIndex(new_index)
    finally:
        self.blockSignals(False)
```

**ê°œì„  ì‚¬í•­**:
- ì‹œê·¸ë„ ì°¨ë‹¨ìœ¼ë¡œ `on_tab_changed` í˜¸ì¶œ ë°©ì§€
- ì‚­ì œ í›„ í”ŒëŸ¬ìŠ¤ íƒ­ì´ ì•„ë‹Œ ì¼ë°˜ íƒ­ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
- ìµœì†Œ 1ê°œì˜ í¬íŠ¸ íƒ­ ìœ ì§€ ë¡œì§ ì¶”ê°€


### 9. ì–¸ì–´ í™•ì¥ì„± ê°œì„ 

**íŒŒì¼**: `view/lang_manager.py`

**ë¬¸ì œ**: ì–¸ì–´ë³„ë¡œ í•˜ë“œì½”ë”©ëœ ë¹„êµ ë°©ì‹ (`"en"`, `"ko"`)ì€ ìƒˆ ì–¸ì–´ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” í™•ì¥ì„± ë¬¸ì œ

**ê°œì„  ì‚¬í•­**:

```python
def get_text(self, key: str, lang_code: Optional[str] = None) -> str:
    """ì§€ì •ëœ ì–¸ì–´(ë˜ëŠ” í˜„ì¬ ì–¸ì–´)ì— ë§ëŠ” í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤."""
    target_lang = lang_code if lang_code else self.current_language
    # ...

def get_supported_languages(self) -> list:
    """ì§€ì›ë˜ëŠ” ëª¨ë“  ì–¸ì–´ ì½”ë“œ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤."""
    return list(self.resources.keys())

def text_matches_key(self, text: str, key: str) -> bool:
    """ì£¼ì–´ì§„ í…ìŠ¤íŠ¸ê°€ íŠ¹ì • í‚¤ì˜ ì–´ë–¤ ì–¸ì–´ ë²ˆì—­ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤."""
    for lang_code in self.get_supported_languages():
        if text == self.get_text(key, lang_code):
            return True
    return False
```

**ì ìš© íŒŒì¼**:
- `view/widgets/manual_control.py` (L170-171)
- `view/widgets/main_status_bar.py` (L31-32)
- `view/widgets/file_progress.py` (L70-71, L77-78)

**ë³€ê²½ ì „**:
```python
if self.file_path_lbl.text() == lang_manager.get_text("key", "en") or \
   self.file_path_lbl.text() == lang_manager.get_text("key", "ko"):
```

**ë³€ê²½ í›„**:
```python
if lang_manager.text_matches_key(self.file_path_lbl.text(), "key"):
```

### 10. UI ì•„ì´ì½˜ í‘œì‹œ ë¬¸ì œ ìˆ˜ì •

**íŒŒì¼**: `resources/themes/dark_theme.qss`, `resources/themes/light_theme.qss`

**ë¬¸ì œ**: ë²„íŠ¼ì˜ objectNameê³¼ QSS ì„ íƒìê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ì•„ì´ì½˜ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ

**ë¶ˆì¼ì¹˜ ëª©ë¡**:
| ì½”ë“œ objectName | QSS ì„ íƒì (ì´ì „) | QSS ì„ íƒì (ìˆ˜ì •) |
|----------------|------------------|------------------|
| `add_cmd_btn` | `add_btn` | `add_cmd_btn` |
| `del_cmd_btn` | `del_btn` | `del_cmd_btn` |
| `up_cmd_btn` | `up_btn` | `up_cmd_btn` |
| `down_cmd_btn` | `down_btn` | `down_cmd_btn` |
| `search_prev_btn` | `find_prev_btn` | `search_prev_btn` |
| `search_next_btn` | `find_next_btn` | `search_next_btn` |

**ìˆ˜ì • ë‚´ìš©**:
```css
/* Dark Theme */
QPushButton#add_cmd_btn { qproperty-icon: url(resources/icons/add_white.svg); }
QPushButton#del_cmd_btn { qproperty-icon: url(resources/icons/delete_white.svg); }
QPushButton#up_cmd_btn { qproperty-icon: url(resources/icons/up_white.svg); }
QPushButton#down_cmd_btn { qproperty-icon: url(resources/icons/down_white.svg); }
QPushButton#search_prev_btn { qproperty-icon: url(resources/icons/find_prev_white.svg); }
QPushButton#search_next_btn { qproperty-icon: url(resources/icons/find_next_white.svg); }

/* Light Theme */
QPushButton#add_cmd_btn { qproperty-icon: url(resources/icons/add_black.svg); }
/* ... (ë™ì¼í•œ íŒ¨í„´) */
```

---

## ğŸ“ ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

### ì‹ ê·œ ìƒì„±
- `view/widgets/common/smart_number_edit.py`
- `view/widgets/port_tab_widget.py`
- `resources/icons/add_dark.svg`
- `resources/icons/add_light.svg`

### ìˆ˜ì •
- `view/widgets/command_list.py`
- `view/panels/port_panel.py`
- `view/sections/left_section.py`
- `view/widgets/manual_control.py`
- `view/widgets/main_status_bar.py`
- `view/widgets/file_progress.py`
- `view/lang_manager.py`
- `view/theme_manager.py`
- `resources/themes/dark_theme.qss`
- `resources/themes/light_theme.qss`
- `core/settings_manager.py`
- `view/dialogs/preferences_dialog.py`
- `view/main_window.py`

### ë¬¸ì„œ
- `doc/CHANGELOG.md`
- `doc/session_summary_20251208.md`

---

## ğŸ¯ ì‘ì—… ê²°ê³¼

### ê°œì„  ì‚¬í•­
1. âœ… **ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**: HEX ëª¨ë“œ ì…ë ¥ ì œí•œìœ¼ë¡œ ì˜¤ì…ë ¥ ë°©ì§€, íƒ­ ì´ë¦„ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥
2. âœ… **ì½”ë“œ í’ˆì§ˆ ê°œì„ **: ìœ„ì ¯ ìº¡ìŠí™”ë¡œ ì¬ì‚¬ìš©ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
3. âœ… **í…Œë§ˆ ì¼ê´€ì„±**: ëª¨ë“  UI ìš”ì†Œì— í…Œë§ˆê°€ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë¨
4. âœ… **ì•ˆì •ì„± í–¥ìƒ**: ë²„íŠ¼ ìƒíƒœ ë° íƒ­ ë‹«ê¸° ë²„ê·¸ ìˆ˜ì •

### í•´ê²°ëœ ë¬¸ì œ
1. âœ… MacroListWidget í–‰ ì´ë™ ì‹œ Send ë²„íŠ¼ ìƒíƒœ ì´ˆê¸°í™” ë²„ê·¸
2. âœ… í¬íŠ¸ íƒ­ ì¶”ê°€ ì‹œ ë‹«ê¸° ë²„íŠ¼ì´ ì‚¬ë¼ì§€ëŠ” ë²„ê·¸
3. âœ… ì„¤ì • í‚¤ ë¶ˆì¼ì¹˜ (`menu_theme` vs `theme`)
4. âœ… ThemeManagerì—ì„œ QIcon import ëˆ„ë½
5. âœ… PortTabWidgetê³¼ PortPanel ê°„ ìˆœí™˜ import ë¬¸ì œ
6. âœ… íƒ­ ì‚­ì œ ì‹œ ìƒˆ íƒ­ì´ ìƒì„±ë˜ëŠ” ë²„ê·¸
7. âœ… ë§ˆì§€ë§‰ í¬íŠ¸ íƒ­ ì‚­ì œ ë°©ì§€ ë¡œì§ ì¶”ê°€
8. âœ… ì–¸ì–´ë³„ í•˜ë“œì½”ë”© ë¬¸ì œ (í™•ì¥ì„± ê°œì„ )
9. âœ… UI ë²„íŠ¼ ì•„ì´ì½˜ ë¯¸í‘œì‹œ ë¬¸ì œ (objectName ë¶ˆì¼ì¹˜)

---

## ğŸ”„ ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

1. **ë‹¤êµ­ì–´ ì§€ì› ê°•í™”**: íƒ­ ì´ë¦„ ìˆ˜ì • ë‹¤ì´ì–¼ë¡œê·¸ í…ìŠ¤íŠ¸ ë‹¤êµ­ì–´ ì²˜ë¦¬
2. **í¬íŠ¸ íƒ­ ì•„ì´ì½˜**: ì—°ê²° ìƒíƒœì— ë”°ë¥¸ íƒ­ ì•„ì´ì½˜ í‘œì‹œ
3. **SmartNumberEdit í™•ì¥**: ë‹¤ë¥¸ ì…ë ¥ í•„ë“œì—ë„ ì ìš© (ì˜ˆ: Delay í•„ë“œ)
4. **í…Œë§ˆ ë³€ê²½ ì‹œ ì•„ì´ì½˜ ê°±ì‹ **: ëŸ°íƒ€ì„ í…Œë§ˆ ë³€ê²½ ì‹œ í”ŒëŸ¬ìŠ¤ íƒ­ ì•„ì´ì½˜ ìë™ ì—…ë°ì´íŠ¸

---

## ğŸ“Œ ì°¸ê³  ì‚¬í•­

- ëª¨ë“  ë³€ê²½ ì‚¬í•­ì€ ê¸°ì¡´ ì„¤ì • íŒŒì¼ê³¼ í˜¸í™˜ë©ë‹ˆë‹¤.
- ì»¤ìŠ¤í…€ íƒ­ ì´ë¦„ì€ `ports.[index].custom_name`ì— ì €ì¥ë©ë‹ˆë‹¤.
- `SmartNumberEdit`ëŠ” `view/widgets/common/` í´ë”ì— ë°°ì¹˜í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ê³µí†µ ìœ„ì ¯ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤.

---

**ì‘ì„±ì¼**: 2025-12-08
**ì‘ì„±ì**: AI Assistant
**ì„¸ì…˜ ì‹œê°„**: ì•½ 1ì‹œê°„
</file>

<file path="view/widgets/packet_inspector.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout, QLabel, QTreeWidget, QTreeWidgetItem
from typing import Optional
from view.lang_manager import lang_manager

class PacketInspectorWidget(QWidget):
    """
    íŒ¨í‚· êµ¬ì¡°ë¥¼ íŠ¸ë¦¬ í˜•íƒœë¡œ ì‹œê°í™”í•˜ì—¬ ë³´ì—¬ì£¼ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    (í˜„ì¬ëŠ” ë”ë¯¸ ë°ì´í„°ë¡œ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë©°, ì¶”í›„ ì‹¤ì œ íŒ¨í‚· ë¶„ì„ ê¸°ëŠ¥ì´ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.)
    """
    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        PacketInspectorë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.tree = None
        self.title_lbl = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)

        self.title_lbl = QLabel(lang_manager.get_text("inspector_grp_title"))
        layout.addWidget(self.title_lbl)

        self.tree = QTreeWidget()
        self.tree.setHeaderLabels([
            lang_manager.get_text("inspector_col_field"),
            lang_manager.get_text("inspector_col_value")
        ])

        # ë”ë¯¸ ë°ì´í„° (Dummy Data)
        root = QTreeWidgetItem(self.tree)
        root.setText(0, "Packet #1")
        root.setText(1, "AT_OK")

        child1 = QTreeWidgetItem(root)
        child1.setText(0, "Raw")
        child1.setText(1, "OK\\r\\n")

        child2 = QTreeWidgetItem(root)
        child2.setText(0, "Timestamp")
        child2.setText(1, "14:30:00.123")

        self.tree.expandAll()

        layout.addWidget(self.tree)
        self.setLayout(layout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.title_lbl.setText(lang_manager.get_text("inspector_grp_title"))
        self.tree.setHeaderLabels([
            lang_manager.get_text("inspector_col_field"),
            lang_manager.get_text("inspector_col_value")
        ])
</file>

<file path="view/theme_manager.py">
import os
import platform
from PyQt5.QtWidgets import QApplication
from PyQt5.QtGui import QFont, QIcon
from core.logger import logger

class ThemeManager:
    """ì• í”Œë¦¬ì¼€ì´ì…˜ í…Œë§ˆì™€ í°íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤."""

    # í”Œë«í¼ë³„ ê¸°ë³¸ í°íŠ¸ ì„¤ì •
    _PROPORTIONAL_FONTS = {
        "Windows": ("Segoe UI", 9),
        "Linux": ("Ubuntu", 9),
        "Darwin": ("SF Pro Text", 9)  # macOS
    }

    _FIXED_FONTS = {
        "Windows": ("Consolas", 9),
        "Linux": ("Monospace", 9),
        "Darwin": ("Menlo", 9)  # macOS
    }

    def __init__(self):
        """ThemeManagerë¥¼ ì´ˆê¸°í™”í•˜ê³  í”Œë«í¼ë³„ ê¸°ë³¸ í°íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤."""
        self._current_theme = "dark"
        self._app = None

        # í”Œë«í¼ í™•ì¸
        system = platform.system()

        # í”Œë«í¼ì— ë”°ë¥¸ ê¸°ë³¸ í°íŠ¸ ì„¤ì •
        prop_family, prop_size = self._PROPORTIONAL_FONTS.get(system, ("Arial", 9))
        fixed_family, fixed_size = self._FIXED_FONTS.get(system, ("Courier New", 9))

        self._proportional_font = QFont(prop_family, prop_size)
        self._fixed_font = QFont(fixed_family, fixed_size)
        self._fixed_font.setStyleHint(QFont.Monospace)

    def load_theme(self, theme_name: str = "dark") -> str:
        """
        ì§€ì •ëœ í…Œë§ˆì˜ QSS ì½˜í…ì¸ ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤. ê³µí†µ ìŠ¤íƒ€ì¼ì„ ë¨¼ì € ë¡œë“œí•©ë‹ˆë‹¤.

        Args:
            theme_name (str): ë¡œë“œí•  í…Œë§ˆ ì´ë¦„ ("dark" ë˜ëŠ” "light"). ê¸°ë³¸ê°’ì€ "dark".

        Returns:
            str: ê²°í•©ëœ QSS ë¬¸ìì—´.
        """
        common_path = "resources/themes/common.qss"
        theme_files = {
            "dark": "resources/themes/dark_theme.qss",
            "light": "resources/themes/light_theme.qss"
        }

        qss_content = ""

        # 1. ê³µí†µ QSS ë¡œë“œ
        if os.path.exists(common_path):
            try:
                with open(common_path, "r", encoding="utf-8") as f:
                    qss_content += f.read() + "\n"
            except Exception as e:
                logger.error(f"Error loading common theme: {e}")
        else:
            logger.warning(f"Common theme file not found: {common_path}")

        # 2. íŠ¹ì • í…Œë§ˆ QSS ë¡œë“œ
        qss_path = theme_files.get(theme_name)
        if qss_path and os.path.exists(qss_path):
            try:
                with open(qss_path, "r", encoding="utf-8") as f:
                    qss_content += f.read()
            except Exception as e:
                logger.error(f"Error loading theme {theme_name}: {e}")
        else:
            logger.warning(f"Theme file not found: {qss_path}")

        # 3. í´ë°± ìŠ¤íƒ€ì¼ì‹œíŠ¸ (íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨ ì‹œ)
        if not qss_content.strip():
            logger.warning("Failed to load theme file, using fallback stylesheet.")
            qss_content = self._get_fallback_stylesheet(theme_name)

        return qss_content

    @staticmethod
    def _get_fallback_stylesheet(theme_name: str) -> str:
        """
        í…Œë§ˆ íŒŒì¼ì´ ì—†ì„ ê²½ìš° ì‚¬ìš©í•  ìµœì†Œí•œì˜ ìŠ¤íƒ€ì¼ì‹œíŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Args:
            theme_name (str): í…Œë§ˆ ì´ë¦„.

        Returns:
            str: í´ë°± QSS ë¬¸ìì—´.
        """
        if theme_name == "dark":
            return """
            QMainWindow, QWidget { background-color: #2b2b2b; color: #ffffff; }
            QLineEdit, QTextEdit, QPlainTextEdit { background-color: #3b3b3b; color: #ffffff; border: 1px solid #555555; }
            QComboBox, QPushButton { background-color: #444444; color: #ffffff; border: 1px solid #555555; padding: 5px; }
            QHeaderView::section { background-color: #444444; color: #ffffff; }
            QTableView { background-color: #2b2b2b; color: #ffffff; gridline-color: #555555; }
            """
        else:
            return """
            QMainWindow, QWidget { background-color: #f0f0f0; color: #000000; }
            QLineEdit, QTextEdit, QPlainTextEdit { background-color: #ffffff; color: #000000; border: 1px solid #cccccc; }
            QComboBox, QPushButton { background-color: #e0e0e0; color: #000000; border: 1px solid #cccccc; padding: 5px; }
            """

    def apply_theme(self, app: QApplication, theme_name: str = "dark"):
        """
        ì§€ì •ëœ í…Œë§ˆë¥¼ QApplication ì¸ìŠ¤í„´ìŠ¤ì— ì ìš©í•©ë‹ˆë‹¤.

        Args:
            app (QApplication): ìŠ¤íƒ€ì¼ì„ ì ìš©í•  ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤.
            theme_name (str): ì ìš©í•  í…Œë§ˆ ì´ë¦„. ê¸°ë³¸ê°’ì€ "dark".
        """
        self._app = app
        self._current_theme = theme_name

        # 1. ê¸°ë³¸ í…Œë§ˆ ë¡œë“œ (ê³µí†µ + íŠ¹ì •)
        base_stylesheet = self.load_theme(theme_name)

        # 2. í°íŠ¸ ìŠ¤íƒ€ì¼ì‹œíŠ¸ ìƒì„±
        font_stylesheet = self._generate_font_stylesheet()

        # 3. ê²°í•© ë° ì ìš©
        full_stylesheet = base_stylesheet + "\n" + font_stylesheet

        if full_stylesheet:
            app.setStyleSheet(full_stylesheet)
        else:
            logger.error(f"Failed to apply theme: {theme_name}")

    def _generate_font_stylesheet(self) -> str:
        """
        í˜„ì¬ í°íŠ¸ ì„¤ì •ì— ëŒ€í•œ QSSë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

        Returns:
            str: í°íŠ¸ ì„¤ì •ì´ í¬í•¨ëœ QSS ë¬¸ìì—´.
        """
        prop_family = self._proportional_font.family()
        prop_size = self._proportional_font.pointSize()

        fixed_family = self._fixed_font.family()
        fixed_size = self._fixed_font.pointSize()

        return f"""
        /* ë™ì  í°íŠ¸ ì„¤ì • */

        /* ì „ì—­ í°íŠ¸ (ê°€ë³€í­) */
        QWidget {{
            font-family: "{prop_family}", sans-serif;
            font-size: {prop_size}pt;
        }}

        .proportional-font {{
            font-family: "{prop_family}", sans-serif;
            font-size: {prop_size}pt;
        }}

        .fixed-font {{
            font-family: "{fixed_family}", monospace;
            font-size: {fixed_size}pt;
        }}

        /* ê³ ì •í­ í°íŠ¸ë¥¼ í…ìŠ¤íŠ¸ ë°ì´í„° ìœ„ì ¯ì— ì ìš© */
        QTextEdit.fixed-font,
        QPlainTextEdit.fixed-font,
        QLineEdit.fixed-font,
        QTableView.fixed-font {{
            font-family: "{fixed_family}", monospace;
            font-size: {fixed_size}pt;
        }}
        """

    def get_current_theme(self) -> str:
        """
        í˜„ì¬ í…Œë§ˆ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            str: í˜„ì¬ í…Œë§ˆ ì´ë¦„.
        """
        return self._current_theme

    # ê°€ë³€í­(Proportional) í°íŠ¸ ë©”ì„œë“œ
    def set_proportional_font(self, family: str, size: int):
        """
        UI ìš”ì†Œì— ì‚¬ìš©í•  ê°€ë³€í­ í°íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            family (str): í°íŠ¸ íŒ¨ë°€ë¦¬ ì´ë¦„.
            size (int): í°íŠ¸ í¬ê¸° (pt).
        """
        self._proportional_font = QFont(family, size)
        if self._app:
            self._app.setFont(self._proportional_font)
            # í…Œë§ˆë¥¼ ë‹¤ì‹œ ì ìš©í•˜ì—¬ QSS ì—…ë°ì´íŠ¸
            self.apply_theme(self._app, self._current_theme)

    def get_proportional_font(self) -> QFont:
        """
        í˜„ì¬ ê°€ë³€í­ í°íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            QFont: í˜„ì¬ ì„¤ì •ëœ ê°€ë³€í­ í°íŠ¸ ê°ì²´ (ë³µì‚¬ë³¸).
        """
        return QFont(self._proportional_font)  # ë³µì‚¬ë³¸ ë°˜í™˜

    def get_proportional_font_info(self) -> tuple[str, int]:
        """
        ê°€ë³€í­ í°íŠ¸ì˜ ì •ë³´(íŒ¨ë°€ë¦¬, í¬ê¸°)ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            tuple[str, int]: (í°íŠ¸ íŒ¨ë°€ë¦¬, í°íŠ¸ í¬ê¸°) íŠœí”Œ.
        """
        return self._proportional_font.family(), self._proportional_font.pointSize()

    # ê³ ì •í­(Fixed) í°íŠ¸ ë©”ì„œë“œ
    def set_fixed_font(self, family: str, size: int):
        """
        í…ìŠ¤íŠ¸ ë°ì´í„°ì— ì‚¬ìš©í•  ê³ ì •í­ í°íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

        Args:
            family (str): í°íŠ¸ íŒ¨ë°€ë¦¬ ì´ë¦„.
            size (int): í°íŠ¸ í¬ê¸° (pt).
        """
        self._fixed_font = QFont(family, size)
        self._fixed_font.setStyleHint(QFont.Monospace)
        if self._app:
            # í…Œë§ˆë¥¼ ë‹¤ì‹œ ì ìš©í•˜ì—¬ QSS ì—…ë°ì´íŠ¸
            self.apply_theme(self._app, self._current_theme)

    def get_fixed_font(self) -> QFont:
        """
        í˜„ì¬ ê³ ì •í­ í°íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            QFont: í˜„ì¬ ì„¤ì •ëœ ê³ ì •í­ í°íŠ¸ ê°ì²´ (ë³µì‚¬ë³¸).
        """
        return QFont(self._fixed_font)  # ë³µì‚¬ë³¸ ë°˜í™˜

    def get_fixed_font_info(self) -> tuple[str, int]:
        """
        ê³ ì •í­ í°íŠ¸ì˜ ì •ë³´(íŒ¨ë°€ë¦¬, í¬ê¸°)ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            tuple[str, int]: (í°íŠ¸ íŒ¨ë°€ë¦¬, í°íŠ¸ í¬ê¸°) íŠœí”Œ.
        """
        return self._fixed_font.family(), self._fixed_font.pointSize()

    # ì„¤ì •ì—ì„œ í°íŠ¸ ë³µì›
    def restore_fonts_from_settings(self, settings: dict):
        """
        ì„¤ì • ë”•ì…”ë„ˆë¦¬ì—ì„œ í°íŠ¸ ì„¤ì •ì„ ë³µì›í•©ë‹ˆë‹¤.

        Args:
            settings (dict): ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ë”•ì…”ë„ˆë¦¬.
        """
        ui_settings = settings.get("ui", {})

        # ê°€ë³€í­ í°íŠ¸ ë³µì›
        prop_family = ui_settings.get("proportional_font_family")
        prop_size = ui_settings.get("proportional_font_size")
        if prop_family and prop_size:
            self._proportional_font = QFont(prop_family, prop_size)

        # ê³ ì •í­ í°íŠ¸ ë³µì›
        fixed_family = ui_settings.get("fixed_font_family")
        fixed_size = ui_settings.get("fixed_font_size")
        if fixed_family and fixed_size:
            self._fixed_font = QFont(fixed_family, fixed_size)
            self._fixed_font.setStyleHint(QFont.Monospace)

        # ì°¸ê³ : apply_themeì´ ì´ˆê¸°í™” ì§í›„ í˜¸ì¶œë˜ë¯€ë¡œ ì—¬ê¸°ì„œ ë°”ë¡œ ì ìš©í•˜ì§€ ì•Šì•„ë„ ë¨.
        # í•˜ì§€ë§Œ appì´ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ ëª…ì‹œì ìœ¼ë¡œ ì ìš©.
        if self._app:
             self.apply_theme(self._app, self._current_theme)

    def get_font_settings(self) -> dict:
        """
        í˜„ì¬ í°íŠ¸ ì„¤ì •ì„ ë”•ì…”ë„ˆë¦¬ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            dict: í°íŠ¸ ì„¤ì • ë”•ì…”ë„ˆë¦¬ (ì €ì¥ìš©).
        """
        prop_family, prop_size = self.get_proportional_font_info()
        fixed_family, fixed_size = self.get_fixed_font_info()

        return {
            "proportional_font_family": prop_family,
            "proportional_font_size": prop_size,
            "fixed_font_family": fixed_family,
            "fixed_font_size": fixed_size
        }

    # ë ˆê±°ì‹œ í˜¸í™˜ì„±
    @staticmethod
    def set_font(app: QApplication, font_family: str, font_size: int = 10):
        """
        ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ í°íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤ (ë ˆê±°ì‹œ ë©”ì„œë“œ).

        Args:
            app (QApplication): ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤.
            font_family (str): í°íŠ¸ íŒ¨ë°€ë¦¬ ì´ë¦„.
            font_size (int): í°íŠ¸ í¬ê¸°. ê¸°ë³¸ê°’ì€ 10.
        """
        font = QFont(font_family, font_size)
        app.setFont(font)

    def get_icon(self, name: str) -> QIcon:
        """
        í˜„ì¬ í…Œë§ˆì— ë§ëŠ” ì•„ì´ì½˜ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        ì•„ì´ì½˜ íŒŒì¼ëª… ê·œì¹™: {name}_{theme}.svg (ì˜ˆ: add_dark.svg, add_light.svg)
        ë‹¤í¬ í…Œë§ˆì¸ ê²½ìš° ë°ì€ ì•„ì´ì½˜(_dark.svg)ì„, ë¼ì´íŠ¸ í…Œë§ˆì¸ ê²½ìš° ì–´ë‘ìš´ ì•„ì´ì½˜(_light.svg)ì„ ì°¾ìŠµë‹ˆë‹¤.

        Args:
            name (str): ì•„ì´ì½˜ ì´ë¦„ (ì˜ˆ: "add").

        Returns:
            QIcon: í…Œë§ˆì— ë§ëŠ” QIcon ê°ì²´.
        """
        # í…Œë§ˆì— ë”°ë¥¸ ì ‘ë¯¸ì‚¬ ê²°ì •
        # ë‹¤í¬ í…Œë§ˆ -> ë°ì€ ì•„ì´ì½˜ í•„ìš” -> _dark ì ‘ë¯¸ì‚¬ (ë˜ëŠ” _white)
        # ë¼ì´íŠ¸ í…Œë§ˆ -> ì–´ë‘ìš´ ì•„ì´ì½˜ í•„ìš” -> _light ì ‘ë¯¸ì‚¬ (ë˜ëŠ” _black)
        # ì—¬ê¸°ì„œëŠ” íŒŒì¼ëª… ê·œì¹™ì„ {name}_{theme}.svgë¡œ ê°€ì •í•˜ê³ ,
        # theme ê°’ì€ í˜„ì¬ í…Œë§ˆ ì´ë¦„("dark", "light")ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©

        icon_path = f"resources/icons/{name}_{self._current_theme}.svg"

        if not os.path.exists(icon_path):
            # í´ë°±: í…Œë§ˆ ì ‘ë¯¸ì‚¬ ì—†ì´ ì‹œë„
            fallback_path = f"resources/icons/{name}.svg"
            if os.path.exists(fallback_path):
                return QIcon(fallback_path)
            # íŒŒì¼ì´ ì—†ìœ¼ë©´ ë¹ˆ ì•„ì´ì½˜ ë°˜í™˜
            return QIcon()

        return QIcon(icon_path)
</file>

<file path="view/widgets/status_area.py">
from PyQt5.QtWidgets import QWidget, QVBoxLayout, QTextEdit, QLabel
from typing import Optional
import datetime
from view.lang_manager import lang_manager

class StatusAreaWidget(QWidget):
    """
    ì‹œìŠ¤í…œ ìƒíƒœ ë©”ì‹œì§€ ë° ì—ëŸ¬ ë¡œê·¸ë¥¼ í‘œì‹œí•˜ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    QTextEditë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ì¤„ì˜ ìƒíƒœ ì´ë ¥ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
    """

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        StatusAreaë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(2)

        self.log_lbl = QLabel(lang_manager.get_text("status_title"))
        # log_lbl.setStyleSheet("font-weight: bold; font-size: 10px;")

        self.log_txt = QTextEdit()
        self.log_txt.setReadOnly(True)
        self.log_txt.setMaximumHeight(100) # ë†’ì´ ì œí•œ
        self.log_txt.setToolTip(lang_manager.get_text("status_txt_log_tooltip"))
        self.log_txt.setPlaceholderText(lang_manager.get_text("status_txt_log_placeholder"))
        self.log_txt.setProperty("class", "fixed-font")  # ê³ ì •í­ í°íŠ¸ ì ìš©

        layout.addWidget(self.log_lbl)
        layout.addWidget(self.log_txt)
        self.setLayout(layout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.log_lbl.setText(lang_manager.get_text("status_title"))
        self.log_txt.setToolTip(lang_manager.get_text("status_txt_log_tooltip"))
        self.log_txt.setPlaceholderText(lang_manager.get_text("status_txt_log_placeholder"))

    def log(self, message: str, level: str = "INFO") -> None:
        """
        ìƒíƒœ ë©”ì‹œì§€ë¥¼ ë¡œê·¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.

        Args:
            message (str): í‘œì‹œí•  ë©”ì‹œì§€.
            level (str): ë¡œê·¸ ë ˆë²¨ (INFO, ERROR, WARN, SUCCESS). ê¸°ë³¸ê°’ì€ "INFO".
        """
        timestamp = datetime.datetime.now().strftime("%H:%M:%S")
        color = "black"
        if level == "ERROR":
            color = "red"
        elif level == "WARN":
            color = "orange"
        elif level == "SUCCESS":
            color = "green"

        # ìƒ‰ìƒ ì ìš©ì„ ìœ„í•œ HTML í¬ë§·íŒ…
        formatted_msg = f'<span style="color:gray;">[{timestamp}]</span> <span style="color:{color};">[{level}]</span> {message}'
        self.log_txt.append(formatted_msg)

    def clear(self) -> None:
        """ë¡œê·¸ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        self.log_txt.clear()
</file>

<file path="doc/task.md">
# ì‘ì—… ëª©ë¡ (Task List)

## Phase 1: í”„ë¡œì íŠ¸ ì„¤ì • (ì™„ë£Œ)
- [x] í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- [x] Git ì €ì¥ì†Œ ì´ˆê¸°í™”
- [x] ê°€ìƒ í™˜ê²½ ìƒì„±
- [x] ì˜ì¡´ì„± ì„¤ì¹˜ (PyQt5)
- [x] README.md ìƒì„±
- [x] .gitignore ìƒì„±

## Phase 2: UI êµ¬í˜„ ë° í…Œë§ˆ ì‹œìŠ¤í…œ (ì™„ë£Œ)
- [x] ë©”ì¸ ìœˆë„ìš° ë ˆì´ì•„ì›ƒ êµ¬í˜„
    - [x] `MainWindow` í´ë˜ìŠ¤ ìƒì„±
    - [x] `LeftSection` êµ¬í˜„ (í¬íŠ¸/ì œì–´)
    - [x] `RightSection` êµ¬í˜„ (ì»¤ë§¨ë“œ/ì¸ìŠ¤í™í„°)
- [x] ìœ„ì ¯ êµ¬í˜„
    - [x] `PortSettingsWidget` (í¬íŠ¸ ì„¤ì •)
    - [x] `ReceivedArea` (ë¡œê·¸ ë·°)
    - [x] `ManualControlWidget` (ìˆ˜ë™ ì œì–´)
    - [x] `MacroListWidget` (ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸)
    - [x] `MacroCtrlWidget` (ì»¤ë§¨ë“œ ì œì–´)
    - [x] `PacketInspectorWidget` (íŒ¨í‚· ì¸ìŠ¤í™í„°)
    - [x] `FileProgressWidget` (íŒŒì¼ ì „ì†¡ ì§„í–‰)
- [x] í…Œë§ˆ ì‹œìŠ¤í…œ êµ¬í˜„
    - [x] `ThemeManager` ìƒì„±
    - [x] `common.qss` ìƒì„±
    - [x] `dark_theme.qss` ìƒì„±
    - [x] `light_theme.qss` ìƒì„±
    - [x] SVG ì•„ì´ì½˜ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ êµ¬í˜„
    - [x] `ThemeManager` í°íŠ¸ ì²˜ë¦¬ ì—…ë°ì´íŠ¸
    - [x] `FontSettingsDialog` ìƒì„±
    - [x] ìœ„ì ¯ì— í°íŠ¸ ì ìš©
- [x] ë””ë ‰í† ë¦¬ êµ¬ì¡° ë¦¬íŒ©í† ë§
    - [x] ìœ„ì ¯ì„ `view/widgets`ë¡œ ì´ë™
    - [x] íŒ¨ë„ì„ `view/panels`ë¡œ ì´ë™
    - [x] ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ `view/dialogs`ë¡œ ì´ë™
    - [x] ì¢Œ/ìš° ì„¹ì…˜ì„ ìœ„í•œ `view/sections` ìƒì„±
- [x] ë‹¤êµ­ì–´ ì§€ì› (Localization)
    - [x] `LanguageManager` ìƒì„±
    - [x] `en.json` ë° `ko.json` ìƒì„±
    - [x] `ManualControlWidget`ì— ì ìš©
    - [x] `ReceivedArea`ì— ì ìš©
    - [x] `MacroListWidget`ì— ì ìš©
    - [x] `MacroCtrlWidget`ì— ì ìš©
    - [x] `FileProgressWidget`ì— ì ìš©
    - [x] `PacketInspectorWidget`ì— ì ìš©
    - [x] `MainWindow`ì— ì ìš© (ë©”ë‰´, ë… íƒ€ì´í‹€)
    - [x] `LeftSection` & `RightSection`ì— ì ìš© (íƒ­)
    - [x] `PortSettingsWidget`ì— ì ìš©
    - [x] `StatusArea`ì— ì ìš©
    - [x] `FontSettingsDialog`ì— ì ìš©
    - [x] `PreferencesDialog`ì— ì ìš©

- [x] ë¦¬íŒ©í† ë§ ë° ì•ˆì •í™”
    - [x] ì–¸ì–´ í‚¤ í‘œì¤€í™” (`[context]_[type]_[name]`)
    - [x] ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì—…ë°ì´íŠ¸ (ëª…ëª… ê·œì¹™)
    - [x] Preferences Dialog ì ‘ê·¼ì„± ìˆ˜ì •
    - [x] Preferences Dialog ë¡œì§ êµ¬í˜„
    - [x] Command â†’ Macro ë„¤ì´ë° ë¦¬íŒ©í† ë§
    - [x] MVP íŒ¨í„´ ì¤€ìˆ˜ ê°•í™” (PreferencesDialog)
    - [x] ì–¸ì–´ í‚¤ ì™„ì„± (MainToolBar, MainMenuBar)
    - [x] TODO ì£¼ì„ ì •ë¦¬ (Noteë¡œ ë³€ê²½)
    - [x] í…Œë§ˆ ë©”ë‰´ ì²´í¬ í‘œì‹œ ì¶”ê°€
    - [x] ìš°ì¸¡ íŒ¨ë„ í† ê¸€ ê°œì„  (ì™¼ìª½ íŒ¨ë„ í¬ê¸° ìœ ì§€)
    - [x] QSS warning í´ë˜ìŠ¤ ì¶”ê°€


## Phase 3: Core ìœ í‹¸ë¦¬í‹° (ê³„íšë¨)
- [ ] `RingBuffer` êµ¬í˜„
    - [ ] `core/utils.py` ìƒì„±
    - [ ] ì›í˜• ë²„í¼ ë¡œì§ êµ¬í˜„
    - [ ] ìŠ¤ë ˆë“œ ì•ˆì „ì„± êµ¬í˜„
- [ ] `ThreadSafeQueue` êµ¬í˜„
    - [ ] `core/utils.py`ì— ì¶”ê°€
    - [ ] ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹ í êµ¬í˜„
- [ ] `EventBus` êµ¬í˜„
    - [ ] `core/event_bus.py` ìƒì„±
    - [ ] Pub/Sub íŒ¨í„´ êµ¬í˜„
    - [ ] í‘œì¤€ ì´ë²¤íŠ¸ íƒ€ì… ì •ì˜ (`core/event_types.py`)
- [ ] `LogManager` êµ¬í˜„
    - [ ] `core/logger.py` ìƒì„±
    - [ ] `RotatingFileHandler` êµ¬í˜„ (10MB ì œí•œ)
    - [ ] ì„±ëŠ¥ ë¡œê±° êµ¬í˜„ (CSV ë‚´ë³´ë‚´ê¸°)

## Phase 4: Model ê³„ì¸µ (ê³„íšë¨)
- [ ] `SerialWorker` êµ¬í˜„
    - [ ] `model/serial_worker.py` ìƒì„±
    - [ ] QThread êµ¬í˜„
- [ ] `PortController` êµ¬í˜„
    - [ ] `model/port_controller.py` ìƒì„±
    - [ ] ìƒíƒœ ë¨¸ì‹  êµ¬í˜„
- [ ] `SerialManager` (PortRegistry) êµ¬í˜„
    - [ ] `model/serial_manager.py` ìƒì„±
    - [ ] í¬íŠ¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë° ìˆ˜ëª… ì£¼ê¸° ê´€ë¦¬ êµ¬í˜„
- [ ] `PacketParser` ì‹œìŠ¤í…œ êµ¬í˜„
    - [ ] `model/packet_parser.py` ìƒì„±
    - [ ] `ParserFactory` êµ¬í˜„ (AT, Delimiter, Fixed, Hex)
    - [ ] `ExpectMatcher` êµ¬í˜„ (Regex ê¸°ë°˜)
- [ ] `EventRouter` êµ¬í˜„ (View-Model ë¶„ë¦¬)
- [ ] `PortPresenter` êµ¬í˜„ (ì—´ê¸°/ë‹«ê¸°/ì„¤ì •)
- [ ] `MainPresenter` êµ¬í˜„ (ì•± ìˆ˜ëª… ì£¼ê¸°)
- [ ] `CommandPresenter` êµ¬í˜„ (CL ë¡œì§)
- [ ] `FilePresenter` êµ¬í˜„ (ì „ì†¡ ë¡œì§)
- [ ] CI/CD ì„¤ì •

## Phase 6: ìë™í™” ë° ê³ ê¸‰ ê¸°ëŠ¥ (ê³„íšë¨)
- [ ] `CLRunner` êµ¬í˜„ (ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ì—”ì§„)
    - [ ] ìƒíƒœ ë¨¸ì‹  (Idle/Running/Paused)
    - [ ] ë‹¨ê³„ ì‹¤í–‰ (Send -> Expect -> Delay)
    - [ ] Auto Run ìŠ¤ì¼€ì¤„ëŸ¬ (Interval/Loops)
- [ ] `FileTransferEngine` êµ¬í˜„
    - [ ] ì²­í¬ ê¸°ë°˜ ì „ì†¡ (ì ì‘í˜• í¬ê¸°)
    - [ ] ì§„í–‰ë¥  ê³„ì‚° ë° ì·¨ì†Œ ì§€ì›
    - [ ] Rx íŒŒì¼ ìº¡ì²˜ (`RxCaptureWriter`)
- [ ] `AutoTxScheduler` êµ¬í˜„ (ì£¼ê¸°ì  ì „ì†¡)
- [ ] ì„±ëŠ¥ ìµœì í™”
    - [ ] RxLogViewë¥¼ ìœ„í•œ `BatchRenderer` êµ¬í˜„
    - [ ] `RingBuffer` ìµœì í™” (bytearray)
    - [ ] ë…¼ë¸”ë¡œí‚¹ I/O ë£¨í”„ ìµœì í™”

## Phase 7: í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ (ê³„íšë¨)
- [ ] í”ŒëŸ¬ê·¸ì¸ ì¸í”„ë¼ êµ¬í˜„
    - [ ] `core/plugin_base.py` ìƒì„± (ì¸í„°í˜ì´ìŠ¤)
    - [ ] `core/plugin_loader.py` ìƒì„± (ë™ì  ì„í¬íŠ¸)
    - [ ] `ExamplePlugin` êµ¬í˜„

## Phase 8: ê²€ì¦ ë° ë°°í¬ (ê³„íšë¨)
- [ ] í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •
    - [ ] ê°€ìƒ ì‹œë¦¬ì–¼ í¬íŠ¸ ì„¤ì • (com0com/socat)
    - [ ] Mock Serial í´ë˜ìŠ¤ ìƒì„±
- [ ] ìë™í™” í…ŒìŠ¤íŠ¸
    - [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Core/Model)
    - [ ] í†µí•© í…ŒìŠ¤íŠ¸ (Serial I/O)
    - [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ (Rx ì²˜ë¦¬ëŸ‰, UI ë Œë”ë§)
- [ ] íŒ¨í‚¤ì§• ë° ë°°í¬
    - [ ] `pyinstaller.spec` ìƒì„±
    - [ ] ë…ë¦½ ì‹¤í–‰í˜• EXE/AppImage ë¹Œë“œ
    - [ ] GitHub Actions CI/CD ì„¤ì •
</file>

<file path="presenter/main_presenter.py">
from PyQt5.QtCore import QObject
from view.main_window import MainWindow
from model.port_controller import PortController
from .port_presenter import PortPresenter
from core.settings_manager import SettingsManager
from view.lang_manager import lang_manager
from core.logger import logger

class MainPresenter(QObject):
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¡°ìœ¨í•˜ëŠ” ë©”ì¸ Presenter í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    í•˜ìœ„ Presenterë“¤ì„ ì´ˆê¸°í™”í•˜ê³  ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
    """
    def __init__(self, view: MainWindow) -> None:
        """
        MainPresenterë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            view (MainWindow): ë©”ì¸ ìœˆë„ìš° ì¸ìŠ¤í„´ìŠ¤.
        """
        super().__init__()
        self.view = view

        # ëª¨ë¸ ì´ˆê¸°í™” (Initialize Models)
        self.port_controller = PortController()

        # í•˜ìœ„ Presenter ì´ˆê¸°í™” (Initialize Sub-Presenters)
        self.port_presenter = PortPresenter(self.view.left_section, self.port_controller)

        # ë°ì´í„° ìˆ˜ì‹  ì‹œê·¸ë„ì„ ë¡œê·¸ ë·°ì— ì—°ê²°
        self.port_controller.data_received.connect(self.on_data_received)

        # ìˆ˜ë™ ì „ì†¡ ì‹œê·¸ë„ ì—°ê²°
        self.view.left_section.manual_control.manual_control_widget.manual_cmd_send_requested.connect(
            self.on_manual_cmd_send_requested
        )

        # ì„¤ì • ì €ì¥ ìš”ì²­ ì‹œê·¸ë„ ì—°ê²°
        self.view.setting_save_requested.connect(self.on_settings_change_requested)

    def on_data_received(self, data: bytes) -> None:
        """
        ìˆ˜ì‹ ëœ ì‹œë¦¬ì–¼ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        í˜„ì¬ í™œì„± í¬íŠ¸ íŒ¨ë„ì˜ ReceivedAreaë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.

        Args:
            data (bytes): ìˆ˜ì‹ ëœ ë°”ì´íŠ¸ ë°ì´í„°.
        """
        # í˜„ì¬ í™œì„± í¬íŠ¸ íŒ¨ë„ì„ ê°€ì ¸ì™€ì„œ ReceivedAreaë¡œ ë°ì´í„° ì „ë‹¬
        index = self.view.left_section.port_tabs.currentIndex()
        if index >= 0:
            widget = self.view.left_section.port_tabs.widget(index)
            if hasattr(widget, 'received_area'):
                widget.received_area.append_data(data)

    def on_manual_cmd_send_requested(self, text: str, hex_mode: bool, cmd_prefix: bool, cmd_suffix: bool) -> None:
        """
        ìˆ˜ë™ ëª…ë ¹ ì „ì†¡ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        prefix/suffix ì„¤ì •ì„ ì ìš©í•˜ê³  ìµœì¢… ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.

        Args:
            text: ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì›ë³¸ í…ìŠ¤íŠ¸
            hex_mode: HEX ëª¨ë“œ ì‚¬ìš© ì—¬ë¶€
            cmd_prefix: ì ‘ë‘ì‚¬ ì‚¬ìš© ì—¬ë¶€
            cmd_suffix: ì ‘ë¯¸ì‚¬ ì‚¬ìš© ì—¬ë¶€
        """
        if not self.port_controller.is_open:
            logger.warning("Port not open")
            return

        settings = SettingsManager()

        final_text = text

        # Apply prefix if requested
        if cmd_prefix:
            prefix = settings.get("settings.cmd_prefix", "")
            prefix = prefix.replace("\\r", "\r").replace("\\n", "\n")
            final_text = prefix + final_text

        # Apply suffix if requested
        if cmd_suffix:
            suffix = settings.get("settings.cmd_suffix", "\\r\\n")
            suffix = suffix.replace("\\r", "\r").replace("\\n", "\n")
            final_text = final_text + suffix

        # Convert to bytes
        if hex_mode:
            try:
                # 16ì§„ìˆ˜ ë¬¸ìì—´ì„ ì‹¤ì œ ë°”ì´íŠ¸ë¡œ ë³€í™˜ (ì˜ˆ: "01 02 FF" -> b'\x01\x02\xff')
                data = bytes.fromhex(final_text.replace(' ', ''))
            except ValueError:
                # ìœ íš¨í•˜ì§€ ì•Šì€ 16ì§„ìˆ˜ ë¬¸ìì—´ì¸ ê²½ìš° ì²˜ë¦¬ (ì˜ˆ: ì˜¤ë¥˜ ë¡œê¹…, ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼)
                logger.error(f"Invalid hex string for sending:{final_text}")

                # Note: í–¥í›„ MainWindowì˜ status_barë¥¼ í†µí•´ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ ì˜ˆì •
                return # ì „ì†¡ ì¤‘ë‹¨
        else:
            data = final_text.encode('utf-8')

        self.port_controller.send_data(data)

    def on_settings_change_requested(self, new_settings: dict) -> None:
        """
        ì„¤ì • ì €ì¥ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        ë°ì´í„° ê²€ì¦ ë° ë³€í™˜ í›„ ì„¤ì •ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

        Args:
            new_settings (dict): Viewì—ì„œ ì „ë‹¬ëœ ì›ë³¸ ì„¤ì • ë°ì´í„°.
        """
        settings_manager = SettingsManager()

        # ì„¤ì • í‚¤ ë§¤í•‘
        settings_map = {
            'theme': 'settings.theme',
            'language': 'settings.language',
            'proportional_font_size': 'settings.proportional_font_size',
            'max_log_lines': 'settings.recv_max_lines',
            'cmd_prefix': 'settings.cmd_prefix',
            'cmd_suffix': 'settings.cmd_suffix',
            'port_baudrate': 'settings.port_baudrate',
            'port_scan_interval': 'settings.port_scan_interval',
            'log_path': 'logging.path',
        }

        # ë°ì´í„° ë³€í™˜ ë° ì €ì¥
        for key, value in new_settings.items():
            final_value = value

            # ë°ì´í„° ë³€í™˜ (Data Transformation)
            if key == 'theme':
                final_value = value.lower()
            elif key == 'port_baudrate':
                try:
                    final_value = int(value)
                except ValueError:
                    continue # ìœ íš¨í•˜ì§€ ì•Šì€ ë³´ë ˆì´íŠ¸ ë¬´ì‹œ

            setting_path = settings_map.get(key)
            if setting_path:
                settings_manager.set(setting_path, final_value)

        # UI ì—…ë°ì´íŠ¸ (View Update)
        if 'theme' in new_settings:
            self.view.switch_theme(new_settings['theme'].lower())

        if 'language' in new_settings:
            lang_manager.set_language(new_settings['language'])

        # ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
        if hasattr(self.view, 'global_status_bar'):
            self.view.global_status_bar.show_message("Settings updated", 2000)
</file>

<file path="tests/test_view.py">
"""
View ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜
ê°œë³„ ìœ„ì ¯ë“¤ì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
"""
import sys
from PyQt5.QtWidgets import QApplication, QMainWindow, QWidget, QVBoxLayout, QTabWidget
from PyQt5.QtCore import QTimer
from PyQt5.QtWidgets import QPushButton, QHBoxLayout, QLabel, QTextEdit
from PyQt5.QtWidgets import QPushButton, QHBoxLayout

import os

from view.widgets.received_area import ReceivedAreaWidget
from view.widgets.manual_control import ManualControlWidget
from view.widgets.macro_list import MacroListWidget
from view.widgets.status_area import StatusAreaWidget
from view.panels.port_panel import PortPanel
from view.theme_manager import ThemeManager
from view.lang_manager import lang_manager
from view.dialogs.preferences_dialog import PreferencesDialog
from view.dialogs.about_dialog import AboutDialog
from view.widgets.file_progress import FileProgressWidget
from core.settings_manager import SettingsManager

# ë¶€ëª¨ ë””ë ‰í† ë¦¬ë¥¼ ê²½ë¡œì— ì¶”ê°€í•˜ì—¬ ëª¨ë“ˆ import ê°€ëŠ¥í•˜ê²Œ í•¨
current_dir = os.path.dirname(os.path.abspath(__file__))
parent_dir = os.path.dirname(current_dir)
sys.path.insert(0, parent_dir)

class ViewTestWindow(QMainWindow):
    """View ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ìš© ìœˆë„ìš° í´ë˜ìŠ¤ì…ë‹ˆë‹¤."""

    def __init__(self) -> None:
        """ViewTestWindowë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        super().__init__()
        self.setWindowTitle("View Components Test")
        self.resize(1200, 800)

        # ì„¤ì • ê´€ë¦¬ì í…ŒìŠ¤íŠ¸ (Settings Manager Test)
        self.settings = SettingsManager()

        self.init_ui()

        # í…Œë§ˆ ì ìš© (Apply theme)
        theme = self.settings.get('settings.theme', 'dark')
        self.theme_manager = ThemeManager()
        self.theme_manager.apply_theme(QApplication.instance(), theme)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        central_widget = QWidget()
        self.setCentralWidget(central_widget)

        layout = QVBoxLayout(central_widget)

        # í…ŒìŠ¤íŠ¸ìš© íƒ­ ìœ„ì ¯ (Tab Widget for different tests)
        tabs = QTabWidget()

        # Test 1: ReceivedArea (ìƒ‰ìƒ ê·œì¹™, Trim, íƒ€ì„ìŠ¤íƒ¬í”„ í…ŒìŠ¤íŠ¸)
        tabs.addTab(self.create_received_area_test(), "ReceivedArea Test")

        # Test 2: ManualControl (ì…ë ¥, íŒŒì¼ ì „ì†¡ í…ŒìŠ¤íŠ¸)
        tabs.addTab(self.create_manual_control_test(), "ManualControl Test")

        # Test 3: CommandList (ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸)
        tabs.addTab(self.create_macro_list_test(), "CommandList Test")

        # Test 4: StatusArea (ìƒíƒœ ë¡œê·¸ í…ŒìŠ¤íŠ¸)
        tabs.addTab(self.create_status_area_test(), "StatusArea Test")

        # Test 5: PortPanel (ì „ì²´ íŒ¨ë„ í…ŒìŠ¤íŠ¸)
        tabs.addTab(self.create_port_panel_test(), "PortPanel Test")

        # Test 6: Dialogs (Preferences, About)
        tabs.addTab(self.create_dialog_test(), "Dialogs Test")

        # Test 7: FileProgress (íŒŒì¼ ì „ì†¡ ì§„í–‰ë¥ )
        tabs.addTab(self.create_file_progress_test(), "FileProgress Test")

        # Test 8: Language (ë‹¤êµ­ì–´ ì§€ì›)
        tabs.addTab(self.create_language_test(), "Language Test")

        layout.addWidget(tabs)

        # ìƒíƒœ í‘œì‹œì¤„ (Status bar)
        self.statusBar().showMessage("Ready - View Components Test")

    def create_received_area_test(self) -> QWidget:
        """
        ReceivedArea í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤.

        Returns:
            QWidget: í…ŒìŠ¤íŠ¸ ìœ„ì ¯.
        """


        widget = QWidget()
        layout = QVBoxLayout(widget)

        # ReceivedArea ì¸ìŠ¤í„´ìŠ¤
        self.received_area = ReceivedAreaWidget()
        layout.addWidget(self.received_area)

        # í…ŒìŠ¤íŠ¸ ë²„íŠ¼ (Test buttons)
        button_layout = QHBoxLayout()

        # í…ŒìŠ¤íŠ¸ ë°ì´í„° ë²„íŠ¼
        btn_ok = QPushButton("Add OK")
        btn_ok.clicked.connect(lambda: self.received_area.append_data(b"AT\r\nOK\r\n"))
        button_layout.addWidget(btn_ok)

        btn_error = QPushButton("Add ERROR")
        btn_error.clicked.connect(lambda: self.received_area.append_data(b"AT+TEST\r\nERROR\r\n"))
        button_layout.addWidget(btn_error)

        btn_urc = QPushButton("Add URC")
        btn_urc.clicked.connect(lambda: self.received_area.append_data(b"+CREG: 1,5\r\n"))
        button_layout.addWidget(btn_urc)

        btn_many = QPushButton("Add 100 Lines")
        btn_many.clicked.connect(self.add_many_lines)
        button_layout.addWidget(btn_many)

        btn_clear = QPushButton("Clear")
        btn_clear.clicked.connect(self.received_area.on_clear_recv_log_clicked)
        button_layout.addWidget(btn_clear)

        layout.addLayout(button_layout)

        # ì •ë³´ ë ˆì´ë¸”
        info = QLabel("âœ… í…ŒìŠ¤íŠ¸: ìƒ‰ìƒ ê·œì¹™ (OK=ë…¹ìƒ‰, ERROR=ë¹¨ê°•), Trim (2000ì¤„ ì œí•œ), íƒ€ì„ìŠ¤íƒ¬í”„ (TS ì²´í¬ë°•ìŠ¤)")
        layout.addWidget(info)

        return widget

    def add_many_lines(self) -> None:
        """ë§ì€ ë¼ì¸ì„ ì¶”ê°€í•˜ì—¬ Trim ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤."""
        for i in range(100):
            self.received_area.append_data(f"Line {i+1}: Test data\r\n".encode())

    def create_manual_control_test(self) -> QWidget:
        """
        ManualControl í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤.

        Returns:
            QWidget: í…ŒìŠ¤íŠ¸ ìœ„ì ¯.
        """


        widget = QWidget()
        layout = QVBoxLayout(widget)

        # ManualControl ì¸ìŠ¤í„´ìŠ¤
        self.manual_control = ManualControlWidget()
        layout.addWidget(self.manual_control)

        # ì¶œë ¥ ì˜ì—­ (Output area)
        self.manual_output = QTextEdit()
        self.manual_output.setReadOnly(True)
        self.manual_output.setMaximumHeight(200)
        layout.addWidget(self.manual_output)

        # ì‹œê·¸ë„ ì—°ê²°
        self.manual_control.manual_cmd_send_requested.connect(
            lambda text, hex_mode, prefix, suffix: self.manual_output.append(
                f"Send: {text} (hex={hex_mode}, prefix={prefix}, suffix={suffix})"
            )
        )
        self.manual_control.transfer_file_selected.connect(
            lambda path: self.manual_output.append(f"File selected: {path}")
        )
        self.manual_control.transfer_file_send_requested.connect(
            lambda path: self.manual_output.append(f"Send file requested: {path}")
        )

        # ì •ë³´ ë ˆì´ë¸”

        info = QLabel("âœ… í…ŒìŠ¤íŠ¸: Send ë²„íŠ¼, HEX ëª¨ë“œ, íŒŒì¼ ì„ íƒ/ì „ì†¡ (Enter/Prefix/SuffixëŠ” ì„¤ì •ì—ì„œ ê´€ë¦¬)")
        layout.addWidget(info)

        # ì œì–´ í™œì„±í™”/ë¹„í™œì„±í™” í…ŒìŠ¤íŠ¸
        btn_layout = QHBoxLayout()
        btn_enable = QPushButton("Enable Controls")
        btn_enable.clicked.connect(lambda: self.manual_control.set_controls_enabled(True))
        btn_layout.addWidget(btn_enable)

        btn_disable = QPushButton("Disable Controls")
        btn_disable.clicked.connect(lambda: self.manual_control.set_controls_enabled(False))
        btn_layout.addWidget(btn_disable)

        layout.addLayout(btn_layout)

        return widget

    def create_macro_list_test(self) -> QWidget:
        """
        CommandList í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤.

        Returns:
            QWidget: í…ŒìŠ¤íŠ¸ ìœ„ì ¯.
        """
        widget = QWidget()
        layout = QVBoxLayout(widget)

        # CommandList ì¸ìŠ¤í„´ìŠ¤
        self.macro_list = MacroListWidget()
        layout.addWidget(self.macro_list)

        # ì •ë³´ ë ˆì´ë¸”

        info = QLabel("âœ… í…ŒìŠ¤íŠ¸: í–‰ ì¶”ê°€/ì‚­ì œ/ì´ë™, Select All, Send ë²„íŠ¼, ë°ì´í„° ìœ ì§€(Persistence)")
        layout.addWidget(info)

        # Persistence Test Buttons
        btn_layout = QHBoxLayout()
        btn_save = QPushButton("Save to Console")
        btn_save.clicked.connect(lambda: print(self.macro_list.get_macro_list()))

        btn_load = QPushButton("Load Dummy Data")
        btn_load.clicked.connect(lambda: self.macro_list.set_macro_list([
            {"command": "LOADED_CMD_1", "delay": "200", "enabled": True},
            {"command": "LOADED_CMD_2", "delay": "500", "enabled": False}
        ]))

        btn_layout.addWidget(btn_save)
        btn_layout.addWidget(btn_load)
        layout.addLayout(btn_layout)

        return widget

    def create_status_area_test(self) -> QWidget:
        """
        StatusArea í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤.

        Returns:
            QWidget: í…ŒìŠ¤íŠ¸ ìœ„ì ¯.
        """


        widget = QWidget()
        layout = QVBoxLayout(widget)

        # StatusArea ì¸ìŠ¤í„´ìŠ¤
        self.status_area = StatusAreaWidget()
        layout.addWidget(self.status_area)

        # í…ŒìŠ¤íŠ¸ ë²„íŠ¼
        button_layout = QHBoxLayout()

        btn_info = QPushButton("Log INFO")
        btn_info.clicked.connect(lambda: self.status_area.log("This is an info message", "INFO"))
        button_layout.addWidget(btn_info)

        btn_error = QPushButton("Log ERROR")
        btn_error.clicked.connect(lambda: self.status_area.log("This is an error message", "ERROR"))
        button_layout.addWidget(btn_error)

        btn_warn = QPushButton("Log WARN")
        btn_warn.clicked.connect(lambda: self.status_area.log("This is a warning message", "WARN"))
        button_layout.addWidget(btn_warn)

        btn_success = QPushButton("Log SUCCESS")
        btn_success.clicked.connect(lambda: self.status_area.log("This is a success message", "SUCCESS"))
        button_layout.addWidget(btn_success)

        layout.addLayout(button_layout)

        # ì •ë³´ ë ˆì´ë¸”
        info = QLabel("âœ… í…ŒìŠ¤íŠ¸: ë¡œê·¸ ë ˆë²¨ë³„ ìƒ‰ìƒ (INFO=íŒŒë‘, ERROR=ë¹¨ê°•, WARN=ì£¼í™©, SUCCESS=ë…¹ìƒ‰)")
        layout.addWidget(info)

        return widget

    def create_port_panel_test(self) -> QWidget:
        """
        PortPanel ì „ì²´ í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤.

        Returns:
            QWidget: í…ŒìŠ¤íŠ¸ ìœ„ì ¯.
        """


        widget = QWidget()
        layout = QVBoxLayout(widget)

        # PortPanel ì¸ìŠ¤í„´ìŠ¤
        self.port_panel = PortPanel()
        layout.addWidget(self.port_panel)

        # ì •ë³´ ë ˆì´ë¸”
        info = QLabel("âœ… í…ŒìŠ¤íŠ¸: ì „ì²´ í¬íŠ¸ íŒ¨ë„ (ì„¤ì • + ReceivedArea + StatusArea)")
        layout.addWidget(info)

        return widget

    def create_dialog_test(self) -> QWidget:
        """Dialog í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤."""


        widget = QWidget()
        layout = QVBoxLayout(widget)

        btn_pref = QPushButton("Open Preferences Dialog")
        btn_pref.clicked.connect(self.open_preferences)

        btn_about = QPushButton("Open About Dialog")
        btn_about.clicked.connect(self.open_about)

        layout.addWidget(btn_pref)
        layout.addWidget(btn_about)
        layout.addWidget(QLabel("âœ… í…ŒìŠ¤íŠ¸: ì„¤ì • ë‹¤ì´ì–¼ë¡œê·¸ ë° ì •ë³´ ë‹¤ì´ì–¼ë¡œê·¸ í˜¸ì¶œ"))
        layout.addStretch()

        return widget

    def open_preferences(self) -> None:
        """ì„¤ì • ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ ì—½ë‹ˆë‹¤."""
        # í˜„ì¬ ì„¤ì • ë¡œë“œ (í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ ë°ì´í„°)
        current_settings = self.settings.get_all_settings().get('global', {})
        # Serial/Logging ì„¤ì •ë„ í¬í•¨í•´ì•¼ í•˜ì§€ë§Œ ì—¬ê¸°ì„  ê°„ë‹¨íˆ

        dlg = PreferencesDialog(self, self.settings.get_all_settings())
        if dlg.exec_():
            print("Preferences Saved")
            # ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì„œ ì„¤ì •ì„ ì €ì¥í•˜ê³  ì ìš©í•´ì•¼ í•¨

    def open_about(self) -> None:
        """ì •ë³´ ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ ì—½ë‹ˆë‹¤."""
        dlg = AboutDialog(self)
        dlg.exec_()

    def create_file_progress_test(self) -> QWidget:
        """FileProgressWidget í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤."""


        widget = QWidget()
        layout = QVBoxLayout(widget)

        self.file_progress = FileProgressWidget()
        layout.addWidget(self.file_progress)

        btn_start = QPushButton("Start Mock Transfer")
        btn_start.clicked.connect(self.start_mock_transfer)

        layout.addWidget(btn_start)
        layout.addWidget(QLabel("âœ… í…ŒìŠ¤íŠ¸: ì§„í–‰ë¥  ë°”, ì†ë„, ETA ì—…ë°ì´íŠ¸ ë° ì·¨ì†Œ ë²„íŠ¼"))
        layout.addStretch()

        return widget

    def start_mock_transfer(self) -> None:
        """ëª¨ì˜ íŒŒì¼ ì „ì†¡ì„ ì‹œì‘í•©ë‹ˆë‹¤."""
        self.mock_sent = 0
        self.mock_total = 1024 * 1024 * 10 # 10MB
        self.file_progress.reset()

        self.transfer_timer = QTimer(self)
        self.transfer_timer.timeout.connect(self.update_mock_transfer)
        self.transfer_timer.start(100) # 100ms ë§ˆë‹¤ ì—…ë°ì´íŠ¸

    def update_mock_transfer(self) -> None:
        """ëª¨ì˜ ì „ì†¡ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        chunk = 1024 * 100 # 100KB
        self.mock_sent += chunk

        if self.mock_sent >= self.mock_total:
            self.mock_sent = self.mock_total
            self.transfer_timer.stop()
            self.file_progress.set_complete(True, "Transfer Finished")

        # Mock speed calculation
        speed = chunk * 10 # 1MB/s
        eta = (self.mock_total - self.mock_sent) / speed

        self.file_progress.update_progress(self.mock_sent, self.mock_total, speed, eta)

    def create_language_test(self) -> QWidget:
        """LangManager í…ŒìŠ¤íŠ¸ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤."""
        widget = QWidget()
        layout = QVBoxLayout(widget)

        self.lang_label = QLabel(lang_manager.get_text("main_title"))
        self.lang_label.setStyleSheet("font-size: 20px; font-weight: bold;")

        btn_en = QPushButton("English")
        btn_en.clicked.connect(lambda: self.change_language("en"))

        btn_ko = QPushButton("í•œêµ­ì–´")
        btn_ko.clicked.connect(lambda: self.change_language("ko"))

        layout.addWidget(self.lang_label)
        layout.addWidget(btn_en)
        layout.addWidget(btn_ko)
        layout.addWidget(QLabel("âœ… í…ŒìŠ¤íŠ¸: ë²„íŠ¼ í´ë¦­ ì‹œ ì•± íƒ€ì´í‹€ ì–¸ì–´ ë³€ê²½ í™•ì¸"))
        layout.addStretch()

        return widget

    def change_language(self, lang: str) -> None:
        """ì–¸ì–´ë¥¼ ë³€ê²½í•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        lang_manager.set_language(lang)
        self.lang_label.setText(lang_manager.get_text("main_title"))

    def closeEvent(self, event) -> None:
        """
        ì¢…ë£Œ ì‹œ ì„¤ì •ì„ ì €ì¥í•©ë‹ˆë‹¤.

        Args:
            event: ì¢…ë£Œ ì´ë²¤íŠ¸.
        """
        self.settings.set('ui.window_width', self.width())
        self.settings.set('ui.window_height', self.height())
        self.settings.save_settings()
        event.accept()


def main() -> None:
    """ë©”ì¸ í•¨ìˆ˜ì…ë‹ˆë‹¤."""
    app = QApplication(sys.argv)
    app.setApplicationName("SerialTool View Test")

    window = ViewTestWindow()
    window.show()

    sys.exit(app.exec_())


if __name__ == "__main__":
    main()
</file>

<file path="doc/implementation_plan.md">
# SerialTool êµ¬í˜„ ê³„íš (Implementation Plan)

## ëª©í‘œ (Goal)

`Implementation_Specification.md`ì— ì •ì˜ëœ **SerialTool v1.0**ì„ **Python 3.10+** ë° **PyQt5**ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•©ë‹ˆë‹¤. **Layered MVP (Model-View-Presenter)** ì•„í‚¤í…ì²˜ì™€ **Worker Thread** ëª¨ë¸ì„ ì ìš©í•˜ì—¬ **ê³ ì„±ëŠ¥**, **ì•ˆì •ì„±**, **í™•ì¥ì„±**ì„ í™•ë³´í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

### í•µì‹¬ ëª©í‘œ
- **ë©€í‹°í¬íŠ¸ ê´€ë¦¬**: ìµœëŒ€ 16ê°œ í¬íŠ¸ ë™ì‹œ ì˜¤í”ˆ ë° ë…ë¦½ ì œì–´
- **ê³ ì† ë°ì´í„° ì²˜ë¦¬**: 2MB/s ì—°ì† ìŠ¤íŠ¸ë¦¼, ì´ˆë‹¹ 10K ë¼ì¸ ë¡œê·¸ ì²˜ë¦¬
- **ìë™í™” ì—”ì§„**: Macro List ê¸°ë°˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰, Repeat ìŠ¤ì¼€ì¤„ëŸ¬
- **íŒŒì¼ ì†¡ìˆ˜ì‹ **: Chunk ê¸°ë°˜ ì „ì†¡, ì§„í–‰ë¥  í‘œì‹œ, ì·¨ì†Œ/ì¬ì‹œë„
- **í™•ì¥ì„±**: EventBus ê¸°ë°˜ í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ
- **MVP íŒ¨í„´ ì¤€ìˆ˜**: View-Presenter-Model ê³„ì¸µ ë¶„ë¦¬ ë° Signal ê¸°ë°˜ í†µì‹ 

---

## ì‚¬ìš©ì ê²€í†  í•„ìš” ì‚¬í•­ (User Review Required)

> [!IMPORTANT]
> **í”„ë¡œì íŠ¸ í•µì‹¬ ê²°ì • ì‚¬í•­**
> - **í”„ë¡œì íŠ¸ ëª…ì¹­**: `SerialManager` â†’ `SerialTool`ë¡œ ë³€ê²½ ì™„ë£Œ
> - **UI êµ¬ì¡°**: `LeftPanel`(í¬íŠ¸/ìˆ˜ë™ì œì–´) + `RightPanel`(ì»¤ë§¨ë“œ/ì¸ìŠ¤í™í„°) êµ¬ì¡° í™•ì •
> - **ì„±ëŠ¥ ëª©í‘œ**: Rx 2MB/s, UI 10K lines/s ì²˜ë¦¬ë¥¼ ìœ„í•œ RingBuffer ë° Batch Rendering ì ìš©
> - **ìŠ¤íƒ€ì¼ë§**: ì¤‘ì•™ ì§‘ì¤‘ì‹ QSS í…Œë§ˆ ì‹œìŠ¤í…œ (`common.qss` + ê°œë³„ í…Œë§ˆ)

> [!WARNING]
> **ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ ì „ í™•ì¸ í•„ìš”**
> - **Core ìœ í‹¸ë¦¬í‹° êµ¬í˜„ ë°©í–¥**: RingBuffer í¬ê¸°(512KB), ThreadSafeQueue ìµœëŒ€ í¬ê¸°(128 chunks) í™•ì • í•„ìš”
> - **ë©€í‹°í¬íŠ¸ ìµœëŒ€ ê°œìˆ˜**: í˜„ì¬ 16ê°œë¡œ ì„¤ì •, ë³€ê²½ í•„ìš” ì‹œ ì•Œë ¤ì£¼ì„¸ìš”
> - **í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ ë²”ìœ„**: v1.0ì— í¬í•¨í• ì§€, v1.1ë¡œ ì—°ê¸°í• ì§€ ê²°ì • í•„ìš”

---

## ì œì•ˆëœ ë³€ê²½ ì‚¬í•­ (Proposed Changes)

### 1. í”„ë¡œì íŠ¸ êµ¬ì¡° (Project Structure)

í”„ë¡œì íŠ¸ ë£¨íŠ¸ í•˜ìœ„ì— ê³„ì¸µë³„ ëª¨ë“ˆì„ êµ¬ì„±í•©ë‹ˆë‹¤:

```
serial_tool2/
â”œâ”€â”€ core/                    # í•µì‹¬ ìœ í‹¸ë¦¬í‹° ë° ì¸í”„ë¼
â”‚   â”œâ”€â”€ event_bus.py        # EventBus (Pub/Sub)
â”‚   â”œâ”€â”€ utils.py            # RingBuffer, ThreadSafeQueue
â”‚   â”œâ”€â”€ logger.py           # ë¡œê¹… ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ settings_manager.py # ì„¤ì • ê´€ë¦¬ [ì™„ë£Œ]
â”œâ”€â”€ model/                   # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë° Worker
â”‚   â”œâ”€â”€ serial_worker.py    # QThread ê¸°ë°˜ ì‹œë¦¬ì–¼ I/O
â”‚   â”œâ”€â”€ port_controller.py  # í¬íŠ¸ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬
â”‚   â”œâ”€â”€ serial_manager.py   # ë©€í‹°í¬íŠ¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬
â”‚   â”œâ”€â”€ packet_parser.py    # íŒ¨í‚· íŒŒì‹± (AT/Delimiter/Fixed/Hex)
â”‚   â”œâ”€â”€ macro_entry.py     # Macro DTO
â”‚   â”œâ”€â”€ macro_runner.py     # Macro List ì‹¤í–‰ ì—”ì§„
â”‚   â””â”€â”€ file_transfer.py    # íŒŒì¼ ì „ì†¡ ì—”ì§„
â”œâ”€â”€ view/                    # UI ê³„ì¸µ
â”‚   â”œâ”€â”€ main_window.py      # ë©”ì¸ ìœˆë„ìš° [ì™„ë£Œ]
â”‚   â”œâ”€â”€ theme_manager.py    # í…Œë§ˆ ê´€ë¦¬ [ì™„ë£Œ]
â”‚   â”œâ”€â”€ lang_manager.py     # ì–¸ì–´ ê´€ë¦¬ [ì™„ë£Œ]
â”‚   â”œâ”€â”€ color_rules.py      # ë¡œê·¸ ìƒ‰ìƒ ê·œì¹™ [ì™„ë£Œ]
â”‚   â”œâ”€â”€ sections/           # ì„¹ì…˜ (í™”ë©´ ë¶„í• ) [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ main_left_section.py  # ì¢Œì¸¡ ì„¹ì…˜ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ main_right_section.py # ìš°ì¸¡ ì„¹ì…˜ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ main_menu_bar.py      # ë©”ì¸ ë©”ë‰´ë°” [ì™„ë£Œ]
â”‚   â”‚   â””â”€â”€ main_status_bar.py    # ë©”ì¸ ìƒíƒœë°” [ì™„ë£Œ]
â”‚   â”œâ”€â”€ panels/             # íŒ¨ë„ (ê¸°ëŠ¥ ê·¸ë£¹) [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ port_panel.py   # í¬íŠ¸ íŒ¨ë„ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ port_tab_panel.py # í¬íŠ¸ íƒ­ íŒ¨ë„ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ macro_panel.py  # ë§¤í¬ë¡œ íŒ¨ë„ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ manual_control_panel.py # ìˆ˜ë™ ì œì–´ íŒ¨ë„ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ packet_inspector_panel.py # íŒ¨í‚· ì¸ìŠ¤í™í„° íŒ¨ë„ [ì™„ë£Œ]
â”‚   â”‚   â””â”€â”€ tx_panel.py     # ì „ì†¡ íŒ¨ë„ [ì™„ë£Œ]
â”‚   â”œâ”€â”€ widgets/            # ìœ„ì ¯ (UI ìš”ì†Œ) [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ port_settings.py       # í¬íŠ¸ ì„¤ì • [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ received_area.py       # ë¡œê·¸ ë·° [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ manual_control.py      # ìˆ˜ë™ ì œì–´ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ macro_list.py          # ë§¤í¬ë¡œ ë¦¬ìŠ¤íŠ¸ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ macro_ctrl.py          # ë§¤í¬ë¡œ ì œì–´ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ main_toolbar.py        # ë©”ì¸ íˆ´ë°” [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ packet_inspector.py    # íŒ¨í‚· ì¸ìŠ¤í™í„° [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ status.py              # ìƒíƒœ ìœ„ì ¯ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ status_area.py         # ìƒíƒœ í‘œì‹œ ì˜ì—­ [ì™„ë£Œ]
â”‚   â”‚   â””â”€â”€ file_progress.py       # íŒŒì¼ ì „ì†¡ ì§„í–‰ [ì™„ë£Œ]
â”‚   â”œâ”€â”€ pyqt_customs/       # PyQt5 ì»¤ìŠ¤í…€ ìœ„ì ¯ [ì™„ë£Œ]
â”‚   â”‚   â””â”€â”€ smart_number_edit.py   # HEX ì…ë ¥ í•„ë“œ [ì™„ë£Œ]
â”‚   â””â”€â”€ dialogs/            # ëŒ€í™”ìƒì [ì™„ë£Œ]
â”‚       â”œâ”€â”€ about_dialog.py        # ì •ë³´ ëŒ€í™”ìƒì [ì™„ë£Œ]
â”‚       â”œâ”€â”€ font_settings_dialog.py# í°íŠ¸ ì„¤ì • [ì™„ë£Œ]
â”‚       â””â”€â”€ preferences_dialog.py  # í™˜ê²½ ì„¤ì • [ì™„ë£Œ]
â”œâ”€â”€ presenter/               # Presenter ê³„ì¸µ
â”‚   â”œâ”€â”€ main_presenter.py   # ì¤‘ì•™ ì œì–´
â”‚   â”œâ”€â”€ port_presenter.py   # í¬íŠ¸ ì œì–´
â”‚   â”œâ”€â”€ macro_presenter.py  # ë§¤í¬ë¡œ ì œì–´
â”‚   â”œâ”€â”€ file_presenter.py   # íŒŒì¼ ì „ì†¡ ì œì–´
â”‚   â””â”€â”€ event_router.py     # ì´ë²¤íŠ¸ ë¼ìš°íŒ…
â”œâ”€â”€ plugins/                 # í™•ì¥ í”ŒëŸ¬ê·¸ì¸
â”‚   â””â”€â”€ example_plugin/     # ìƒ˜í”Œ í”ŒëŸ¬ê·¸ì¸
â”œâ”€â”€ resources/               # ë¦¬ì†ŒìŠ¤ íŒŒì¼ [ì™„ë£Œ]
â”‚   â”œâ”€â”€ themes/             # QSS í…Œë§ˆ [ì™„ë£Œ]
â”‚   â”‚   â”œâ”€â”€ common.qss
â”‚   â”‚   â”œâ”€â”€ dark_theme.qss
â”‚   â”‚   â””â”€â”€ light_theme.qss
â”‚   â””â”€â”€ icons/              # SVG ì•„ì´ì½˜ [ì™„ë£Œ]
â”œâ”€â”€ config/                  # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ default_settings.json
â”‚   â””â”€â”€ color_rules.json
â”œâ”€â”€ tests/                   # í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_view.py        # View ë…ë¦½ í…ŒìŠ¤íŠ¸ [ì™„ë£Œ]
â”‚   â”œâ”€â”€ test_core.py
â”‚   â”œâ”€â”€ test_model.py
â”‚   â””â”€â”€ test_integration.py
â”œâ”€â”€ doc/                     # ë¬¸ì„œ
â”‚   â”œâ”€â”€ Implementation_Specification.md [ì™„ë£Œ]
â”‚   â”œâ”€â”€ CHANGELOG.md        [ì™„ë£Œ]
â”‚   â”œâ”€â”€ implementation_plan.md
â”‚   â”œâ”€â”€ task.md
â”‚   â””â”€â”€ session_summary_*.md
â”œâ”€â”€ main.py                  # ì§„ì…ì  [ì™„ë£Œ]
â”œâ”€â”€ version.py              # ë²„ì „ ì •ë³´ [ì™„ë£Œ]

#### [ì§„í–‰ í•„ìš”] `core/utils.py`
**RingBuffer êµ¬í˜„**
- í¬ê¸°: 512KB (ì„¤ì • ê°€ëŠ¥)
- ê³ ì† ë°ì´í„° ìˆ˜ì‹  ì²˜ë¦¬
- ì˜¤ë²„í”Œë¡œìš° ì‹œ ìë™ ë®ì–´ì“°ê¸°
- ìŠ¤ë ˆë“œ ì•ˆì „ì„± ë³´ì¥

**ThreadSafeQueue êµ¬í˜„**
- TX í ê´€ë¦¬ (ìµœëŒ€ 128 chunks)
- `collections.deque` ê¸°ë°˜
- Lock-free ë˜ëŠ” ìµœì†Œ Lock ì „ëµ
- ìš°ì„ ìˆœìœ„ í ì§€ì› (ì„ íƒ)

#### [ì§„í–‰ í•„ìš”] `core/event_bus.py`
**EventBus ì•„í‚¤í…ì²˜**
- Publish/Subscribe íŒ¨í„´
- í‘œì¤€ ì´ë²¤íŠ¸ íƒ€ì… ì •ì˜
  - `PORT_OPENED`, `PORT_CLOSED`, `DATA_RECEIVED`, `DATA_SENT`
  - `MACRO_STARTED`, `MACRO_COMPLETED`, `MACRO_FAILED`
  - `FILE_TRANSFER_STARTED`, `FILE_TRANSFER_PROGRESS`, `FILE_TRANSFER_COMPLETED`
- í”ŒëŸ¬ê·¸ì¸ ì—°ë™ ì¸í„°í˜ì´ìŠ¤
- ì´ë²¤íŠ¸ í•„í„°ë§ ë° ìš°ì„ ìˆœìœ„

#### [ì§„í–‰ í•„ìš”] `core/logger.py`
**ë¡œê¹… ê³„ì¸µ (Logging Layers)**
- **UI Log**: `QTextEdit` (ë©”ëª¨ë¦¬), ì‹¤ì‹œê°„ í‘œì‹œ
- **File Log**: `RotatingFileHandler` (10MB x 5ê°œ), `logs/app_YYYY-MM-DD.log`
- **Performance Log**: CSV í˜•ì‹ (`logs/perf_YYYY-MM-DD.csv`), ì§€í‘œ(Rx/Tx ì†ë„, ë²„í¼ ì ìœ ìœ¨)

#### [ì§„í–‰ í•„ìš”] `core/plugin_base.py` & `core/plugin_loader.py`
**í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ (Plugin System)**
- **Interface**: `PluginBase` (name, version, register, unregister)
- **Loader**: `importlib` ê¸°ë°˜ ë™ì  ë¡œë”© (`plugins/` ë””ë ‰í† ë¦¬ ìŠ¤ìº”)
- **EventBus Integration**: `register(bus, context)` í•„ìˆ˜ êµ¬í˜„

---

### 3. Model ê³„ì¸µ (Model Layer) - Domain Logic

#### [ì§„í–‰ í•„ìš”] `model/packet_parser.py`
**íŒ¨í‚· íŒŒì„œ ì‹œìŠ¤í…œ (Packet Parser System)**
- **Factory Pattern**: `ATParser`, `DelimiterParser`, `FixedLengthParser`, `HexParser`
- **Strategy**: `ParserFactory`ë¥¼ í†µí•´ í¬íŠ¸ë³„ íŒŒì„œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- **Performance**: 1ms ì´í•˜ íŒŒì‹± ì§€ì—° ëª©í‘œ

#### [ì§„í–‰ í•„ìš”] `model/serial_worker.py`
**SerialWorker (QThread)**
- **Non-blocking I/O**: `timeout=0` + ë°˜ë³µ ì½ê¸° ìµœì í™”
- **RingBuffer Integration**: `bytearray` ê¸°ë°˜ ê³ ì† ë²„í¼ë§
- **Signals**: `rx_data(bytes)`, `tx_complete(int)`, `port_error(str)`

#### [ì§„í–‰ í•„ìš”] `model/serial_worker.py`
**SerialWorker(QThread) êµ¬í˜„**
- Non-blocking I/O ë£¨í”„
- RingBuffer ì—°ë™ (ìˆ˜ì‹  ë°ì´í„°)
- ThreadSafeQueue ì—°ë™ (ì†¡ì‹  ë°ì´í„°)
- ì‹œê·¸ë„ ë°œí–‰
  - `data_received(bytes)`
  - `data_sent(int)`
  - `error_occurred(str)`
  - `port_closed()`
- ì•ˆì „ ì¢…ë£Œ ì‹œí€€ìŠ¤ (íƒ€ì„ì•„ì›ƒ 3ì´ˆ)

**ì„±ëŠ¥ ëª©í‘œ**
- ìˆ˜ì‹  ì²˜ë¦¬ëŸ‰: 2MB/s
- TX í ì§€ì—°: 10ms ì´í•˜
- CPU ì‚¬ìš©ë¥ : ë‹¨ì¼ í¬íŠ¸ ê¸°ì¤€ 5% ì´í•˜

#### [ì§„í–‰ í•„ìš”] `model/port_controller.py`
**í¬íŠ¸ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬**
- ìƒíƒœ ë¨¸ì‹ : `Closed` â†’ `Opening` â†’ `Open` â†’ `Error` â†’ `Closed`
- í¬íŠ¸ë³„ Worker ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬
- ì„¤ì • ë³€ê²½ ì²˜ë¦¬ (baudrate, parity ë“±)
- ì—ëŸ¬ ë³µêµ¬ ì •ì±…
  - ìë™ ì¬ì—°ê²° (ì„¤ì •)
  - ì—ëŸ¬ ë¡œê·¸ ê¸°ë¡

**ë©€í‹°í¬íŠ¸ ê²©ë¦¬**
- í¬íŠ¸ë³„ ë…ë¦½ RingBuffer
- í¬íŠ¸ë³„ ë…ë¦½ TX í
- í¬íŠ¸ë³„ ë…ë¦½ Worker ìŠ¤ë ˆë“œ

#### [ì§„í–‰ í•„ìš”] `model/serial_manager.py`
**PortRegistry êµ¬í˜„**
- í¬íŠ¸ ëª©ë¡ ê´€ë¦¬ (ìµœëŒ€ 16ê°œ)

**Expect/Timeout ì²˜ë¦¬**
- ì •ê·œì‹ ê¸°ë°˜ ë§¤ì¹­
- íƒ€ì„ì•„ì›ƒ ì„¤ì • (ê¸°ë³¸ 5ì´ˆ)
- ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ì •ì±…

#### [ì§„í–‰ í•„ìš”] `model/macro_entry.py`
**MacroEntry DTO**
```python
@dataclass
class MacroEntry:
    enabled: bool
    command: str
    is_hex: bool
    prefix: bool
    suffix: bool
    delay_ms: int
    expect: str = ""
    timeout_ms: int = 5000
```

**JSON ì§ë ¬í™”**
- ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ
- ê²€ì¦ ê·œì¹™ (í•„ìˆ˜ í•„ë“œ, íƒ€ì… ì²´í¬)

#### [ì§„í–‰ í•„ìš”] `model/macro_runner.py`
**Macro List ì‹¤í–‰ ì—”ì§„ (MacroRunner)**
- **State Machine**: `Idle` â†’ `Running` â†’ `Paused` â†’ `Stopped`
- **Step Execution**: Send â†’ Expect Match (Regex) â†’ Delay â†’ Next/Jump/Repeat
- **Auto Run**: `AutoTxScheduler` (Global Interval + Loop Count)
- **Signals**: `step_started`, `step_completed`, `macro_finished`

#### [ì§„í–‰ í•„ìš”] `model/file_transfer.py`
**FileTransferEngine(QRunnable)**
- Chunk ê¸°ë°˜ ì „ì†¡ (ê¸°ë³¸ 1KB)
- ì ì‘í˜• Chunk Size (baudrate ê¸°ë°˜)
- ì§„í–‰ë¥  ê³„ì‚° (ë°”ì´íŠ¸ ë‹¨ìœ„)
- ì·¨ì†Œ ë©”ì»¤ë‹ˆì¦˜ (í”Œë˜ê·¸ ì²´í¬)
- ì¬ì‹œë„ ì •ì±… (ìµœëŒ€ 3íšŒ)

**ì‹œê·¸ë„**
- `progress_updated(int, int)`: í˜„ì¬/ì „ì²´ ë°”ì´íŠ¸
- `transfer_completed(bool)`: ì„±ê³µ ì—¬ë¶€
- `error_occurred(str)`: ì—ëŸ¬ ë©”ì‹œì§€

---

### 4. Presenter ê³„ì¸µ (Presenter Layer)

#### [ì§„í–‰ í•„ìš”] `presenter/main_presenter.py`
**ì¤‘ì•™ ì œì–´ ë¡œì§**
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”
  - SettingsManager ë¡œë“œ
  - EventBus ì´ˆê¸°í™”
  - í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ
- View â†” Model ì—°ê²°
- ì¢…ë£Œ ì‹œí€€ìŠ¤
  - ëª¨ë“  í¬íŠ¸ ë‹«ê¸°
  - ì„¤ì • ì €ì¥
  - ìŠ¤ë ˆë“œ ì •ë¦¬

#### [ì§„í–‰ í•„ìš”] `presenter/port_presenter.py`
**í¬íŠ¸ ì œì–´ ë¡œì§**
- í¬íŠ¸ ì—´ê¸°/ë‹«ê¸°
  - View ì‹œê·¸ë„ ìˆ˜ì‹  (`port_open_requested`)
  - PortController í˜¸ì¶œ
  - ìƒíƒœ ì—…ë°ì´íŠ¸ (`port_opened`, `port_closed`)
- ì„¤ì • ë³€ê²½ ì²˜ë¦¬
  - baudrate, parity ë“± ë³€ê²½ ì‹œ í¬íŠ¸ ì¬ì‹œì‘
- ë°ì´í„° ì†¡ìˆ˜ì‹ 
  - View â†’ Model: TX ë°ì´í„° ì „ë‹¬
  - Model â†’ View: RX ë°ì´í„° í‘œì‹œ

#### [ì§„í–‰ í•„ìš”] `presenter/macro_presenter.py`
**Macro List ì œì–´**
- ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ
  - JSON íŒŒì¼ I/O
  - MacroEntry ì§ë ¬í™”/ì—­ì§ë ¬í™”
- Run/Stop/Pause ë¡œì§
  - MacroRunner ì œì–´
  - ì‹¤í–‰ ìƒíƒœ UI ì—…ë°ì´íŠ¸
  - QTimer ê¸°ë°˜ ì£¼ê¸° ì‹¤í–‰
  - ìµœëŒ€ ì‹¤í–‰ íšŸìˆ˜ ì²´í¬

#### [ì§„í–‰ í•„ìš”] `presenter/file_presenter.py`
**íŒŒì¼ ì „ì†¡ ì œì–´**
- íŒŒì¼ ì„ íƒ ì²˜ë¦¬
- FileTransferEngine ì‹œì‘
- ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
  - ProgressBar ì—…ë°ì´íŠ¸
  - ì „ì†¡ ì†ë„ ê³„ì‚° (KB/s)
- ì·¨ì†Œ ì²˜ë¦¬
  - Engine ì¤‘ë‹¨
  - UI ì •ë¦¬

#### [ì§„í–‰ í•„ìš”] `presenter/event_router.py`
**EventRouter (View-Model Decoupling)**
- **Role**: View ì´ë²¤íŠ¸ë¥¼ Domain ë©”ì„œë“œë¡œ ë¼ìš°íŒ…, Domain ì‹œê·¸ë„ì„ View ì—…ë°ì´íŠ¸ë¡œ ë³€í™˜
- **Benefit**: Viewì™€ Model ê°„ì˜ ì§ì ‘ ì˜ì¡´ì„± ì œê±° (Layered MVP ì¤€ìˆ˜)

---

### 5. Performance Strategy (ì„±ëŠ¥ ìµœì í™” ì „ëµ)

#### 1. Rx Data Pipeline
- **RingBuffer**: `bytearray` ì‚¬ìš©ìœ¼ë¡œ ë©”ëª¨ë¦¬ í• ë‹¹ ìµœì†Œí™” (O(1))
- **Non-blocking I/O**: `serial.read()` íƒ€ì„ì•„ì›ƒ 0ms ì„¤ì • ë° ë£¨í”„ ìµœì í™”

#### 2. UI Rendering (RxLogView)
- **Batch Renderer**: 50ms ì£¼ê¸°ë¡œ ë¡œê·¸ ë¬¶ì–´ì„œ ì—…ë°ì´íŠ¸ (`appendHtml` í˜¸ì¶œ íšŸìˆ˜ ê°ì†Œ)
- **Virtual Scrolling**: ëŒ€ëŸ‰ ë¡œê·¸(10K+ ë¼ì¸) í‘œì‹œ ì‹œ ë Œë”ë§ ë¶€í•˜ ë¶„ì‚°
- **Trim Policy**: 2000ë¼ì¸ ì´ˆê³¼ ì‹œ ìƒë‹¨ ì œê±° (ë©”ëª¨ë¦¬ ê´€ë¦¬)

#### 3. Threading Model
- **SerialWorker**: í¬íŠ¸ë³„ ë…ë¦½ QThread (I/O ê²©ë¦¬)
- **FileTransfer**: `QRunnable` + `QThreadPool` (UI ìŠ¤ë ˆë“œ ì˜í–¥ ìµœì†Œí™”)
- **Lock-free Queue**: `collections.deque` í™œìš© (GIL ì˜ì¡´)

---

### 6. View ê³„ì¸µ (View Layer) - âœ… ì™„ë£Œ

#### [ì™„ë£Œ] UI êµ¬ì¡°
- `MainWindow`: ë©”ì¸ ë ˆì´ì•„ì›ƒ, ë©”ë‰´, íˆ´ë°”, ìŠ¤í”Œë¦¬í„° ê´€ë¦¬
- `MainLeftSection`: í¬íŠ¸ íƒ­ + ìˆ˜ë™ ì œì–´ (í™”ë©´ ì¢Œì¸¡)
- `MainRightSection`: ë§¤í¬ë¡œ ë¦¬ìŠ¤íŠ¸ + íŒ¨í‚· ì¸ìŠ¤í™í„° (í™”ë©´ ìš°ì¸¡)
- `Panels`: ê¸°ëŠ¥ ë‹¨ìœ„ ê·¸ë£¹ (PortPanel, MacroPanel, ManualControlPanel ë“±)
- `Sections`: í™”ë©´ ë¶„í•  (MainMenuBar, MainStatusBar í¬í•¨)

#### [ì™„ë£Œ] ìœ„ì ¯
- `PortSettingsWidget`: ì»´íŒ©íŠ¸ 2ì¤„ ë ˆì´ì•„ì›ƒ, ì—°ê²° ìƒíƒœ ê´€ë¦¬
- `ReceivedAreaWidget`: ë¡œê·¸ ë·°, ìƒ‰ìƒ ê·œì¹™, íƒ€ì„ìŠ¤íƒ¬í”„, Trim, ê²€ìƒ‰
- `ManualControlWidget`: ìˆ˜ë™ ì „ì†¡, íŒŒì¼ ì„ íƒ, Prefix/Suffix
- `MacroListWidget`: Prefix/Suffix, 3ë‹¨ê³„ ì²´í¬ë°•ìŠ¤, í–‰ë³„ Send ë²„íŠ¼
- `MacroCtrlWidget`: ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ, Repeat ì‹¤í–‰
- `PacketInspectorWidget`: íŒ¨í‚· ìƒì„¸ ë·°
- `StatusWidget`: RX/TX í†µê³„, ì—ëŸ¬ ì¹´ìš´íŠ¸, ì—…íƒ€ì„
- `StatusAreaWidget`: ìƒíƒœ ë¡œê·¸ í‘œì‹œ
- `FileProgressWidget`: íŒŒì¼ ì „ì†¡ ì§„í–‰ë¥ 
- `MainToolBar`: ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼ (Open, Close, Clear, Save, Settings)
- `SmartNumberEdit`: HEX ëª¨ë“œ ì…ë ¥ í•„ë“œ (ìë™ ëŒ€ë¬¸ì ë³€í™˜)

#### [ì™„ë£Œ] í…Œë§ˆ ì‹œìŠ¤í…œ
- `ThemeManager`: QSS ë¡œë”© ë° ë™ì  ì „í™˜
- `common.qss`: ê³µí†µ ìŠ¤íƒ€ì¼
- `dark_theme.qss`, `light_theme.qss`: ê°œë³„ í…Œë§ˆ
- SVG ì•„ì´ì½˜ ì‹œìŠ¤í…œ (í…Œë§ˆë³„ ìƒ‰ìƒ ìë™ ë³€ê²½)
- í…Œë§ˆë³„ ì•„ì´ì½˜ ë¡œë”© (`get_icon()` ë©”ì„œë“œ)

#### [ì™„ë£Œ] ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ
**ëª©ì **: UI ê°€ë…ì„± í–¥ìƒì„ ìœ„í•œ í°íŠ¸ ë¶„ë¦¬

**Proportional Font (ê°€ë³€í­ í°íŠ¸)**
- ì ìš© ëŒ€ìƒ: ë©”ë‰´, íˆ´ë°”, ìƒíƒœë°”, ë ˆì´ë¸”, ë²„íŠ¼, ê·¸ë£¹ë°•ìŠ¤, íƒ­ ë“±
- ê¸°ë³¸ í°íŠ¸: "Segoe UI" (Windows), "Ubuntu" (Linux)
- í¬ê¸°: 9pt (ê¸°ë³¸), ì„¤ì • ê°€ëŠ¥
- íŠ¹ì§•: ìì—°ìŠ¤ëŸ¬ìš´ í…ìŠ¤íŠ¸ í‘œì‹œ, UI ìš”ì†Œì— ìµœì í™”

**Fixed Font (ê³ ì •í­ í°íŠ¸)**
- ì ìš© ëŒ€ìƒ: TextEdit, LineEdit, MacroListì˜ Command ì»¬ëŸ¼, íŒ¨í‚· ì¸ìŠ¤í™í„°
- ê¸°ë³¸ í°íŠ¸: "Consolas" (Windows), "Monospace" (Linux)
- í¬ê¸°: 9pt (ê¸°ë³¸), ì„¤ì • ê°€ëŠ¥
- íŠ¹ì§•: ì •ë ¬ëœ í…ìŠ¤íŠ¸ í‘œì‹œ, ì½”ë“œ/ë°ì´í„° ê°€ë…ì„± í–¥ìƒ

#### [ì™„ë£Œ] ë‹¤êµ­ì–´ ì§€ì›
- `LanguageManager`: í•œêµ­ì–´/ì˜ì–´ ì‹¤ì‹œê°„ ì „í™˜
- CommentJSON ê¸°ë°˜ ë²ˆì—­ íŒŒì¼ (`config/languages/ko.json`, `en.json`)
- `text_matches_key()` í—¬í¼: ì–¸ì–´ í™•ì¥ì„± ê°œì„ 
- ëª¨ë“  UI ì»´í¬ë„ŒíŠ¸ ë‹¤êµ­ì–´ ì ìš© ì™„ë£Œ

#### [ì™„ë£Œ] MVP íŒ¨í„´ ì¤€ìˆ˜
- View ê³„ì¸µì—ì„œ Model ì§ì ‘ ì ‘ê·¼ ì œê±°
- Signal ê¸°ë°˜ í†µì‹  (View â†’ Presenter)
- `PreferencesDialog`: SettingsManager ì œê±°, Presenterë¥¼ í†µí•œ ì„¤ì • ì „ë‹¬
- ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬: ViewëŠ” UIë§Œ, PresenterëŠ” ë¡œì§ ì²˜ë¦¬

---

### 7. í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ (Plugin System)

#### [ì§„í–‰ í•„ìš”] `core/plugin_base.py`
**PluginBase ì¸í„°í˜ì´ìŠ¤**
```python
class PluginBase(ABC):
    @abstractmethod
    def register(self, app_context: AppContext) -> None:
        pass

    @abstractmethod
    def unregister(self) -> None:
        pass
```

**AppContext**
- EventBus ì ‘ê·¼
- SettingsManager ì ‘ê·¼
- UI í™•ì¥ API (ë©”ë‰´, íŒ¨ë„ ì¶”ê°€)

#### [ì§„í–‰ í•„ìš”] `core/plugin_loader.py`
**ë™ì  ë¡œë”©**
- `plugins/` ë””ë ‰í„°ë¦¬ ìŠ¤ìº”
- ë¶€íŒ… ì‹œ ìë™ ë¡œë“œ
- í•« ë¦¬ë¡œë”© ì§€ì›
- ì˜ˆì™¸ ê²©ë¦¬ (í”ŒëŸ¬ê·¸ì¸ ì—ëŸ¬ ì‹œ ì•± ì¤‘ë‹¨ ë°©ì§€)

#### [ì§„í–‰ í•„ìš”] `plugins/example_plugin/`
**ìƒ˜í”Œ í”ŒëŸ¬ê·¸ì¸**
- EventBus ì—°ë™ ì˜ˆì œ
- UI í™•ì¥ ì˜ˆì œ (ë©”ë‰´ ì¶”ê°€)
- ì„¤ì • ê´€ë¦¬ ì˜ˆì œ

---

## ê²€ì¦ ê³„íš (Verification Plan)

### ìë™í™” í…ŒìŠ¤íŠ¸

#### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)
**Core ëª¨ë“ˆ**
- `test_ringbuffer.py`: ì˜¤ë²„í”Œë¡œìš°, ìŠ¤ë ˆë“œ ì•ˆì „ì„±
- `test_queue.py`: TX í ë™ì‘, ìš°ì„ ìˆœìœ„
- `test_event_bus.py`: Pub/Sub, í•„í„°ë§
- `test_settings_manager.py`: ì €ì¥/ë¡œë“œ, ë§ˆì´ê·¸ë ˆì´ì…˜

**Model ëª¨ë“ˆ**
- `test_packet_parser.py`: ê° íŒŒì„œ ë™ì‘, Expect/Timeout
- `test_macro_runner.py`: ìˆœì°¨ ì‹¤í–‰, ë°˜ë³µ, ì—ëŸ¬ ì²˜ë¦¬
- `test_file_transfer.py`: Chunk ì „ì†¡, ì·¨ì†Œ, ì¬ì‹œë„

**ëª©í‘œ ì»¤ë²„ë¦¬ì§€**: 70%+

#### í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)
**Virtual Serial Port í™˜ê²½**
- Windows: com0com
- Linux: socat

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**
1. í¬íŠ¸ ì—´ê¸°/ë‹«ê¸° ì‹œí€€ìŠ¤
2. ë°ì´í„° ì†¡ìˆ˜ì‹  ë£¨í”„ë°± (1Mbps, 10ë¶„)
3. ë©€í‹°í¬íŠ¸ ë™ì‹œì„± (4ê°œ í¬íŠ¸)
4. Macro List ì‹¤í–‰ (10ê°œ ëª…ë ¹, 5íšŒ ë°˜ë³µ)
5. íŒŒì¼ ì „ì†¡ (10MB íŒŒì¼, 115200bps)

#### E2E í…ŒìŠ¤íŠ¸ (pytest-qt)
**UI ì›Œí¬í”Œë¡œìš°**
1. ì•± ì‹œì‘ â†’ í¬íŠ¸ ì„ íƒ â†’ ì—´ê¸°
2. ìˆ˜ë™ ëª…ë ¹ ì†¡ì‹  â†’ ë¡œê·¸ í™•ì¸
3. Macro List ë¡œë“œ â†’ ì‹¤í–‰ â†’ ê²°ê³¼ í™•ì¸
4. íŒŒì¼ ì „ì†¡ â†’ ì§„í–‰ë¥  í™•ì¸ â†’ ì™„ë£Œ
5. ì„¤ì • ë³€ê²½ â†’ ì €ì¥ â†’ ì¬ì‹œì‘ â†’ ë³µì› í™•ì¸

#### ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
**ì¸¡ì • ì§€í‘œ**
- Rx ì²˜ë¦¬ëŸ‰: 2MB/s ëª©í‘œ (pytest-benchmark)
- UI ë Œë”ë§: 10K lines/s (QTextEdit ì—…ë°ì´íŠ¸)
- íŒ¨í‚· íŒŒì„œ ì§€ì—°: 1ms ì´í•˜ (1KB íŒ¨í‚·)
- íŒŒì¼ ì „ì†¡ ì†ë„: 100KB/s+ (115200bps)

**ë„êµ¬**
- `pytest-benchmark`
- `cProfile` + `SnakeViz`
- `tracemalloc` (ë©”ëª¨ë¦¬ í”„ë¡œíŒŒì¼)

---

### ìˆ˜ë™ ê²€ì¦

#### UI/UX ê²€ì¦
- [ ] ë²„íŠ¼ í™œì„±/ë¹„í™œì„± ìƒíƒœ í™•ì¸
- [ ] íƒ­ ë™ì‘ (ì¶”ê°€, ë‹«ê¸°, ì „í™˜)
- [ ] íˆ´íŒ ë° ë‹¨ì¶•í‚¤ í™•ì¸
- [ ] í…Œë§ˆ ì „í™˜ (Dark â†” Light)
- [ ] í°íŠ¸ ë³€ê²½ í™•ì¸
- [ ] ë ˆì´ì•„ì›ƒ ë¦¬ì‚¬ì´ì§•

#### ê¸°ëŠ¥ ê²€ì¦
- [ ] ì‹¤ì œ ì¥ë¹„ ì—°ê²° í›„ ë°ì´í„° ì†¡ìˆ˜ì‹ 
- [ ] Macro List ìë™ ì‹¤í–‰ (AT ëª…ë ¹)
- [ ] íŒŒì¼ ì „ì†¡ (íŒì›¨ì–´ ë‹¤ìš´ë¡œë“œ)
- [ ] ì„¤ì • ì €ì¥/ë³µì›
- [ ] ë¡œê·¸ ë‚´ë³´ë‚´ê¸°

#### ì¥ê¸° ëŸ° í…ŒìŠ¤íŠ¸
- [ ] 24ì‹œê°„ ì—°ì† ì‹¤í–‰ (Auto Run)
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì²´í¬ (Windows Task Manager)
- [ ] CPU ì‚¬ìš©ë¥  ëª¨ë‹ˆí„°ë§
- [ ] ë¡œê·¸ íŒŒì¼ í¬ê¸° í™•ì¸ (Rotation ë™ì‘)

#### í”Œë«í¼ë³„ ê²€ì¦
- [ ] Windows 10/11 (x64)
- [ ] Ubuntu 20.04+ (x64)
- [ ] Debian 11+ (x64)
- [ ] macOS 12.0+ (ì„ íƒ)

---

## ë°°í¬ ê³„íš (Deployment Plan)

### PyInstaller ë¹Œë“œ

#### Windows
```bash
pyinstaller --onefile --windowed \
  --name SerialTool \
  --icon resources/icons/app_icon.ico \
  --add-data "resources;resources" \
  --add-data "config;config" \
  main.py
```

**ê²°ê³¼ë¬¼**
- `dist/SerialTool.exe` (ë‹¨ì¼ ì‹¤í–‰ íŒŒì¼)
- í¬ê¸° ëª©í‘œ: 50MB ì´í•˜

#### Linux
```bash
pyinstaller --onefile \
  --name SerialTool \
  --add-data "resources:resources" \
  --add-data "config:config" \
  main.py
```

**AppImage ìƒì„±**
- `appimagetool` ì‚¬ìš©
- ê²°ê³¼ë¬¼: `SerialTool-x86_64.AppImage`

### ë°°í¬ ì•„í‹°íŒ©íŠ¸ êµ¬ì„±
```
serial_tool_v1.0.0/
â”œâ”€â”€ SerialTool.exe (Windows) / AppImage (Linux)
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ default_settings.json
â”‚   â””â”€â”€ color_rules.json
â”œâ”€â”€ plugins/
â”‚   â””â”€â”€ example_plugin/
â”œâ”€â”€ README.md
â”œâ”€â”€ CHANGELOG.md
â””â”€â”€ LICENSE
```

### CI/CD íŒŒì´í”„ë¼ì¸ (GitHub Actions)
```yaml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  build-windows:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - run: pip install -r requirements.txt
      - run: pytest
      - run: pyinstaller pyinstaller.spec
      - uses: actions/upload-artifact@v3
        with:
          name: SerialTool-Windows
          path: dist/SerialTool.exe

  build-linux:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - run: pip install -r requirements.txt
      - run: pytest
      - run: pyinstaller pyinstaller.spec
      - run: appimagetool dist/SerialTool
      - uses: actions/upload-artifact@v3
        with:
          name: SerialTool-Linux
          path: SerialTool-x86_64.AppImage

  release:
    needs: [build-windows, build-linux]
    runs-on: ubuntu-latest
    steps:
      - uses: actions/download-artifact@v3
      - uses: softprops/action-gh-release@v1
        with:
          files: |
            SerialTool-Windows/SerialTool.exe
            SerialTool-Linux/SerialTool-x86_64.AppImage
```

---

## êµ¬í˜„ ìˆœì„œ (Implementation Order)

### Phase 1 & 2: Project Setup & UI (âœ… Completed)

### Phase 3: Core Utilities (In Progress)
1. `core/utils.py`: RingBuffer, ThreadSafeQueue
2. `core/event_bus.py`: EventBus, EventTypes
3. `core/logger.py`: LogManager, RotatingFileHandler
4. `core/plugin_base.py`: Plugin Interface

### Phase 4: Model Layer (Planned)
1. `model/serial_worker.py`: SerialWorker (Non-blocking I/O)
2. `model/port_controller.py`: PortController (State Machine)
3. `model/serial_manager.py`: PortRegistry
4. `model/packet_parser.py`: ParserFactory, ExpectMatcher
5. `presenter/event_router.py`: EventRouter

### Phase 5: Presenter Layer (Planned)
1. `presenter/port_presenter.py`: Port Control Logic
2. `presenter/main_presenter.py`: App Lifecycle
3. `presenter/macro_presenter.py`: Macro Logic
4. `presenter/file_presenter.py`: File Transfer Logic

### Phase 6: Automation & File I/O (Planned)
1. `model/macro_runner.py`: Macro Engine, Auto Run
2. `model/file_transfer.py`: FileTransferEngine, RxCaptureWriter
3. `model/auto_tx.py`: AutoTxScheduler
4. **Performance Optimization**: BatchRenderer, RingBuffer Tuning

### Phase 7: Plugin System (Planned)
1. `core/plugin_loader.py`: Dynamic Loading
2. `plugins/example_plugin.py`: Reference Implementation
3. Plugin Management UI

### Phase 8: Verification & Deployment (Planned)
1. Virtual Serial Port Setup (com0com/socat)
2. Unit/Integration Tests
3. Performance Benchmarks
4. PyInstaller Build & CI/CD

**ì´ ì˜ˆìƒ ê¸°ê°„**: 12ì£¼ (ì•½ 3ê°œì›”)

---

## í˜„ì¬ ìƒíƒœ ë° ë‹¤ìŒ ë‹¨ê³„

### ì™„ë£Œëœ ì‘ì—… (2025-12-04 ê¸°ì¤€)
- âœ… **í”„ë¡œì íŠ¸ êµ¬ì¡°**: í´ë” êµ¬ì¡°, ë¬¸ì„œ, ì„¤ì • íŒŒì¼
### Phase 2: UI êµ¬í˜„ ë° í…Œë§ˆ ì‹œìŠ¤í…œ (âœ… ì™„ë£Œ)
- [x] UI ê¸°ë³¸ ê³¨ê²© êµ¬í˜„
- [x] ìœ„ì ¯ êµ¬í˜„ ë° ë¦¬íŒ©í† ë§
- [x] í…Œë§ˆ ë° ìŠ¤íƒ€ì¼ë§ ì‹œìŠ¤í…œ
- [x] ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¬ì •ë¦¬
- [x] ì½”ë“œ í’ˆì§ˆ ê°œì„ 
- [x] ê²¬ê³ ì„± ê°œì„ 
- [x] View ê³„ì¸µ ë³´ì™„ (Spec 10, 11, 17)
- [x] View ê³„ì¸µ ë§ˆë¬´ë¦¬ ë° ë‹¤êµ­ì–´ ì§€ì› (Phase 1)
- [x] View ê³„ì¸µ ìœ„ì ¯ ë‹¤êµ­ì–´ ì ìš© (Phase 2)
    - [x] LanguageManager ê°œì„  (Fallback ë¡œì§)
    - [x] MainWindow "Tools" ë©”ë‰´ ìˆ˜ì •
    - [x] ManualControlWidget ë‹¤êµ­ì–´ ì ìš©
    - [x] ReceivedArea ë‹¤êµ­ì–´ ì ìš©
    - [x] MacroListWidget ë‹¤êµ­ì–´ ì ìš©
    - [x] MacroCtrlWidget ë‹¤êµ­ì–´ ì ìš©
    - [x] FileProgressWidget ë‹¤êµ­ì–´ ì ìš©
    - [x] PacketInspectorWidget ë‹¤êµ­ì–´ ì ìš©
    - [x] MainWindow ë‹¤êµ­ì–´ ì ìš© (ë©”ë‰´, íƒ€ì´í‹€)
    - [x] LeftPanel/RightPanel ë‹¤êµ­ì–´ ì ìš© (íƒ­)
    - [x] PortSettingsWidget ë‹¤êµ­ì–´ ì ìš©
    - [x] StatusArea ë‹¤êµ­ì–´ ì ìš©
    - [x] FontSettingsDialog ë‹¤êµ­ì–´ ì ìš©
- [x] Macro List Persistence (ìë™ ì €ì¥)
- [x] Refactoring & Stabilization
    - [x] UI Architecture Refactoring (Sections/Panels/Widgets)
    - [x] Language Key Standardization (`[context]_[type]_[name]`)
    - [x] Code Style Guide Update
    - [x] Preferences Dialog Implementation & Fix
    - [x] Documentation Updates (CHANGELOG, Session Summary)

### ì§„í–‰ ì¤‘ì¸ ì‘ì—…
- ğŸ”„ **Core ìœ í‹¸ë¦¬í‹°**: RingBuffer, ThreadSafeQueue, EventBus êµ¬í˜„ í•„ìš”
- ğŸ”„ **Model ê³„ì¸µ**: SerialWorker, PortController êµ¬í˜„ í•„ìš”

### ë‹¤ìŒ ë‹¨ê³„ (ìš°ì„ ìˆœìœ„)
1. **Core ìœ í‹¸ë¦¬í‹° ì™„ì„±** (Phase 3)
   - RingBuffer êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
   - ThreadSafeQueue êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
   - EventBus êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
2. **Model ê³„ì¸µ êµ¬í˜„** (Phase 4)
   - SerialWorker êµ¬í˜„
   - PortController êµ¬í˜„
   - Virtual Serial Port í…ŒìŠ¤íŠ¸
3. **Presenter ì—°ë™** (Phase 3)
   - PortPresenter êµ¬í˜„
   - View â†” Model ì—°ê²°
   - ì‹¤ì œ í¬íŠ¸ ì†¡ìˆ˜ì‹  í™•ì¸

---

## ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘ ë°©ì•ˆ

### ê¸°ìˆ ì  ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|--------|--------|-----------|
| ê³ ì† ë°ì´í„° ì²˜ë¦¬ ì‹œ UI í”„ë¦¬ì§• | ë†’ìŒ | RingBuffer + Batch Rendering, Worker Thread ê²©ë¦¬ |
| ë©€í‹°í¬íŠ¸ ë™ì‹œì„± ì´ìŠˆ | ì¤‘ê°„ | í¬íŠ¸ë³„ ë…ë¦½ ìŠ¤ë ˆë“œ, Lock-free í ì‚¬ìš© |
| PyInstaller ë¹Œë“œ í¬ê¸° ê³¼ë‹¤ | ë‚®ìŒ | UPX ì••ì¶•, ë¶ˆí•„ìš”í•œ ëª¨ë“ˆ ì œì™¸ |
| í”Œë«í¼ë³„ í¬íŠ¸ ìŠ¤ìº” ì°¨ì´ | ì¤‘ê°„ | OSë³„ ë¶„ê¸° ì²˜ë¦¬, ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸ |

### ì¼ì • ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|--------|--------|-----------|
| Core ìœ í‹¸ë¦¬í‹° êµ¬í˜„ ì§€ì—° | ë†’ìŒ | ìš°ì„ ìˆœìœ„ ì§‘ì¤‘, ë‹¨ìˆœí™” |
| í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶• ì–´ë ¤ì›€ | ì¤‘ê°„ | Virtual Serial Port ì‚¬ì „ ì¤€ë¹„ |
| í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ ë³µì¡ë„ | ë‚®ìŒ | v1.1ë¡œ ì—°ê¸° ê°€ëŠ¥ |

---

## ì„±ê³µ ê¸°ì¤€ (Success Criteria)

### ê¸°ëŠ¥ì  ì„±ê³µ ê¸°ì¤€
- [ ] 16ê°œ í¬íŠ¸ ë™ì‹œ ì˜¤í”ˆ ë° ë…ë¦½ ì œì–´
- [ ] 2MB/s ì—°ì† ìŠ¤íŠ¸ë¦¼ ì•ˆì • ì²˜ë¦¬
- [ ] Macro List ìë™ ì‹¤í–‰ (ë°˜ë³µ, ì§€ì—°, Expect)
- [ ] íŒŒì¼ ì „ì†¡ (10MB+, ì§„í–‰ë¥  í‘œì‹œ)
- [ ] ì„¤ì • ì €ì¥/ë³µì› (í¬íŠ¸, UI, ëª…ë ¹ ë¦¬ìŠ¤íŠ¸)
- [ ] í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ ë° ì‹¤í–‰

### ë¹„ê¸°ëŠ¥ì  ì„±ê³µ ê¸°ì¤€
- [ ] UI ë°˜ì‘ì„±: 60fps ìŠ¤í¬ë¡¤, Freeze 0
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€: 70%+
- [ ] í†µí•© í…ŒìŠ¤íŠ¸: ì£¼ìš” ì‹œë‚˜ë¦¬ì˜¤ 100% í†µê³¼
- [ ] ì¥ê¸° ëŸ° ì•ˆì •ì„±: 24ì‹œê°„ ë¬´ì¤‘ë‹¨ ì‹¤í–‰
- [ ] ë°°í¬ íŒ¨í‚¤ì§€ í¬ê¸°: 50MB ì´í•˜ (Windows)

### ì‚¬ìš©ì ê²½í—˜ ì„±ê³µ ê¸°ì¤€
- [ ] 3-Click Rule ì¤€ìˆ˜ (ì£¼ìš” ì‘ì—… 3ë²ˆ í´ë¦­ ì´ë‚´)
- [ ] ì§ê´€ì ì¸ UI (íˆ´íŒ, ë‹¨ì¶•í‚¤, ìƒíƒœ í‘œì‹œ)
- [ ] ì—ëŸ¬ ë©”ì‹œì§€ ëª…í™•ì„± (ì›ì¸ ë° í•´ê²° ë°©ë²• ì œì‹œ)
- [ ] ë¬¸ì„œ ì™„ì„±ë„ (ì‚¬ìš©ì ê°€ì´ë“œ, API ë ˆí¼ëŸ°ìŠ¤)

---

**ë¬¸ì„œ ë²„ì „**: v1.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-09
**ì‘ì„±ì**: AI Assistant (Antigravity)
</file>

<file path="tools/manage_lang_keys.py">
"""
ì–¸ì–´ í‚¤ ê´€ë¦¬ ë„êµ¬

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
1. view í´ë”ì˜ ëª¨ë“  .py íŒŒì¼ì—ì„œ ì‚¬ìš©ë˜ëŠ” lang_manager.get_text() í˜¸ì¶œì„ ë¶„ì„
2. ëª¨ë“ˆë³„ë¡œ í‚¤ë¥¼ ê·¸ë£¹í™”
3. ì£¼ì„ì´ ì¶”ê°€ëœ ì–¸ì–´ í…œí”Œë¦¿ JSON íŒŒì¼ ìƒì„±
4. ëˆ„ë½ë˜ê±°ë‚˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ í™•ì¸
"""

import re
try:
    import commentjson as json
except ImportError:
    import json
from pathlib import Path
from collections import defaultdict
from typing import Dict, Set

# view í´ë”ì˜ ëª¨ë“  .py íŒŒì¼ì—ì„œ get_text í˜¸ì¶œì„ ì°¾ê³  ëª¨ë“ˆë³„ë¡œ ê·¸ë£¹í™”
def extract_keys_by_module() -> Dict[str, Set[str]]:
    """
    view í´ë”ì˜ ê° ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ëŠ” í‚¤ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.

    Returns:
        Dict[str, Set[str]]: ëª¨ë“ˆëª…ì„ í‚¤ë¡œ, ì‚¬ìš©ë˜ëŠ” í‚¤ ì§‘í•©ì„ ê°’ìœ¼ë¡œ í•˜ëŠ” ë”•ì…”ë„ˆë¦¬
    """
    root_dir = Path(__file__).parent.parent
    view_dir = root_dir / "view"
    keys_by_module = defaultdict(set)

    for py_file in view_dir.rglob("*.py"):
        # __pycache__ ë° __init__.py ì œì™¸
        if '__pycache__' in str(py_file) or py_file.name == '__init__.py':
            continue

        # ëª¨ë“ˆ ê²½ë¡œ ìƒì„± (ì˜ˆ: widgets/manual_control, dialogs/font_settings)
        try:
            relative_path = py_file.relative_to(view_dir)
            module_path = str(relative_path.with_suffix('')).replace('\\', '/')
        except ValueError:
            continue

        content = py_file.read_text(encoding='utf-8')
        # get_text("key") ë˜ëŠ” get_text('key') íŒ¨í„´ ì°¾ê¸°
        matches = re.findall(r'get_text\(["\']([^"\']+)["\']\)', content)

        if matches:
            keys_by_module[module_path].update(matches)

    return keys_by_module

def get_module_display_name(module_path: str) -> str:
    """ëª¨ë“ˆ ê²½ë¡œë¥¼ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ ì´ë¦„ìœ¼ë¡œ ë³€í™˜"""
    # íŒŒì¼ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ ìë™ ìƒì„±
    parts = module_path.split('/')
    if len(parts) == 1:
        # ë‹¨ì¼ íŒŒì¼ (ì˜ˆ: main_window)
        name = parts[0].replace('_', ' ').title()
    else:
        # ì¤‘ì²©ëœ íŒŒì¼ (ì˜ˆ: widgets/port_settings)
        category = parts[-2].rstrip('s').title()  # 'widgets' -> 'Widget'
        name = parts[-1].replace('_', ' ').title()
        name = f"{name} {category}"

    return name

def generate_template(keys_by_module: Dict[str, Set[str]], output_file: str, language: str = "en"):
    """
    ëª¨ë“ˆë³„ë¡œ ê·¸ë£¹í™”ë˜ê³  ì£¼ì„ì´ ì¶”ê°€ëœ ì–¸ì–´ í…œí”Œë¦¿ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

    Args:
        keys_by_module: ëª¨ë“ˆë³„ í‚¤ ë”•ì…”ë„ˆë¦¬
        output_file: ì¶œë ¥ íŒŒì¼ ê²½ë¡œ
        language: ì–¸ì–´ ì½”ë“œ ("en" ë˜ëŠ” "ko")
    """
    # ê¸°ì¡´ JSON íŒŒì¼ì´ ìˆìœ¼ë©´ ê°’ì„ ê°€ì ¸ì˜´
    existing_values = {}
    if Path(output_file).exists():
        try:
            existing_values = json.loads(Path(output_file).read_text(encoding='utf-8'))
            # ì£¼ì„ í‚¤ ì œê±° (ì´ì „ ë²„ì „ì—ì„œ ìƒì„±ëœ ê²½ìš°)
            existing_values = {k: v for k, v in existing_values.items() if not k.startswith("//")}
        except json.JSONDecodeError:
            print(f"âš  ê¸°ì¡´ í…œí”Œë¦¿ íŒŒì¼ì´ ì†ìƒë˜ì–´ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤: {output_file}")
            existing_values = {}

    # ëª¨ë“ˆì„ ì•ŒíŒŒë²³ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë˜, ì¤‘ìš”í•œ ìˆœì„œë¥¼ ìš°ì„ 
    priority_order = ['main_window', 'widgets', 'panels', 'dialogs']

    def get_sort_key(path):
        for idx, priority in enumerate(priority_order):
            if path.startswith(priority):
                return idx, path
        return len(priority_order), path

    sorted_modules = sorted(keys_by_module.keys(), key=get_sort_key)

    # JSON íŒŒì¼ ìƒì„± (ì£¼ì„ì€ ë³„ë„ ì²˜ë¦¬)
    lines = ["{\n"]

    # ê³µí†µ í‚¤ë“¤ (ì—¬ëŸ¬ ëª¨ë“ˆì—ì„œ ì‚¬ìš©)
    common_keys = set()
    key_count = defaultdict(int)
    for keys in keys_by_module.values():
        for key in keys:
            key_count[key] += 1

    # 3ê°œ ì´ìƒì˜ ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ëŠ” í‚¤ë¥¼ ê³µí†µ í‚¤ë¡œ ë¶„ë¥˜
    common_keys = {key for key, count in key_count.items() if count >= 3}

    # ê³µí†µ í‚¤ ë¨¼ì € ì¶œë ¥
    if common_keys:
        lines.append('  // ============================================\n')
        lines.append('  // Common Keys (Used in multiple modules)\n')
        lines.append('  // ============================================\n')
        for key in sorted(common_keys):
            value = existing_values.get(key, f"TODO: {key}")
            lines.append(f'  "{key}": "{value}",\n')
        lines.append('\n')

    # ëª¨ë“ˆë³„ í‚¤ ì¶œë ¥
    for module_path in sorted_modules:
        keys = keys_by_module[module_path]
        # ê³µí†µ í‚¤ê°€ ì•„ë‹Œ ê²ƒë§Œ ì¶œë ¥
        module_specific_keys = keys - common_keys

        if module_specific_keys:
            display_name = get_module_display_name(module_path)
            # íŒŒì¼ ê²½ë¡œ ì¶”ê°€ (ì˜ˆ: widgets/port_settings.py)
            file_path = f"{module_path}.py"
            lines.append('  // ============================================\n')
            lines.append(f'  // {display_name} ({file_path}),\n')
            lines.append('  // ============================================\n')

            for key in sorted(module_specific_keys):
                value = existing_values.get(key, f"TODO: {key}")
                lines.append(f'  "{key}": "{value}",\n')
            lines.append('\n')

    # ë§ˆì§€ë§‰ ì‰¼í‘œ ì œê±°
    if lines[-1] == '\n':
        lines.pop()
    lines[-1] = lines[-1].rstrip(',\n') + '\n'

    lines.append("}\n")

    # ì‹¤ì œë¡œëŠ” ì •ìƒ JSONìœ¼ë¡œ ì €ì¥ (ì£¼ì„ì€ í‚¤ë¡œ í¬í•¨)
    output_path = Path(output_file)
    output_path.write_text(''.join(lines), encoding='utf-8')

    print(f"âœ“ í…œí”Œë¦¿ íŒŒì¼ ìƒì„±: {output_file}")
    print(f"  - ê³µí†µ í‚¤: {len(common_keys)}ê°œ")
    print(f"  - ëª¨ë“ˆë³„ í‚¤: {sum(len(keys - common_keys) for keys in keys_by_module.values())}ê°œ")
    print(f"  - ë°œê²¬ëœ ëª¨ë“ˆ: {len(sorted_modules)}ê°œ")

def check_missing_and_unused():
    """ëˆ„ë½ë˜ê±°ë‚˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ë¥¼ í™•ì¸"""
    root_dir = Path(__file__).parent.parent
    view_dir = root_dir / "view"
    used_keys = set()

    for py_file in view_dir.rglob("*.py"):
        if '__pycache__' in str(py_file):
            continue
        content = py_file.read_text(encoding='utf-8')
        matches = re.findall(r'get_text\(["\']([^"\']+)["\']\)', content)
        used_keys.update(matches)

    # JSON íŒŒì¼ì˜ í‚¤ë“¤ ì½ê¸°
    lang_files = {
        "en": root_dir / "config/languages/en.json",
        "ko": root_dir / "config/languages/ko.json"
    }

    lang_keys = {}
    for lang, json_path in lang_files.items():
        try:
            if not json_path.exists():
                print(f"âš  ê²½ê³ : {lang}.json íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: {json_path}")
                lang_keys[lang] = set()
                continue

            content = json_path.read_text(encoding='utf-8')
            lang_keys[lang] = set(json.loads(content).keys())
        except json.JSONDecodeError as e:
            print(f"âš  ê²½ê³ : {lang}.json íŒŒì¼ íŒŒì‹± ì˜¤ë¥˜: {e}")
            lang_keys[lang] = set()
        except Exception as e:
            print(f"âš  ê²½ê³ : {lang}.json íŒŒì¼ ì½ê¸° ì˜¤ë¥˜: {e}")
            lang_keys[lang] = set()

    # ë¹„êµ
    print("\n=== ëˆ„ë½ëœ í‚¤ í™•ì¸ ===")

    for lang, keys in lang_keys.items():
        missing = used_keys - keys
        if missing:
            print(f"\nâŒ {lang}.jsonì— ì—†ëŠ” í‚¤ ({len(missing)}ê°œ):")
            for key in sorted(missing):
                print(f"  - {key}")
        else:
            print(f"\nâœ“ {lang}.json: ëª¨ë“  í‚¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤!")

    print("\n=== ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ í™•ì¸ ===")
    all_keys = set().union(*lang_keys.values()) if lang_keys.values() else set()
    unused = all_keys - used_keys

    if unused:
        print(f"\nâš  ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ ({len(unused)}ê°œ):")
        for key in sorted(unused):
            print(f"  - {key}")
    else:
        print("\nâœ“ ëª¨ë“  í‚¤ê°€ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤!")

    print(f"\n=== í†µê³„ ===")
    print(f"ì½”ë“œì—ì„œ ì‚¬ìš©: {len(used_keys)}ê°œ")
    for lang, keys in lang_keys.items():
        print(f"{lang}.json: {len(keys)}ê°œ")


def main():
    """ë©”ì¸ í•¨ìˆ˜"""
    print("=" * 60)
    print("ì–¸ì–´ í‚¤ ê´€ë¦¬ ë„êµ¬")
    print("=" * 60)

    # 1. ëª¨ë“ˆë³„ í‚¤ ì¶”ì¶œ
    print("\n[1] ëª¨ë“ˆë³„ í‚¤ ì¶”ì¶œ ì¤‘...")
    keys_by_module = extract_keys_by_module()
    print(f"âœ“ {len(keys_by_module)}ê°œ ëª¨ë“ˆì—ì„œ í‚¤ ì¶”ì¶œ ì™„ë£Œ")

    # 2. í…œí”Œë¦¿ ìƒì„±
    print("\n[2] ì–¸ì–´ í…œí”Œë¦¿ ìƒì„± ì¤‘...")
    generate_template(
        keys_by_module,
        "config/languages/template_en.json",
        "en"
    )

    # 3. ëˆ„ë½/ë¯¸ì‚¬ìš© í‚¤ í™•ì¸
    print("\n[3] í‚¤ ê²€ì¦ ì¤‘...")
    check_missing_and_unused()

    print("\n" + "=" * 60)
    print("ì™„ë£Œ!")
    print("=" * 60)

if __name__ == "__main__":
    main()
</file>

<file path="view/dialogs/font_settings_dialog.py">
from PyQt5.QtWidgets import (
    QDialog, QVBoxLayout, QHBoxLayout, QGroupBox, QLabel,
    QPushButton, QFontComboBox, QSpinBox, QTextEdit, QDialogButtonBox
)
from PyQt5.QtGui import QFont
import platform
from view.lang_manager import lang_manager

class FontSettingsDialog(QDialog):
    """
    ë“€ì–¼ í°íŠ¸ ì„¤ì • ëŒ€í™”ìƒìì…ë‹ˆë‹¤.
    ê°€ë³€í­(Proportional) í°íŠ¸ì™€ ê³ ì •í­(Fixed) í°íŠ¸ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    """

    def __init__(self, theme_manager, parent=None):
        """
        FontSettingsDialogë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            theme_manager (ThemeManager): í…Œë§ˆ ë° í°íŠ¸ ê´€ë¦¬ë¥¼ ìœ„í•œ ThemeManager ì¸ìŠ¤í„´ìŠ¤.
            parent (QWidget, optional): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.theme_manager = theme_manager

        self.setWindowTitle(lang_manager.get_text("font_title_settings"))
        self.setMinimumWidth(600)
        self.setMinimumHeight(500)

        self.init_ui()
        self.load_current_fonts()

    def init_ui(self):
        """UI ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ê³  ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout(self)
        layout.setSpacing(15)

        # ê°€ë³€í­ í°íŠ¸ ê·¸ë£¹ (Proportional Font Group)
        self.prop_grp = QGroupBox(lang_manager.get_text("font_grp_proportional"))
        self.prop_grp.setToolTip(lang_manager.get_text("font_grp_proportional_tooltip"))
        prop_layout = QVBoxLayout(self.prop_grp)

        # ê°€ë³€í­ í°íŠ¸ ì»¨íŠ¸ë¡¤
        prop_controls = QHBoxLayout()
        self.prop_font_lbl = QLabel(lang_manager.get_text("font_lbl_font"))
        prop_controls.addWidget(self.prop_font_lbl)
        self.prop_font_combo = QFontComboBox()
        self.prop_font_combo.setFontFilters(QFontComboBox.ScalableFonts)
        self.prop_font_combo.currentFontChanged.connect(self.update_prop_preview)
        prop_controls.addWidget(self.prop_font_combo, 1)

        self.prop_size_lbl = QLabel(lang_manager.get_text("font_lbl_size"))
        prop_controls.addWidget(self.prop_size_lbl)
        self.prop_size_spin = QSpinBox()
        self.prop_size_spin.setRange(6, 16)
        self.prop_size_spin.setValue(9)
        self.prop_size_spin.setSuffix(" pt")
        self.prop_size_spin.valueChanged.connect(self.update_prop_preview)
        prop_controls.addWidget(self.prop_size_spin)

        prop_layout.addLayout(prop_controls)

        # ê°€ë³€í­ í°íŠ¸ ë¯¸ë¦¬ë³´ê¸°
        self.prop_preview = QTextEdit()
        self.prop_preview.setReadOnly(True)
        self.prop_preview.setMaximumHeight(80)
        self.prop_preview.setText("The quick brown fox jumps over the lazy dog.\në¹ ë¥¸ ê°ˆìƒ‰ ì—¬ìš°ê°€ ê²Œìœ¼ë¥¸ ê°œë¥¼ ë›°ì–´ë„˜ìŠµë‹ˆë‹¤.")
        self.prop_preview_lbl = QLabel(lang_manager.get_text("font_lbl_preview"))
        prop_layout.addWidget(self.prop_preview_lbl)
        prop_layout.addWidget(self.prop_preview)

        layout.addWidget(self.prop_grp)

        # ê³ ì •í­ í°íŠ¸ ê·¸ë£¹ (Fixed Font Group)
        self.fixed_grp = QGroupBox(lang_manager.get_text("font_grp_fixed"))
        self.fixed_grp.setToolTip(lang_manager.get_text("font_grp_fixed_tooltip"))
        fixed_layout = QVBoxLayout(self.fixed_grp)

        # ê³ ì •í­ í°íŠ¸ ì»¨íŠ¸ë¡¤
        fixed_controls = QHBoxLayout()
        self.fixed_font_lbl = QLabel(lang_manager.get_text("font_lbl_font"))
        fixed_controls.addWidget(self.fixed_font_lbl)
        self.fixed_font_combo = QFontComboBox()
        self.fixed_font_combo.setFontFilters(QFontComboBox.MonospacedFonts)
        self.fixed_font_combo.currentFontChanged.connect(self.update_fixed_preview)
        fixed_controls.addWidget(self.fixed_font_combo, 1)

        self.fixed_size_lbl = QLabel(lang_manager.get_text("font_lbl_size"))
        fixed_controls.addWidget(self.fixed_size_lbl)
        self.fixed_size_spin = QSpinBox()
        self.fixed_size_spin.setRange(6, 16)
        self.fixed_size_spin.setValue(9)
        self.fixed_size_spin.setSuffix(" pt")
        self.fixed_size_spin.valueChanged.connect(self.update_fixed_preview)
        fixed_controls.addWidget(self.fixed_size_spin)

        fixed_layout.addLayout(fixed_controls)

        # ê³ ì •í­ í°íŠ¸ ë¯¸ë¦¬ë³´ê¸°
        self.fixed_preview = QTextEdit()
        self.fixed_preview.setReadOnly(True)
        self.fixed_preview.setMaximumHeight(80)
        self.fixed_preview.setText("AT+CMD=OK\\r\\n0123456789ABCDEF\\r\\nMonospace Text Display")
        self.fixed_preview_lbl = QLabel(lang_manager.get_text("font_lbl_preview"))
        fixed_layout.addWidget(self.fixed_preview_lbl)
        fixed_layout.addWidget(self.fixed_preview)

        layout.addWidget(self.fixed_grp)

        # ë²„íŠ¼ ì˜ì—­
        button_layout = QHBoxLayout()

        self.reset_btn = QPushButton(lang_manager.get_text("font_btn_reset"))
        self.reset_btn.setToolTip(lang_manager.get_text("font_btn_reset_tooltip"))
        self.reset_btn.clicked.connect(self.reset_to_defaults)
        button_layout.addWidget(self.reset_btn)

        button_layout.addStretch()

        self.button_box = QDialogButtonBox(QDialogButtonBox.Ok | QDialogButtonBox.Cancel | QDialogButtonBox.Apply)
        self.button_box.accepted.connect(self.accept_changes)
        self.button_box.rejected.connect(self.reject)
        self.button_box.button(QDialogButtonBox.Apply).clicked.connect(self.apply_changes)
        button_layout.addWidget(self.button_box)

        layout.addLayout(button_layout)

    def showEvent(self, event):
        """
        ë‹¤ì´ì–¼ë¡œê·¸ê°€ í‘œì‹œë  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. í”„ë¦¬ë·°ë¥¼ í˜„ì¬ ì„¤ì •ìœ¼ë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            event (QShowEvent): í‘œì‹œ ì´ë²¤íŠ¸.
        """
        super().showEvent(event)
        # í”„ë¦¬ë·°ë¥¼ í˜„ì¬ ì„¤ì •ìœ¼ë¡œ ê°•ì œ ì—…ë°ì´íŠ¸
        self.load_current_fonts()

    def load_current_fonts(self):
        """ThemeManagerì—ì„œ í˜„ì¬ í°íŠ¸ ì„¤ì •ì„ ë¡œë“œí•˜ì—¬ UIì— ë°˜ì˜í•©ë‹ˆë‹¤."""
        # ê°€ë³€í­ í°íŠ¸ ë¡œë“œ
        prop_family, prop_size = self.theme_manager.get_proportional_font_info()
        self.prop_font_combo.setCurrentFont(QFont(prop_family))
        self.prop_size_spin.setValue(prop_size)

        # ê³ ì •í­ í°íŠ¸ ë¡œë“œ
        fixed_family, fixed_size = self.theme_manager.get_fixed_font_info()
        self.fixed_font_combo.setCurrentFont(QFont(fixed_family))
        self.fixed_size_spin.setValue(fixed_size)

        # ë¡œë“œëœ ê°’ìœ¼ë¡œ í”„ë¦¬ë·° ëª…ì‹œì  ì—…ë°ì´íŠ¸
        # (ì½¤ë³´ë°•ìŠ¤ ì‹œê·¸ë„ì€ ê°’ì´ ê°™ê±°ë‚˜ ì´ˆê¸°í™” ì¤‘ì¼ ë•Œ ë°œìƒí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)
        self._update_prop_preview_with_font(QFont(prop_family, prop_size))
        self._update_fixed_preview_with_font(QFont(fixed_family, fixed_size))

    def update_prop_preview(self):
        """ê°€ë³€í­ í°íŠ¸ í”„ë¦¬ë·°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤ (Signal Slot)."""
        font = QFont(self.prop_font_combo.currentFont().family(), self.prop_size_spin.value())
        self._update_prop_preview_with_font(font)

    def _update_prop_preview_with_font(self, font: QFont):
        """
        ê°€ë³€í­ í°íŠ¸ í”„ë¦¬ë·°ë¥¼ ì‹¤ì œ ì—…ë°ì´íŠ¸í•˜ëŠ” ë‚´ë¶€ ë©”ì„œë“œì…ë‹ˆë‹¤.

        Args:
            font (QFont): ì ìš©í•  í°íŠ¸ ê°ì²´.
        """
        self.prop_preview.setFont(font)

    def update_fixed_preview(self):
        """ê³ ì •í­ í°íŠ¸ í”„ë¦¬ë·°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤ (Signal Slot)."""
        font = QFont(self.fixed_font_combo.currentFont().family(), self.fixed_size_spin.value())
        self._update_fixed_preview_with_font(font)

    def _update_fixed_preview_with_font(self, font: QFont):
        """
        ê³ ì •í­ í°íŠ¸ í”„ë¦¬ë·°ë¥¼ ì‹¤ì œ ì—…ë°ì´íŠ¸í•˜ëŠ” ë‚´ë¶€ ë©”ì„œë“œì…ë‹ˆë‹¤.

        Args:
            font (QFont): ì ìš©í•  í°íŠ¸ ê°ì²´.
        """
        font.setStyleHint(QFont.Monospace)
        self.fixed_preview.setFont(font)

    def reset_to_defaults(self):
        """í°íŠ¸ ì„¤ì •ì„ í”Œë«í¼ë³„ ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹í•©ë‹ˆë‹¤."""
        system = platform.system()

        # ê°€ë³€í­ í°íŠ¸ ê¸°ë³¸ê°’
        if system == "Windows":
            self.prop_font_combo.setCurrentFont(QFont("Segoe UI"))
            self.prop_size_spin.setValue(9)
        elif system == "Linux":
            self.prop_font_combo.setCurrentFont(QFont("Ubuntu"))
            self.prop_size_spin.setValue(9)
        else:  # macOS
            self.prop_font_combo.setCurrentFont(QFont("SF Pro Text"))
            self.prop_size_spin.setValue(9)

        # ê³ ì •í­ í°íŠ¸ ê¸°ë³¸ê°’
        if system == "Windows":
            self.fixed_font_combo.setCurrentFont(QFont("Consolas"))
            self.fixed_size_spin.setValue(9)
        elif system == "Linux":
            self.fixed_font_combo.setCurrentFont(QFont("Monospace"))
            self.fixed_size_spin.setValue(9)
        else:  # macOS
            self.fixed_font_combo.setCurrentFont(QFont("Menlo"))
            self.fixed_size_spin.setValue(9)

        self.update_prop_preview()
        self.update_fixed_preview()

    def apply_changes(self):
        """ë³€ê²½ ì‚¬í•­ì„ ThemeManagerì— ì ìš©í•©ë‹ˆë‹¤ (ë‹¤ì´ì–¼ë¡œê·¸ëŠ” ìœ ì§€)."""
        # ê°€ë³€í­ í°íŠ¸ ì ìš©
        prop_family = self.prop_font_combo.currentFont().family()
        prop_size = self.prop_size_spin.value()
        self.theme_manager.set_proportional_font(prop_family, prop_size)

        # ê³ ì •í­ í°íŠ¸ ì ìš©
        fixed_family = self.fixed_font_combo.currentFont().family()
        fixed_size = self.fixed_size_spin.value()
        self.theme_manager.set_fixed_font(fixed_family, fixed_size)

    def accept_changes(self):
        """ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•˜ê³  ëŒ€í™”ìƒìë¥¼ ë‹«ìŠµë‹ˆë‹¤."""
        self.apply_changes()
        self.accept()
</file>

<file path="config/languages/template_en.json">
{
  // ============================================
  // Main Window (main_window.py),
  // ============================================
  "main_title": "TODO: main_title",
  // ============================================
  // Command Control Widget (widgets/marco_ctrl.py),
  // ============================================
  "macro_ctrl_btn_load_script": "TODO: macro_ctrl_btn_load_script",
  "macro_ctrl_btn_load_script_tooltip": "TODO: macro_ctrl_btn_load_script_tooltip",
  "macro_ctrl_btn_save_script": "TODO: macro_ctrl_btn_save_script",
  "macro_ctrl_btn_save_script_tooltip": "TODO: macro_ctrl_btn_save_script_tooltip",
  "macro_ctrl_btn_repeat_start": "TODO: macro_ctrl_btn_repeat_start",
  "macro_ctrl_btn_repeat_start_tooltip": "TODO: macro_ctrl_btn_repeat_start_tooltip",
  "macro_ctrl_btn_repeat_stop": "TODO: macro_ctrl_btn_repeat_stop",
  "macro_ctrl_btn_repeat_stop_tooltip": "TODO: macro_ctrl_btn_repeat_stop_tooltip",
  "macro_ctrl_grp_execution": "TODO: macro_ctrl_grp_execution",
  "macro_ctrl_input_prefix_tooltip": "TODO: macro_ctrl_input_prefix_tooltip",
  "macro_ctrl_spin_repeat_tooltip": "TODO: macro_ctrl_spin_repeat_tooltip",
  "macro_ctrl_input_suffix_tooltip": "TODO: macro_ctrl_input_suffix_tooltip",
  "macro_ctrl_lbl_interval": "TODO: macro_ctrl_lbl_interval",
  "macro_ctrl_lbl_prefix": "TODO: macro_ctrl_lbl_prefix",
  "macro_ctrl_lbl_repeat_max": "TODO: macro_ctrl_lbl_repeat_max",
  "macro_ctrl_lbl_suffix": "TODO: macro_ctrl_lbl_suffix",
  // ============================================
  // Macro List Widget (widgets/macro_list.py),
  // ============================================
  "macro_list_btn_add_cmd_tooltip": "TODO: macro_list_btn_add_cmd_tooltip",
  "macro_list_btn_del_cmd_tooltip": "TODO: macro_list_btn_del_cmd_tooltip",
  "macro_list_btn_down_cmd_tooltip": "TODO: macro_list_btn_down_cmd_tooltip",
  "macro_list_btn_send": "TODO: macro_list_btn_send",
  "macro_list_btn_up_cmd_tooltip": "TODO: macro_list_btn_up_cmd_tooltip",
  "macro_list_chk_select_all": "TODO: macro_list_chk_select_all",
  "macro_list_chk_select_all_tooltip": "TODO: macro_list_chk_select_all_tooltip",
  "macro_list_col_command": "TODO: macro_list_col_command",
  "macro_list_col_delay": "TODO: macro_list_col_delay",
  "macro_list_col_hex": "TODO: macro_list_col_hex",
  "macro_list_col_prefix": "TODO: macro_list_col_prefix",
  "macro_list_col_send": "TODO: macro_list_col_send",
  "macro_list_col_suffix": "TODO: macro_list_col_suffix",
  "macro_list_table_cmd": "TODO: macro_list_table_cmd",
  // ============================================
  // File Progress Widget (widgets/file_progress.py),
  // ============================================
  "file_prog_btn_cancel": "TODO: file_prog_btn_cancel",
  "file_prog_lbl_eta_placeholder": "TODO: file_prog_lbl_eta_placeholder",
  "file_prog_lbl_status_completed": "TODO: file_prog_lbl_status_completed",
  "file_prog_lbl_status_failed": "TODO: file_prog_lbl_status_failed",
  "file_prog_lbl_status_ready": "TODO: file_prog_lbl_status_ready",
  "file_prog_lbl_status_sending": "TODO: file_prog_lbl_status_sending",
  // ============================================
  // Main Menu Bar Widget (widgets/main_menu_bar.py),
  // ============================================
  "main_menu_about": "TODO: main_menu_about",
  "main_menu_exit": "TODO: main_menu_exit",
  "main_menu_exit_tooltip": "TODO: main_menu_exit_tooltip",
  "main_menu_file": "TODO: main_menu_file",
  "main_menu_font": "TODO: main_menu_font",
  "main_menu_font_tooltip": "TODO: main_menu_font_tooltip",
  "main_menu_help": "TODO: main_menu_help",
  "main_menu_lang_en": "TODO: main_menu_lang_en",
  "main_menu_lang_ko": "TODO: main_menu_lang_ko",
  "main_menu_lang": "TODO: main_menu_lang",
  "main_menu_new_tab": "TODO: main_menu_new_tab",
  "main_menu_new_tab_tooltip": "TODO: main_menu_new_tab_tooltip",
  "main_menu_preferences": "TODO: main_menu_preferences",
  "main_menu_theme": "TODO: main_menu_theme",
  "main_menu_theme_dark": "TODO: main_menu_theme_dark",
  "main_menu_theme_light": "TODO: main_menu_theme_light",
  "main_menu_tools": "TODO: main_menu_tools",
  "main_menu_view": "TODO: main_menu_view",
  // ============================================
  // Main Status Bar Widget (widgets/main_status_bar.py),
  // ============================================
  "main_status_msg_ready": "TODO: main_status_msg_ready",
  // ============================================
  // Manual Control Widget (widgets/manual_control.py),
  // ============================================
  "manual_ctrl_btn_clear": "TODO: manual_ctrl_btn_clear",
  "manual_ctrl_btn_clear_tooltip": "TODO: manual_ctrl_btn_clear_tooltip",
  "manual_ctrl_btn_save_log": "TODO: manual_ctrl_btn_save_log",
  "manual_ctrl_btn_save_log_tooltip": "TODO: manual_ctrl_btn_save_log_tooltip",
  "manual_ctrl_btn_select_file": "TODO: manual_ctrl_btn_select_file",
  "manual_ctrl_btn_send": "TODO: manual_ctrl_btn_send",
  "manual_ctrl_btn_send_file": "TODO: manual_ctrl_btn_send_file",
  "manual_ctrl_chk_dtr": "TODO: manual_ctrl_chk_dtr",
  "manual_ctrl_chk_dtr_tooltip": "TODO: manual_ctrl_chk_dtr_tooltip",
  "manual_ctrl_chk_enter": "TODO: manual_ctrl_chk_enter",
  "manual_ctrl_chk_hex": "TODO: manual_ctrl_chk_hex",
  "manual_ctrl_chk_hex_tooltip": "TODO: manual_ctrl_chk_hex_tooltip",
  "manual_ctrl_chk_prefix": "TODO: manual_ctrl_chk_prefix",
  "manual_ctrl_chk_rts": "TODO: manual_ctrl_chk_rts",
  "manual_ctrl_chk_rts_tooltip": "TODO: manual_ctrl_chk_rts_tooltip",
  "manual_ctrl_chk_suffix": "TODO: manual_ctrl_chk_suffix",
  "manual_ctrl_dialog_file_filter_all": "TODO: manual_ctrl_dialog_file_filter_all",
  "manual_ctrl_dialog_file_filter_txt": "TODO: manual_ctrl_dialog_file_filter_txt",
  "manual_ctrl_dialog_save_log_title": "TODO: manual_ctrl_dialog_save_log_title",
  "manual_ctrl_dialog_select_file": "TODO: manual_ctrl_dialog_select_file",
  "manual_ctrl_grp_control": "TODO: manual_ctrl_grp_control",
  "manual_ctrl_grp_file": "TODO: manual_ctrl_grp_file",
  "manual_ctrl_grp_format": "TODO: manual_ctrl_grp_format",
  "manual_ctrl_grp_manual": "TODO: manual_ctrl_grp_manual",
  "manual_ctrl_input_cmd_placeholder": "TODO: manual_ctrl_input_cmd_placeholder",
  "manual_ctrl_lbl_file_path_no_file": "TODO: manual_ctrl_lbl_file_path_no_file",
  // ============================================
  // Packet Inspector Widget (widgets/packet_inspector.py),
  // ============================================
  "inspector_col_field": "TODO: inspector_col_field",
  "inspector_col_value": "TODO: inspector_col_value",
  "inspector_grp_title": "TODO: inspector_grp_title",
  // ============================================
  // Port Settings Widget (widgets/port_settings.py),
  // ============================================
  "port_btn_connect": "TODO: port_btn_connect",
  "port_btn_connect_tooltip": "TODO: port_btn_connect_tooltip",
  "port_btn_disconnect": "TODO: port_btn_disconnect",
  "port_btn_scan": "TODO: port_btn_scan",
  "port_btn_scan_tooltip": "TODO: port_btn_scan_tooltip",
  "port_combo_baud_tooltip": "TODO: port_combo_baud_tooltip",
  "port_combo_datasize_tooltip": "TODO: port_combo_datasize_tooltip",
  "port_combo_flow_tooltip": "TODO: port_combo_flow_tooltip",
  "port_combo_parity_tooltip": "TODO: port_combo_parity_tooltip",
  "port_combo_port_tooltip": "TODO: port_combo_port_tooltip",
  "port_combo_stopbits_tooltip": "TODO: port_combo_stopbits_tooltip",
  "port_combo_tooltip": "TODO: port_combo_tooltip",
  "port_grp_settings": "TODO: port_grp_settings",
  "port_lbl_baudrate": "TODO: port_lbl_baudrate",
  "port_lbl_datasize": "TODO: port_lbl_datasize",
  "port_lbl_flow": "TODO: port_lbl_flow",
  "port_lbl_parity": "TODO: port_lbl_parity",
  "port_lbl_port": "TODO: port_lbl_port",
  "port_lbl_stop": "TODO: port_lbl_stop",
  // ============================================
  // Received Area Widget (widgets/received_area.py),
  // ============================================
  "recv_btn_clear": "TODO: recv_btn_clear",
  "recv_btn_clear_tooltip": "TODO: recv_btn_clear_tooltip",
  "recv_btn_search_next_tooltip": "TODO: recv_btn_search_next_tooltip",
  "recv_btn_search_prev_tooltip": "TODO: recv_btn_search_prev_tooltip",
  "recv_btn_save": "TODO: recv_btn_save",
  "recv_btn_save_tooltip": "TODO: recv_btn_save_tooltip",
  "recv_chk_hex": "TODO: recv_chk_hex",
  "recv_chk_hex_tooltip": "TODO: recv_chk_hex_tooltip",
  "recv_chk_pause": "TODO: recv_chk_pause",
  "recv_chk_pause_tooltip": "TODO: recv_chk_pause_tooltip",
  "recv_chk_timestamp": "TODO: recv_chk_timestamp",
  "recv_chk_timestamp_tooltip": "TODO: recv_chk_timestamp_tooltip",
  "recv_input_search_placeholder": "TODO: recv_input_search_placeholder",
  "recv_input_search_tooltip": "TODO: recv_input_search_tooltip",
  "recv_title": "TODO: recv_title",
  "recv_txt_log_placeholder": "TODO: recv_txt_log_placeholder",
  // ============================================
  // Status Area Widget (widgets/status_area.py),
  // ============================================
  "status_title": "TODO: status_title",
  "status_txt_log_placeholder": "TODO: status_txt_log_placeholder",
  "status_txt_log_tooltip": "TODO: status_txt_log_tooltip",
  // ============================================
  // Macro Panel (panels/macro_panel.py),
  // ============================================
  "macro_list_dialog_title_open": "TODO: macro_list_dialog_title_open",
  "macro_list_dialog_title_save": "TODO: macro_list_dialog_title_save",
  // ============================================
  // About Dialog Dialog (dialogs/about_dialog.py),
  // ============================================
  "about_btn_close": "TODO: about_btn_close",
  "about_lbl_app_name": "TODO: about_lbl_app_name",
  "about_lbl_copyright": "TODO: about_lbl_copyright",
  "about_lbl_description": "TODO: about_lbl_description",
  "about_lbl_version": "TODO: about_lbl_version",
  "about_title": "TODO: about_title",
  // ============================================
  // Font Settings Dialog Dialog (dialogs/font_settings_dialog.py),
  // ============================================
  "font_btn_reset": "TODO: font_btn_reset",
  "font_btn_reset_tooltip": "TODO: font_btn_reset_tooltip",
  "font_grp_fixed": "TODO: font_grp_fixed",
  "font_grp_fixed_tooltip": "TODO: font_grp_fixed_tooltip",
  "font_grp_proportional": "TODO: font_grp_proportional",
  "font_grp_proportional_tooltip": "TODO: font_grp_proportional_tooltip",
  "font_lbl_font": "TODO: font_lbl_font",
  "font_lbl_preview": "TODO: font_lbl_preview",
  "font_lbl_size": "TODO: font_lbl_size",
  "font_title_settings": "TODO: font_title_settings",
  // ============================================
  // Preferences Dialog Dialog (dialogs/preferences_dialog.py),
  // ============================================
  "pref_btn_apply": "TODO: pref_btn_apply",
  "pref_btn_browse": "TODO: pref_btn_browse",
  "pref_btn_cancel": "TODO: pref_btn_cancel",
  "pref_btn_ok": "TODO: pref_btn_ok",
  "pref_dialog_title_select_dir": "TODO: pref_dialog_title_select_dir",
  "pref_grp_cmd_format": "TODO: pref_grp_cmd_format",
  "pref_grp_default": "TODO: pref_grp_default",
  "pref_grp_logging": "TODO: pref_grp_logging",
  "pref_grp_ui": "TODO: pref_grp_ui",
  "pref_lbl_baud": "TODO: pref_lbl_baud",
  "pref_lbl_font_size": "TODO: pref_lbl_font_size",
  "pref_lbl_language": "TODO: pref_lbl_language",
  "pref_lbl_log_path": "TODO: pref_lbl_log_path",
  "pref_lbl_max_lines": "TODO: pref_lbl_max_lines",
  "pref_lbl_prefix": "TODO: pref_lbl_prefix",
  "pref_lbl_scan": "TODO: pref_lbl_scan",
  "pref_lbl_suffix": "TODO: pref_lbl_suffix",
  "pref_lbl_theme": "TODO: pref_lbl_theme",
  "pref_tab_command": "TODO: pref_tab_command",
  "pref_tab_general": "TODO: pref_tab_general",
  "pref_tab_logging": "TODO: pref_tab_logging",
  "pref_tab_serial": "TODO: pref_tab_serial",
  "pref_title": "TODO: pref_title",
  // ============================================
  // Left Section Section (sections/main_left_section.py),
  // ============================================
  "left_tooltip_port_tab": "TODO: left_tooltip_port_tab",
  // ============================================
  // Right Section Section (sections/main_right_section.py),
  // ============================================
  "right_macro_panel_tooltip": "TODO: right_macro_panel_tooltip",
  "right_packet_inspector_tooltip": "TODO: right_packet_inspector_tooltip",
  "right_tab_macro_list": "TODO: right_tab_macro_list",
  "right_tab_packet": "TODO: right_tab_packet",
  "right_tooltip_macro_list": "TODO: right_tooltip_macro_list",
  "right_tooltip_packet": "TODO: right_tooltip_packet"
}
</file>

<file path="core/settings_manager.py">
"""
ì„¤ì • ê´€ë¦¬ì (Settings Manager)
ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì„ ë¡œë“œí•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.
"""
try:
    import commentjson as json
except ImportError:
    import json
from pathlib import Path
from typing import Dict, Any
import os

class SettingsManager:
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê´€ë¦¬ì í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    config/settings.jsonì—ì„œ ê¸°ë³¸ ì„¤ì •ì„ ë¡œë“œí•˜ê³ , ì‚¬ìš©ìë³„ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
    """

    _instance = None
    _initialized = False

    def __new__(cls):
        if cls._instance is None:
            cls._instance = super(SettingsManager, cls).__new__(cls)
        return cls._instance

    def __init__(self):
        """SettingsManagerë¥¼ ì´ˆê¸°í™”í•˜ê³  ì„¤ì •ì„ ë¡œë“œí•©ë‹ˆë‹¤."""
        if self._initialized:
            return

        self.settings: Dict[str, Any] = {}
        self.config_path = self._get_config_path()
        self.user_settings_path = self._get_user_settings_path()

        # ì„¤ì • ë¡œë“œ
        self.load_settings()
        self._initialized = True

    @staticmethod
    def _get_config_path() -> Path:
        """
        ê¸°ë³¸ ì„¤ì • íŒŒì¼ì˜ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            Path: config/settings.json íŒŒì¼ì˜ Path ê°ì²´.
        """
        if hasattr(os, '_MEIPASS'):
            # PyInstaller ë²ˆë“¤ í™˜ê²½
            base_path = Path(os._MEIPASS)
        else:
            # ê°œë°œ ëª¨ë“œ í™˜ê²½
            base_path = Path(__file__).parent.parent

        return base_path / 'config' / 'settings.json'

    def _get_user_settings_path(self) -> Path:
        """
        ì‚¬ìš©ì ì„¤ì • íŒŒì¼ì˜ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
        ê°œë°œ ëª¨ë“œì—ì„œëŠ” config/settings.jsonì„ ì§ì ‘ ì‚¬ìš©í•©ë‹ˆë‹¤.

        Returns:
            Path: ì‚¬ìš©ì ì„¤ì • íŒŒì¼ì˜ Path ê°ì²´.
        """
        # ê°œë°œ ëª¨ë“œ: config/settings.jsonì„ ì§ì ‘ ì‚¬ìš©
        return self.config_path

    def load_settings(self) -> None:
        """
        ì„¤ì •ì„ ë¡œë“œí•©ë‹ˆë‹¤.
        config/settings.json íŒŒì¼ì„ ì½ì–´ì˜µë‹ˆë‹¤.
        """
        try:
            with open(self.config_path, 'r', encoding='utf-8') as f:
                self.settings = json.load(f)
        except (FileNotFoundError, ValueError, Exception) as e:
            print(f"ì„¤ì • ë¡œë“œ ì‹¤íŒ¨: {e}")
            self.settings = self._get_fallback_settings()
            # ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ íŒŒì¼ ìƒì„±
            self.save_settings()

    def _merge_settings(self, user_settings: Dict[str, Any]) -> None:
        """
        ì‚¬ìš©ì ì„¤ì •ì„ ê¸°ë³¸ ì„¤ì •ì— ì¬ê·€ì ìœ¼ë¡œ ë³‘í•©í•©ë‹ˆë‹¤.

        Args:
            user_settings (Dict[str, Any]): ë³‘í•©í•  ì‚¬ìš©ì ì„¤ì • ë”•ì…”ë„ˆë¦¬.
        """
        def merge_dict(base: Dict, override: Dict) -> None:
            for key, value in override.items():
                if key in base and isinstance(base[key], dict) and isinstance(value, dict):
                    merge_dict(base[key], value)
                else:
                    base[key] = value

        merge_dict(self.settings, user_settings)

    def save_settings(self) -> None:
        """
        í˜„ì¬ ì„¤ì •ì„ config/settings.json íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.
        """
        try:
            with open(self.config_path, 'w', encoding='utf-8') as f:
                json.dump(self.settings, f, indent=2, ensure_ascii=False)
        except IOError as e:
            print(f"ì„¤ì • ì €ì¥ ì‹¤íŒ¨: {e}")

    def get(self, key_path: str, default: Any = None) -> Any:
        """
        ì (.) í‘œê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì •ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

        Args:
            key_path (str): ì„¤ì • í‚¤ ê²½ë¡œ (ì˜ˆ: 'settings.proportional_font_size').
            default (Any, optional): í‚¤ê°€ ì—†ì„ ê²½ìš° ë°˜í™˜í•  ê¸°ë³¸ê°’. ê¸°ë³¸ê°’ì€ None.

        Returns:
            Any: ì„¤ì •ê°’ ë˜ëŠ” ê¸°ë³¸ê°’.
        """
        keys = key_path.split('.')
        value = self.settings

        for key in keys:
            if isinstance(value, dict) and key in value:
                value = value[key]
            else:
                return default

        return value

    def set(self, key_path: str, value: Any) -> None:
        """
        ì (.) í‘œê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì •ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.
        ì¤‘ê°„ ê²½ë¡œì˜ í‚¤ê°€ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

        Args:
            key_path (str): ì„¤ì • í‚¤ ê²½ë¡œ (ì˜ˆ: 'settings.proportional_font_size').
            value (Any): ì €ì¥í•  ê°’.
        """
        keys = key_path.split('.')
        current = self.settings

        for key in keys[:-1]:
            if key not in current:
                current[key] = {}
            current = current[key]

        current[keys[-1]] = value

    def get_all_settings(self) -> Dict[str, Any]:
        """
        ì „ì²´ ì„¤ì • ë”•ì…”ë„ˆë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            Dict[str, Any]: ì „ì²´ ì„¤ì • ë”•ì…”ë„ˆë¦¬.
        """
        return self.settings

    @staticmethod
    def _get_fallback_settings() -> Dict[str, Any]:
        """
        ê¸°ë³¸ ì„¤ì • íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©í•  ìµœì†Œ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            Dict[str, Any]: ìµœì†Œ ì„¤ì • ë”•ì…”ë„ˆë¦¬.
        """
        return {
            "version": "1.0",
            "global": {
                "theme": "dark",
                "language": "ko"
            },
            "ui": {
                "rx_max_lines": 2000,
                "proportional_font_family": "Segoe UI",
                "proportional_font_size": 9,
                "fixed_font_family": "Consolas",
                "fixed_font_size": 9
            },
            "ports": {
                "default_config": {
                    "baudrate": 115200,
                    "parity": "N",
                    "datasize": 8,
                    "stopbits": 1
                }
            }
        }
</file>

<file path="README.md">
# SerialTool v1.0

**SerialTool**ì€ Pythonê³¼ PyQt5ë¡œ ê°œë°œëœ ê°•ë ¥í•œ í†µì‹  ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤. MVP(Model-View-Presenter) íŒ¨í„´ ê¸°ë°˜ì˜ ê¹”ë”í•œ ì•„í‚¤í…ì²˜ì™€ í˜„ëŒ€ì ì¸ UI/UXë¥¼ ì œê³µí•˜ë©°, Serial í†µì‹ ë¿ë§Œ ì•„ë‹ˆë¼ í–¥í›„ SPI, I2C ë“± ë‹¤ì–‘í•œ í”„ë¡œí† ì½œë¡œ í™•ì¥ ì˜ˆì •ì…ë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥ (Key Features)

### í•µì‹¬ ê¸°ëŠ¥
* **ë©€í‹° í”„ë¡œí† ì½œ(ì‹œë¦¬ì–¼, SPI, I2C) ì§€ì›**: íƒ­ ì¸í„°í˜ì´ìŠ¤ë¡œ ì—¬ëŸ¬ í”„ë¡œí† ì½œ(ì‹œë¦¬ì–¼, SPI, I2C) í¬íŠ¸ ë™ì‹œ ì œì–´
* **ìˆ˜ë™ ì œì–´**:
  - HEX/ASCII ëª¨ë“œ
  - Prefix/Suffix
  - Flow Control (RTS/DTR)
  - íŒŒì¼ ì „ì†¡ ê¸°ëŠ¥
  - ë¡œê·¸ ì €ì¥ ë° í™”ë©´(newline ì„¤ì •, max line ìˆ˜ ì„¤ì •) í´ë¦¬ì–´
* **ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ ìë™í™”**:
  - ì—¬ëŸ¬ ëª…ë ¹ì–´ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ê´€ë¦¬
  - ìˆœì°¨ ëª…ë ¹ ì‹¤í–‰
  - Repeat ë° Delay ì„¤ì •
  - ìŠ¤í¬ë¦½íŠ¸ ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê¸° (JSON í˜•ì‹)
* **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**:
  - Tx/Rx ë°”ì´íŠ¸ ì¹´ìš´íŠ¸
  - ìƒ‰ìƒ ê·œì¹™ ê¸°ë°˜ ë¡œê·¸ ê°•ì¡° (OK=ë…¹ìƒ‰, ERROR=ë¹¨ê°•)
  - íƒ€ì„ìŠ¤íƒ¬í”„ í‘œì‹œ

### UI/UX íŠ¹ì§•
* **í˜„ëŒ€ì  ì¸í„°í˜ì´ìŠ¤**:
  - ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ ì „í™˜
  - ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ (Proportional/Fixed)
  - SVG ê¸°ë°˜ í…Œë§ˆ ì ì‘í˜• ì•„ì´ì½˜
  - ì»´íŒ©íŠ¸í•œ 2ì¤„ í¬íŠ¸ ì„¤ì • ë ˆì´ì•„ì›ƒ
  - 3ë‹¨ê³„ Select All ì²´í¬ë°•ìŠ¤
* **ì‚¬ìš©ì„±**:
  - ëª¨ë“  ê¸°ëŠ¥ íˆ´íŒ ì œê³µ
  - ì„¤ì • ìë™ ì €ì¥ (ì°½ í¬ê¸°, í…Œë§ˆ, í°íŠ¸)
  - ê²¬ê³ í•œ í´ë°± ë©”ì»¤ë‹ˆì¦˜ (ì„¤ì • íŒŒì¼ ëˆ„ë½ ì‹œ ë³µêµ¬)

### ë‹¤êµ­ì–´ ì§€ì›
* **í•œêµ­ì–´/ì˜ì–´** ì‹¤ì‹œê°„ ì „í™˜
* CommentJSON ê¸°ë°˜ ë²ˆì—­ ê´€ë¦¬
* ì–¸ì–´ í‚¤ ìë™ ì¶”ì¶œ ë„êµ¬ (`tools/manage_lang_keys.py`)

---

## ì„¤ì¹˜ ë° ì‹¤í–‰

### ìš”êµ¬ ì‚¬í•­
* Python 3.8+
* PyQt5, pyserial, commentjson

### ì„¤ì¹˜

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/yourusername/SerialTool.git
cd SerialTool

# 2. ê°€ìƒ í™˜ê²½ ìƒì„± (ê¶Œì¥)
python -m venv .venv

# 3. ê°€ìƒ í™˜ê²½ í™œì„±í™”
# Windows:
.venv\Scripts\activate
# Linux/Mac:
source .venv/bin/activate

# 4. íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
```

### ì‹¤í–‰

```bash
# ê°€ìƒ í™˜ê²½ í™œì„±í™” í›„
python main.py
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
serial_tool2/
â”œâ”€â”€ main.py                 # ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”œâ”€â”€ version.py              # ë²„ì „ ì •ë³´
â”œâ”€â”€ requirements.txt        # ì˜ì¡´ì„± ëª©ë¡
â”‚
â”œâ”€â”€ core/                   # í•µì‹¬ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ logger.py           # ë¡œê¹… ì‹œìŠ¤í…œ (Singleton)
â”‚   â”œâ”€â”€ settings_manager.py # ì„¤ì • ê´€ë¦¬ (Singleton)
â”‚   â”œâ”€â”€ ring_buffer.py      # ë§ ë²„í¼
â”‚   â””â”€â”€ event_bus.py        # ì´ë²¤íŠ¸ ë²„ìŠ¤
â”‚
â”œâ”€â”€ model/                  # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ serial_worker.py    # ì‹œë¦¬ì–¼ í†µì‹  ì›Œì»¤
â”‚   â””â”€â”€ port_controller.py  # í¬íŠ¸ ì œì–´
â”‚
â”œâ”€â”€ presenter/              # MVP Presenter ê³„ì¸µ
â”‚   â”œâ”€â”€ main_presenter.py   # ë©”ì¸ í”„ë ˆì  í„°
â”‚   â””â”€â”€ [sub_presenters]    # ì„œë¸Œ í”„ë ˆì  í„°ë“¤
â”‚
â”œâ”€â”€ view/                   # UI ê³„ì¸µ
â”‚   â”œâ”€â”€ main_window.py      # ë©”ì¸ ìœˆë„ìš°
â”‚   â”œâ”€â”€ lang_manager.py # ë‹¤êµ­ì–´ ê´€ë¦¬
â”‚   â”œâ”€â”€ theme_manager.py    # í…Œë§ˆ ê´€ë¦¬
â”‚   â”œâ”€â”€ color_rules.py      # ë¡œê·¸ ìƒ‰ìƒ ê·œì¹™
â”‚   â”‚
â”‚   â”œâ”€â”€ pyqt_customs/       # PyQt5 ì»¤ìŠ¤í…€ ìœ„ì ¯
â”‚   â”‚   â”œâ”€â”€ smart_number_edit.py
â”‚   â”‚
â”‚   â”œâ”€â”€ sections/           # ì„¹ì…˜ (ëŒ€ ë¶„í• )
â”‚   â”‚   â”œâ”€â”€ main_left_section.py
â”‚   â”‚   â”œâ”€â”€ main_right_section.py
â”‚   â”‚   â”œâ”€â”€ main_menu_bar.py
â”‚   â”‚   â””â”€â”€ main_status_bar.py
â”‚   â”‚
â”‚   â”œâ”€â”€ panels/             # íŒ¨ë„ (ì¤‘ ë‹¨ìœ„)
â”‚   â”‚   â”œâ”€â”€ port_panel.py
â”‚   â”‚   â”œâ”€â”€ port_tab_panel.py
â”‚   â”‚   â”œâ”€â”€ macro_panel.py
â”‚   â”‚   â”œâ”€â”€ manual_control_panel.py
â”‚   â”‚   â”œâ”€â”€ packet_inspector_panel.py
â”‚   â”‚   â””â”€â”€ tx_panel.py
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/            # ìœ„ì ¯ (ì†Œ ë‹¨ìœ„)
â”‚   â”‚   â”œâ”€â”€ port_settings.py
â”‚   â”‚   â”œâ”€â”€ received_area.py
â”‚   â”‚   â”œâ”€â”€ manual_control.py
â”‚   â”‚   â”œâ”€â”€ macro_list.py
â”‚   â”‚   â”œâ”€â”€ macro_control.py
â”‚   â”‚   â”œâ”€â”€ main_toolbar.py
â”‚   â”‚   â”œâ”€â”€ file_progress.py
â”‚   â”‚   â”œâ”€â”€ packet_inspector.py
â”‚   â”‚   â”œâ”€â”€ status.py
â”‚   â”‚   â””â”€â”€ status_area.py
â”‚   â”‚
â”‚   â”œâ”€â”€ dialogs/            # ëŒ€í™”ìƒì
â”‚   â”‚   â”œâ”€â”€ font_settings_dialog.py
â”‚   â”‚   â””â”€â”€ preferences_dialog.py
â”‚   â”‚
â”‚   â””â”€â”€ doc/                # View ê³„ì¸µ ë¬¸ì„œ
â”‚       â””â”€â”€ implementation_plan.md  # View êµ¬í˜„ ê³„íš
â”‚
â”œâ”€â”€ config/                 # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ settings.json       # ì•± ì„¤ì • (ë…¼ë¦¬ ê·¸ë£¹: serial, command, logging, ui)
â”‚   â””â”€â”€ languages/          # ë‹¤êµ­ì–´ ë¦¬ì†ŒìŠ¤
â”‚       â”œâ”€â”€ ko.json         # í•œêµ­ì–´
â”‚       â””â”€â”€ en.json         # ì˜ì–´
â”‚
â”œâ”€â”€ resources/              # ë¦¬ì†ŒìŠ¤ íŒŒì¼
â”‚   â”œâ”€â”€ icons/              # SVG ì•„ì´ì½˜
â”‚   â”‚   â”œâ”€â”€ light/          # ë¼ì´íŠ¸ í…Œë§ˆìš©
â”‚   â”‚   â””â”€â”€ dark/           # ë‹¤í¬ í…Œë§ˆìš©
â”‚   â””â”€â”€ themes/             # QSS ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”‚       â”œâ”€â”€ dark_theme.qss
â”‚       â””â”€â”€ light_theme.qss
â”‚
â”œâ”€â”€ doc/                    # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”‚   â”œâ”€â”€ Implementation_Specification.md  # êµ¬í˜„ ëª…ì„¸ì„œ (ì „ì²´ ì„¤ê³„)
â”‚   â”œâ”€â”€ changelog.md                     # ë³€ê²½ ì´ë ¥
â”‚   â””â”€â”€ session_summary_YYYYMMDD.md      # ì‘ì—… ì„¸ì…˜ ìš”ì•½
â”‚
â”œâ”€â”€ guide/                  # ê°œë°œ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ code_style_guide.md # ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ
â”‚   â””â”€â”€ naming_convention.md # ëª…ëª… ê·œì¹™ (ì–¸ì–´ í‚¤, ë³€ìˆ˜ëª… ë“±)
â”‚
â”œâ”€â”€ tools/                  # ìœ í‹¸ë¦¬í‹° ë„êµ¬
â”‚   â””â”€â”€ manage_lang_keys.py # ì–¸ì–´ í‚¤ ê´€ë¦¬ ë„êµ¬
â”‚
â”œâ”€â”€ tests/                  # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â”œâ”€â”€ test_view.py
â”‚   â””â”€â”€ test_ui_translations.py
â”‚
â”œâ”€â”€ logs/                   # ë¡œê·¸ íŒŒì¼ (gitignore)
â””â”€â”€ ignore/                 # ì—°ìŠµ íŒŒì¼ (gitignore)
```

---

## ì•„í‚¤í…ì²˜

### MVP íŒ¨í„´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    View     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Presenter   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    Model    â”‚
â”‚ (UI ì „ìš©)    â”‚  Signal  â”‚ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)â”‚   Data   â”‚ (ë°ì´í„°/í†µì‹ )â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì„¤ê³„ ì›ì¹™**:
- **View**: UI í‘œì‹œì™€ ì‚¬ìš©ì ì…ë ¥ë§Œ ì²˜ë¦¬ (ì‹œê·¸ë„ emit)
- **Presenter**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ (View â†” Model ì¤‘ì¬)
- **Model**: ë°ì´í„° ë° ì‹œë¦¬ì–¼ í†µì‹  ë‹´ë‹¹

**ìµœê·¼ ë¦¬íŒ©í† ë§ ì‚¬ë¡€**:
- ManualControlWidget: Prefix/Suffix ë¡œì§ â†’ Presenterë¡œ ì´ë™
- PortSettingsWidget: ì„¤ì • ì ‘ê·¼ â†’ SettingsManager í™œìš©

### ì„¤ì • êµ¬ì¡°

**ë…¼ë¦¬ì  ê·¸ë£¹ ê¸°ë°˜** (`config/settings.json`):
```json
{
  "serial": { "baudrate": 115200, ... },
  "command": { "prefix": "AT", "suffix": "\r\n" },
  "logging": { "log_path": "logs/", ... },
  "ui": { "theme": "dark", "font": {...} }
}
```

---

## í˜„ì¬ ê°œë°œ ìƒíƒœ

### âœ… ì™„ë£Œ í•­ëª©

**í”„ë¡œì íŠ¸ ê¸°ë°˜**:
- [x] í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ê¸°ë³¸ ì„¤ì •
- [x] Git ë²„ì „ ê´€ë¦¬ ì²´ê³„
- [x] ë¬¸ì„œí™” ì‹œìŠ¤í…œ
- [x] MVP ì•„í‚¤í…ì²˜ ê¸°ë°˜ ë¦¬íŒ©í† ë§

**View ê³„ì¸µ**:
- [x] UI ê³¨ê²© ë° ìœ„ì ¯ êµ¬í˜„
- [x] í…Œë§ˆ ì‹œìŠ¤í…œ (Dark/Light)
- [x] ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ
- [x] SVG ì•„ì´ì½˜ ì‹œìŠ¤í…œ
- [x] ë‹¤êµ­ì–´ ì§€ì› (í•œêµ­ì–´/ì˜ì–´)
- [x] ìƒ‰ìƒ ê·œì¹™ (OK=ë…¹ìƒ‰, ERROR=ë¹¨ê°•)
- [x] ì„¤ì • ê´€ë¦¬ ì‹œìŠ¤í…œ
- [x] ì½”ë“œ í’ˆì§ˆ ê°œì„  (íƒ€ì… íŒíŠ¸, Docstring)
- [x] MVP íŒ¨í„´ ì ìš© (Signal ê¸°ë°˜ í†µì‹ )

**Core ìœ í‹¸ë¦¬í‹°**:
- [x] Logger (Singleton, ê²¬ê³ í•œ íŒ¨í„´)
- [x] SettingsManager (Singleton, ë…¼ë¦¬ ê·¸ë£¹)
- [x] í´ë°± ë©”ì»¤ë‹ˆì¦˜ (ì„¤ì • íŒŒì¼ ë³µêµ¬)

### ğŸ”„ ì§„í–‰ ì¤‘

**View ê³„ì¸µ ì™„ì„±** (`view/doc/implementation_plan.md` ì°¸ì¡°):
- [ ] StatusPanel ìœ„ì ¯
- [ ] ìƒíƒœë°” ìƒì„¸ ì •ë³´ (6ê°œ í•„ë“œ)
- [ ] Connect ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½
- [ ] ë‹¨ì¶•í‚¤ ì‹œìŠ¤í…œ (10ê°œ)
- [ ] ë ˆì´ì•„ì›ƒ ë¹„ìœ¨ ì¡°ì •
- [ ] ìƒ‰ìƒ ì½”ë“œ í‘œì¤€í™”
- [ ] Splitter ë¹„ìœ¨ ë³µì›
- [ ] Tooltip ê°œì„ 

**Model/Presenter**:
- [ ] SerialWorker ì™„ì„±
- [ ] PortController í†µí•©
- [ ] Presenter ë¡œì§ í™•ì¥

### â³ ì˜ˆì •

**ë‹¨ê¸° (Current Sprint)**:
- [ ] Macro(list ìˆœì°¨ ë°˜ë³µ ì „ì†¡) ìë™í™” ì—”ì§„
- [ ] íŒŒì¼ ì „ì†¡ ê¸°ëŠ¥
- [ ] íŒ¨í‚· íŒŒì„œ ì‹œìŠ¤í…œ

**ì¤‘ì¥ê¸° (Future)**:
- [ ] í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ
- [ ] **í†µì‹  í”„ë¡œí† ì½œ í™•ì¥**:
  - [ ] SPI ì§€ì› (FT4222 ì¹© ë“±)
  - [ ] I2C ì§€ì› (FT4222 ì¹© ë“±)
  - [ ] ë©€í‹° í”„ë¡œí† ì½œ ë™ì‹œ ì§€ì› (Serial + SPI + I2C)
- [ ] ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ ì§€ì› (Python/Lua ì„ë² ë”©)

---

## ê°œë°œ ê°€ì´ë“œë¼ì¸

### ë¬¸ì„œ ì°¸ì¡°

| ë¬¸ì„œ | ëª©ì  | ìœ„ì¹˜ |
|------|------|------|
| Implementation Specification | ì „ì²´ ì„¤ê³„ ë° ëª…ì„¸ | `doc/Implementation_Specification.md` |
| View êµ¬í˜„ ê³„íš | View ê³„ì¸µ êµ¬í˜„ ê°€ì´ë“œ | `view/doc/implementation_plan.md` |
| ì½”ë”© ê·œì¹™ | ì½”ë“œ ìŠ¤íƒ€ì¼ | `guide/code_style_guide.md` |
| ëª…ëª… ê·œì¹™ | ì½”ë“œ/ì–¸ì–´ í‚¤ ë„¤ì´ë° | `guide/naming_convention.md` |
| ì£¼ì„ ê°€ì´ë“œ | ì£¼ì„/Docstring ì‘ì„±ë²• | `guide/comment_guide.md` |
| Git ê°€ì´ë“œ | ì»¤ë°‹/PR/ì´ìŠˆ ê·œì¹™ | `guide/git_guide.md` |
| ë³€ê²½ ì´ë ¥ | ì„¸ì…˜ë³„ ë³€ê²½ ì‚¬í•­ | `doc/changelog.md` |
| ì„¸ì…˜ ìš”ì•½ | 2025-12-09 ì‘ì—… ìš”ì•½ | `doc/session_summary_20251209.md` |

### ì½”ë“œ ìŠ¤íƒ€ì¼

- **PEP 8** ì¤€ìˆ˜
- **í•œêµ­ì–´** ì£¼ì„ ë° Docstring
- **íƒ€ì… íŒíŠ¸** í•„ìˆ˜
- **MVP íŒ¨í„´** ì¤€ìˆ˜ (ViewëŠ” ì‹œê·¸ë„ë§Œ emit)

### Git ë²„ì „ ê´€ë¦¬
* ë³¸ í”„ë¡œì íŠ¸ëŠ” **Gitì„ í†µí•œ ì§€ì†ì ì¸ ë°±ì—…**ì„ ê¶Œì¥í•©ë‹ˆë‹¤:
* ëª¨ë“  ë©”ì‹œì§€ëŠ” í•œêµ­ì–´ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.

```bash
# ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹ (í•œêµ­ì–´)
Feat: ê¸°ëŠ¥ ì¶”ê°€
Fix: ë²„ê·¸ ìˆ˜ì •
Docs: ë¬¸ì„œ ìˆ˜ì •
Refactor: ë¦¬íŒ©í† ë§
Style: ìŠ¤íƒ€ì¼ ë³€ê²½
```

**ë¸Œëœì¹˜ ì „ëµ**:
- `main`: ì•ˆì • ë²„ì „
- `feature/ê¸°ëŠ¥ëª…`: ê°œë°œ ë¸Œëœì¹˜

**ê¶Œì¥ ì‚¬í•­**:
- ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ ìì£¼ ì»¤ë°‹ (ìµœì†Œ í•˜ë£¨ 1íšŒ)
- ì„¸ì…˜ ì¢…ë£Œ ì‹œ `doc/session_summary_YYYYMMDD.md` ì‘ì„±

---

## ë„êµ¬ ë° ìœ í‹¸ë¦¬í‹°

### ì–¸ì–´ í‚¤ ê´€ë¦¬

```bash
# UI íŒŒì¼ì—ì„œ ì–¸ì–´ í‚¤ ìë™ ì¶”ì¶œ
python tools/manage_lang_keys.py extract

# ëˆ„ë½/ë¯¸ì‚¬ìš© í‚¤ í™•ì¸
python tools/manage_lang_keys.py check
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸
pytest

# íŠ¹ì • í…ŒìŠ¤íŠ¸
pytest tests/test_view.py
```

---

## ê¸°ì—¬ (Contributing)

ë²„ê·¸ ì‹ ê³  ë° ê¸°ëŠ¥ ì œì•ˆì€ Issueë¥¼ í†µí•´ í™˜ì˜í•©ë‹ˆë‹¤.
Pull Requestë„ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤.

---

## ë¼ì´ì„ ìŠ¤

MIT License
</file>

<file path="config/languages/ko.json">
{
    "main_title": "ì‹œë¦¬ì–¼ ë„êµ¬",
    "macro_ctrl_btn_load_script": "ë¶ˆëŸ¬ì˜¤ê¸°",
    "macro_ctrl_btn_load_script_tooltip": "íŒŒì¼ì—ì„œ ëª…ë ¹ ìŠ¤í¬ë¦½íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°",
    "macro_ctrl_btn_save_script": "ì €ì¥",
    "macro_ctrl_btn_save_script_tooltip": "ëª…ë ¹ ìŠ¤í¬ë¦½íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥",
    "macro_ctrl_btn_repeat_start": "ìë™ ì‹œì‘",
    "macro_ctrl_btn_repeat_start_tooltip": "ìë™ ì‹¤í–‰ ì‹œì‘",
    "macro_ctrl_btn_repeat_stop": "ìë™ ì¤‘ì§€",
    "macro_ctrl_btn_repeat_stop_tooltip": "ìë™ ì‹¤í–‰ ì¤‘ì§€",
    "macro_ctrl_grp_execution": "ì‹¤í–‰ ì œì–´",
    "macro_ctrl_input_prefix_tooltip": "ëª…ë ¹ ì•ì— ì¶”ê°€í•  ì ‘ë‘ì‚¬",
    "macro_ctrl_spin_repeat_tooltip": "ë°˜ë³µ íšŸìˆ˜",
    "macro_ctrl_input_suffix_tooltip": "ëª…ë ¹ ë’¤ì— ì¶”ê°€í•  ì ‘ë¯¸ì‚¬",
    "macro_ctrl_lbl_interval": "ê°„ê²© (ms)",
    "macro_ctrl_lbl_prefix": "ì ‘ë‘ì‚¬",
    "macro_ctrl_lbl_repeat_max": "ë°˜ë³µ",
    "macro_ctrl_lbl_suffix": "ì ‘ë¯¸ì‚¬",
    "macro_list_btn_add_cmd_tooltip": "ìƒˆ ëª…ë ¹ ì¶”ê°€",
    "macro_list_btn_del_cmd_tooltip": "ì„ íƒí•œ ëª…ë ¹ ì‚­ì œ",
    "macro_list_btn_down_cmd_tooltip": "ëª…ë ¹ ì•„ë˜ë¡œ ì´ë™",
    "macro_list_btn_send": "ì „ì†¡",
    "macro_list_btn_up_cmd_tooltip": "ëª…ë ¹ ìœ„ë¡œ ì´ë™",
    "macro_list_chk_select_all": "ì „ì²´",
    "macro_list_chk_select_all_tooltip": "ëª¨ë“  ëª…ë ¹ ì„ íƒ/í•´ì œ",
    "macro_list_col_command": "ëª…ë ¹",
    "macro_list_col_delay": "ì§€ì—°(ms)",
    "macro_list_col_hex": "HEX",
    "macro_list_col_prefix": "ì ‘ë‘ì‚¬",
    "macro_list_col_send": "ì „ì†¡",
    "macro_list_col_suffix": "ì ‘ë¯¸ì‚¬",
    "macro_list_table_cmd": "ëª…ë ¹ ë¦¬ìŠ¤íŠ¸",
    "file_prog_btn_cancel": "ì·¨ì†Œ",
    "file_prog_lbl_eta_placeholder": "ì˜ˆìƒ ì‹œê°„: --:--",
    "file_prog_lbl_status_completed": "ì™„ë£Œ",
    "file_prog_lbl_status_failed": "ì‹¤íŒ¨",
    "file_prog_lbl_status_ready": "ì¤€ë¹„",
    "file_prog_lbl_status_sending": "ì „ì†¡ ì¤‘",
    "main_menu_about": "ì •ë³´",
    "main_menu_exit": "ì¢…ë£Œ",
    "main_menu_exit_tooltip": "ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ",
    "main_menu_file": "íŒŒì¼",
    "main_menu_font": "í°íŠ¸",
    "main_menu_font_tooltip": "í°íŠ¸ ì„¤ì •",
    "main_menu_help": "ë„ì›€ë§",
    "main_menu_lang_en": "English",
    "main_menu_lang_ko": "í•œêµ­ì–´",
    "main_menu_lang": "ì–¸ì–´",
    "main_menu_new_tab": "ìƒˆ íƒ­",
    "main_menu_new_tab_tooltip": "ìƒˆ íƒ­ ë§Œë“¤ê¸°",
    "main_menu_preferences": "ì„¤ì •",
    "main_menu_theme": "í…Œë§ˆ",
    "main_menu_theme_dark": "ë‹¤í¬",
    "main_menu_theme_light": "ë¼ì´íŠ¸",
    "main_menu_tools": "ë„êµ¬",
    "main_menu_view": "ë³´ê¸°",
    "main_menu_open_port": "í¬íŠ¸ ì—´ê¸°",
    "main_menu_close_tab": "íƒ­ ë‹«ê¸°",
    "main_menu_save_log": "ë¡œê·¸ ì €ì¥",
    "main_menu_toggle_right_panel": "ìš°ì¸¡ íŒ¨ë„ í‘œì‹œ",
    "toolbar_open": "ì—´ê¸°",
    "toolbar_close": "ë‹«ê¸°",
    "toolbar_clear": "ì§€ìš°ê¸°",
    "toolbar_save_log": "ë¡œê·¸ ì €ì¥",
    "toolbar_settings": "ì„¤ì •",
    "macro_ctrl_btn_repeat_pause": "ì¼ì‹œì •ì§€",
    "macro_ctrl_btn_repeat_pause_tooltip": "ë°˜ë³µ ì‹¤í–‰ ì¼ì‹œì •ì§€",
    "pref_lbl_newline": "ì¤„ë°”ê¿ˆ",
    "main_status_msg_ready": "ì¤€ë¹„",
    "manual_ctrl_btn_clear": "ì§€ìš°ê¸°",
    "manual_ctrl_btn_clear_tooltip": "ìˆ˜ì‹  ë°ì´í„° ì§€ìš°ê¸°",
    "manual_ctrl_btn_save_log": "ë¡œê·¸ ì €ì¥",
    "manual_ctrl_btn_save_log_tooltip": "ë¡œê·¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥",
    "manual_ctrl_btn_select_file": "íŒŒì¼ ì„ íƒ",
    "manual_ctrl_btn_send": "ì „ì†¡",
    "manual_ctrl_btn_send_file": "íŒŒì¼ ì „ì†¡",
    "manual_ctrl_chk_dtr": "DTR",
    "manual_ctrl_chk_dtr_tooltip": "ë°ì´í„° ë‹¨ë§ê¸° ì¤€ë¹„ ì‹ í˜¸",
    "manual_ctrl_chk_enter": "ì—”í„° ì¶”ê°€",
    "manual_ctrl_chk_hex": "HEX",
    "manual_ctrl_chk_hex_tooltip": "HEX í˜•ì‹ìœ¼ë¡œ ì „ì†¡",
    "manual_ctrl_chk_prefix": "ì ‘ë‘ì‚¬",
    "manual_ctrl_chk_rts": "RTS",
    "manual_ctrl_chk_rts_tooltip": "ì†¡ì‹  ìš”ì²­ ì‹ í˜¸",
    "manual_ctrl_chk_suffix": "ì ‘ë¯¸ì‚¬",
    "manual_ctrl_dialog_file_filter_all": "ëª¨ë“  íŒŒì¼",
    "manual_ctrl_dialog_file_filter_txt": "í…ìŠ¤íŠ¸ íŒŒì¼",
    "manual_ctrl_dialog_save_log_title": "ë¡œê·¸ ì €ì¥",
    "manual_ctrl_dialog_select_file": "ì „ì†¡í•  íŒŒì¼ ì„ íƒ",
    "manual_ctrl_grp_control": "ì œì–´ ì˜µì…˜",
    "manual_ctrl_grp_file": "íŒŒì¼ ì „ì†¡",
    "manual_ctrl_grp_format": "í˜•ì‹",
    "manual_ctrl_grp_manual": "ìˆ˜ë™ ì „ì†¡",
    "manual_ctrl_input_cmd_placeholder": "ëª…ë ¹ ì…ë ¥...",
    "manual_ctrl_lbl_file_path_no_file": "ì„ íƒëœ íŒŒì¼ ì—†ìŒ",
    "inspector_col_field": "í•„ë“œ",
    "inspector_col_value": "ê°’",
    "inspector_grp_title": "íŒ¨í‚· ë¶„ì„ê¸°",
    "port_btn_connect": "ì—´ê¸°",
    "port_btn_connect_tooltip": "ì‹œë¦¬ì–¼ í¬íŠ¸ ì—´ê¸°",
    "port_btn_reconnect": "ì¬ì—°ê²°",
    "port_btn_disconnect": "ë‹«ê¸°",
    "port_btn_scan": "ê²€ìƒ‰",
    "port_btn_scan_tooltip": "ì‚¬ìš© ê°€ëŠ¥í•œ í¬íŠ¸ ê²€ìƒ‰",
    "port_combo_baud_tooltip": "ë³´ë“œë ˆì´íŠ¸ ì„ íƒ",
    "port_combo_datasize_tooltip": "ë°ì´í„° ë¹„íŠ¸ ì„ íƒ",
    "port_combo_flow_tooltip": "íë¦„ ì œì–´ ì„ íƒ",
    "port_combo_parity_tooltip": "íŒ¨ë¦¬í‹° ë¹„íŠ¸ ì„ íƒ",
    "port_combo_port_tooltip": "ì‹œë¦¬ì–¼ í¬íŠ¸ ì„ íƒ",
    "port_combo_stopbits_tooltip": "ì •ì§€ ë¹„íŠ¸ ì„ íƒ",
    "port_combo_tooltip": "ì‹œë¦¬ì–¼ í¬íŠ¸ ì„ íƒ",
    "port_grp_settings": "í¬íŠ¸ ì„¤ì •",
    "port_lbl_baudrate": "ë³´ë“œë ˆì´íŠ¸",
    "port_lbl_datasize": "ë°ì´í„°",
    "port_lbl_flow": "íë¦„",
    "port_lbl_parity": "íŒ¨ë¦¬í‹°",
    "port_lbl_port": "í¬íŠ¸",
    "port_lbl_stop": "ì •ì§€",
    "recv_btn_clear": "ì§€ìš°ê¸°",
    "recv_btn_clear_tooltip": "ìˆ˜ì‹  ë¡œê·¸ ì§€ìš°ê¸°",
    "recv_btn_search_next_tooltip": "ë‹¤ìŒ ì°¾ê¸°",
    "recv_btn_search_prev_tooltip": "ì´ì „ ì°¾ê¸°",
    "recv_btn_save": "ì €ì¥",
    "recv_btn_save_tooltip": "ë¡œê·¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥",
    "recv_chk_hex": "HEX",
    "recv_chk_hex_tooltip": "HEX í˜•ì‹ìœ¼ë¡œ í‘œì‹œ",
    "recv_chk_pause": "ì¼ì‹œ ì •ì§€",
    "recv_chk_pause_tooltip": "ìˆ˜ì‹  ì¼ì‹œ ì •ì§€",
    "recv_chk_timestamp": "íƒ€ì„ìŠ¤íƒ¬í”„",
    "recv_chk_timestamp_tooltip": "íƒ€ì„ìŠ¤íƒ¬í”„ í‘œì‹œ",
    "recv_input_search_placeholder": "ê²€ìƒ‰...",
    "recv_input_search_tooltip": "ìˆ˜ì‹  ë°ì´í„°ì—ì„œ ê²€ìƒ‰",
    "recv_title": "RX ë¡œê·¸",
    "recv_txt_log_placeholder": "ìˆ˜ì‹  ë°ì´í„°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...",
    "status_title": "ìƒíƒœ ë¡œê·¸",
    "status_txt_log_placeholder": "ì‹œìŠ¤í…œ ìƒíƒœ ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...",
    "status_txt_log_tooltip": "ì‹œìŠ¤í…œ ìƒíƒœ ë° ì˜¤ë¥˜ ë©”ì‹œì§€",
    "macro_list_dialog_title_open": "ëª…ë ¹ ìŠ¤í¬ë¦½íŠ¸ ì—´ê¸°",
    "macro_list_dialog_title_save": "ëª…ë ¹ ìŠ¤í¬ë¦½íŠ¸ ì €ì¥",
    "about_btn_close": "ë‹«ê¸°",
    "about_lbl_app_name": "ì‹œë¦¬ì–¼ ë„êµ¬",
    "about_lbl_copyright": "Â© 2024 All rights reserved",
    "about_lbl_description": "ë‹¤ëª©ì  ì‹œë¦¬ì–¼ í†µì‹  ë„êµ¬",
    "about_lbl_version": "ë²„ì „ 1.0.0",
    "about_title": "ì‹œë¦¬ì–¼ ë„êµ¬ ì •ë³´",
    "font_btn_reset": "ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •",
    "font_btn_reset_tooltip": "í°íŠ¸ë¥¼ ì‹œìŠ¤í…œ ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •",
    "font_grp_fixed": "ê³ ì •í­ í°íŠ¸ (ì½”ë“œ/ë°ì´í„°ìš©)",
    "font_grp_fixed_tooltip": "ì½”ë“œ ë° ë°ì´í„° í‘œì‹œì— ì‚¬ìš©ë˜ëŠ” í°íŠ¸",
    "font_grp_proportional": "ê°€ë³€í­ í°íŠ¸ (UIìš©)",
    "font_grp_proportional_tooltip": "ì¼ë°˜ UI ìš”ì†Œì— ì‚¬ìš©ë˜ëŠ” í°íŠ¸",
    "font_lbl_font": "í°íŠ¸",
    "font_lbl_preview": "ë¯¸ë¦¬ë³´ê¸°",
    "font_lbl_size": "í¬ê¸°",
    "font_title_settings": "í°íŠ¸ ì„¤ì •",
    "pref_btn_apply": "ì ìš©",
    "pref_btn_browse": "ì°¾ì•„ë³´ê¸°...",
    "pref_btn_cancel": "ì·¨ì†Œ",
    "pref_btn_ok": "í™•ì¸",
    "pref_dialog_title_select_dir": "ë””ë ‰í† ë¦¬ ì„ íƒ",
    "pref_grp_cmd_format": "ëª…ë ¹ í˜•ì‹",
    "pref_grp_default": "ê¸°ë³¸ ì„¤ì •",
    "pref_grp_logging": "íŒŒì¼ ë¡œê¹…",
    "pref_grp_ui": "UI ì™¸ê´€",
    "pref_lbl_baud": "ê¸°ë³¸ ë³´ë“œë ˆì´íŠ¸",
    "pref_lbl_font_size": "í°íŠ¸ í¬ê¸°",
    "pref_lbl_language": "ì–¸ì–´",
    "pref_lbl_log_path": "ë¡œê·¸ ê²½ë¡œ",
    "pref_lbl_max_lines": "ìµœëŒ€ ë¼ì¸ ìˆ˜",
    "pref_lbl_prefix": "ê¸°ë³¸ ì ‘ë‘ì‚¬",
    "pref_lbl_scan": "ê²€ìƒ‰ ê°„ê²©",
    "pref_lbl_suffix": "ê¸°ë³¸ ì ‘ë¯¸ì‚¬",
    "pref_lbl_theme": "í…Œë§ˆ",
    "pref_tab_command": "ëª…ë ¹",
    "pref_tab_general": "ì¼ë°˜",
    "pref_tab_logging": "ë¡œê¹…",
    "pref_tab_serial": "ì‹œë¦¬ì–¼",
    "pref_title": "ì„¤ì •",
    "left_tooltip_port_tab": "í¬íŠ¸ êµ¬ì„±",
    "right_macro_panel_tooltip": "ëª…ë ¹ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬",
    "right_packet_inspector_tooltip": "íŒ¨í‚· êµ¬ì¡° ë¶„ì„",
    "right_tab_macro_list": "ëª…ë ¹ ë¦¬ìŠ¤íŠ¸",
    "right_tab_packet": "ë¶„ì„ê¸°",
    "right_tooltip_macro_list": "ëª…ë ¹ ë¦¬ìŠ¤íŠ¸ íŒ¨ë„",
    "right_tooltip_packet": "íŒ¨í‚· ë¶„ì„ê¸° íŒ¨ë„"
}
</file>

<file path="config/languages/en.json">
{
    "main_title": "Serial Tool",
    "macro_ctrl_btn_load_script": "Load",
    "macro_ctrl_btn_load_script_tooltip": "Load command script from file",
    "macro_ctrl_btn_save_script": "Save",
    "macro_ctrl_btn_save_script_tooltip": "Save command script to file",
    "macro_ctrl_btn_repeat_start": "Start Repeat",
    "macro_ctrl_btn_repeat_start_tooltip": "Start repeat execution",
    "macro_ctrl_btn_repeat_stop": "Stop Repeat",
    "macro_ctrl_btn_repeat_stop_tooltip": "Stop repeat execution",
    "macro_ctrl_grp_execution": "Execution Control",
    "macro_ctrl_input_prefix_tooltip": "Prefix to add before command",
    "macro_ctrl_spin_repeat_tooltip": "Number of times to repeat",
    "macro_ctrl_input_suffix_tooltip": "Suffix to add after command",
    "macro_ctrl_lbl_interval": "Interval (ms)",
    "macro_ctrl_lbl_prefix": "Prefix",
    "macro_ctrl_lbl_repeat_max": "Repeat",
    "macro_ctrl_lbl_suffix": "Suffix",
    "macro_list_btn_add_cmd_tooltip": "Add new command",
    "macro_list_btn_del_cmd_tooltip": "Delete selected command",
    "macro_list_btn_down_cmd_tooltip": "Move command down",
    "macro_list_btn_send": "Send",
    "macro_list_btn_up_cmd_tooltip": "Move command up",
    "macro_list_chk_select_all": "All",
    "macro_list_chk_select_all_tooltip": "Select/Deselect all commands",
    "macro_list_col_command": "Command",
    "macro_list_col_delay": "Delay(ms)",
    "macro_list_col_hex": "HEX",
    "macro_list_col_prefix": "Prefix",
    "macro_list_col_send": "Send",
    "macro_list_col_suffix": "Suffix",
    "macro_list_table_cmd": "Macro List",
    "file_prog_btn_cancel": "Cancel",
    "file_prog_lbl_eta_placeholder": "ETA: --:--",
    "file_prog_lbl_status_completed": "Completed",
    "file_prog_lbl_status_failed": "Failed",
    "file_prog_lbl_status_ready": "Ready",
    "file_prog_lbl_status_sending": "Sending",
    "main_menu_about": "About",
    "main_menu_exit": "Exit",
    "main_menu_exit_tooltip": "Exit application",
    "main_menu_file": "File",
    "main_menu_font": "Font",
    "main_menu_font_tooltip": "Font settings",
    "main_menu_help": "Help",
    "main_menu_lang_en": "English",
    "main_menu_lang_ko": "í•œêµ­ì–´",
    "main_menu_lang": "Language",
    "main_menu_new_tab": "New Tab",
    "main_menu_new_tab_tooltip": "Create new tab",
    "main_menu_preferences": "Preferences",
    "main_menu_theme": "Theme",
    "main_menu_theme_dark": "Dark",
    "main_menu_theme_light": "Light",
    "main_menu_tools": "Tools",
    "main_menu_view": "View",
    "main_menu_open_port": "Open Port",
    "main_menu_close_tab": "Close Tab",
    "main_menu_save_log": "Save Log",
    "main_menu_toggle_right_panel": "Show Right Panel",
    "toolbar_open": "Open",
    "toolbar_close": "Close",
    "toolbar_clear": "Clear",
    "toolbar_save_log": "Save Log",
    "toolbar_settings": "Settings",
    "macro_ctrl_btn_repeat_pause": "Pause",
    "macro_ctrl_btn_repeat_pause_tooltip": "Pause repeat execution",
    "pref_lbl_newline": "Newline",
    "main_status_msg_ready": "Ready",
    "manual_ctrl_btn_clear": "Clear",
    "manual_ctrl_btn_clear_tooltip": "Clear received data",
    "manual_ctrl_btn_save_log": "Save Log",
    "manual_ctrl_btn_save_log_tooltip": "Save log to file",
    "manual_ctrl_btn_select_file": "Select File",
    "manual_ctrl_btn_send": "Send",
    "manual_ctrl_btn_send_file": "Send File",
    "manual_ctrl_chk_dtr": "DTR",
    "manual_ctrl_chk_dtr_tooltip": "Data Terminal Ready signal",
    "manual_ctrl_chk_enter": "Add Enter",
    "manual_ctrl_chk_hex": "HEX",
    "manual_ctrl_chk_hex_tooltip": "Send as HEX format",
    "manual_ctrl_chk_prefix": "Prefix",
    "manual_ctrl_chk_rts": "RTS",
    "manual_ctrl_chk_rts_tooltip": "Request To Send signal",
    "manual_ctrl_chk_suffix": "Suffix",
    "manual_ctrl_dialog_file_filter_all": "All Files",
    "manual_ctrl_dialog_file_filter_txt": "Text Files",
    "manual_ctrl_dialog_save_log_title": "Save Log",
    "manual_ctrl_dialog_select_file": "Select File to Send",
    "manual_ctrl_grp_control": "Control Options",
    "manual_ctrl_grp_file": "File Transfer",
    "manual_ctrl_grp_format": "Format",
    "manual_ctrl_grp_manual": "Manual Send",
    "manual_ctrl_input_cmd_placeholder": "Enter command...",
    "manual_ctrl_lbl_file_path_no_file": "No file selected",
    "inspector_col_field": "Field",
    "inspector_col_value": "Value",
    "inspector_grp_title": "Packet Inspector",
    "port_btn_connect": "Open",
    "port_btn_connect_tooltip": "Open serial port",
    "port_btn_reconnect": "Reconnect",
    "port_btn_disconnect": "Close",
    "port_btn_scan": "Scan",
    "port_btn_scan_tooltip": "Scan available ports",
    "port_combo_baud_tooltip": "Select baud rate",
    "port_combo_datasize_tooltip": "Select data bits",
    "port_combo_flow_tooltip": "Select flow control",
    "port_combo_parity_tooltip": "Select parity bit",
    "port_combo_port_tooltip": "Select serial port",
    "port_combo_stopbits_tooltip": "Select stop bits",
    "port_combo_tooltip": "Select serial port",
    "port_grp_settings": "Port Settings",
    "port_lbl_baudrate": "Baud",
    "port_lbl_datasize": "Data",
    "port_lbl_flow": "Flow",
    "port_lbl_parity": "Parity",
    "port_lbl_port": "Port",
    "port_lbl_stop": "Stop",
    "recv_btn_clear": "Clear",
    "recv_btn_clear_tooltip": "Clear received log",
    "recv_btn_search_next_tooltip": "Find next",
    "recv_btn_search_prev_tooltip": "Find previous",
    "recv_btn_save": "Save",
    "recv_btn_save_tooltip": "Save log to file",
    "recv_chk_hex": "HEX",
    "recv_chk_hex_tooltip": "Display as HEX format",
    "recv_chk_pause": "Pause",
    "recv_chk_pause_tooltip": "Pause receiving",
    "recv_chk_timestamp": "Timestamp",
    "recv_chk_timestamp_tooltip": "Show timestamp",
    "recv_input_search_placeholder": "Search...",
    "recv_input_search_tooltip": "Search in received data",
    "recv_title": "RX Log",
    "recv_txt_log_placeholder": "Received data will be displayed here...",
    "status_title": "Status Log",
    "status_txt_log_placeholder": "System status messages will appear here...",
    "status_txt_log_tooltip": "System status and error messages",
    "macro_list_dialog_title_open": "Open Command Script",
    "macro_list_dialog_title_save": "Save Command Script",
    "about_btn_close": "Close",
    "about_lbl_app_name": "Serial Tool",
    "about_lbl_copyright": "Â© 2024 All rights reserved",
    "about_lbl_description": "A versatile serial communication tool",
    "about_lbl_version": "Version 1.0.0",
    "about_title": "About Serial Tool",
    "font_btn_reset": "Reset to Default",
    "font_btn_reset_tooltip": "Reset fonts to system default",
    "font_grp_fixed": "Fixed-width Font (for code/data)",
    "font_grp_fixed_tooltip": "Font used for code and data display",
    "font_grp_proportional": "Proportional Font (for UI)",
    "font_grp_proportional_tooltip": "Font used for general UI elements",
    "font_lbl_font": "Font",
    "font_lbl_preview": "Preview",
    "font_lbl_size": "Size",
    "font_title_settings": "Font Settings",
    "pref_btn_apply": "Apply",
    "pref_btn_browse": "Browse...",
    "pref_btn_cancel": "Cancel",
    "pref_btn_ok": "OK",
    "pref_dialog_title_select_dir": "Select Directory",
    "pref_grp_cmd_format": "Command Format",
    "pref_grp_default": "Default Settings",
    "pref_grp_logging": "File Logging",
    "pref_grp_ui": "UI Appearance",
    "pref_lbl_baud": "Default Baud Rate",
    "pref_lbl_font_size": "Font Size",
    "pref_lbl_language": "Language",
    "pref_lbl_log_path": "Log Path",
    "pref_lbl_max_lines": "Max Lines",
    "pref_lbl_prefix": "Default Prefix",
    "pref_lbl_scan": "Scan Interval",
    "pref_lbl_suffix": "Default Suffix",
    "pref_lbl_theme": "Theme",
    "pref_tab_command": "Command",
    "pref_tab_general": "General",
    "pref_tab_logging": "Logging",
    "pref_tab_serial": "Serial",
    "pref_title": "Preferences",
    "left_tooltip_port_tab": "Port configuration",
    "right_macro_panel_tooltip": "Manage macro list",
    "right_packet_inspector_tooltip": "Inspect packet structure",
    "right_tab_macro_list": "Macro List",
    "right_tab_packet": "Inspector",
    "right_tooltip_macro_list": "Macro list panel",
    "right_tooltip_packet": "Packet inspector panel"
}
</file>

<file path="view/widgets/received_area.py">
from PyQt5.QtWidgets import QTextEdit, QWidget, QVBoxLayout, QHBoxLayout, QPushButton, QCheckBox, QLabel, QLineEdit
from PyQt5.QtCore import QTimer, Qt
from PyQt5.QtGui import QTextCursor, QTextDocument
from typing import Optional
import datetime
from view.color_rules import ColorRulesManager
from view.lang_manager import lang_manager

class ReceivedAreaWidget(QWidget):
    """
    ìˆ˜ì‹ ëœ ì‹œë¦¬ì–¼ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    í…ìŠ¤íŠ¸/HEX ëª¨ë“œ ì „í™˜, ì¼ì‹œ ì •ì§€, íƒ€ì„ìŠ¤íƒ¬í”„ í‘œì‹œ, ë¡œê·¸ ì €ì¥ ë° ì§€ìš°ê¸° ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
    """

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        ReceivedAreaë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.recv_search_prev_btn = None
        self.recv_search_input = None
        self.recv_save_log_btn = None
        self.recv_pause_chk = None
        self.recv_timestamp_chk = None
        self.recv_hex_chk = None
        self.recv_clear_log_btn = None
        self.hex_mode: bool = False
        self.paused: bool = False
        self.batch_buffer: list[str] = []
        self.max_lines: int = 2000
        self.timestamp_enabled: bool = False

        # ìƒ‰ìƒ ê·œì¹™ ê´€ë¦¬ì
        self.color_manager = ColorRulesManager()

        self.init_ui()

        # ë°°ì¹˜ ë Œë”ë§ íƒ€ì´ë¨¸ (ì„±ëŠ¥ ìµœì í™”)
        self.batch_timer: QTimer = QTimer()
        self.batch_timer.setInterval(50) # 50ms ê°„ê²©
        self.batch_timer.timeout.connect(self.flush_batch)
        self.batch_timer.start()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(2)

        # íˆ´ë°” (Toolbar)
        toolbar = QHBoxLayout()

        self.recv_clear_log_btn = QPushButton(lang_manager.get_text("recv_btn_clear"))
        self.recv_clear_log_btn.setToolTip(lang_manager.get_text("recv_btn_clear_tooltip"))
        self.recv_clear_log_btn.clicked.connect(self.on_clear_recv_log_clicked)

        self.recv_hex_chk = QCheckBox(lang_manager.get_text("recv_chk_hex"))
        self.recv_hex_chk.setToolTip(lang_manager.get_text("recv_chk_hex_tooltip"))
        self.recv_hex_chk.stateChanged.connect(self.on_recv_hex_mode_changed)

        self.recv_timestamp_chk = QCheckBox(lang_manager.get_text("recv_chk_timestamp"))
        self.recv_timestamp_chk.setToolTip(lang_manager.get_text("recv_chk_timestamp_tooltip"))
        self.recv_timestamp_chk.stateChanged.connect(self.on_recv_timestamp_changed)

        self.recv_pause_chk = QCheckBox(lang_manager.get_text("recv_chk_pause"))
        self.recv_pause_chk.setToolTip(lang_manager.get_text("recv_chk_pause_tooltip"))
        self.recv_pause_chk.stateChanged.connect(self.on_recv_pause_changed)

        self.recv_save_log_btn = QPushButton(lang_manager.get_text("recv_btn_save"))
        self.recv_save_log_btn.setToolTip(lang_manager.get_text("recv_btn_save_tooltip"))

        # ê²€ìƒ‰ ë°” (Search Bar)
        self.recv_search_input = QLineEdit()
        self.recv_search_input.setPlaceholderText(lang_manager.get_text("recv_input_search_placeholder"))
        self.recv_search_input.setToolTip(lang_manager.get_text("recv_input_search_tooltip"))
        self.recv_search_input.returnPressed.connect(self.on_recv_search_next_clicked)
        self.recv_search_input.setMaximumWidth(200)

        self.recv_search_prev_btn = QPushButton()
        self.recv_search_prev_btn.setObjectName("recv_search_prev_btn")
        self.recv_search_prev_btn.setToolTip(lang_manager.get_text("recv_btn_search_prev_tooltip"))
        self.recv_search_prev_btn.setFixedWidth(30)
        self.recv_search_prev_btn.clicked.connect(self.on_recv_search_prev_clicked)

        self.recv_search_next_btn = QPushButton()
        self.recv_search_next_btn.setObjectName("recv_search_next_btn")
        self.recv_search_next_btn.setToolTip(lang_manager.get_text("recv_btn_search_next_tooltip"))
        self.recv_search_next_btn.setFixedWidth(30)
        self.recv_search_next_btn.clicked.connect(self.on_recv_search_next_clicked)

        self.recv_log_title = QLabel(lang_manager.get_text("recv_title"))

        toolbar.addWidget(self.recv_log_title)
        toolbar.addStretch()
        toolbar.addWidget(self.recv_search_input)
        toolbar.addWidget(self.recv_search_prev_btn)
        toolbar.addWidget(self.recv_search_next_btn)
        toolbar.addWidget(self.recv_hex_chk)
        toolbar.addWidget(self.recv_timestamp_chk)
        toolbar.addWidget(self.recv_pause_chk)
        toolbar.addWidget(self.recv_clear_log_btn)
        toolbar.addWidget(self.recv_save_log_btn)

        # ë¡œê·¸ í‘œì‹œ ì˜ì—­ (Log Display Area)
        self.log_txt = QTextEdit()
        self.log_txt.setReadOnly(True)
        self.log_txt.setPlaceholderText(lang_manager.get_text("recv_txt_log_placeholder"))
        self.log_txt.setToolTip(lang_manager.get_text("recv_title"))
        self.log_txt.setProperty("class", "fixed-font")  # ê³ ì •í­ í°íŠ¸ ì ìš©

        layout.addLayout(toolbar)
        layout.addWidget(self.log_txt)
        self.setLayout(layout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.recv_clear_log_btn.setText(lang_manager.get_text("recv_btn_clear"))
        self.recv_clear_log_btn.setToolTip(lang_manager.get_text("recv_btn_clear_tooltip"))

        self.recv_hex_chk.setText(lang_manager.get_text("recv_chk_hex"))
        self.recv_hex_chk.setToolTip(lang_manager.get_text("recv_chk_hex_tooltip"))

        self.recv_timestamp_chk.setText(lang_manager.get_text("recv_chk_timestamp"))
        self.recv_timestamp_chk.setToolTip(lang_manager.get_text("recv_chk_timestamp_tooltip"))

        self.recv_pause_chk.setText(lang_manager.get_text("recv_chk_pause"))
        self.recv_pause_chk.setToolTip(lang_manager.get_text("recv_chk_pause_tooltip"))

        self.recv_save_log_btn.setText(lang_manager.get_text("recv_btn_save"))
        self.recv_save_log_btn.setToolTip(lang_manager.get_text("recv_btn_save_tooltip"))

        self.recv_search_input.setPlaceholderText(lang_manager.get_text("recv_input_search_placeholder"))
        self.recv_search_input.setToolTip(lang_manager.get_text("recv_input_search_tooltip"))

        self.recv_search_prev_btn.setToolTip(lang_manager.get_text("recv_btn_search_prev_tooltip"))
        self.recv_search_next_btn.setToolTip(lang_manager.get_text("recv_btn_search_next_tooltip"))

        self.recv_log_title.setText(lang_manager.get_text("recv_title"))

        self.log_txt.setToolTip(lang_manager.get_text("recv_title"))
        self.log_txt.setPlaceholderText(lang_manager.get_text("recv_txt_log_placeholder"))

    def on_recv_search_next_clicked(self) -> None:
        """ë‹¤ìŒ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì°¾ìŠµë‹ˆë‹¤."""
        text = self.recv_search_input.text()
        if not text:
            return

        # ì •ê·œì‹ ê²€ìƒ‰ ì˜µì…˜ ì„¤ì •
        options = QTextDocument.FindFlags()

        # ì •ê·œì‹ ì‚¬ìš© ì‹œë„
        import re
        try:
            re.compile(text)
            # Qtì˜ FindRegularExpression í”Œë˜ê·¸ ì‚¬ìš© (PyQt5 ë²„ì „ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ)
            # ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ ì¼ë°˜ í…ìŠ¤íŠ¸ ê²€ìƒ‰ìœ¼ë¡œ êµ¬í˜„í•˜ê³  ì¶”í›„ í™•ì¥
            # Note: í–¥í›„ QRegularExpressionì„ ì‚¬ìš©í•œ ì •ê·œì‹ ê²€ìƒ‰ ì§€ì› ì˜ˆì •
            # í˜„ì¬ëŠ” ì¼ë°˜ í…ìŠ¤íŠ¸ ê²€ìƒ‰ë§Œ ì§€ì›
        except re.error:
            pass # ì •ê·œì‹ ì˜¤ë¥˜ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì·¨ê¸‰

        found = self.log_txt.find(text, options)
        if not found:
            # ì²˜ìŒë¶€í„° ë‹¤ì‹œ ê²€ìƒ‰ (Wrap around)
            self.log_txt.moveCursor(QTextCursor.Start)
            self.log_txt.find(text, options)

    def on_recv_search_prev_clicked(self) -> None:
        """ì´ì „ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì°¾ìŠµë‹ˆë‹¤."""
        text = self.recv_search_input.text()
        if not text:
            return

        options = QTextDocument.FindBackward
        found = self.log_txt.find(text, options)
        if not found:
            # ëì—ì„œë¶€í„° ë‹¤ì‹œ ê²€ìƒ‰ (Wrap around)
            self.log_txt.moveCursor(QTextCursor.End)
            self.log_txt.find(text, options)

    def append_data(self, data: bytes) -> None:
        """
        ìˆ˜ì‹ ëœ ë°ì´í„°ë¥¼ ë²„í¼ì— ì¶”ê°€í•©ë‹ˆë‹¤.

        Args:
            data (bytes): ìˆ˜ì‹ ëœ ë°”ì´íŠ¸ ë°ì´í„°.
        """
        if self.paused:
            return

        text: str = ""
        if self.hex_mode:
            text = " ".join([f"{b:02X}" for b in data]) + " "
        else:
            try:
                text = data.decode('utf-8', errors='replace')
            except Exception:
                text = str(data)

        # íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€
        if self.timestamp_enabled:
            ts = datetime.datetime.now().strftime("[%H:%M:%S]")
            text = f'<span style="color:#9E9E9E;">{ts}</span> {text}'

        # ìƒ‰ìƒ ê·œì¹™ ì ìš© (í…ìŠ¤íŠ¸ ëª¨ë“œì¼ ë•Œë§Œ)
        if not self.hex_mode:
            text = self.color_manager.apply_rules(text)

        self.batch_buffer.append(text)

    def flush_batch(self) -> None:
        """ë²„í¼ì— ìŒ“ì¸ ë°ì´í„°ë¥¼ UIì— ì¼ê´„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        if not self.batch_buffer:
            return

        text = "".join(self.batch_buffer)
        self.log_txt.moveCursor(QTextCursor.End)
        self.log_txt.insertHtml(text)  # ìƒ‰ìƒ ì§€ì›ì„ ìœ„í•´ insertHtml ì‚¬ìš©
        self.batch_buffer.clear()

        # ìë™ ìŠ¤í¬ë¡¤ (Auto Scroll)
        sb = self.log_txt.verticalScrollBar()
        if sb:
            sb.setValue(sb.maximum())

        # í•„ìš” ì‹œ ì˜¤ë˜ëœ ë¡œê·¸ ì‚­ì œ (Trim)
        self._trim_if_needed()

    def on_clear_recv_log_clicked(self) -> None:
        """ë¡œê·¸ ë·°ì™€ ë²„í¼ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        self.log_txt.clear()
        self.batch_buffer.clear()

    def on_recv_hex_mode_changed(self, state: int) -> None:
        """
        HEX ëª¨ë“œ í† ê¸€ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

        Args:
            state (int): ì²´í¬ë°•ìŠ¤ ìƒíƒœ (Qt.Checked ë“±).
        """
        self.hex_mode = (state == Qt.Checked)

    def on_recv_timestamp_changed(self, state: int) -> None:
        """
        íƒ€ì„ìŠ¤íƒ¬í”„ í† ê¸€ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

        Args:
            state (int): ì²´í¬ë°•ìŠ¤ ìƒíƒœ.
        """
        self.timestamp_enabled = (state == Qt.Checked)

    def on_recv_pause_changed(self, state: int) -> None:
        """
        ì¼ì‹œ ì •ì§€ í† ê¸€ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

        Args:
            state (int): ì²´í¬ë°•ìŠ¤ ìƒíƒœ.
        """
        self.paused = (state == Qt.Checked)

    def _trim_if_needed(self) -> None:
        """
        ë¡œê·¸ ë¼ì¸ ìˆ˜ê°€ ìµœëŒ€ì¹˜ë¥¼ ì´ˆê³¼í•˜ë©´ ìƒìœ„ 20%ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
        (Implementation_Specification.md ì„¹ì…˜ 18.3.2 ê¸°ì¤€)
        """
        document = self.log_txt.document()
        if document.blockCount() > self.max_lines:
            # ì‚¬ìš©ìê°€ ìŠ¤í¬ë¡¤ ì¤‘ì¸ì§€ í™•ì¸
            sb = self.log_txt.verticalScrollBar()
            if sb:
                at_bottom = sb.value() >= (sb.maximum() - 10)

                if at_bottom:  # ìë™ ìŠ¤í¬ë¡¤ ëª¨ë“œì¼ ë•Œë§Œ trim ìˆ˜í–‰
                    cursor = QTextCursor(document)
                    cursor.movePosition(QTextCursor.Start)
                    # ìƒìœ„ 20% (400ì¤„) ì„ íƒ ë° ì‚­ì œ
                    for _ in range(400):
                        cursor.movePosition(QTextCursor.Down, QTextCursor.KeepAnchor)
                    cursor.removeSelectedText()
    def save_state(self) -> dict:
        """
        í˜„ì¬ ìœ„ì ¯ ìƒíƒœë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            dict: ìœ„ì ¯ ìƒíƒœ.
        """
        state = {
            "hex_mode": self.hex_mode,
            "timestamp": self.timestamp_enabled,
            "paused": self.paused,
            "search_text": self.recv_search_input.text()
        }
        return state

    def load_state(self, state: dict) -> None:
        """
        ì €ì¥ëœ ìƒíƒœë¥¼ ìœ„ì ¯ì— ì ìš©í•©ë‹ˆë‹¤.

        Args:
            state (dict): ìœ„ì ¯ ìƒíƒœ.
        """
        if not state:
            return

        # ì²´í¬ë°•ìŠ¤ ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‹œê·¸ë„ ë°œìƒìœ¼ë¡œ ë‚´ë¶€ ë³€ìˆ˜ë„ ì—…ë°ì´íŠ¸ë¨)
        self.recv_hex_chk.setChecked(state.get("hex_mode", False))
        self.recv_timestamp_chk.setChecked(state.get("timestamp", False))
        self.recv_pause_chk.setChecked(state.get("paused", False))
        self.recv_search_input.setText(state.get("search_text", ""))
</file>

<file path="view/dialogs/preferences_dialog.py">
from PyQt5.QtWidgets import (
    QDialog, QVBoxLayout, QHBoxLayout, QTabWidget, QWidget,
    QLabel, QComboBox, QSpinBox, QPushButton,
    QFileDialog, QGroupBox, QFormLayout
)
from PyQt5.QtCore import pyqtSignal
from typing import Dict, Any, Optional
import os
from view.lang_manager import lang_manager

class PreferencesDialog(QDialog):
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” ëŒ€í™”ìƒìì…ë‹ˆë‹¤.
    General, Serial, Logging íƒ­ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
    MVP íŒ¨í„´ì„ ì¤€ìˆ˜í•˜ì—¬ SettingsManagerì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šê³ 
    ë¶€ëª¨ë¡œë¶€í„° ì „ë‹¬ë°›ì€ ì„¤ì •ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
    """

    settings_changed = pyqtSignal(dict)  # ë³€ê²½ëœ ì„¤ì • ë”•ì…”ë„ˆë¦¬ ì „ì†¡

    def __init__(self, parent: Optional[QWidget] = None, current_settings: Dict[str, Any] = None) -> None:
        super().__init__(parent)
        self.setWindowTitle(lang_manager.get_text("pref_title"))
        self.resize(500, 400)
        self.current_settings = current_settings or {}
        self.init_ui()
        self.load_settings()

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()

        # íƒ­ ìœ„ì ¯ ìƒì„±
        self.tabs = QTabWidget()
        self.tabs.addTab(self.create_general_tab(), lang_manager.get_text("pref_tab_general"))
        self.tabs.addTab(self.create_serial_tab(), lang_manager.get_text("pref_tab_serial"))
        self.tabs.addTab(self.create_cmd_tab(), lang_manager.get_text("pref_tab_command")) # New Tab
        self.tabs.addTab(self.create_logging_tab(), lang_manager.get_text("pref_tab_logging"))

        layout.addWidget(self.tabs)

        # í•˜ë‹¨ ë²„íŠ¼ (OK / Cancel / Apply)
        btn_layout = QHBoxLayout()
        btn_layout.addStretch()

        self.ok_btn = QPushButton(lang_manager.get_text("pref_btn_ok"))
        self.ok_btn.clicked.connect(self.accept)

        self.cancel_btn = QPushButton(lang_manager.get_text("pref_btn_cancel"))
        self.cancel_btn.clicked.connect(self.reject)

        self.apply_btn = QPushButton(lang_manager.get_text("pref_btn_apply"))
        self.apply_btn.clicked.connect(self.apply_settings)

        btn_layout.addWidget(self.ok_btn)
        btn_layout.addWidget(self.cancel_btn)
        btn_layout.addWidget(self.apply_btn)

        layout.addLayout(btn_layout)
        self.setLayout(layout)

    def create_general_tab(self) -> QWidget:
        """General ì„¤ì • íƒ­ì„ ìƒì„±í•©ë‹ˆë‹¤."""
        widget = QWidget()
        layout = QVBoxLayout()

        # UI Appearance ê·¸ë£¹
        ui_group = QGroupBox(lang_manager.get_text("pref_grp_ui"))
        ui_layout = QFormLayout()

        self.theme_combo = QComboBox()
        self.theme_combo.addItems(["Dark", "Light", "System"])

        self.language_combo = QComboBox()
        self.language_combo.addItem("English", "en")
        self.language_combo.addItem("Korean", "ko")

        self.proportional_font_size_spin = QSpinBox()
        self.proportional_font_size_spin.setRange(8, 24)
        self.proportional_font_size_spin.setValue(10)

        ui_layout.addRow(lang_manager.get_text("pref_lbl_theme"), self.theme_combo)
        ui_layout.addRow(lang_manager.get_text("pref_lbl_language"), self.language_combo)
        ui_layout.addRow(lang_manager.get_text("pref_lbl_font_size"), self.proportional_font_size_spin)
        ui_group.setLayout(ui_layout)

        layout.addWidget(ui_group)
        layout.addStretch()
        widget.setLayout(layout)
        return widget

    def create_serial_tab(self) -> QWidget:
        """Serial ì„¤ì • íƒ­ì„ ìƒì„±í•©ë‹ˆë‹¤."""
        widget = QWidget()
        layout = QVBoxLayout()

        # Defaults ê·¸ë£¹
        default_group = QGroupBox(lang_manager.get_text("pref_grp_default"))
        default_layout = QFormLayout()

        self.port_baud_combo = QComboBox()
        self.port_baud_combo.addItems(["9600", "115200", "921600"])
        self.port_baud_combo.setEditable(True)

        self.port_newline_combo = QComboBox()
        self.port_newline_combo.addItems(["\r", "\n", "\r\n"])
        self.port_newline_combo.setEditable(True)

        self.port_scan_interval_spin = QSpinBox()
        self.port_scan_interval_spin.setRange(1000, 60000)
        self.port_scan_interval_spin.setSingleStep(1000)
        self.port_scan_interval_spin.setSuffix(" ms")

        default_layout.addRow(lang_manager.get_text("pref_lbl_baud"), self.port_baud_combo)
        default_layout.addRow(lang_manager.get_text("pref_lbl_newline"), self.port_newline_combo)
        default_layout.addRow(lang_manager.get_text("pref_lbl_scan"), self.port_scan_interval_spin)
        default_group.setLayout(default_layout)

        layout.addWidget(default_group)
        layout.addStretch()
        widget.setLayout(layout)
        return widget

    def create_cmd_tab(self) -> QWidget:
        """Command ì„¤ì • íƒ­ì„ ìƒì„±í•©ë‹ˆë‹¤."""
        widget = QWidget()
        layout = QVBoxLayout()

        # Prefix/Suffix ê·¸ë£¹
        format_group = QGroupBox(lang_manager.get_text("pref_grp_cmd_format"))
        format_layout = QFormLayout()

        self.prefix_combo = QComboBox()
        self.prefix_combo.setEditable(True)
        self.prefix_combo.addItems(["", "\\r", "\\n", "\\r\\n", "AT", "AT+"])

        self.suffix_combo = QComboBox()
        self.suffix_combo.setEditable(True)
        self.suffix_combo.addItems(["", "\\r", "\\n", "\\r\\n"])

        format_layout.addRow(lang_manager.get_text("pref_lbl_prefix"), self.prefix_combo)
        format_layout.addRow(lang_manager.get_text("pref_lbl_suffix"), self.suffix_combo)
        format_group.setLayout(format_layout)

        layout.addWidget(format_group)
        layout.addStretch()
        widget.setLayout(layout)
        return widget

    def create_logging_tab(self) -> QWidget:
        """Logging ì„¤ì • íƒ­ì„ ìƒì„±í•©ë‹ˆë‹¤."""
        widget = QWidget()
        layout = QVBoxLayout()

        # File Logging ê·¸ë£¹
        file_group = QGroupBox(lang_manager.get_text("pref_grp_logging"))
        file_layout = QFormLayout()

        path_layout = QHBoxLayout()
        self.log_path_edit = QLabel("Default Path")
        self.log_path_edit.setFrameStyle(QLabel.Sunken | QLabel.Panel)
        self.browse_btn = QPushButton(lang_manager.get_text("pref_btn_browse"))
        self.browse_btn.clicked.connect(self.browse_log_path)

        path_layout.addWidget(self.log_path_edit)
        path_layout.addWidget(self.browse_btn)

        self.max_lines_spin = QSpinBox()
        self.max_lines_spin.setRange(100, 100000)
        self.max_lines_spin.setSingleStep(100)

        file_layout.addRow(lang_manager.get_text("pref_lbl_log_path"), path_layout)
        file_layout.addRow(lang_manager.get_text("pref_lbl_max_lines"), self.max_lines_spin)
        file_group.setLayout(file_layout)

        layout.addWidget(file_group)
        layout.addStretch()
        widget.setLayout(layout)
        return widget

    def browse_log_path(self) -> None:
        """ë¡œê·¸ ì €ì¥ ê²½ë¡œ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ ì—½ë‹ˆë‹¤."""
        directory = QFileDialog.getExistingDirectory(self, lang_manager.get_text("pref_dialog_title_select_dir"))
        if directory:
            self.log_path_edit.setText(directory)

    def _get_setting(self, key: str, default: Any = None) -> Any:
        """
        ì¤‘ì²©ëœ ì„¤ì • í‚¤ì— ì•ˆì „í•˜ê²Œ ì ‘ê·¼í•©ë‹ˆë‹¤.

        Args:
            key (str): ì (.)ìœ¼ë¡œ êµ¬ë¶„ëœ ì„¤ì • í‚¤ (ì˜ˆ: "settings.theme")
            default (Any): í‚¤ê°€ ì—†ì„ ë•Œ ë°˜í™˜í•  ê¸°ë³¸ê°’

        Returns:
            Any: ì„¤ì • ê°’ ë˜ëŠ” ê¸°ë³¸ê°’
        """
        keys = key.split('.')
        value = self.current_settings

        for k in keys:
            if isinstance(value, dict) and k in value:
                value = value[k]
            else:
                return default

        return value

    def load_settings(self) -> None:
        """í˜„ì¬ ì„¤ì •ì„ UIì— ë°˜ì˜í•©ë‹ˆë‹¤."""
        # General
        theme = self._get_setting("settings.theme", "Dark").capitalize()
        self.theme_combo.setCurrentText(theme)

        lang_code = self._get_setting("settings.language", "en")
        index = self.language_combo.findData(lang_code)
        if index != -1:
            self.language_combo.setCurrentIndex(index)

        self.proportional_font_size_spin.setValue(self._get_setting("settings.proportional_font_size", 10))
        self.max_lines_spin.setValue(self._get_setting("settings.recv_max_lines", 2000))

        # Serial
        self.port_baud_combo.setCurrentText(str(self._get_setting("settings.port_baudrate", 115200)))
        self.port_newline_combo.setCurrentText(str(self._get_setting("settings.port_newline", "\n")))
        self.port_scan_interval_spin.setValue(self._get_setting("settings.port_scan_interval", 5000))

        # Command
        self.prefix_combo.setCurrentText(self._get_setting("settings.cmd_prefix", ""))
        self.suffix_combo.setCurrentText(self._get_setting("settings.cmd_suffix", ""))

        # Logging
        self.log_path_edit.setText(self._get_setting("logging.path", os.getcwd()))

    def apply_settings(self) -> None:
        """ë³€ê²½ëœ ì„¤ì •ì„ ìˆ˜ì§‘í•˜ì—¬ ì‹œê·¸ë„ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤."""
        new_settings = {
            "theme": self.theme_combo.currentText(),
            "language": self.language_combo.currentData(),
            "proportional_font_size": self.proportional_font_size_spin.value(),
            "port_baudrate": self.port_baud_combo.currentText(),
            "port_newline": self.port_newline_combo.currentText(),
            "port_scan_interval": self.port_scan_interval_spin.value(),
            "cmd_prefix": self.prefix_combo.currentText(),
            "cmd_suffix": self.suffix_combo.currentText(),
            "log_path": self.log_path_edit.text(),
            "max_log_lines": self.max_lines_spin.value()
        }
        self.settings_changed.emit(new_settings)

    def accept(self) -> None:
        """OK ë²„íŠ¼ í´ë¦­ ì‹œ ì„¤ì •ì„ ì ìš©í•˜ê³  ë‹«ìŠµë‹ˆë‹¤."""
        self.apply_settings()
        super().accept()
</file>

<file path="view/widgets/port_settings.py">
from PyQt5.QtWidgets import (
    QWidget, QVBoxLayout, QHBoxLayout, QComboBox, QPushButton,
    QLabel, QGroupBox, QCheckBox
)
from PyQt5.QtCore import pyqtSignal
from PyQt5.QtGui import QIntValidator
from view.lang_manager import lang_manager
from typing import Optional, List, Dict, Any

class PortSettingsWidget(QGroupBox):
    """
    ì‹œë¦¬ì–¼ í¬íŠ¸ ì„¤ì •(Baudrate, Parity ë“±)ì„ ì œì–´í•˜ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    í¬íŠ¸ ìŠ¤ìº”, ì—°ê²°/í•´ì œ ë° í†µì‹  íŒŒë¼ë¯¸í„° ì„¤ì •ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
    """

    # ì‹œê·¸ë„ ì •ì˜
    port_open_requested = pyqtSignal(dict)  # config dict
    port_close_requested = pyqtSignal()
    port_scan_requested = pyqtSignal()
    connection_state_changed = pyqtSignal(bool)  # connected state

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        PortSettingsWidgetì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(lang_manager.get_text("port_grp_settings"), parent)
        self.flow_lbl = None
        self.stopbits_lbl = None
        self.parity_lbl = None
        self.datasize_lbl = None
        self.rts_check = None
        self.dtr_check = None
        self.flow_combo = None
        self.stopbits_combo = None
        self.parity_combo = None
        self.datasize_combo = None
        self.baud_lbl = None
        self.port_lbl = None
        self.connect_btn = None
        self.baud_combo = None
        self.baud_validator = None
        self.scan_btn = None
        self.port_combo = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        main_layout = QVBoxLayout()
        main_layout.setContentsMargins(5, 5, 5, 5)
        main_layout.setSpacing(5)

        # 1í–‰: Port | Scan | Baud | Open
        row1_layout = QHBoxLayout()
        row1_layout.setSpacing(5)

        # í¬íŠ¸ ì„ íƒ ì½¤ë³´ë°•ìŠ¤
        self.port_combo = QComboBox()
        self.port_combo.setMinimumWidth(80)
        self.port_combo.setToolTip(lang_manager.get_text("port_combo_port_tooltip"))

        self.scan_btn = QPushButton(lang_manager.get_text("port_btn_scan"))
        self.scan_btn.setFixedWidth(50)
        self.scan_btn.setToolTip(lang_manager.get_text("port_btn_scan_tooltip"))
        self.scan_btn.clicked.connect(self.on_port_scan_clicked)

        # ë³´ë“œë ˆì´íŠ¸ ì„ íƒ ì½¤ë³´ë°•ìŠ¤
        self.baud_combo = QComboBox()
        self.baud_combo.setMinimumWidth(80)
        self.baud_combo.setToolTip(lang_manager.get_text("port_combo_baud_tooltip"))
        self.baud_combo.addItems([
            "9600", "19200", "38400", "57600", "115200",
            "230400", "460800", "921600", "1000000", "2000000", "4000000"
        ])
        self.baud_combo.setCurrentText("115200")
        self.baud_combo.setEditable(True)
        # Baudrate ìœ íš¨ì„± ê²€ì‚¬ (50 ~ 4000000)
        self.baud_validator = QIntValidator(50, 4000000)
        self.baud_combo.setValidator(self.baud_validator)

        # ì—°ê²° ë²„íŠ¼
        self.connect_btn = QPushButton(lang_manager.get_text("port_btn_connect"))
        self.connect_btn.setCheckable(True)
        self.connect_btn.setToolTip(lang_manager.get_text("port_btn_connect_tooltip"))
        self.connect_btn.clicked.connect(self.on_connect_clicked)
        self.connect_btn.setFixedWidth(60)

        self.port_lbl = QLabel(lang_manager.get_text("port_lbl_port"))
        self.baud_lbl = QLabel(lang_manager.get_text("port_lbl_baudrate"))

        row1_layout.addWidget(self.port_lbl)
        row1_layout.addWidget(self.port_combo)
        row1_layout.addWidget(self.scan_btn)
        row1_layout.addWidget(self.baud_lbl)
        row1_layout.addWidget(self.baud_combo)
        row1_layout.addWidget(self.connect_btn)

        main_layout.addLayout(row1_layout)

        # 2í–‰: Data | Parity | Stop | Flow | DTR | RTS
        row2_layout = QHBoxLayout()
        row2_layout.setSpacing(5)

        # ë°ì´í„° ë¹„íŠ¸
        self.datasize_combo = QComboBox()
        self.datasize_combo.addItems(["5", "6", "7", "8"])
        self.datasize_combo.setCurrentText("8")
        self.datasize_combo.setToolTip(lang_manager.get_text("port_combo_datasize_tooltip"))
        self.datasize_combo.setFixedWidth(40)

        # íŒ¨ë¦¬í‹° ë¹„íŠ¸
        self.parity_combo = QComboBox()
        self.parity_combo.addItems(["N", "E", "O", "M", "S"])
        self.parity_combo.setToolTip(lang_manager.get_text("port_combo_parity_tooltip"))
        self.parity_combo.setFixedWidth(40)

        # ì •ì§€ ë¹„íŠ¸
        self.stopbits_combo = QComboBox()
        self.stopbits_combo.addItems(["1", "1.5", "2"])
        self.stopbits_combo.setToolTip(lang_manager.get_text("port_combo_stopbits_tooltip"))
        self.stopbits_combo.setFixedWidth(45)

        # íë¦„ ì œì–´
        self.flow_combo = QComboBox()
        self.flow_combo.addItems(["None", "RTS/CTS", "XON/XOFF"])
        self.flow_combo.setToolTip(lang_manager.get_text("port_combo_flow_tooltip"))
        self.flow_combo.setMinimumWidth(70)

        # ì œì–´ ì‹ í˜¸
        self.dtr_check = QCheckBox("DTR")
        self.dtr_check.setChecked(True)
        self.rts_check = QCheckBox("RTS")
        self.rts_check.setChecked(True)

        self.datasize_lbl = QLabel(lang_manager.get_text("port_lbl_datasize"))
        self.parity_lbl = QLabel(lang_manager.get_text("port_lbl_parity"))
        self.stopbits_lbl = QLabel(lang_manager.get_text("port_lbl_stop"))
        self.flow_lbl = QLabel(lang_manager.get_text("port_lbl_flow"))

        row2_layout.addWidget(self.datasize_lbl)
        row2_layout.addWidget(self.datasize_combo)
        row2_layout.addWidget(self.parity_lbl)
        row2_layout.addWidget(self.parity_combo)
        row2_layout.addWidget(self.stopbits_lbl)
        row2_layout.addWidget(self.stopbits_combo)
        row2_layout.addWidget(self.flow_lbl)
        row2_layout.addWidget(self.flow_combo)
        row2_layout.addWidget(self.dtr_check)
        row2_layout.addWidget(self.rts_check)
        row2_layout.addStretch()

        main_layout.addLayout(row2_layout)

        self.setLayout(main_layout)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.setTitle(lang_manager.get_text("port_grp_settings"))

        self.port_combo.setToolTip(lang_manager.get_text("port_combo_tooltip"))

        self.scan_btn.setText(lang_manager.get_text("port_btn_scan"))
        self.scan_btn.setToolTip(lang_manager.get_text("port_btn_scan_tooltip"))

        self.baud_combo.setToolTip(lang_manager.get_text("port_combo_baud_tooltip"))

        # ì—°ê²° ë²„íŠ¼ í…ìŠ¤íŠ¸ëŠ” ìƒíƒœì— ë”°ë¼ ë‹¤ë¥´ë¯€ë¡œ í˜„ì¬ ìƒíƒœ í™•ì¸ í•„ìš”
        if self.connect_btn.isChecked():
            self.connect_btn.setText(lang_manager.get_text("port_btn_disconnect"))
        else:
            self.connect_btn.setText(lang_manager.get_text("port_btn_connect"))
        self.connect_btn.setToolTip(lang_manager.get_text("port_btn_connect_tooltip"))

        self.port_lbl.setText(lang_manager.get_text("port_lbl_port"))
        self.baud_lbl.setText(lang_manager.get_text("port_lbl_baudrate"))

        self.datasize_combo.setToolTip(lang_manager.get_text("port_combo_datasize_tooltip"))
        self.parity_combo.setToolTip(lang_manager.get_text("port_combo_parity_tooltip"))
        self.stopbits_combo.setToolTip(lang_manager.get_text("port_combo_stopbits_tooltip"))
        self.flow_combo.setToolTip(lang_manager.get_text("port_combo_flow_tooltip"))

        self.datasize_lbl.setText(lang_manager.get_text("port_lbl_datasize"))
        self.parity_lbl.setText(lang_manager.get_text("port_lbl_parity"))
        self.stopbits_lbl.setText(lang_manager.get_text("port_lbl_stop"))
        self.flow_lbl.setText(lang_manager.get_text("port_lbl_flow"))

    def on_connect_clicked(self) -> None:
        """ì—°ê²° ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤."""
        if self.connect_btn.isChecked():
            # ì—°ê²° ìš”ì²­ (Request Open)
            config: Dict[str, Any] = {
                "port": self.port_combo.currentText(),
                "baudrate": int(self.baud_combo.currentText()),
                "datasize": int(self.datasize_combo.currentText()),
                "parity": self.parity_combo.currentText(),
                "stopbits": float(self.stopbits_combo.currentText()),
                "flow": self.flow_combo.currentText(),
                "dtr": self.dtr_check.isChecked(),
                "rts": self.rts_check.isChecked()
            }
            self.port_open_requested.emit(config)
            self.connect_btn.setText(lang_manager.get_text("port_btn_disconnect"))
        else:
            # í•´ì œ ìš”ì²­ (Request Close)
            self.port_close_requested.emit()
            self.connect_btn.setText(lang_manager.get_text("port_btn_connect"))

    def on_port_scan_clicked(self) -> None:
        """í¬íŠ¸ ìŠ¤ìº” ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤."""
        self.port_scan_requested.emit()

    def set_port_list(self, ports: List[str]) -> None:
        """
        í¬íŠ¸ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

        Args:
            ports (List[str]): í¬íŠ¸ ì´ë¦„ ë¦¬ìŠ¤íŠ¸.
        """
        current_port = self.port_combo.currentText()
        self.port_combo.clear()
        self.port_combo.addItems(ports)

        # ì´ì „ì— ì„ íƒëœ í¬íŠ¸ê°€ ëª©ë¡ì— ìˆìœ¼ë©´ ìœ ì§€
        if current_port in ports:
            self.port_combo.setCurrentText(current_port)

    def set_connected(self, connected: bool) -> None:
        """
        ì—°ê²° ìƒíƒœì— ë”°ë¼ UIë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.

        Args:
            connected (bool): ì—°ê²° ì—¬ë¶€.
        """
        state = "connected" if connected else "disconnected"
        self.set_connection_state(state)

        self.port_combo.setEnabled(not connected)
        self.baud_combo.setEnabled(not connected)
        self.datasize_combo.setEnabled(not connected)
        self.parity_combo.setEnabled(not connected)
        self.stopbits_combo.setEnabled(not connected)
        self.flow_combo.setEnabled(not connected)

        # ì—°ê²° ìƒíƒœ ë³€ê²½ ì‹œê·¸ë„ ë°œìƒ
        self.connection_state_changed.emit(connected)

    def set_connection_state(self, state: str) -> None:
        """
        ì—°ê²° ë²„íŠ¼ì˜ ìƒíƒœ(ìƒ‰ìƒ, í…ìŠ¤íŠ¸)ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.

        Args:
            state (str): 'disconnected', 'connected', 'error'
        """
        self.connect_btn.setProperty("state", state)
        self.connect_btn.style().unpolish(self.connect_btn)
        self.connect_btn.style().polish(self.connect_btn)

        if state == 'connected':
            self.connect_btn.setText(lang_manager.get_text("port_btn_disconnect"))
            self.connect_btn.setChecked(True)
        elif state == 'disconnected':
            self.connect_btn.setText(lang_manager.get_text("port_btn_connect"))
            self.connect_btn.setChecked(False)
        elif state == 'error':
            self.connect_btn.setText(lang_manager.get_text("port_btn_reconnect"))
            self.connect_btn.setChecked(False)

    def toggle_connection(self) -> None:
        """ì—°ê²° ìƒíƒœë¥¼ í† ê¸€í•©ë‹ˆë‹¤ (ë²„íŠ¼ í´ë¦­ íš¨ê³¼)."""
        self.connect_btn.click()

    def is_connected(self) -> bool:
        """í˜„ì¬ ì—°ê²° ìƒíƒœë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤."""
        return self.connect_btn.isChecked()

    def save_state(self) -> dict:
        """
        í˜„ì¬ ì„¤ì •ì„ ë”•ì…”ë„ˆë¦¬ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            dict: ì„¤ì • ë°ì´í„°.
        """
        state = {
            "port": self.port_combo.currentText(),
            "baudrate": self.baud_combo.currentText(),
            "datasize": self.datasize_combo.currentText(),
            "parity": self.parity_combo.currentText(),
            "stopbits": self.stopbits_combo.currentText(),
            "flow": self.flow_combo.currentText(),
            "dtr": self.dtr_check.isChecked(),
            "rts": self.rts_check.isChecked()
        }
        return state

    def load_state(self, state: dict) -> None:
        """
        ì €ì¥ëœ ì„¤ì •ì„ ì ìš©í•©ë‹ˆë‹¤.

        Args:
            state (dict): ì„¤ì • ë°ì´í„°.
        """
        if not state:
            return

        # í¬íŠ¸ëŠ” ëª©ë¡ì— ì—†ì„ ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ addItemìœ¼ë¡œ ì¶”ê°€ í›„ ì„¤ì •
        port = state.get("port", "")
        if port:
            if self.port_combo.findText(port) == -1:
                self.port_combo.addItem(port)
            self.port_combo.setCurrentText(port)

        self.baud_combo.setCurrentText(str(state.get("baudrate", "115200")))
        self.datasize_combo.setCurrentText(str(state.get("datasize", "8")))
        self.parity_combo.setCurrentText(state.get("parity", "N"))
        self.stopbits_combo.setCurrentText(str(state.get("stopbits", "1")))
        self.flow_combo.setCurrentText(state.get("flow", "None"))
        self.dtr_check.setChecked(state.get("dtr", True))
        self.rts_check.setChecked(state.get("rts", True))
</file>

<file path="view/widgets/manual_control.py">
from PyQt5.QtWidgets import (
    QWidget, QVBoxLayout, QHBoxLayout, QPushButton, QCheckBox,
    QLabel, QFileDialog, QGroupBox, QGridLayout
)
from PyQt5.QtCore import pyqtSignal, Qt
from typing import Optional
from view.lang_manager import lang_manager
from view.pyqt_customs.smart_number_edit import QSmartLineEdit

class ManualControlWidget(QWidget):
    """
    ìˆ˜ë™ ëª…ë ¹ ì „ì†¡, íŒŒì¼ ì „ì†¡, ë¡œê·¸ ì €ì¥ ë° ê°ì¢… ì œì–´ ì˜µì…˜ì„ ì œê³µí•˜ëŠ” ìœ„ì ¯ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    (êµ¬ OperationArea)
    """

    # ì‹œê·¸ë„ ì •ì˜
    manual_cmd_send_requested = pyqtSignal(str, bool, bool, bool) # text, hex_mode, cmd_prefix, cmd_suffix
    transfer_file_send_requested = pyqtSignal(str) # filepath
    transfer_file_selected = pyqtSignal(str) # filepath
    manual_log_save_requested = pyqtSignal(str) # filepath
    manual_options_clear_requested = pyqtSignal()

    # ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ ìƒìˆ˜ (CommandControlê³¼ ë™ì¼)
    PREFIX_KEY = "prefix"
    SUFFIX_KEY = "suffix"

    def __init__(self, parent: Optional[QWidget] = None) -> None:
        """
        ManualControlWidgetì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

        Args:
            parent (Optional[QWidget]): ë¶€ëª¨ ìœ„ì ¯. ê¸°ë³¸ê°’ì€ None.
        """
        super().__init__(parent)
        self.send_transfer_file_btn = None
        self.select_transfer_file_btn = None
        self.transfer_file_path_lbl = None
        self.file_transfer_grp = None
        self.send_manual_cmd_btn = None
        self.manual_cmd_input = None
        self.manual_send_grp = None
        self.save_manual_log_btn = None
        self.clear_manual_options_btn = None
        self.dtr_chk = None
        self.rts_chk = None
        self.suffix_chk = None
        self.prefix_chk = None
        self.hex_chk = None
        self.manual_options_grp = None
        self.init_ui()

        # ì–¸ì–´ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸ ì—°ê²°
        lang_manager.language_changed.connect(self.retranslate_ui)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        layout = QVBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(2) # ê°„ê²© ìµœì†Œí™”

        # 1. ì œì–´ ì˜µì…˜ ê·¸ë£¹ (Control Options Group)
        self.manual_options_grp = QGroupBox(lang_manager.get_text("manual_ctrl_grp_control"))
        option_layout = QGridLayout()
        option_layout.setContentsMargins(2, 2, 2, 2) # ë‚´ë¶€ ì—¬ë°± ìµœì†Œí™”
        option_layout.setSpacing(5)

        self.hex_chk = QCheckBox(lang_manager.get_text("manual_ctrl_chk_hex"))
        self.hex_chk.setToolTip(lang_manager.get_text("manual_ctrl_chk_hex_tooltip"))
        self.hex_chk.stateChanged.connect(self.on_hex_mode_changed)

        # ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ ì²´í¬ë°•ìŠ¤
        self.prefix_chk = QCheckBox(lang_manager.get_text("manual_ctrl_chk_prefix"))
        self.suffix_chk = QCheckBox(lang_manager.get_text("manual_ctrl_chk_suffix"))

        # íë¦„ ì œì–´ (Flow Control - RTS/DTR)
        self.rts_chk = QCheckBox(lang_manager.get_text("manual_ctrl_chk_rts"))
        self.rts_chk.setToolTip(lang_manager.get_text("manual_ctrl_chk_rts_tooltip"))
        self.dtr_chk = QCheckBox(lang_manager.get_text("manual_ctrl_chk_dtr"))
        self.dtr_chk.setToolTip(lang_manager.get_text("manual_ctrl_chk_dtr_tooltip"))

        self.clear_manual_options_btn = QPushButton(lang_manager.get_text("manual_ctrl_btn_clear"))
        self.clear_manual_options_btn.setToolTip(lang_manager.get_text("manual_ctrl_btn_clear_tooltip"))
        self.clear_manual_options_btn.clicked.connect(self.on_manual_options_clear_clicked)

        self.save_manual_log_btn = QPushButton(lang_manager.get_text("manual_ctrl_btn_save_log"))
        self.save_manual_log_btn.setToolTip(lang_manager.get_text("manual_ctrl_btn_save_log_tooltip"))
        self.save_manual_log_btn.clicked.connect(self.on_save_manual_log_clicked)

        option_layout.addWidget(self.hex_chk, 0, 0)
        option_layout.addWidget(self.prefix_chk, 0, 1)
        option_layout.addWidget(self.suffix_chk, 0, 2)
        option_layout.addWidget(self.rts_chk, 0, 3)
        option_layout.addWidget(self.dtr_chk, 0, 4)

        option_layout.addWidget(self.clear_manual_options_btn, 2, 0, 1, 2)
        option_layout.addWidget(self.save_manual_log_btn, 2, 2, 1, 2)

        self.manual_options_grp.setLayout(option_layout)

        # 3. ìˆ˜ë™ ì „ì†¡ ì˜ì—­ (Manual Send Area)
        self.manual_send_grp = QGroupBox(lang_manager.get_text("manual_ctrl_grp_manual"))
        send_layout = QHBoxLayout()
        send_layout.setContentsMargins(2, 2, 2, 2)
        send_layout.setSpacing(5)

        self.manual_cmd_input = QSmartLineEdit() # QSmartLineEdit ì‚¬ìš©
        self.manual_cmd_input.setPlaceholderText(lang_manager.get_text("manual_ctrl_input_cmd_placeholder"))
        self.manual_cmd_input.setProperty("class", "fixed-font")  # ê³ ì •í­ í°íŠ¸ ì ìš©
        self.manual_cmd_input.returnPressed.connect(self.on_send_manual_cmd_clicked) # Enter í‚¤ ì§€ì›

        self.send_manual_cmd_btn = QPushButton(lang_manager.get_text("manual_ctrl_btn_send"))
        self.send_manual_cmd_btn.setCursor(Qt.PointingHandCursor)
        # ìŠ¤íƒ€ì¼ì€ QSSì—ì„œ ì²˜ë¦¬ ê¶Œì¥ (ê°•ì¡°ìƒ‰)
        self.send_manual_cmd_btn.setProperty("class", "accent")
        self.send_manual_cmd_btn.clicked.connect(self.on_send_manual_cmd_clicked)

        send_layout.addWidget(self.manual_cmd_input, 1)
        send_layout.addWidget(self.send_manual_cmd_btn)

        self.manual_send_grp.setLayout(send_layout)

        # 3. íŒŒì¼ ì „ì†¡ ì˜ì—­ (File Transfer Area)
        self.file_transfer_grp = QGroupBox(lang_manager.get_text("manual_ctrl_grp_file"))
        file_layout = QHBoxLayout()
        file_layout.setContentsMargins(2, 2, 2, 2)
        file_layout.setSpacing(5)

        self.transfer_file_path_lbl = QLabel(lang_manager.get_text("manual_ctrl_lbl_file_path_no_file"))
        self.transfer_file_path_lbl.setStyleSheet("color: gray; border: 1px solid #555; padding: 2px; border-radius: 2px;")

        self.select_transfer_file_btn = QPushButton(lang_manager.get_text("manual_ctrl_btn_select_file"))
        self.select_transfer_file_btn.clicked.connect(self.on_select_transfer_file_clicked)

        self.send_transfer_file_btn = QPushButton(lang_manager.get_text("manual_ctrl_btn_send_file"))
        self.send_transfer_file_btn.clicked.connect(self.on_send_transfer_file_clicked)

        file_layout.addWidget(self.transfer_file_path_lbl, 1)
        file_layout.addWidget(self.select_transfer_file_btn)
        file_layout.addWidget(self.send_transfer_file_btn)

        self.file_transfer_grp.setLayout(file_layout)

        layout.addWidget(self.manual_options_grp)
        layout.addWidget(self.manual_send_grp)
        layout.addWidget(self.file_transfer_grp)
        layout.addStretch() # í•˜ë‹¨ ì—¬ë°± ì¶”ê°€

        self.setLayout(layout)

        # ì´ˆê¸° ìƒíƒœ ì„¤ì •
        self.set_controls_enabled(False)

    def retranslate_ui(self) -> None:
        """ì–¸ì–´ ë³€ê²½ ì‹œ UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."""
        self.manual_options_grp.setTitle(lang_manager.get_text("manual_ctrl_grp_control"))
        self.hex_chk.setText(lang_manager.get_text("manual_ctrl_chk_hex"))
        self.prefix_chk.setText(lang_manager.get_text("manual_ctrl_chk_prefix"))
        self.suffix_chk.setText(lang_manager.get_text("manual_ctrl_chk_suffix"))
        self.rts_chk.setText(lang_manager.get_text("manual_ctrl_chk_rts"))
        self.dtr_chk.setText(lang_manager.get_text("manual_ctrl_chk_dtr"))
        self.clear_manual_options_btn.setText(lang_manager.get_text("manual_ctrl_btn_clear"))
        self.save_manual_log_btn.setText(lang_manager.get_text("manual_ctrl_btn_save_log"))

        self.manual_send_grp.setTitle(lang_manager.get_text("manual_ctrl_grp_manual"))
        self.send_manual_cmd_btn.setText(lang_manager.get_text("manual_ctrl_btn_send"))
        self.manual_cmd_input.setPlaceholderText(lang_manager.get_text("manual_ctrl_input_cmd_placeholder"))

        self.file_transfer_grp.setTitle(lang_manager.get_text("manual_ctrl_grp_file"))
        # íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì€ ìƒíƒœì¸ì§€ í™•ì¸
        if lang_manager.text_matches_key(self.transfer_file_path_lbl.text(), "manual_ctrl_lbl_file_path_no_file"):
            self.transfer_file_path_lbl.setText(lang_manager.get_text("manual_ctrl_lbl_file_path_no_file"))

        self.select_transfer_file_btn.setText(lang_manager.get_text("manual_ctrl_btn_select_file"))
        self.send_transfer_file_btn.setText(lang_manager.get_text("manual_ctrl_btn_send_file"))

    def on_hex_mode_changed(self, state: int) -> None:
        """HEX ëª¨ë“œ ë³€ê²½ ì‹œ QSmartLineEdit ëª¨ë“œ ì„¤ì •"""
        is_hex_mode = (state == Qt.Checked)
        self.manual_cmd_input.set_hex_mode(is_hex_mode)

    def on_send_manual_cmd_clicked(self) -> None:
        """ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤."""
        text = self.manual_cmd_input.text()
        if text:
            # ViewëŠ” ì›ë³¸ ì…ë ¥ê³¼ ì²´í¬ë°•ìŠ¤ ìƒíƒœë§Œ ì „ë‹¬
            # prefix/suffix ì²˜ë¦¬ëŠ” Presenterì—ì„œ ìˆ˜í–‰
            self.manual_cmd_send_requested.emit(
                text,
                self.hex_chk.isChecked(),
                self.prefix_chk.isChecked(),
                self.suffix_chk.isChecked()
            )
            # ì…ë ¥ í›„ ì§€ìš°ì§€ ì•ŠìŒ (íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥ì´ ì—†ìœ¼ë¯€ë¡œ ìœ ì§€í•˜ëŠ” í¸ì´ ë‚˜ìŒ)
            # self.manual_cmd_input.clear()

    def on_select_transfer_file_clicked(self) -> None:
        """íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤."""
        path, _ = QFileDialog.getOpenFileName(self, lang_manager.get_text("manual_ctrl_dialog_select_file"))
        if path:
            self.transfer_file_path_lbl.setText(path)
            self.transfer_file_selected.emit(path)

    def on_send_transfer_file_clicked(self) -> None:
        """íŒŒì¼ ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤."""
        path = self.transfer_file_path_lbl.text()
        if path and path != lang_manager.get_text("manual_ctrl_lbl_file_path_no_file"):
            self.transfer_file_send_requested.emit(path)

    def on_manual_options_clear_clicked(self) -> None:
        """ì œì–´ ì˜µì…˜ ì´ˆê¸°í™” ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤."""
        self.manual_options_clear_requested.emit()

    def on_save_manual_log_clicked(self) -> None:
        """ë¡œê·¸ ì €ì¥ ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤."""
        filter_str = f"{lang_manager.get_text('manual_ctrl_dialog_file_filter_txt')} (*.txt);;{lang_manager.get_text('manual_ctrl_dialog_file_filter_all')} (*)"
        path, _ = QFileDialog.getSaveFileName(self, lang_manager.get_text("manual_ctrl_dialog_save_log_title"), "", filter_str)
        if path:
            self.manual_log_save_requested.emit(path)

    def set_controls_enabled(self, enabled: bool) -> None:
        """
        í¬íŠ¸ ì—°ê²° ìƒíƒœì— ë”°ë¼ ì œì–´ ë²„íŠ¼ì„ í™œì„±í™”/ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.

        Args:
            enabled (bool): í™œì„±í™” ì—¬ë¶€.
        """
        self.send_manual_cmd_btn.setEnabled(enabled)
        self.send_transfer_file_btn.setEnabled(enabled)
        self.rts_chk.setEnabled(enabled)
        self.dtr_chk.setEnabled(enabled)

        self.clear_manual_options_btn.setEnabled(True)
        self.save_manual_log_btn.setEnabled(True)
        self.select_transfer_file_btn.setEnabled(True)

    def save_state(self) -> dict:
        """
        í˜„ì¬ ìœ„ì ¯ ìƒíƒœë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

        Returns:
            dict: ìœ„ì ¯ ìƒíƒœ.
        """
        state = {
            "input_text": self.manual_cmd_input.text(),
            "hex_mode": self.hex_chk.isChecked(),
            "prefix_chk": self.prefix_chk.isChecked(),
            "suffix_chk": self.suffix_chk.isChecked(),
            "rts_chk": self.rts_chk.isChecked(),
            "dtr_chk": self.dtr_chk.isChecked(),
        }
        return state

    def load_state(self, state: dict) -> None:
        """
        ì €ì¥ëœ ìƒíƒœë¥¼ ìœ„ì ¯ì— ì ìš©í•©ë‹ˆë‹¤.

        Args:
            state (dict): ìœ„ì ¯ ìƒíƒœ.
        """
        if not state:
            return

        self.hex_chk.setChecked(state.get("hex_mode", False))
        self.prefix_chk.setChecked(state.get("prefix_chk", False))
        self.suffix_chk.setChecked(state.get("suffix_chk", False))
        self.rts_chk.setChecked(state.get("rts_chk", False))
        self.dtr_chk.setChecked(state.get("dtr_chk", False))
        self.manual_cmd_input.setText(state.get("input_text", ""))
</file>

<file path="config/settings.json">
{
  "version": "1.0",
  "settings": {
    "theme": "dark",
    "language": "en",
    "rx_max_lines": 3000,
    "proportional_font_family": "Segoe UI",
    "proportional_font_size": 9,
    "fixed_font_family": "Consolas",
    "fixed_font_size": 9,
    "right_panel_visible": false,
    "cmd_prefix": "",
    "cmd_suffix": "",
    "port_baudrate": 115200,
    "port_newline": "\n",
    "port_scan_interval": 5000
  },
  "ui": {
    "window_width": 907,
    "window_height": 899,
    "window_x": 414,
    "window_y": 78,
    "splitter_state": "AAAA/wAAAAEAAAACAAADgQAAAZAB/////wEAAAABAA=="
  },
  "ports": {
    "default_config": {
      "baudrate": 115200,
      "parity": "N",
      "datasize": 8,
      "stopbits": 1,
      "scan_interval": 5000
    },
    "tabs": [
      {
        "custom_name": "Port",
        "port_settings": {
          "port": "COM1",
          "baudrate": "115200",
          "datasize": "8",
          "parity": "N",
          "stopbits": "1",
          "flow": "None",
          "dtr": true,
          "rts": true
        },
        "received_area": {
          "hex_mode": false,
          "timestamp": false,
          "paused": false,
          "search_text": ""
        }
      }
    ]
  },
  "manual_control": {
    "input_text": "",
    "hex_mode": false,
    "prefix_chk": true,
    "suffix_chk": true,
    "rts_chk": false,
    "dtr_chk": false
  },
  "macro_list": {
    "commands": [
      {
        "enabled": true,
        "prefix": true,
        "command": "",
        "suffix": true,
        "hex_mode": false,
        "delay": "100"
      },
      {
        "enabled": true,
        "prefix": true,
        "command": "",
        "suffix": true,
        "hex_mode": false,
        "delay": "100"
      },
      {
        "enabled": true,
        "prefix": true,
        "command": "",
        "suffix": true,
        "hex_mode": false,
        "delay": "100"
      },
      {
        "enabled": true,
        "prefix": false,
        "command": "ss",
        "suffix": true,
        "hex_mode": true,
        "delay": "100"
      },
      {
        "enabled": true,
        "prefix": true,
        "command": "",
        "suffix": true,
        "hex_mode": false,
        "delay": "100"
      },
      {
        "enabled": true,
        "prefix": false,
        "command": "",
        "suffix": true,
        "hex_mode": false,
        "delay": "100"
      },
      {
        "enabled": true,
        "prefix": false,
        "command": "",
        "suffix": true,
        "hex_mode": true,
        "delay": "100"
      }
    ],
    "control_state": {
      "delay": "1000",
      "max_runs": 0
    }
  },
  "logging": {
    "path": "E:\\_Python\\serial_tool2"
  }
}
</file>

<file path="doc/CHANGELOG.md">
# ë³€ê²½ ì´ë ¥ (CHANGELOG)

## [ë¯¸ë°°í¬] (Unreleased)

### ë²„ê·¸ ìˆ˜ì • ë° UI/UX ê°œì„  (2025-12-09)

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- **ì´ˆê¸°í™” ë° Import ì˜¤ë¥˜ ìˆ˜ì •**
  - `MainWindow` ì´ˆê¸°í™” ì‹œ `AttributeError` (left_section ë¯¸ìƒì„± ìƒíƒœì—ì„œ ì‹œê·¸ë„ ì—°ê²°) ìˆ˜ì •
  - `PortController`ì—ì„œ `SerialWorker` import ê²½ë¡œ ì˜¤ë¥˜ (`ModuleNotFoundError`) ìˆ˜ì •
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì•ˆì •ì„± í™•ë³´

- **íˆ´ë°” ë™ì‘ ë¡œì§ ê°œì„ **
  - 'Close' ë²„íŠ¼ì´ í† ê¸€ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì—¬ ë‹«íŒ í¬íŠ¸ë¥¼ ì—¬ëŠ” ë¬¸ì œ ìˆ˜ì •
  - `close_current_port` ë©”ì„œë“œ ì¶”ê°€ ë° `is_connected` ìƒíƒœ í™•ì¸ ë¡œì§ ë„ì…
  - ëª…ì‹œì ì¸ ë‹«ê¸° ë™ì‘ ë³´ì¥

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **ì‹œê·¸ë„ ë„¤ì´ë° ì¼ê´€ì„± ê°•í™”**
  - `MacroCtrlWidget`: `cmd_run_single` â†’ `cmd_run_once`, `cmd_auto_start` â†’ `cmd_repeat_start` ë“±
  - `PortSettingsWidget`: `scan_requested` â†’ `port_scan_requested`
  - ë²„íŠ¼ í…ìŠ¤íŠ¸ ë° ê¸°ëŠ¥ê³¼ ì¼ì¹˜í•˜ë„ë¡ ì‹œê·¸ë„ ì´ë¦„ ì§ê´€í™”

- **í…ŒìŠ¤íŠ¸ ì½”ë“œ ìµœì‹ í™”**
  - `test_view.py`, `test_ui_translations.py`ë¥¼ ìµœì‹  ìœ„ì ¯ í´ë˜ìŠ¤ëª…(`ReceivedAreaWidget` ë“±) ë° ì‹œê·¸ë„ë¡œ ì—…ë°ì´íŠ¸

- **ë„¤ì´ë° ë¦¬íŒ©í† ë§ (Command -> Macro)**
  - `CommandListWidget` â†’ `MacroListWidget`
  - `CommandControlWidget` â†’ `MacroControlWidget`
  - `CommandListPanel` â†’ `MacroPanel`
  - ê´€ë ¨ íŒŒì¼ëª… ë° ë³€ìˆ˜ëª… ì¼ê´„ ë³€ê²½ (`command_list.py` â†’ `macro_list.py` ë“±)
  - "Command" ìš©ì–´ì˜ ëª¨í˜¸ì„±(ì‹œìŠ¤í…œ ëª…ë ¹ ë“±) í•´ì†Œ ë° "Macro"ë¡œ ëª…í™•í™”

- **ì„¤ì • í‚¤ êµ¬ì¡° ì •ë¦¬**
  - `PreferencesDialog`ì—ì„œ `port_baudrate`, `port_newline`, `port_scan_interval` ì¶”ê°€
  - `main_presenter.py`ì—ì„œ ì„¤ì • í‚¤ ë§¤í•‘ ì—…ë°ì´íŠ¸
  - ì„¤ì • ë¡œë“œ/ì €ì¥ ë¡œì§ ì¼ê´€ì„± í™•ë³´

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **ë™ì  ìœˆë„ìš° ë¦¬ì‚¬ì´ì§•**
  - ìš°ì¸¡ íŒ¨ë„(Right Panel) í† ê¸€ ì‹œ ìœˆë„ìš° í¬ê¸°ê°€ ìë™ìœ¼ë¡œ ì¡°ì •ë˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„
  - íŒ¨ë„ ìˆ¨ê¹€/í‘œì‹œ ì‹œ ìì—°ìŠ¤ëŸ¬ìš´ ìœˆë„ìš° í¬ê¸° ë³€í™” ì œê³µ
  - ì¢Œì¸¡ íŒ¨ë„ í¬ê¸° ìœ ì§€: ìŠ¤í”Œë¦¬í„° í¬ê¸° ì„¤ì •ìœ¼ë¡œ ì¢Œì¸¡ íŒ¨ë„ì´ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ìˆ˜ì •

#### ì•„í‚¤í…ì²˜ ê°œì„  (Architecture)

- **MVP íŒ¨í„´ ì¤€ìˆ˜ ê°•í™”**
  - `PreferencesDialog`ì—ì„œ `SettingsManager` ì§ì ‘ ì ‘ê·¼ ì œê±°
  - Presenter(`MainWindow`)ë¥¼ í†µí•´ ì„¤ì •ì„ ì „ë‹¬ë°›ì•„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
  - `_get_setting()` í—¬í¼ ë©”ì„œë“œ ì¶”ê°€: ì¤‘ì²©ëœ ì„¤ì • í‚¤ ì•ˆì „ ì ‘ê·¼
  - View ê³„ì¸µì´ Model ê³„ì¸µì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ ê°œì„ 

#### ì™„ì„±ë„ ê°œì„  (Polish)

- **ì–¸ì–´ í‚¤ ì™„ì„±**
  - `MainToolBar`: ëª¨ë“  ì•¡ì…˜ì— ì–¸ì–´ í‚¤ ì ìš© (`toolbar_open`, `toolbar_close` ë“±)
  - `MainMenuBar`: ë©”ë‰´ ì•¡ì…˜ì— ì–¸ì–´ í‚¤ ì ìš© (`main_menu_open_port`, `main_menu_close_tab` ë“±)
  - `MacroCtrlWidget`: Pause ë²„íŠ¼ ì–¸ì–´ í‚¤ ì¶”ê°€ (`macro_ctrl_btn_repeat_pause`)
  - `PreferencesDialog`: Newline ì„¤ì • ì–¸ì–´ í‚¤ ì¶”ê°€ (`pref_lbl_newline`)

- **TODO ì£¼ì„ ì •ë¦¬**
  - ëª¨ë“  TODO ì£¼ì„ì„ Noteë¡œ ë³€ê²½í•˜ê³  í–¥í›„ êµ¬í˜„ ê³„íš ëª…ì‹œ
  - `macro_panel.py`: Repeat íŒŒë¼ë¯¸í„° ì „ë‹¬ ë°©ì‹ ì„¤ëª… ì¶”ê°€
  - `port_presenter.py`, `main_presenter.py`: ìƒíƒœë°” ì—ëŸ¬ í‘œì‹œ ê³„íš ëª…ì‹œ
  - `received_area.py`: ì •ê·œì‹ ê²€ìƒ‰ ì§€ì› ê³„íš ëª…ì‹œ

- **í…Œë§ˆ ë©”ë‰´ ê°œì„ **
  - View -> Theme ë©”ë‰´ì— í˜„ì¬ ì„ íƒëœ í…Œë§ˆ ì²´í¬ í‘œì‹œ ì¶”ê°€
  - `MainMenuBar.set_current_theme()` ë©”ì„œë“œ ì¶”ê°€
  - í…Œë§ˆ ì „í™˜ ì‹œ ìë™ìœ¼ë¡œ ì²´í¬ í‘œì‹œ ì—…ë°ì´íŠ¸

- **ìš°ì¸¡ íŒ¨ë„ í† ê¸€ ê°œì„ **
  - íŒ¨ë„ ìˆ¨ê¹€ ì‹œ ì™¼ìª½ íŒ¨ë„ ë„ˆë¹„ ì €ì¥
  - íŒ¨ë„ í‘œì‹œ ì‹œ ì €ì¥ëœ ì™¼ìª½ íŒ¨ë„ ë„ˆë¹„ ë³µì›
  - `_saved_left_width` ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì¶”ê°€

- **QSS ìŠ¤íƒ€ì¼ í™•ì¥**
  - `warning` í´ë˜ìŠ¤ ì¶”ê°€ (ë…¸ë€ìƒ‰ ë²„íŠ¼ ìŠ¤íƒ€ì¼)
  - Pause ë²„íŠ¼ì— warning ìŠ¤íƒ€ì¼ ì ìš©


---

### ì–¸ì–´ í™•ì¥ì„± ê°œì„  ë° ì•„ì´ì½˜ ìˆ˜ì • (2025-12-08)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **LanguageManager í™•ì¥ì„± ê°œì„ **
  - `get_text()` ë©”ì„œë“œì— optional `lang_code` íŒŒë¼ë¯¸í„° ì¶”ê°€
  - `get_supported_languages()` ë©”ì„œë“œ ì¶”ê°€: ì§€ì›ë˜ëŠ” ëª¨ë“  ì–¸ì–´ ì½”ë“œ ëª©ë¡ ë°˜í™˜
  - `text_matches_key()` í—¬í¼ ë©”ì„œë“œ ì¶”ê°€: í…ìŠ¤íŠ¸ê°€ íŠ¹ì • í‚¤ì˜ ì–´ë–¤ ì–¸ì–´ ë²ˆì—­ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
  - ìƒˆ ì–¸ì–´ ì¶”ê°€ ì‹œ ì½”ë“œ ìˆ˜ì • ì—†ì´ ìë™ ì§€ì› ê°€ëŠ¥

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- **UI ì•„ì´ì½˜ í‘œì‹œ ë¬¸ì œ**
  - `dark_theme.qss`, `light_theme.qss`ì—ì„œ ì•„ì´ì½˜ ì„ íƒì ìˆ˜ì •
  - ë²„íŠ¼ objectName ë¶ˆì¼ì¹˜ í•´ê²°: `add_btn` â†’ `add_cmd_btn`, `del_btn` â†’ `del_cmd_btn` ë“±
  - Command List ë° ê²€ìƒ‰ ë²„íŠ¼ ì•„ì´ì½˜ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë¨

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **ì–¸ì–´ ë¹„êµ ë¡œì§ ê°œì„ **
  - `manual_control.py`, `main_status_bar.py`, `file_progress.py`ì—ì„œ í•˜ë“œì½”ë”©ëœ ì–¸ì–´ë³„ ë¹„êµ ì œê±°
  - `== lang_manager.get_text("key", "en") or == lang_manager.get_text("key", "ko")` íŒ¨í„´ì„
  - `lang_manager.text_matches_key(text, "key")` í˜¸ì¶œë¡œ ë³€ê²½
  - ì¼ë³¸ì–´, ì¤‘êµ­ì–´ ë“± ìƒˆ ì–¸ì–´ ì¶”ê°€ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

#### ì´ì  (Benefits)

- **í™•ì¥ì„± í–¥ìƒ**: ìƒˆ ì–¸ì–´ ì¶”ê°€ ì‹œ JSON íŒŒì¼ë§Œ ì¶”ê°€í•˜ë©´ ìë™ ì§€ì›
- **ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ **: ì–¸ì–´ë³„ í•˜ë“œì½”ë”© ì œê±°ë¡œ ì½”ë“œ ê°„ì†Œí™”
- **UI ì¼ê´€ì„±**: ëª¨ë“  ì•„ì´ì½˜ ë²„íŠ¼ì´ í…Œë§ˆì— ë§ê²Œ ì •ìƒ í‘œì‹œ

---

### UI ìš”ì†Œ ë° ì‹œê·¸ë„/ë©”ì„œë“œ ë„¤ì´ë° ë¦¬íŒ©í† ë§ (2025-12-08)

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **UI ìš”ì†Œ ì´ë¦„ êµ¬ì²´í™”**
  - `send_btn` â†’ `send_manual_cmd_btn`, `clear_btn` â†’ `clear_manual_options_btn` ë“±
  - `manual_control.py`, `received_area.py`, `tx_panel.py`, `command_control.py` ì „ì²´ ì ìš©
  - ëª¨í˜¸í•œ ë³€ìˆ˜ëª…ì„ ì œê±°í•˜ê³  ì»¨í…ìŠ¤íŠ¸ì™€ ê¸°ëŠ¥ì„ ëª…í™•íˆ í•¨

- **ì‹œê·¸ë„ ë° ë©”ì„œë“œ ë„¤ì´ë° í‘œì¤€í™”**
  - ì‹œê·¸ë„: `[context]_[action]_requested` íŒ¨í„´ ì ìš© (ì˜ˆ: `manual_cmd_send_requested`)
  - í•¸ë“¤ëŸ¬: `on_[widget]_[event]` íŒ¨í„´ ì ìš© (ì˜ˆ: `on_send_manual_cmd_clicked`)
  - `guide/naming_convention.md` ì—…ë°ì´íŠ¸

#### ì´ì  (Benefits)

- **ê°€ë…ì„± í–¥ìƒ**: ì½”ë“œë§Œ ë³´ê³ ë„ ì–´ë–¤ UI ìš”ì†Œê°€ ì–´ë–¤ ë™ì‘ì„ í•˜ëŠ”ì§€ ì¦‰ì‹œ íŒŒì•… ê°€ëŠ¥
- **ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ **: ëª…í™•í•œ ë„¤ì´ë°ìœ¼ë¡œ ë²„ê·¸ ë°œìƒ ê°€ëŠ¥ì„± ê°ì†Œ ë° í˜‘ì—… íš¨ìœ¨ ì¦ëŒ€

### ì„¤ì • ë‹¤ì´ì–¼ë¡œê·¸ ë¦¬íŒ©í† ë§ (2025-12-08)

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **PreferencesDialog MVP íŒ¨í„´ ì ìš© ë° ë¦¬íŒ©í† ë§**
  - `load_settings`: `SettingsManager` ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„± ì œê±°
  - `apply_settings`: ë°ì´í„° ë³€í™˜ ë¡œì§(lower(), int() ë“±)ì„ Viewì—ì„œ ì œê±°í•˜ê³  ì›ë³¸ ë°ì´í„° ì „ì†¡
  - `MainWindow`ì— `preferences_save_requested` ì‹œê·¸ë„ ì¶”ê°€í•˜ì—¬ ì´ë²¤íŠ¸ ì „ë‹¬
  - `MainPresenter`ì— `on_preferences_save_requested` í•¸ë“¤ëŸ¬ êµ¬í˜„í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬

#### ì´ì  (Benefits)

- **ì•„í‚¤í…ì²˜ ì¤€ìˆ˜**: ViewëŠ” UI ë¡œì§ë§Œ ë‹´ë‹¹í•˜ê³ , ë°ì´í„° ê²€ì¦ ë° ë³€í™˜ì€ Presenterê°€ ë‹´ë‹¹í•˜ì—¬ MVP íŒ¨í„´ ê°•í™”
- **ë°ì´í„° ì¼ê´€ì„±**: `SettingsManager`ë¥¼ ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(SSOT)ìœ¼ë¡œ ì‚¬ìš©
- **ìœ ì§€ë³´ìˆ˜ì„±**: ì„¤ì • ë¡œë“œ/ì €ì¥ ë¡œì§ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë¨

### UI/UX ê°œì„  ë° ë²„ê·¸ ìˆ˜ì • (2025-12-08)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **SmartNumberEdit ìœ„ì ¯**
  - `view/widgets/common/smart_number_edit.py` ì‹ ê·œ ìƒì„±
  - HEX ëª¨ë“œì™€ ì¼ë°˜ í…ìŠ¤íŠ¸ ëª¨ë“œ ì§€ì›
  - HEX ëª¨ë“œ ì‹œ 0-9, A-F, ê³µë°±ë§Œ ì…ë ¥ í—ˆìš©
  - ìë™ ëŒ€ë¬¸ì ë³€í™˜ ê¸°ëŠ¥
  - `ManualControlWidget` ì…ë ¥ í•„ë“œì— ì ìš©

- **PortTabPanel ìœ„ì ¯**
  - `view/panels/port_tab_panel.py` ì‹ ê·œ ìƒì„± (ê¸°ì¡´ `PortTabWidget` ë¦¬ë„¤ì„)
  - í¬íŠ¸ íƒ­ ê´€ë¦¬ ë¡œì§ ìº¡ìŠí™” (ì¶”ê°€/ì‚­ì œ/í”ŒëŸ¬ìŠ¤ íƒ­)
  - `LeftSection`ì—ì„œ `QTabWidget` ëŒ€ì‹  `PortTabPanel` ì‚¬ìš©
  - ì½”ë“œ ì¬ì‚¬ìš©ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

- **í…Œë§ˆë³„ SVG ì•„ì´ì½˜ ì§€ì›**
  - `ThemeManager.get_icon()` ë©”ì„œë“œ ì¶”ê°€
  - í…Œë§ˆì— ë”°ë¼ `resources/icons/{name}_{theme}.svg` ë¡œë“œ
  - `add_dark.svg`, `add_light.svg` ì•„ì´ì½˜ ìƒì„±
  - í”ŒëŸ¬ìŠ¤ íƒ­ì— í…Œë§ˆë³„ ì•„ì´ì½˜ ì ìš©

- **í¬íŠ¸ íƒ­ ì´ë¦„ ìˆ˜ì • ê¸°ëŠ¥**
  - íƒ­ ì´ë¦„ í˜•ì‹: `[ì»¤ìŠ¤í…€ëª…]:í¬íŠ¸ëª…`
  - íƒ­ ë”ë¸”í´ë¦­ ì‹œ ì»¤ìŠ¤í…€ ì´ë¦„ ìˆ˜ì • ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
  - í¬íŠ¸ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ íƒ­ ì œëª© ì—…ë°ì´íŠ¸
  - ì»¤ìŠ¤í…€ ì´ë¦„ ì €ì¥/ë³µì› ê¸°ëŠ¥
  - `PortPanel`ì— `tab_title_changed` ì‹œê·¸ë„ ì¶”ê°€

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- **MacroListWidget Send ë²„íŠ¼ ìƒíƒœ ë²„ê·¸**
  - í–‰ ì´ë™ ì‹œ Send ë²„íŠ¼ í™œì„±í™” ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ëŠ” ë¬¸ì œ ìˆ˜ì •
  - `_move_row` ë©”ì„œë“œì—ì„œ ì´ë™ ì „ ë²„íŠ¼ ìƒíƒœ ì €ì¥ í›„ ë³µì›

- **í¬íŠ¸ íƒ­ ë‹«ê¸° ë²„íŠ¼ ë¬¸ì œ**
  - `insertTab` ì‚¬ìš© ì‹œ ë‹«ê¸° ë²„íŠ¼ì´ ì‚¬ë¼ì§€ëŠ” ë²„ê·¸ ìˆ˜ì •
  - í”ŒëŸ¬ìŠ¤ íƒ­ ì œê±° â†’ ìƒˆ íƒ­ ì¶”ê°€ â†’ í”ŒëŸ¬ìŠ¤ íƒ­ ì¬ì¶”ê°€ ë°©ì‹ìœ¼ë¡œ ë³€ê²½
  - ëª¨ë“  íƒ­ì˜ ë‹«ê¸° ë²„íŠ¼ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë¨

- **í¬íŠ¸ íƒ­ ì‚­ì œ ì‹œ ìƒˆ íƒ­ ìƒì„± ë²„ê·¸**
  - íƒ­ ì‚­ì œ ì‹œ `on_tab_changed` ì‹œê·¸ë„ë¡œ ì¸í•´ ìƒˆ íƒ­ì´ ìƒì„±ë˜ëŠ” ë¬¸ì œ ìˆ˜ì •
  - `close_port_tab`ì—ì„œ ì‹œê·¸ë„ ì°¨ë‹¨ ë° ì ì ˆí•œ íƒ­ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
  - ìµœì†Œ 1ê°œì˜ í¬íŠ¸ íƒ­ ìœ ì§€ ë¡œì§ ì¶”ê°€

- **ìˆœí™˜ import ë¬¸ì œ**
  - `PortTabWidget`ê³¼ `PortPanel` ê°„ ìˆœí™˜ import í•´ê²°
  - `TYPE_CHECKING`ì„ ì‚¬ìš©í•œ íƒ€ì… íŒíŠ¸ ë¶„ë¦¬
  - ëŸ°íƒ€ì„ì—ë§Œ í•„ìš”í•œ ê³³ì—ì„œ import ìˆ˜í–‰


#### ë³€ê²½ ì‚¬í•­ (Changed)

- **ì„¤ì • í‚¤ ì¼ê´€ì„± í™•ë³´**
  - `SettingsManager`, `PreferencesDialog`, `MainWindow`ì—ì„œ `menu_theme`, `menu_language` í‚¤ í†µì¼
  - `settings.json`ì˜ `global.theme`, `global.language`ì™€ ë‚´ë¶€ í‚¤ ê°„ ëª…í™•í•œ ë§¤í•‘ í™•ë¦½

- **LeftSection ë¦¬íŒ©í† ë§**
  - `PortTabWidget` ì‚¬ìš©ìœ¼ë¡œ íƒ­ ê´€ë¦¬ ì½”ë“œ ê°„ì†Œí™”
  - `add_new_port_tab`, `close_port_tab`, `on_tab_changed` ë“± ë©”ì„œë“œ ì œê±° (ìº¡ìŠí™”)

#### ì´ì  (Benefits)

- **ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**: HEX ëª¨ë“œ ì…ë ¥ ì œí•œìœ¼ë¡œ ì˜¤ë¥˜ ë°©ì§€, íƒ­ ì´ë¦„ ìˆ˜ì •ìœ¼ë¡œ ì‚¬ìš©ì ì •ì˜ ê°€ëŠ¥
- **ì½”ë“œ í’ˆì§ˆ ê°œì„ **: ìœ„ì ¯ ìº¡ìŠí™”ë¡œ ì¬ì‚¬ìš©ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- **í…Œë§ˆ ì¼ê´€ì„±**: ëª¨ë“  UI ìš”ì†Œì— í…Œë§ˆê°€ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë¨
- **ì•ˆì •ì„± í–¥ìƒ**: ë²„íŠ¼ ìƒíƒœ ë° íƒ­ ë‹«ê¸° ë²„ê·¸ ìˆ˜ì •ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

---

### ë¬¸ì„œí™” ë° ê°€ì´ë“œ ê°œì„  (2025-12-05)

### ë¬¸ì„œí™” ë° ê°€ì´ë“œ ê°œì„  (2025-12-05)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **ì£¼ì„ ê°€ì´ë“œ ë¬¸ì„œ**
  - `guide/comment_guide.md` ì‹ ê·œ ìƒì„±: Google Style Docstring í‘œì¤€ ê°€ì´ë“œ
  - Google Style ì •ì˜ ë° ê³µì‹ ë¬¸ì„œ ë§í¬ ì¶”ê°€
  - ëª¨ë“ˆ/í´ë˜ìŠ¤/í•¨ìˆ˜ Docstring ì‘ì„± ê·œì¹™ ìƒì„¸í™”
  - ì¸ë¼ì¸ ì£¼ì„ ì‘ì„± ê·œì¹™ (ë¸”ë¡ ì£¼ì„, ë¶„ê¸°ë¬¸, ìˆ˜ì‹, TODO/FIXME/NOTE íƒœê·¸)
  - MkDocs ìë™ ë¬¸ì„œí™” ì„¤ì • ê°€ì´ë“œ
  - ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œê³µ

- **Git ê´€ë¦¬ ê°€ì´ë“œ ë¬¸ì„œ**
  - `guide/git_guide.md` ì‹ ê·œ ìƒì„±
  - ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™ (Header/Body/Footer, íƒœê·¸ë³„ ì˜ˆì‹œ)
  - PR ë° ì´ìŠˆ í…œí”Œë¦¿ ê°€ì´ë“œ
  - ì‹¤ë¬´ Git ë ˆì‹œí”¼ (Amend, Stash, Reset/Revert ë“± ë³µêµ¬ ëª…ë ¹ì–´)
  - ë¸Œëœì¹˜ ì „ëµ ìƒì„¸

- **View êµ¬í˜„ ê³„íš ë³´ê°•**
  - `view/doc/implementation_plan.md`ì— Packet Inspector ì„¤ì • ì„¹ì…˜ ì¶”ê°€
  - Parser íƒ€ì… ì„ íƒ (Auto/AT/Delimiter/Fixed Length/Raw)
  - Delimiter ì„¤ì • (ê¸°ë³¸ê°’ + ì‚¬ìš©ì ì •ì˜)
  - AT Parser ìƒ‰ìƒ ê·œì¹™ ì„¤ì •
  - Inspector ë™ì‘ ì˜µì…˜ (ë²„í¼ í¬ê¸°, ì‹¤ì‹œê°„ ì¶”ì , ìë™ ìŠ¤í¬ë¡¤)
  - Preferences ë‹¤ì´ì–¼ë¡œê·¸ íƒ­ UI ë ˆì´ì•„ì›ƒ ì •ì˜

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **README.md ì—…ë°ì´íŠ¸**
  - í”„ë¡œì íŠ¸ ì„¤ëª…: "ì‹œë¦¬ì–¼ í†µì‹  ìœ í‹¸ë¦¬í‹°" â†’ "í†µì‹  ìœ í‹¸ë¦¬í‹°" (SPI, I2C í™•ì¥ ì˜ˆì • ëª…ì‹œ)
  - í´ë” êµ¬ì¡° ì •ë¦¬: `guide/` í´ë” ë¶„ë¦¬, ì¤‘ë³µ íŒŒì¼ ì œê±°
  - í–¥í›„ ê³„íš ìƒì„¸í™”: ë‹¨ê¸°/ì¤‘ì¥ê¸° êµ¬ë¶„, FT4222/SPI/I2C ì§€ì› ë¡œë“œë§µ ì¶”ê°€
  - ë¬¸ì„œ ì°¸ì¡° í‘œ ë³´ê°•: ì½”ë”© ê·œì¹™, ëª…ëª… ê·œì¹™ ì¶”ê°€
  - Git ê´€ë¦¬ ê°€ì´ë“œ ê°•í™”: ì§€ì†ì  ë°±ì—… ê¶Œì¥ ëª…ì‹œ

- **ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ê°„ì†Œí™”**
  - `guide/code_style_guide.md`ì—ì„œ Docstring ìƒì„¸ ë‚´ìš© ì œê±° (117ì¤„ â†’ 31ì¤„)
  - ì£¼ì„ ê´€ë ¨ ë‚´ìš©ì„ `guide/comment_guide.md` ì°¸ì¡°ë¡œ ëŒ€ì²´
  - ê¸°ë³¸ ì›ì¹™ê³¼ ê°„ë‹¨í•œ ì˜ˆì‹œë§Œ ìœ ì§€

- **êµ¬í˜„ ê³„íš ìš°ì„ ìˆœìœ„ ì¡°ì •**
  - `view/doc/implementation_plan.md` ìš°ì„ ìˆœìœ„ ì„¹ì…˜ì—ì„œ ì¼ì • í‘œê¸° ì œê±°
  - Packet Inspector ì„¤ì •ì„ ì„ íƒì  í•­ëª©ìœ¼ë¡œ ì¶”ê°€

#### ì´ì  (Benefits)

- **ë¬¸ì„œ ì²´ê³„í™”**: ì£¼ì„ ê°€ì´ë“œë¥¼ ë…ë¦½ ë¬¸ì„œë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬ ìš©ì´
- **í™•ì¥ì„± ëª…ì‹œ**: READMEì— í–¥í›„ í”„ë¡œí† ì½œ í™•ì¥ ê³„íš ëª…í™•íˆ ì „ë‹¬
- **ê°œë°œ ê°€ì´ë“œ ê°•í™”**: Google Style Docstring í‘œì¤€ ë° ì‘ì„± ê·œì¹™ ìƒì„¸í™”
- **View ê³„ì¸µ ì™„ì„±ë„**: Packet Inspector UI ì„¤ì • ìš”êµ¬ì‚¬í•­ ë¬¸ì„œí™”

### MVP ì•„í‚¤í…ì²˜ ë¦¬íŒ©í† ë§ ë° ì½”ë“œ í’ˆì§ˆ ê°œì„  (2025-12-05)

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **MVP ì•„í‚¤í…ì²˜ ì¤€ìˆ˜**
  - `ManualControlWidget`ì—ì„œ `SettingsManager` ì§ì ‘ í˜¸ì¶œ ì œê±°
  - `send_command_requested` ì‹œê·¸ë„ ë³€ê²½: 3ê°œ íŒŒë¼ë¯¸í„° â†’ 4ê°œ íŒŒë¼ë¯¸í„° (text, hex_mode, use_prefix, use_suffix)
  - ViewëŠ” ì›ë³¸ ì‚¬ìš©ì ì…ë ¥ê³¼ ì²´í¬ë°•ìŠ¤ ìƒíƒœë§Œ ì „ë‹¬
  - prefix/suffix ì²˜ë¦¬ ë¡œì§ì„ `MainPresenter.on_send_command_requested()`ë¡œ ì´ë™
  - View ê³„ì¸µì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 40+ ë¼ì¸ ì œê±°

- **ë„¤ì´ë° ê·œì¹™ ë¬¸ì„œ í†µí•©**
  - `docs/naming_convention.md`ì— ëª¨ë“  ë„¤ì´ë° ê·œì¹™ í†µí•© (í´ë˜ìŠ¤, í•¨ìˆ˜, ë³€ìˆ˜, ìƒìˆ˜, ì–¸ì–´ í‚¤ ë“±)
  - `doc/code_style_guide.md`ì—ì„œ ì¤‘ë³µ ë‚´ìš© ì œê±°, ì°¸ì¡° ë§í¬ë¡œ ëŒ€ì²´
  - ë‹¨ì¼ ë¬¸ì„œë¡œ ì¼ê´€ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

- **Logger ì‹±ê¸€í†¤ íŒ¨í„´ ê°œì„ **
  - ì˜ˆì™¸ ë°œìƒ ë°©ì‹ì—ì„œ `__new__` + `_initialized` íŒ¨í„´ìœ¼ë¡œ ë³€ê²½
  - `SettingsManager`ì™€ ë™ì¼í•œ êµ¬í˜„ ë°©ì‹ ì ìš©
  - ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œë„ ì‹œ ì•ˆì „í•˜ê²Œ ë™ì¼ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜

- **ì„¤ì • êµ¬ì¡° ë¦¬íŒ©í† ë§**
  - í‰íƒ„í•œ `global.*` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ë…¼ë¦¬ì  ê·¸ë£¹ìœ¼ë¡œ ì¬êµ¬ì¡°í™”
  - ìƒˆë¡œìš´ ê·¸ë£¹: `serial.*`, `command.*`, `logging.*`, `ui.*`
  - `main_window.py` `apply_preferences()` ë©”ì„œë“œì— settings_map ì¶”ê°€
  - `main_presenter.py`ì—ì„œ `global.command_prefix` â†’ `command.prefix` ê²½ë¡œ ë³€ê²½
  - `settings.json` êµ¬ì¡° ê°œì„ 

#### ì´ì  (Benefits)

- **ì•„í‚¤í…ì²˜ ê°œì„ **: Viewì™€ Presenter ì±…ì„ ë¶„ë¦¬ ëª…í™•í™”, MVP íŒ¨í„´ ì¤€ìˆ˜
- **ë¬¸ì„œ í†µí•©**: ë‹¨ì¼ ì†ŒìŠ¤ë¡œ ë„¤ì´ë° ê·œì¹™ ì°¸ì¡°, ë¬¸ì„œ ê´€ë¦¬ ì¼ì›í™”
- **ì•ˆì •ì„± í–¥ìƒ**: Logger ì‹±ê¸€í†¤ íŒ¨í„´ ê°œì„ ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì •ì„± ì¦ëŒ€
- **ì„¤ì • ê´€ë¦¬**: ë…¼ë¦¬ì  ê·¸ë£¹í™”ë¡œ ì¥ê¸° ìœ ì§€ë³´ìˆ˜ ìš©ì´

### ë¬¸ì„œ ë° Preferences ë‹¤ì´ì–¼ë¡œê·¸ ê°œì„  (2025-12-04)

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì—…ë°ì´íŠ¸**
  - `doc/code_style_guide.md`ì— ì–¸ì–´ í‚¤ ë„¤ì´ë° ê·œì¹™ ì„¹ì…˜(5.1) ì¶”ê°€
  - `[context]_[type]_[name]` í˜•ì‹ ì—„ê²©íˆ ì •ì˜
  - UI ìš”ì†Œ íƒ€ì…ë³„ ë¶„ë¥˜ (`btn`, `lbl`, `chk`, `combo`, `input`, `grp`, `col`, `tab`, `dialog`, `txt`, `tooltip`)
  - ì˜¬ë°”ë¥¸/ì˜ëª»ëœ ì˜ˆì‹œ ì œê³µ
  - íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ ë¬¸ì„œí™” (ë‹¤ì´ì–¼ë¡œê·¸ íƒ€ì´í‹€, ìƒíƒœ ë©”ì‹œì§€, í•„í„° ë¬¸ìì—´)

- **ì„¤ì • í‚¤ ì¼ê´€ì„± í™•ë³´**
  - `SettingsManager`ì˜ Fallback ì„¤ì • í‚¤ë¥¼ `menu_theme`, `menu_language`ë¡œ í†µì¼
  - `PreferencesDialog`ì™€ `MainWindow` ê°„ì˜ ì„¤ì • í‚¤ ë§¤í•‘ ë¶ˆì¼ì¹˜ í•´ê²°
  - `settings.json`ì˜ `global.theme`, `global.language`ì™€ ë‚´ë¶€ í‚¤(`menu_theme`, `menu_language`) ê°„ì˜ ëª…í™•í•œ ë§¤í•‘ ë¡œì§ í™•ë¦½

- **Preferences ë‹¤ì´ì–¼ë¡œê·¸ ì ‘ê·¼ì„± ìˆ˜ì •**
  - `view/main_window.py`ì—ì„œ `preferences_requested` ì‹œê·¸ë„ ì—°ê²°
  - `open_preferences_dialog()` ë° `apply_preferences()` ë©”ì„œë“œ ì¶”ê°€
  - ë©”ë‰´ë°” â†’ View â†’ Preferences ì •ìƒ ì‘ë™
  - í…Œë§ˆ ë° ì–¸ì–´ ë³€ê²½ ì¦‰ì‹œ ì ìš©

#### ì´ì  (Benefits)

- ì–¸ì–´ í‚¤ ë„¤ì´ë°ì— ëŒ€í•œ ëª…í™•í•œ ê°€ì´ë“œë¼ì¸ ì œê³µ
- ì‹ ê·œ ê°œë°œì ì˜¨ë³´ë”© ì‹œ ì°¸ê³  ìë£Œ í™•ë³´
- Preferences ë‹¤ì´ì–¼ë¡œê·¸ ì ‘ê·¼ì„± ê°œì„ 
- ì¼ê´€ì„± ìˆëŠ” ì½”ë“œë² ì´ìŠ¤ ìœ ì§€

### UI ì•„í‚¤í…ì²˜ ë¦¬íŒ©í† ë§ (2025-12-04)

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **4ë‹¨ê³„ ê³„ì¸µ êµ¬ì¡° í™•ë¦½ (Window â†’ Section â†’ Panel â†’ Widget)**
  - ê¸°ì¡´ `LeftPanel`, `RightPanel`ì„ `LeftSection`, `RightSection`ìœ¼ë¡œ ë¦¬íŒ©í† ë§
  - ìƒˆ ë””ë ‰í† ë¦¬ `view/sections/` ìƒì„±
  - `ManualControlPanel`, `PacketInspectorPanel` ë˜í¼ ì¶”ê°€
  - ê° ê³„ì¸µì˜ ì—­í•  ëª…í™•í™”:
    - **Window**: ìµœìƒìœ„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì…¸ (`MainWindow`)
    - **Section**: í™”ë©´ êµ¬íš ë¶„í• , Panelë§Œ í¬í•¨ (`LeftSection`, `RightSection`)
    - **Panel**: ê¸°ëŠ¥ ë‹¨ìœ„ ê·¸ë£¹, Widgetë§Œ í¬í•¨ (`PortPanel`, `MacroListPanel`, `ManualControlPanel` ë“±)
    - **Widget**: ì‹¤ì œ UI ìš”ì†Œ ë° ë¡œì§ (`PortSettingsWidget`, `ManualControlWidget` ë“±)
  - Presenter ê³„ì¸µ ì—…ë°ì´íŠ¸ (`port_presenter.py`, `main_presenter.py`)

#### ì´ì  (Benefits)
- ì½”ë“œ êµ¬ì¡°ì˜ ì¼ê´€ì„± ë° ê°€ë…ì„± í–¥ìƒ
- ì»´í¬ë„ŒíŠ¸ ì±…ì„ ë²”ìœ„ ëª…í™•í™”
- ìœ ì§€ë³´ìˆ˜ ë° í™•ì¥ì„± ê°œì„ 

### UI ê°œì„  ë° ê¸°ëŠ¥ ê°•í™” (2025-12-04)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **ManualControlWidget ê¸°ëŠ¥ í™•ì¥**
  - ì ‘ë‘ì‚¬(Prefix) ë° ì ‘ë¯¸ì‚¬(Suffix) ì…ë ¥ í•„ë“œ ë° ì²´í¬ë°•ìŠ¤ ì¶”ê°€
  - ë°ì´í„° ì „ì†¡ ì‹œ í¬ë§·íŒ… ì˜µì…˜ ì ìš© ê¸°ëŠ¥

- **ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ**
  - Command List ë° ì‹¤í–‰ ì„¤ì •ì„ JSON íŒŒì¼ë¡œ ì €ì¥/ë¡œë“œí•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„ (`MacroListPanel`)
  - `save_script_to_file`, `load_script_from_file` ë©”ì„œë“œ ì¶”ê°€

- **ì•„ì´ì½˜**
  - ê²€ìƒ‰ íƒìƒ‰ ë²„íŠ¼ìš© ì•„ì´ì½˜ ì¶”ê°€ (`find_prev`, `find_next`)

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- **UI ì•„ì´ì½˜ í‘œì‹œ**
  - `MacroListWidget` ë²„íŠ¼ì˜ objectName ë¶ˆì¼ì¹˜ ìˆ˜ì • (`btn_add` â†’ `add_btn` ë“±)ìœ¼ë¡œ ì•„ì´ì½˜ ë¯¸í‘œì‹œ ë¬¸ì œ í•´ê²°
- **í…Œë§ˆ ìŠ¤íƒ€ì¼**
  - ë‹¤í¬ í…Œë§ˆì—ì„œ Placeholder í…ìŠ¤íŠ¸ ìƒ‰ìƒ ë¬¸ì œ ìˆ˜ì • (`placeholder-text-color` ì¶”ê°€)

### ì–¸ì–´ í‚¤ í‘œì¤€í™” ë° ë¡œê¹… í”„ë ˆì„ì›Œí¬ (2025-12-03)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **ë¡œê¹… í”„ë ˆì„ì›Œí¬**
  - `core/logger.py` êµ¬í˜„: ì‹±ê¸€í†¤ íŒ¨í„´ ê¸°ë°˜ Logger í´ë˜ìŠ¤
  - ë¡œê·¸ ë ˆë²¨: DEBUG, INFO, WARNING, ERROR, CRITICAL
  - íŒŒì¼ ë¡œê¹…: RotatingFileHandler (10MB x 5ê°œ íŒŒì¼)
  - ì½˜ì†” ë¡œê¹…: ìƒ‰ìƒ êµ¬ë¶„ ì¶œë ¥
  - íƒ€ì„ìŠ¤íƒ¬í”„ ìë™ ì¶”ê°€

- **ìë™í™” í…ŒìŠ¤íŠ¸**
  - `tests/test_ui_translations.py`: UI ì»´í¬ë„ŒíŠ¸ ë²ˆì—­ ìë™ ê²€ì¦
  - 8ê°œ ìœ„ì ¯/íŒ¨ë„ ì–¸ì–´ ì „í™˜ í…ŒìŠ¤íŠ¸ (6ê°œ í†µê³¼)

- **ë„êµ¬**
  - `tools/manage_lang_keys.py` ê°œì„ : ìë™ ëª¨ë“ˆ íƒì§€ ê¸°ëŠ¥

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **ì–¸ì–´ í‚¤ í‘œì¤€í™”**
  - ëª¨ë“  ì–¸ì–´ í‚¤ë¥¼ `[context]_[type]_[name]` ê·œì¹™ìœ¼ë¡œ ë¦¬íŒ©í† ë§
  - `en.json`, `ko.json` ì—…ë°ì´íŠ¸ (192ê°œ í‚¤)
  - ëª¨ë“  UI ì»´í¬ë„ŒíŠ¸ì˜ `get_text()` í˜¸ì¶œ ìˆ˜ì •
  - ì£¼ì„ ì œê±° ë° JSON êµ¬ì¡° ì •ë¦¬

- **MainWindow êµ¬ì¡° ê°œì„ **
  - `MainMenuBar`ë¥¼ ë³„ë„ ìœ„ì ¯ìœ¼ë¡œ ë¶„ë¦¬ (`view/widgets/main_menu_bar.py`)
  - `MainStatusBar`ë¥¼ ë³„ë„ ìœ„ì ¯ìœ¼ë¡œ ë¶„ë¦¬ (`view/widgets/main_status_bar.py`)
  - ì½”ë“œ ì¬ì‚¬ìš©ì„± ë° ê°€ë…ì„± í–¥ìƒ

- **ë¡œê¹… ê°œì„ **
  - `ThemeManager`, `LanguageManager`ì˜ print ë¬¸ì„ logger í˜¸ì¶œë¡œ êµì²´
  - êµ¬ì¡°í™”ëœ ë¡œê·¸ ë©”ì‹œì§€ í˜•ì‹

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- **About Dialog**: `MainWindow`ì—ì„œ ì‹œê·¸ë„ ì—°ê²° ëˆ„ë½ ìˆ˜ì •
- **manage_lang_keys.py**: í•˜ë“œì½”ë”©ëœ ëª¨ë“ˆ ë¦¬ìŠ¤íŠ¸ ì œê±°, ìë™ íƒì§€ë¡œ ê°œì„ 

### View ê³„ì¸µ ë§ˆë¬´ë¦¬ ë° ë‹¤êµ­ì–´ ì§€ì› (2025-12-02)


#### ì¶”ê°€ ì‚¬í•­ (Added)

- **ë‹¤êµ­ì–´ ì§€ì› (Phase 1)**
  - LanguageManager í™•ì¥: 50+ UI ë¬¸ìì—´ ì¶”ê°€ (í•œêµ­ì–´/ì˜ì–´)
  - MainWindow ë©”ë‰´ ì‹œìŠ¤í…œ í•œê¸€í™” (íŒŒì¼, ë³´ê¸°, ë„ì›€ë§ ë©”ë‰´)
  - ìœˆë„ìš° ì œëª© ë° ìƒíƒœë°” í•œê¸€í™”
  - ì–¸ì–´ ë™ì  ë³€ê²½ í•¸ë“¤ëŸ¬ êµ¬í˜„ (on_language_changed)
  - PortSettingsWidget ë¶€ë¶„ í•œê¸€í™” (í¬íŠ¸, ìŠ¤ìº”, ë³´ë ˆì´íŠ¸ ë²„íŠ¼)
  - **ë¦¬íŒ©í† ë§**: ì–¸ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ ì½”ë“œì—ì„œ JSON íŒŒì¼ë¡œ ë¶„ë¦¬ (`config/languages/*.json`)

- **commentjson ì§€ì›**
  - ëª¨ë“  JSON íŒŒì¼ ì²˜ë¦¬ì— commentjson ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš©
  - JSON íŒŒì¼ì— ì£¼ì„ ì‚¬ìš© ê°€ëŠ¥ (ê°€ë…ì„± í–¥ìƒ)
  - ì„¤ì • íŒŒì¼ ë° ì–¸ì–´ íŒŒì¼ì— ì„¤ëª… ì£¼ì„ ì¶”ê°€ ê°€ëŠ¥

- **ì„¤ì • ê´€ë¦¬ ê°œì„ **
  - ì„¤ì • ì €ì¥ ìœ„ì¹˜ë¥¼ `config/settings.json`ìœ¼ë¡œ ë³€ê²½ (í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ config í´ë”ë¡œ)
  - SettingsManagerì— ì‹±ê¸€í†¤ íŒ¨í„´ ì ìš©í•˜ì—¬ ì„¤ì • ë™ê¸°í™” ë¬¸ì œ í•´ê²°

- **ìœ„ì ¯ ìƒíƒœ ì €ì¥/ë³µì› êµ¬í˜„**
  - ManualControlWidget: ì…ë ¥ í…ìŠ¤íŠ¸, HEX ëª¨ë“œ, RTS/DTR ìƒíƒœ ì €ì¥/ë³µì›
  - ReceivedArea: ê²€ìƒ‰ì–´, HEX ëª¨ë“œ, íƒ€ì„ìŠ¤íƒ¬í”„, ì¼ì‹œì •ì§€ ìƒíƒœ ì €ì¥/ë³µì›
  - CommandControl: ì´ˆê¸°í™” ë¬¸ì œ ìˆ˜ì • ë° ìƒíƒœ ì €ì¥/ë³µì› ì•ˆì •í™”
  - MacroListPanel: ì´ˆê¸°í™” ìˆœì„œ ë³€ê²½ìœ¼ë¡œ load_state ì˜¤ë¥˜ í•´ê²°

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- **ThemeManager**: `load_theme()` ë©”ì„œë“œì˜ `@staticmethod` ë°ì½”ë ˆì´í„° ì œê±° (NameError ë°©ì§€)
- **ColorRulesManager**: ì„¤ì • íŒŒì¼ ê²½ë¡œ ê³„ì‚° ì˜¤ë¥˜ ìˆ˜ì • (`parent.parent.parent` â†’ `parent.parent`)
- **MainWindow**:
  - Import êµ¬ë¬¸ì„ íŒŒì¼ ìƒë‹¨ìœ¼ë¡œ ì´ë™ (ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜)
  - `on_language_changed` ë° `_save_window_state` ë©”ì„œë“œ ë³µêµ¬
- **PortSettingsWidget**: í•„ìˆ˜ ë©”ì„œë“œ ë³µì› (`set_port_list`, `set_connected`)
- **CommandControl**: SyntaxError ìˆ˜ì • (ì¤‘ë³µ ì½”ë“œ ì œê±°)
- **MacroListPanel**: ì´ˆê¸°í™” ìˆœì„œ ë³€ê²½ìœ¼ë¡œ ìƒíƒœ ë³µì› ì‹œ ì˜¤ë¥˜ í•´ê²°
- **íƒ­ ê´€ë¦¬**:
  - í¬íŠ¸ íƒ­ ì¦ì‹ ë¬¸ì œ ìˆ˜ì • (ì¬ì‹œì‘ ì‹œ íƒ­ì´ ê³„ì† ì¶”ê°€ë˜ë˜ ë²„ê·¸)
  - LeftPanelì˜ íƒ­ ì¶”ê°€ ë¡œì§ ê°œì„ 
- **About Dialog**: êµ¬í˜„ ì™„ë£Œ ë° manage_lang_keys.py JSON ì£¼ì„ ì²˜ë¦¬ ê°œì„ 
- **manage_lang_keys.py**: JSON íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬ ì¶”ê°€

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **test_view.py**: PreferencesDialog, AboutDialog, FileProgressWidget, Language í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€
- **ë””ë²„ê·¸ ë¡œê¹…**:
  - ëª¨ë“  ì£¼ìš” ì»´í¬ë„ŒíŠ¸ì— ì €ì¥/ë³µêµ¬ ë””ë²„ê·¸ ë¡œê·¸ ì¶”ê°€ (ê°œë°œ ì¤‘)
  - ê²€ì¦ ì™„ë£Œ í›„ ë””ë²„ê·¸ ë¡œê·¸ ì œê±°


### ë“€ì–¼ í°íŠ¸ ì‹œìŠ¤í…œ (2025-12-01)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **í°íŠ¸ ì‹œìŠ¤í…œ ê°œì„ **
  - Proportional Font (ê°€ë³€í­): UI ìš”ì†Œ (ë©”ë‰´, ìƒíƒœë°”, ë ˆì´ë¸”, ë²„íŠ¼ ë“±)ì— ì ìš©
  - Fixed Font (ê³ ì •í­): TextEdit, CommandList ë“± ë°ì´í„° í‘œì‹œ ì˜ì—­ì— ì ìš©
  - í°íŠ¸ ì„¤ì • ëŒ€í™”ìƒì êµ¬í˜„

- **í…Œë§ˆ ì‹œìŠ¤í…œ**
  - ì¤‘ì•™ ì§‘ì¤‘ì‹ QSS ê¸°ë°˜ í…Œë§ˆ ê´€ë¦¬ êµ¬í˜„ (`view/theme_manager.py`)
  - ë‹¤í¬ í…Œë§ˆ (`resources/themes/dark_theme.qss`) ë° ë¼ì´íŠ¸ í…Œë§ˆ (`resources/themes/light_theme.qss`) ìƒì„±
  - View ë©”ë‰´ë¥¼ í†µí•œ ë™ì  í…Œë§ˆ ì „í™˜
  - í°íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• ë©”ë‰´ (ì‚¬ì „ ì •ì˜ í°íŠ¸ ë° ì»¤ìŠ¤í…€ í°íŠ¸ ëŒ€í™”ìƒì)

- **SVG ì•„ì´ì½˜ ì‹œìŠ¤í…œ**
  - ì•„ì´ì½˜ ë¦¬ì†ŒìŠ¤ ë””ë ‰í† ë¦¬ ìƒì„± (`resources/icons/`)
  - í…Œë§ˆ ì¸ì‹ SVG ì•„ì´ì½˜ êµ¬í˜„ (ë‹¤í¬ í…Œë§ˆìš© í°ìƒ‰, ë¼ì´íŠ¸ í…Œë§ˆìš© ê²€ì€ìƒ‰)
  - ì•„ì´ì½˜: Add, Delete, Up, Down, Close, ComboBox í™”ì‚´í‘œ
  - objectName ì„ íƒìë¥¼ í†µí•œ QSS ê¸°ë°˜ ì•„ì´ì½˜ ë¡œë”© ì ìš©

- **UI ì»´í¬ë„ŒíŠ¸**
  - `PortSettingsWidget`: ì»´íŒ©íŠ¸í•œ 2ì¤„ ë ˆì´ì•„ì›ƒ
    - 1í–‰: í¬íŠ¸ | ìŠ¤ìº” | ë³´ë ˆì´íŠ¸ | ì—´ê¸°
    - 2í–‰: ë°ì´í„° | íŒ¨ë¦¬í‹° | ì •ì§€ | íë¦„ | DTR | RTS
  - `MacroListWidget`:
    - Prefix/Suffix ì»¬ëŸ¼ ì¶”ê°€ (ì´ì „ Head/Tailì—ì„œ ë³€ê²½)
    - 3ë‹¨ê³„ Select All ì²´í¬ë°•ìŠ¤ (ì„ íƒ ì•ˆí•¨, ë¶€ë¶„ ì„ íƒ, ì „ì²´ ì„ íƒ)
    - ì„¸ë¡œ ìŠ¤í¬ë¡¤ë°” í•­ìƒ í‘œì‹œ
    - í–‰ë³„ Send ë²„íŠ¼
  - `MacroCtrlWidget`:
    - ì „ì—­ ëª…ë ¹ ìˆ˜ì •ì„ ìœ„í•œ Prefix/Suffix ì…ë ¥ í•„ë“œ ì¶”ê°€
    - ìŠ¤í¬ë¦½íŠ¸ ì €ì¥/ë¡œë“œ ë²„íŠ¼
    - ìë™ ì‹¤í–‰ ì„¤ì • (ì§€ì—°ì‹œê°„, ìµœëŒ€ ì‹¤í–‰ íšŸìˆ˜)

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¬ì •ë¦¬**
  - `view/resources/` â†’ `resources/` (ë£¨íŠ¸ë¡œ ì´ë™)
  - `view/styles/` â†’ `resources/themes/` (í…Œë§ˆ íŒŒì¼ í†µí•©)
  - `view/styles/theme_manager.py` â†’ `view/theme_manager.py`
  - ëª¨ë“  QSS íŒŒì¼ ë‚´ ì•„ì´ì½˜ ê²½ë¡œ ì—…ë°ì´íŠ¸ (`view/resources/` â†’ `resources/`)

- **ë ˆì´ì•„ì›ƒ ìµœì í™”**
  - `CommandControl`ì—ì„œ `CommandList` í—¤ë”ë¡œ Select All ì²´í¬ë°•ìŠ¤ ì´ë™
  - ì¼ê´€ì„±ì„ ìœ„í•œ ì»´í¬ë„ŒíŠ¸ í¬ê¸° ì¡°ì •
  - Port combo ë„ˆë¹„ë¥¼ Baud comboì™€ ë™ì¼í•˜ê²Œ ë§ì¶¤
  - ëª…í™•ì„±ì„ ìœ„í•´ UI ìš”ì†Œ ê°„ ê°„ê²© ì¶”ê°€

- **ëª…ëª… ê·œì¹™**
  - `CommandList` ë° `CommandControl` ì „ì²´ì—ì„œ "Head/Tail"ì„ "Prefix/Suffix"ë¡œ ë³€ê²½
  - ê´€ë ¨ëœ ëª¨ë“  ë ˆì´ë¸”, íˆ´íŒ ë° ë³€ìˆ˜ëª… ì—…ë°ì´íŠ¸

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- ë‘ í…Œë§ˆ ëª¨ë‘ì—ì„œ ComboBox ë“œë¡­ë‹¤ìš´ í™”ì‚´í‘œê°€ ì´ì œ í‘œì‹œë¨
- íƒ­ ë‹«ê¸° ë²„íŠ¼ ì•„ì´ì½˜ì´ ì˜¬ë°”ë¥´ê²Œ í…Œë§ˆ ì ìš©ë¨
- Select All ì²´í¬ë°•ìŠ¤ê°€ ì´ì œ ê°œë³„ í–‰ ì²´í¬ë°•ìŠ¤ ë³€ê²½ì— ë°˜ì‘í•¨
- Import ì˜¤ë¥˜ ìˆ˜ì • (QCheckBox, QSizePolicy)

### View ê³„ì¸µ ê°œì„  ë° ì„¤ì • ê´€ë¦¬ (2025-12-01)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- **View ê¸°ëŠ¥ ê°•í™”**
  - **ìƒ‰ìƒ ê·œì¹™ (Color Rules)**: `ReceivedArea`ì— íŠ¹ì • íŒ¨í„´(OK, ERROR ë“±) ê°•ì¡° ê¸°ëŠ¥ ì¶”ê°€ (`config/color_rules.json`)
  - **ë¡œê·¸ ìµœì í™” (Log Trim)**: 2000ì¤„ ì´ˆê³¼ ì‹œ ìë™ ì‚­ì œ ê¸°ëŠ¥ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬
  - **íƒ€ì„ìŠ¤íƒ¬í”„**: ìˆ˜ì‹  ë°ì´í„°ì— íƒ€ì„ìŠ¤íƒ¬í”„(`[HH:MM:SS]`) í‘œì‹œ ì˜µì…˜ ì¶”ê°€
  - **íŒŒì¼ ì „ì†¡ UI**: ManualControlWidgetì— íŒŒì¼ ì„ íƒ ë° ì „ì†¡ UI ì¶”ê°€

- **ì„¤ì • ê´€ë¦¬ ì‹œìŠ¤í…œ**
  - `SettingsManager` êµ¬í˜„: `config/settings.json` ë° ì‚¬ìš©ì ì„¤ì • ê´€ë¦¬
  - ìƒíƒœ ì €ì¥: ì°½ í¬ê¸°, ìœ„ì¹˜, í…Œë§ˆ ì„¤ì •ì„ ì¢…ë£Œ ì‹œ ìë™ ì €ì¥ ë° ì‹œì‘ ì‹œ ë³µì›

- **í…ŒìŠ¤íŠ¸ ë„êµ¬**
  - ë…ë¦½ í…ŒìŠ¤íŠ¸ ì•± (`tests/test_view.py`): View ì»´í¬ë„ŒíŠ¸(ìœ„ì ¯)ë¥¼ ë©”ì¸ ë¡œì§ ì—†ì´ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

#### ìˆ˜ì • ì‚¬í•­ (Fixed)

- `ManualControlWidget`: `file_selected` ì‹œê·¸ë„ ëˆ„ë½ ìˆ˜ì •
- `LeftPanel`: íƒ­ ì¶”ê°€ ë¡œì§(`add_plus_tab`) ì˜¤ë¥˜ ìˆ˜ì •
- `PortPresenter`: íŒŒì¼ ì†ìƒ ë³µêµ¬ ë° ì•ˆì •í™”
- `MainPresenter`: ë¬¸ë²• ì˜¤ë¥˜ ìˆ˜ì •

### UI/UX ê°œì„  ë° í…Œë§ˆ ë¦¬íŒ©í† ë§ (2025-12-01)

#### ë³€ê²½ ì‚¬í•­ (Changed)

- **ManualControlWidget ê°œì„ **:
  - ë ˆì´ì•„ì›ƒì„ ì»´íŒ©íŠ¸í•˜ê²Œ ì¡°ì • (ë¶ˆí•„ìš”í•œ ì—¬ë°± ì œê±°)
  - ì…ë ¥ì°½ì„ `QTextEdit`ì—ì„œ `QLineEdit`ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ë†’ì´ ì¶•ì†Œ
  - Send ë²„íŠ¼ ë†’ì´ ì¡°ì • ë° ìŠ¤íƒ€ì¼ ì ìš©
  - Flow Control (RTS/DTR) ì²´í¬ë°•ìŠ¤ ì¶”ê°€
- **MacroCtrlWidget ê°œì„ **:
  - ë ˆì´ì•„ì›ƒ ì •ë¦¬ ë° ë²„íŠ¼ ë°°ì¹˜ ìµœì í™”
  - Start Auto Run (ë…¹ìƒ‰), Stop (ë¶‰ì€ìƒ‰) ë²„íŠ¼ì— ê°•ì¡° ìŠ¤íƒ€ì¼ ì ìš©
- **MainWindow ê°œì„ **:
  - ì¢Œìš° íŒ¨ë„ ìŠ¤í”Œë¦¬í„° ë¹„ìœ¨ì„ 2:1ì—ì„œ 1:1ë¡œ ì¡°ì •í•˜ì—¬ ê· í˜• ê°œì„ 
- **í…Œë§ˆ ì‹œìŠ¤í…œ ë¦¬íŒ©í† ë§**:
  - `common.qss` ë„ì…ìœ¼ë¡œ ê³µí†µ ìŠ¤íƒ€ì¼ í†µí•© ê´€ë¦¬
  - `ThemeManager`ê°€ ê³µí†µ ìŠ¤íƒ€ì¼ê³¼ ê°œë³„ í…Œë§ˆë¥¼ ë³‘í•©í•˜ì—¬ ë¡œë“œí•˜ë„ë¡ ê°œì„ 
  - ë¼ì´íŠ¸ í…Œë§ˆì—ì„œ ë¹„í™œì„±í™”ëœ ë²„íŠ¼ì˜ ì‹œì¸ì„± ê°œì„  (í‹´íŠ¸ ìƒ‰ìƒ ì ìš©)

### í”„ë¡œì íŠ¸ êµ¬ì¡° (2025-11-30)

#### ì¶”ê°€ ì‚¬í•­ (Added)

- Layered MVP ì•„í‚¤í…ì²˜ í™•ë¦½
- ëª¨ë“ˆì‹ í´ë” êµ¬ì¡° ìƒì„±:
  - `view/panels/`: LeftPanel, RightPanel, PortPanel, MacroListPanel
  - `view/widgets/`: PortSettings, CommandList, CommandControl, ManualControl
  - `resources/themes/`: í…Œë§ˆ ê´€ë¦¬ì ë° QSS íŒŒì¼
  - `resources/icons/`: SVG ì•„ì´ì½˜
  - `doc/`: ë¬¸ì„œ ë° ê³„íš íŒŒì¼

#### ë³€ê²½ ì‚¬í•­ (Changed)

- í”„ë¡œì íŠ¸ ì´ë¦„ì„ "SerialManager"ì—ì„œ "SerialTool"ë¡œ ë³€ê²½
- UIë¥¼ LeftPanel(í¬íŠ¸ + ìˆ˜ë™ ì œì–´) ë° RightPanel(ì»¤ë§¨ë“œ ë¦¬ìŠ¤íŠ¸ + íŒ¨í‚· ì¸ìŠ¤í™í„°)ì„ ì‚¬ìš©í•˜ë„ë¡ ë¦¬íŒ©í† ë§
- ë¯¸ì‚¬ìš© íŒŒì¼ ì œê±° (rx_log_view.py, status_bar.py ë“±)

## ë²„ì „ ì´ë ¥ (Version History)

### [1.0.0] - ê°œë°œ ì¤‘

#### ì™„ë£Œ (Completed)

- âœ… í”„ë¡œì íŠ¸ ì„¤ì • ë° êµ¬ì¡°
- âœ… UI ê³¨ê²© êµ¬í˜„
- âœ… í…Œë§ˆ ë° ìŠ¤íƒ€ì¼ë§ ì‹œìŠ¤í…œ
- âœ… UI ë ˆì´ì•„ì›ƒ ìµœì í™”
- âœ… SVG ì•„ì´ì½˜ ì‹œìŠ¤í…œ
- âœ… ìœ„ì ¯ ê°œì„  ë° ë‹¤ë“¬ê¸°
- âœ… ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¬ì •ë¦¬
- âœ… View ê³„ì¸µ ë§ˆë¬´ë¦¬ (ë‹¤ì´ì–¼ë¡œê·¸, ë‹¤êµ­ì–´ ì§€ì›)
- âœ… Command List ì˜ì†ì„± êµ¬í˜„

#### ì§„í–‰ ì¤‘ (In Progress)

- ğŸ”„ Core ìœ í‹¸ë¦¬í‹° (RingBuffer, ThreadSafeQueue)
- ğŸ”„ Model ê³„ì¸µ (SerialWorker, PortController)
- ğŸ”„ Presenter í†µí•©

#### ê³„íš (Planned)

- â³ Command List ìë™í™” ì—”ì§„
- â³ íŒŒì¼ ì „ì†¡ ê¸°ëŠ¥
- â³ í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ
- â³ í…ŒìŠ¤íŠ¸ ë° ë°°í¬

---

**ë²”ë¡€:**

- âœ… ì™„ë£Œ
- ğŸ”„ ì§„í–‰ ì¤‘
- â³ ê³„íšë¨
- ğŸ› ë²„ê·¸ ìˆ˜ì •
- âš¡ ì„±ëŠ¥ ê°œì„ 
- ğŸ¨ UI/UX í–¥ìƒ
</file>

<file path="view/main_window.py">
from PyQt5.QtWidgets import (
    QMainWindow, QWidget, QVBoxLayout, QSplitter, QApplication
)
from PyQt5.QtCore import Qt, pyqtSignal, QByteArray

from view.sections.main_left_section import MainLeftSection
from view.sections.main_right_section import MainRightSection
from view.theme_manager import ThemeManager
from view.lang_manager import lang_manager
from view.dialogs.font_settings_dialog import FontSettingsDialog
from view.dialogs.about_dialog import AboutDialog
from view.dialogs.preferences_dialog import PreferencesDialog
from core.settings_manager import SettingsManager
from view.sections.main_menu_bar import MainMenuBar
from view.sections.main_status_bar import MainStatusBar
from view.widgets.main_toolbar import MainToolBar
from view.panels.port_panel import PortPanel

class MainWindow(QMainWindow):
    """
    ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ìœˆë„ìš° í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
    MainLeftSection(í¬íŠ¸/ì œì–´)ê³¼ MainRightSection(ì»¤ë§¨ë“œ/ì¸ìŠ¤í™í„°)ì„ í¬í•¨í•˜ë©°,
    ë©”ë‰´ë°”, ìƒíƒœë°” ë° ì „ì—­ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
    """

    setting_save_requested = pyqtSignal(dict)

    def __init__(self) -> None:
        """MainWindowë¥¼ ì´ˆê¸°í™”í•˜ê³  UI ë° ì„¤ì •ì„ ë¡œë“œí•©ë‹ˆë‹¤."""
        super().__init__()

        # ì„¤ì • ê´€ë¦¬ì ì´ˆê¸°í™”
        self.settings = SettingsManager()

        # í…Œë§ˆ ê´€ë¦¬ì ì´ˆê¸°í™” (ì¸ìŠ¤í„´ìŠ¤ ê¸°ë°˜)
        self.theme_manager = ThemeManager()

        # ì–¸ì–´ ê´€ë¦¬ì ì´ˆê¸°í™” ë° ì„¤ì •ì—ì„œ ì–¸ì–´ ë¡œë“œ
        lang = self.settings.get('settings.language', 'en')
        lang_manager.set_language(lang)
        lang_manager.language_changed.connect(self.on_language_changed)

        self.setWindowTitle(f"{lang_manager.get_text('main_title')} v1.0")
        self.resize(1400, 900)

        # ìš°ì¸¡ íŒ¨ë„ ìˆ¨ê¹€ ì „ ì™¼ìª½ íŒ¨ë„ ë„ˆë¹„ ì €ì¥ìš©
        self._saved_left_width = None

        self.init_ui()

        # ë©”ë‰´ë°” ì´ˆê¸°í™” (ìœ„ì ¯ ì‚¬ìš©)
        self.menu_bar = MainMenuBar(self)
        self.setMenuBar(self.menu_bar)
        self._connect_menu_signals()

        # ì„¤ì •ì—ì„œ í…Œë§ˆ ì ìš©
        theme = self.settings.get('settings.theme', 'dark')
        self.switch_theme(theme)

        # ì„¤ì •ì—ì„œ í°íŠ¸ ë³µì›
        settings_dict = self.settings.get_all_settings()
        self.theme_manager.restore_fonts_from_settings(settings_dict)

        # ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê°€ë³€í­ í°íŠ¸ ì ìš©
        prop_font = self.theme_manager.get_proportional_font()
        QApplication.instance().setFont(prop_font)

        # ì €ì¥ëœ ìœˆë„ìš° ìƒíƒœ(í¬ê¸°, ìœ„ì¹˜) ë¡œë“œ
        self._load_window_state()

        # í¬íŠ¸ íƒ­ ìƒíƒœ ë³µì›
        port_states = self.settings.get('ports.tabs', [])
        if hasattr(self, 'left_section'):
            self.left_section.load_state(port_states)

    def init_ui(self) -> None:
        """UI ì»´í¬ë„ŒíŠ¸ ë° ë ˆì´ì•„ì›ƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤."""
        central_widget = QWidget()
        self.setCentralWidget(central_widget)

        main_layout = QVBoxLayout(central_widget)
        main_layout.setContentsMargins(5, 5, 5, 5)
        main_layout.setSpacing(5)

        # íˆ´ë°” ì„¤ì •
        self.main_toolbar = MainToolBar(self)
        self.addToolBar(Qt.TopToolBarArea, self.main_toolbar)

        # ìŠ¤í”Œë¦¬í„° êµ¬ì„± (ì¢Œ: í¬íŠ¸/ì œì–´, ìš°: ì»¤ë§¨ë“œ/ì¸ìŠ¤í™í„°)
        self.splitter = QSplitter(Qt.Horizontal)

        self.left_section = MainLeftSection()
        self.right_section = MainRightSection()

        self.splitter.addWidget(self.left_section)
        self.splitter.addWidget(self.right_section)

        # íˆ´ë°” ì‹œê·¸ë„ ì—°ê²° (left_section ì´ˆê¸°í™” í›„)
        self._connect_toolbar_signals()

        # ìŠ¤í”Œë¦¬í„° ìƒíƒœ ë³µì›
        splitter_state = self.settings.get('ui.splitter_state')
        if splitter_state:
            self.splitter.restoreState(QByteArray.fromBase64(splitter_state.encode()))
        else:
            self.splitter.setStretchFactor(0, 1) # ì¢Œì¸¡ íŒ¨ë„ ë¹„ìœ¨
            self.splitter.setStretchFactor(1, 1) # ìš°ì¸¡ íŒ¨ë„ ë¹„ìœ¨

        # ìš°ì¸¡ íŒ¨ë„ ê°€ì‹œì„± ë³µì›
        right_panel_visible = self.settings.get('settings.right_panel_visible', True)
        self.right_section.setVisible(right_panel_visible)

        main_layout.addWidget(self.splitter)

        # ì „ì—­ ìƒíƒœë°” ì„¤ì • (ìœ„ì ¯ ì‚¬ìš©)
        self.global_status_bar = MainStatusBar()
        self.setStatusBar(self.global_status_bar)

    def _connect_menu_signals(self) -> None:
        """ë©”ë‰´ë°” ì‹œê·¸ë„ì„ ìŠ¬ë¡¯ì— ì—°ê²°í•©ë‹ˆë‹¤."""
        self.menu_bar.new_tab_requested.connect(self.left_section.add_new_port_tab)
        self.menu_bar.exit_requested.connect(self.close)
        self.menu_bar.theme_changed.connect(self.switch_theme)
        self.menu_bar.font_settings_requested.connect(self.open_font_settings_dialog)
        self.menu_bar.language_changed.connect(lambda lang: lang_manager.set_language(lang))
        self.menu_bar.preferences_requested.connect(self.open_preferences_dialog)
        self.menu_bar.about_requested.connect(self.open_about_dialog)

        # New signals
        self.menu_bar.open_port_requested.connect(self.left_section.open_current_port)
        self.menu_bar.close_tab_requested.connect(self.left_section.close_current_tab)
        self.menu_bar.save_log_requested.connect(self.save_log)
        self.menu_bar.toggle_right_panel_requested.connect(self.toggle_right_panel)

    def save_log(self) -> None:
        """ë¡œê·¸ ì €ì¥ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤."""
        if hasattr(self, 'left_section'):
            self.left_section.manual_control.manual_control_widget.on_save_manual_log_clicked()

    def _connect_toolbar_signals(self) -> None:
        """íˆ´ë°” ì‹œê·¸ë„ì„ ìŠ¬ë¡¯ì— ì—°ê²°í•©ë‹ˆë‹¤."""
        self.main_toolbar.open_requested.connect(self.left_section.open_current_port)
        self.main_toolbar.close_requested.connect(self.left_section.close_current_port)
        self.main_toolbar.clear_requested.connect(self.clear_log)
        self.main_toolbar.save_log_requested.connect(self.save_log)
        self.main_toolbar.settings_requested.connect(self.open_preferences_dialog)

    def clear_log(self) -> None:
        """í˜„ì¬ í™œì„±í™”ëœ íƒ­ì˜ ë¡œê·¸ë¥¼ ì§€ì›ë‹ˆë‹¤."""
        if hasattr(self, 'left_section'):
             current_index = self.left_section.port_tabs.currentIndex()
             current_widget = self.left_section.port_tabs.widget(current_index)
             if isinstance(current_widget, PortPanel):
                 current_widget.received_area.on_clear_recv_log_clicked()

    def switch_theme(self, theme_name: str) -> None:
        """
        ì• í”Œë¦¬ì¼€ì´ì…˜ í…Œë§ˆë¥¼ ì „í™˜í•©ë‹ˆë‹¤.

        Args:
            theme_name (str): ì „í™˜í•  í…Œë§ˆ ì´ë¦„ ("dark" ë˜ëŠ” "light").
        """
        self.theme_manager.apply_theme(QApplication.instance(), theme_name)

        # í…Œë§ˆ ì„¤ì •ì„ ì €ì¥
        if hasattr(self, 'settings'):
            self.settings.set('settings.theme', theme_name)

        # ë©”ë‰´ë°”ì˜ í…Œë§ˆ ì²´í¬ í‘œì‹œ ì—…ë°ì´íŠ¸
        if hasattr(self, 'menu_bar'):
            self.menu_bar.set_current_theme(theme_name)

        if theme_name == "dark":
            self.global_status_bar.show_message("Theme changed to Dark", 2000)
        else:
            self.global_status_bar.show_message("Theme changed to Light", 2000)

    def open_font_settings_dialog(self) -> None:
        """ë“€ì–¼ í°íŠ¸ ì„¤ì • ëŒ€í™”ìƒìë¥¼ ì—½ë‹ˆë‹¤."""
        dialog = FontSettingsDialog(self.theme_manager, self)
        if dialog.exec_():
            # í°íŠ¸ ì„¤ì • ì €ì¥
            font_settings = self.theme_manager.get_font_settings()
            for key, value in font_settings.items():
                self.settings.set(f'settings.{key}', value)

            # ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê°€ë³€í­ í°íŠ¸ ì ìš©
            prop_font = self.theme_manager.get_proportional_font()
            QApplication.instance().setFont(prop_font)

            self.global_status_bar.show_message("Font settings updated", 2000)

    def open_preferences_dialog(self) -> None:
        """Preferences ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ ì—½ë‹ˆë‹¤."""
        current_settings = self.settings.get_all_settings()
        dialog = PreferencesDialog(self, current_settings)
        dialog.settings_changed.connect(self.on_settings_change_requested)
        dialog.exec_()


    def open_about_dialog(self) -> None:
        """About ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ ì—½ë‹ˆë‹¤."""
        dialog = AboutDialog(self)
        dialog.exec_()

    def on_settings_change_requested(self, settings: dict) -> None:
        """Preferences ì„¤ì • ì €ì¥ì„ ìš”ì²­í•©ë‹ˆë‹¤."""
        self.setting_save_requested.emit(settings)

    def _load_window_state(self) -> None:
        """
        ì €ì¥ëœ ìœˆë„ìš° ìƒíƒœ(í¬ê¸°, ìœ„ì¹˜)ë¥¼ ë¡œë“œí•˜ì—¬ ì ìš©í•©ë‹ˆë‹¤.
        """
        # ìœˆë„ìš° í¬ê¸° ë¡œë“œ
        width = self.settings.get('ui.window_width', 1400)
        height = self.settings.get('ui.window_height', 900)
        self.resize(width, height)

        # ìœˆë„ìš° ìœ„ì¹˜ ë¡œë“œ (ì˜µì…˜)
        x = self.settings.get('ui.window_x')
        y = self.settings.get('ui.window_y')
        if x is not None and y is not None:
            self.move(x, y)

    def _save_window_state(self) -> None:
        """
        í˜„ì¬ ìœˆë„ìš° ìƒíƒœ(í¬ê¸°, ìœ„ì¹˜)ë¥¼ ì„¤ì •ì— ì €ì¥í•©ë‹ˆë‹¤.
        """
        self.settings.set('ui.window_width', self.width())
        self.settings.set('ui.window_height', self.height())
        self.settings.set('ui.window_x', self.x())
        self.settings.set('ui.window_y', self.y())

    def on_language_changed(self, lang_code: str) -> None:
        """
        ì–¸ì–´ ë³€ê²½ ì‹œ í˜¸ì¶œë˜ëŠ” ìŠ¬ë¡¯ì…ë‹ˆë‹¤.
        ìœˆë„ìš° ì œëª©ê³¼ ë©”ë‰´ í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

        Args:
            lang_code (str): ë³€ê²½ëœ ì–¸ì–´ ì½”ë“œ (ì˜ˆ: 'en', 'ko').
        """
        self.setWindowTitle(f"{lang_manager.get_text('main_title')} v1.0")

        # ìƒíƒœë°” ì—…ë°ì´íŠ¸
        self.global_status_bar.retranslate_ui()

        # ë©”ë‰´ ì¬ìƒì„±
        self.menu_bar.retranslate_ui()

        # ì„¤ì •ì— ì–¸ì–´ ì €ì¥
        self.settings.set('settings.language', lang_code)

    def toggle_right_panel(self, visible: bool) -> None:
        """ìš°ì¸¡ íŒ¨ë„ì˜ ê°€ì‹œì„±ì„ í† ê¸€í•˜ê³  ìœˆë„ìš° í¬ê¸°ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤."""
        if visible == self.right_section.isVisible():
            return

        current_width = self.width()
        handle_width = self.splitter.handleWidth()

        if visible:
            # ë³´ì´ê¸°: ìœˆë„ìš° í­ ì¦ê°€
            target_right_width = 400 # ê¸°ë³¸ê°’

            # ì €ì¥ëœ ì™¼ìª½ íŒ¨ë„ ë„ˆë¹„ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ë„ˆë¹„ ì‚¬ìš©
            if self._saved_left_width is not None:
                left_width = self._saved_left_width
            else:
                left_width = self.left_section.width()

            self.resize(current_width + target_right_width + handle_width, self.height())
            self.right_section.setVisible(True)

            # ìŠ¤í”Œë¦¬í„° í¬ê¸° ì„¤ì •: ì™¼ìª½ íŒ¨ë„ í¬ê¸° ìœ ì§€, ì˜¤ë¥¸ìª½ íŒ¨ë„ í¬ê¸° ì„¤ì •
            self.splitter.setSizes([left_width, target_right_width])

            # ë³µì› í›„ ì €ì¥ëœ ê°’ ì´ˆê¸°í™”
            self._saved_left_width = None

        else:
            # ìˆ¨ê¸°ê¸°: ìœˆë„ìš° í­ ê°ì†Œ
            # í˜„ì¬ ì™¼ìª½ íŒ¨ë„ ë„ˆë¹„ë¥¼ ì €ì¥
            self._saved_left_width = self.left_section.width()

            right_width = self.right_section.width()
            self.right_section.setVisible(False)
            self.resize(current_width - right_width - handle_width, self.height())

    def closeEvent(self, event) -> None:
        """
        ìœˆë„ìš° ì¢…ë£Œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        ìœˆë„ìš° ìƒíƒœì™€ ì„¤ì •ì„ ì €ì¥í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.

        Args:
            event (QCloseEvent): ì¢…ë£Œ ì´ë²¤íŠ¸ ê°ì²´.
        """
        # ìœˆë„ìš° ìƒíƒœ ì €ì¥
        self._save_window_state()

        # ìŠ¤í”Œë¦¬í„° ìƒíƒœ ì €ì¥
        self.settings.set('ui.splitter_state', self.splitter.saveState().toBase64().data().decode())

        # ìš°ì¸¡ íŒ¨ë„ ê°€ì‹œì„± ì €ì¥
        self.settings.set('settings.right_panel_visible', self.right_section.isVisible())

        # íŒ¨ë„ ìƒíƒœ ì €ì¥
        if hasattr(self, 'right_section'):
            self.right_section.save_state()

        if hasattr(self, 'left_section'):
            port_states = self.left_section.save_state()
            self.settings.set('ports.tabs', port_states)

        # ì„¤ì • íŒŒì¼ ì €ì¥
        self.settings.save_settings()

        # ì¢…ë£Œ ì´ë²¤íŠ¸ ìˆ˜ë½
        event.accept()
</file>

</files>
